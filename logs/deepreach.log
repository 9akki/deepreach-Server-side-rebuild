2025-11-06 11:38:08 [main] INFO  c.deepreach.web.DeepReachApplication - Starting DeepReachApplication using Java 17.0.12 with PID 88659 (/Users/gak1/Documents/GitHub/deepreach-Server-side-rebuild/deepreach-web/target/classes started by gak1 in /Users/gak1/Documents/GitHub/deepreach-Server-side-rebuild)
2025-11-06 11:38:08 [main] DEBUG c.deepreach.web.DeepReachApplication - Running with Spring Boot v3.2.0, Spring v6.1.1
2025-11-06 11:38:08 [main] INFO  c.deepreach.web.DeepReachApplication - The following 1 profile is active: "dev"
2025-11-06 11:38:08 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-06 11:38:08 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-06 11:38:08 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 8 ms. Found 0 Redis repository interfaces.
2025-11-06 11:38:09 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-06 11:38:09 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-06 11:38:09 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.16]
2025-11-06 11:38:09 [main] INFO  o.a.c.c.C.[.[localhost].[/api] - Initializing Spring embedded WebApplicationContext
2025-11-06 11:38:09 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 937 ms
2025-11-06 11:38:09 [main] DEBUG c.d.c.s.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-06 11:38:09 [main] ERROR i.n.r.d.DnsServerAddressStreamProviders - Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
2025-11-06 11:38:09 [main] INFO  c.d.w.s.impl.FileStorageServiceImpl - 文件上传目录: /Users/gak1/Documents/GitHub/deepreach-Server-side-rebuild/uploads
2025-11-06 11:38:10 [main] INFO  c.deepreach.web.config.WebMvcConfig - 静态资源映射配置：/uploads/** -> file:/Users/gak1/Documents/GitHub/deepreach-Server-side-rebuild/uploads
2025-11-06 11:38:10 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@48126a17, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1a7437d8, org.springframework.security.web.context.SecurityContextHolderFilter@7efba9b9, org.springframework.security.web.header.HeaderWriterFilter@42fd8f2f, org.springframework.web.filter.CorsFilter@6f695077, org.springframework.security.web.authentication.logout.LogoutFilter@7dfab58d, com.deepreach.common.security.JwtAuthenticationFilter@460eb276, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@34c6b52e, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@6f7c4e0, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5b31a9e3, org.springframework.security.web.session.SessionManagementFilter@2352c21f, org.springframework.security.web.access.ExceptionTranslationFilter@5adc71e7, org.springframework.security.web.access.intercept.AuthorizationFilter@7d4b32d1]
2025-11-06 11:38:10 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/api'
2025-11-06 11:38:10 [main] INFO  c.deepreach.web.DeepReachApplication - Started DeepReachApplication in 2.559 seconds (process running for 2.913)
2025-11-06 11:38:10 [main] INFO  c.d.web.config.DataSourceHealthCheck - 开始检查数据源配置...
2025-11-06 11:38:23 [main] INFO  c.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2025-11-06 11:38:23 [main] INFO  c.d.web.config.DataSourceHealthCheck - 主数据源连接成功: PRIMARY_OK
2025-11-06 11:38:25 [main] INFO  c.d.web.config.DataSourceHealthCheck - 云电脑数据源连接成功: CLOUD_COMPUTER_OK
2025-11-06 11:38:27 [main] INFO  c.d.web.config.DataSourceHealthCheck - 云电脑数据库中admin用户记录数: 1
2025-11-06 11:38:27 [main] INFO  c.d.web.config.DataSourceHealthCheck - 数据源检查完成
2025-11-06 11:38:27 [main] INFO  c.d.w.i.UserHierarchyCacheInitializer - 开始构建用户层级树缓存...
2025-11-06 11:38:27 [main] DEBUG c.d.c.c.m.S.selectAllUserHierarchyRelations - ==>  Preparing: SELECT u.user_id AS userId, u.parent_user_id AS parentUserId FROM sys_user u WHERE u.status = '0'
2025-11-06 11:38:27 [main] DEBUG c.d.c.c.m.S.selectAllUserHierarchyRelations - ==> Parameters: 
2025-11-06 11:38:27 [main] DEBUG c.d.c.c.m.S.selectAllUserHierarchyRelations - <==      Total: 49
2025-11-06 11:38:27 [main] INFO  c.d.c.c.s.impl.SysUserServiceImpl - 用户层级树缓存刷新成功：记录总数=49, 根节点数量=1
2025-11-06 11:38:27 [main] INFO  c.d.w.i.UserHierarchyCacheInitializer - 用户层级树缓存构建完成
2025-11-06 13:07:05 [SpringApplicationShutdownHook] INFO  c.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2025-11-06 13:07:05 [SpringApplicationShutdownHook] INFO  c.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
2025-11-06 13:07:08 [main] INFO  c.deepreach.web.DeepReachApplication - Starting DeepReachApplication using Java 17.0.12 with PID 89821 (/Users/gak1/Documents/GitHub/deepreach-Server-side-rebuild/deepreach-web/target/classes started by gak1 in /Users/gak1/Documents/GitHub/deepreach-Server-side-rebuild)
2025-11-06 13:07:08 [main] DEBUG c.deepreach.web.DeepReachApplication - Running with Spring Boot v3.2.0, Spring v6.1.1
2025-11-06 13:07:08 [main] INFO  c.deepreach.web.DeepReachApplication - The following 1 profile is active: "dev"
2025-11-06 13:07:08 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-06 13:07:08 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-06 13:07:08 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Redis repository interfaces.
2025-11-06 13:07:09 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-06 13:07:09 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-06 13:07:09 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.16]
2025-11-06 13:07:09 [main] INFO  o.a.c.c.C.[.[localhost].[/api] - Initializing Spring embedded WebApplicationContext
2025-11-06 13:07:09 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 897 ms
2025-11-06 13:07:09 [main] DEBUG c.d.c.s.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-06 13:07:09 [main] ERROR i.n.r.d.DnsServerAddressStreamProviders - Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
2025-11-06 13:07:09 [main] INFO  c.d.w.s.impl.FileStorageServiceImpl - 文件上传目录: /Users/gak1/Documents/GitHub/deepreach-Server-side-rebuild/uploads
2025-11-06 13:07:09 [main] INFO  c.deepreach.web.config.WebMvcConfig - 静态资源映射配置：/uploads/** -> file:/Users/gak1/Documents/GitHub/deepreach-Server-side-rebuild/uploads
2025-11-06 13:07:10 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@2d114d27, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@28fef9a2, org.springframework.security.web.context.SecurityContextHolderFilter@4700963e, org.springframework.security.web.header.HeaderWriterFilter@870a9f2, org.springframework.web.filter.CorsFilter@7dfab58d, org.springframework.security.web.authentication.logout.LogoutFilter@5e83298e, com.deepreach.common.security.JwtAuthenticationFilter@58ebee9, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3b17759c, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@11cdf948, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@29d29657, org.springframework.security.web.session.SessionManagementFilter@7fc5a558, org.springframework.security.web.access.ExceptionTranslationFilter@3f6a9ba0, org.springframework.security.web.access.intercept.AuthorizationFilter@7dbd70fd]
2025-11-06 13:07:10 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/api'
2025-11-06 13:07:10 [main] INFO  c.deepreach.web.DeepReachApplication - Started DeepReachApplication in 2.619 seconds (process running for 3.159)
2025-11-06 13:07:10 [main] INFO  c.d.web.config.DataSourceHealthCheck - 开始检查数据源配置...
2025-11-06 13:07:19 [main] INFO  c.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2025-11-06 13:07:19 [main] INFO  c.d.web.config.DataSourceHealthCheck - 主数据源连接成功: PRIMARY_OK
2025-11-06 13:07:20 [main] INFO  c.d.web.config.DataSourceHealthCheck - 云电脑数据源连接成功: CLOUD_COMPUTER_OK
2025-11-06 13:07:23 [main] INFO  c.d.web.config.DataSourceHealthCheck - 云电脑数据库中admin用户记录数: 1
2025-11-06 13:07:23 [main] INFO  c.d.web.config.DataSourceHealthCheck - 数据源检查完成
2025-11-06 13:07:23 [main] INFO  c.d.w.i.UserHierarchyCacheInitializer - 开始构建用户层级树缓存...
2025-11-06 13:07:23 [main] DEBUG c.d.c.c.m.S.selectAllUserHierarchyRelations - ==>  Preparing: SELECT u.user_id AS userId, u.parent_user_id AS parentUserId FROM sys_user u WHERE u.status = '0'
2025-11-06 13:07:23 [main] DEBUG c.d.c.c.m.S.selectAllUserHierarchyRelations - ==> Parameters: 
2025-11-06 13:07:23 [main] DEBUG c.d.c.c.m.S.selectAllUserHierarchyRelations - <==      Total: 49
2025-11-06 13:07:23 [main] INFO  c.d.c.c.s.impl.SysUserServiceImpl - 用户层级树缓存刷新成功：记录总数=49, 根节点数量=1
2025-11-06 13:07:23 [main] INFO  c.d.w.i.UserHierarchyCacheInitializer - 用户层级树缓存构建完成
2025-11-06 13:08:06 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[.[localhost].[/api] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-06 13:08:06 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-06 13:08:06 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 10 ms
2025-11-06 13:08:06 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /system/user/list
2025-11-06 13:08:06 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /system/user/list
2025-11-06 13:08:06 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 13:08:06 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 13:08:06 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 13:08:06 [http-nio-8080-exec-2] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 13:08:06 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 13:08:06 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 13:08:06 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 13:08:06 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:06 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 13:08:08 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 13:08:08 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 13:08:08 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 13:08:08 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 13:08:08 [http-nio-8080-exec-2] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 13:08:08 [http-nio-8080-exec-2] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 13:08:08 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 13:08:08 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 13:08:08 [http-nio-8080-exec-2] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 13:08:08 [http-nio-8080-exec-2] WARN  o.s.w.s.h.HandlerMappingIntrospector - Cache miss for REQUEST dispatch to '/api/system/user/list' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2025-11-06 13:08:08 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /system/user/list
2025-11-06 13:08:08 [http-nio-8080-exec-2] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/system/user/list from 127.0.0.1
2025-11-06 13:08:08 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserList - ==>  Preparing: SELECT DISTINCT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_name, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur_filter ON u.user_id = ur_filter.user_id LEFT JOIN sys_role r_filter ON ur_filter.role_id = r_filter.role_id AND r_filter.del_flag = '0' WHERE u.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY u.create_time DESC
2025-11-06 13:08:08 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserList - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 13:08:09 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserList - <==      Total: 49
2025-11-06 13:08:09 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:09 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 381(Long)
2025-11-06 13:08:09 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:09 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:09 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 380(Long)
2025-11-06 13:08:09 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:09 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:09 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 379(Long)
2025-11-06 13:08:10 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:10 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:10 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 378(Long)
2025-11-06 13:08:10 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:10 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:10 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 377(Long)
2025-11-06 13:08:10 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:10 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:10 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 376(Long)
2025-11-06 13:08:10 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:10 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:10 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 375(Long)
2025-11-06 13:08:11 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:11 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:11 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 374(Long)
2025-11-06 13:08:11 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:11 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:11 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 373(Long)
2025-11-06 13:08:11 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:11 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:11 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 372(Long)
2025-11-06 13:08:11 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:11 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:11 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 371(Long)
2025-11-06 13:08:11 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:11 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:11 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 370(Long)
2025-11-06 13:08:11 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:11 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:11 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 369(Long)
2025-11-06 13:08:12 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:12 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:12 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 357(Long)
2025-11-06 13:08:12 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:12 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:12 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 356(Long)
2025-11-06 13:08:12 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:12 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:12 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 355(Long)
2025-11-06 13:08:12 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:12 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:12 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 354(Long)
2025-11-06 13:08:12 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:12 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:12 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 353(Long)
2025-11-06 13:08:13 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:13 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:13 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 352(Long)
2025-11-06 13:08:13 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:13 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:13 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 351(Long)
2025-11-06 13:08:13 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:13 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:13 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 349(Long)
2025-11-06 13:08:13 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:13 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:13 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 348(Long)
2025-11-06 13:08:13 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:13 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:13 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 347(Long)
2025-11-06 13:08:13 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:13 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:13 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 345(Long)
2025-11-06 13:08:14 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:14 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:14 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 344(Long)
2025-11-06 13:08:14 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:14 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:14 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 343(Long)
2025-11-06 13:08:14 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:14 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:14 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 342(Long)
2025-11-06 13:08:14 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:14 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:14 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 340(Long)
2025-11-06 13:08:15 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:15 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:15 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 339(Long)
2025-11-06 13:08:15 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:15 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:15 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 338(Long)
2025-11-06 13:08:15 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:15 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:15 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 337(Long)
2025-11-06 13:08:15 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:15 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:15 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 336(Long)
2025-11-06 13:08:16 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:16 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:16 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 335(Long)
2025-11-06 13:08:16 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:16 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:16 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 334(Long)
2025-11-06 13:08:16 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:16 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:16 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 333(Long)
2025-11-06 13:08:16 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:16 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:16 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 332(Long)
2025-11-06 13:08:17 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:17 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:17 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 331(Long)
2025-11-06 13:08:17 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:17 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:17 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 330(Long)
2025-11-06 13:08:17 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:17 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:17 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 329(Long)
2025-11-06 13:08:17 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:17 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:17 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 328(Long)
2025-11-06 13:08:17 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:17 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:17 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 327(Long)
2025-11-06 13:08:17 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /statistics/adminMerchantsPerformanceStatistics
2025-11-06 13:08:17 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /statistics/adminAgentPerformanceStatistics
2025-11-06 13:08:17 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /statistics/adminMerchantsAssetStatistics
2025-11-06 13:08:17 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/adminAgentPerformanceStatistics
2025-11-06 13:08:17 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/adminMerchantsAssetStatistics
2025-11-06 13:08:17 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/adminMerchantsPerformanceStatistics
2025-11-06 13:08:17 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 13:08:17 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 13:08:17 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 13:08:17 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 13:08:17 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 13:08:17 [http-nio-8080-exec-7] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 13:08:17 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 13:08:17 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 13:08:17 [http-nio-8080-exec-6] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 13:08:17 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 13:08:17 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 13:08:17 [http-nio-8080-exec-8] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 13:08:17 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:17 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:17 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 326(Long)
2025-11-06 13:08:17 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 13:08:17 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 13:08:17 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 13:08:17 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 13:08:17 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 13:08:17 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 13:08:17 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:17 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:17 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 325(Long)
2025-11-06 13:08:18 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 13:08:18 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 13:08:18 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:18 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:18 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 13:08:18 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 13:08:18 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 13:08:18 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:18 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 13:08:18 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:18 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:18 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 324(Long)
2025-11-06 13:08:18 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 13:08:18 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 13:08:18 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 13:08:18 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 13:08:18 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 13:08:18 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 13:08:18 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 13:08:18 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 13:08:18 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 13:08:18 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:18 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:18 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 323(Long)
2025-11-06 13:08:18 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 13:08:18 [http-nio-8080-exec-7] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 13:08:18 [http-nio-8080-exec-7] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 13:08:18 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 13:08:18 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 13:08:18 [http-nio-8080-exec-7] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 13:08:18 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 13:08:18 [http-nio-8080-exec-8] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 13:08:18 [http-nio-8080-exec-8] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 13:08:18 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 13:08:18 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 13:08:18 [http-nio-8080-exec-8] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 13:08:18 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/adminAgentPerformanceStatistics
2025-11-06 13:08:18 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/adminMerchantsPerformanceStatistics
2025-11-06 13:08:18 [http-nio-8080-exec-8] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/adminMerchantsPerformanceStatistics from 127.0.0.1
2025-11-06 13:08:18 [http-nio-8080-exec-7] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/adminAgentPerformanceStatistics from 127.0.0.1
2025-11-06 13:08:18 [http-nio-8080-exec-7] INFO  c.deepreach.common.aspect.LogAspect - LogAspect doBefore 被触发: 统计管理 - getAdminAgentPerformanceStatistics
2025-11-06 13:08:18 [http-nio-8080-exec-8] INFO  c.deepreach.common.aspect.LogAspect - LogAspect doBefore 被触发: 统计管理 - getAdminMerchantsPerformanceStatistics
2025-11-06 13:08:18 [http-nio-8080-exec-7] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志前置处理完成: 统计管理
2025-11-06 13:08:18 [http-nio-8080-exec-8] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志前置处理完成: 统计管理
2025-11-06 13:08:18 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:08:18 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:08:18 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 13:08:18 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 13:08:18 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:18 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:18 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 322(Long)
2025-11-06 13:08:18 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 13:08:18 [http-nio-8080-exec-6] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 13:08:18 [http-nio-8080-exec-6] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 13:08:18 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 13:08:18 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 13:08:18 [http-nio-8080-exec-6] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 13:08:18 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/adminMerchantsAssetStatistics
2025-11-06 13:08:18 [http-nio-8080-exec-6] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/adminMerchantsAssetStatistics from 127.0.0.1
2025-11-06 13:08:18 [http-nio-8080-exec-6] INFO  c.deepreach.common.aspect.LogAspect - LogAspect doBefore 被触发: 统计管理 - getAdminMerchantsAssetStatistics
2025-11-06 13:08:18 [http-nio-8080-exec-6] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志前置处理完成: 统计管理
2025-11-06 13:08:18 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:08:18 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 13:08:18 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 49
2025-11-06 13:08:18 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 49
2025-11-06 13:08:18 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.sumTotalRechargeByUserIds - ==>  Preparing: SELECT b.user_id AS userId, COALESCE(b.total_recharge, 0) AS totalRecharge FROM user_dr_balance b WHERE b.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:08:18 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.sumTotalRechargeByUserIds - ==>  Preparing: SELECT b.user_id AS userId, COALESCE(b.total_recharge, 0) AS totalRecharge FROM user_dr_balance b WHERE b.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:08:18 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.sumTotalRechargeByUserIds - ==> Parameters: 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 330(Long), 331(Long), 335(Long), 336(Long), 337(Long), 339(Long), 342(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long)
2025-11-06 13:08:18 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.sumTotalRechargeByUserIds - ==> Parameters: 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 330(Long), 331(Long), 335(Long), 336(Long), 337(Long), 339(Long), 342(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 340(Long), 343(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 353(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 380(Long), 381(Long)
2025-11-06 13:08:18 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:18 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:18 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 321(Long)
2025-11-06 13:08:18 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 49
2025-11-06 13:08:18 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.sumTotalRechargeByUserIds - ==>  Preparing: SELECT b.user_id AS userId, COALESCE(b.total_recharge, 0) AS totalRecharge FROM user_dr_balance b WHERE b.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:08:18 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.sumTotalRechargeByUserIds - ==> Parameters: 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 330(Long), 331(Long), 335(Long), 336(Long), 337(Long), 339(Long), 342(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long)
2025-11-06 13:08:18 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.sumTotalRechargeByUserIds - <==      Total: 13
2025-11-06 13:08:18 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.sumTotalRechargeByUserIds - <==      Total: 13
2025-11-06 13:08:18 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.countAiCharactersByType - ==>  Preparing: SELECT COALESCE(c.type, 'unknown') AS type, COUNT(*) AS count FROM ai_character c WHERE c.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) GROUP BY COALESCE(c.type, 'unknown')
2025-11-06 13:08:18 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:18 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.A.selectCommissionByUserIds - ==>  Preparing: SELECT agent_user_id AS userId, COALESCE(total_commission, 0) AS totalCommission, COALESCE(settled_commission, 0) AS settledCommission FROM dr_agent_commission_account WHERE agent_user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:08:18 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:18 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 320(Long)
2025-11-06 13:08:18 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.A.selectCommissionByUserIds - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 13:08:18 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.countAiCharactersByType - ==> Parameters: 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 330(Long), 331(Long), 335(Long), 336(Long), 337(Long), 339(Long), 342(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 340(Long), 343(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 353(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 380(Long), 381(Long)
2025-11-06 13:08:18 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.sumTotalRechargeByUserIds - <==      Total: 13
2025-11-06 13:08:18 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.A.selectCommissionByUserIds - ==>  Preparing: SELECT agent_user_id AS userId, COALESCE(total_commission, 0) AS totalCommission, COALESCE(settled_commission, 0) AS settledCommission FROM dr_agent_commission_account WHERE agent_user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:08:18 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.A.selectCommissionByUserIds - ==> Parameters: 320(Long), 332(Long), 354(Long), 356(Long), 321(Long), 333(Long), 344(Long), 355(Long), 322(Long), 329(Long), 334(Long), 338(Long), 345(Long), 357(Long)
2025-11-06 13:08:18 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:18 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.A.selectCommissionByUserIds - <==      Total: 6
2025-11-06 13:08:18 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:18 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 1(Long)
2025-11-06 13:08:18 [http-nio-8080-exec-7] INFO  c.deepreach.common.aspect.LogAspect - 保存操作日志: 统计管理 - admin - /api/statistics/adminAgentPerformanceStatistics - 成功
2025-11-06 13:08:18 [http-nio-8080-exec-7] INFO  c.deepreach.common.aspect.LogAspect - 操作日志对象详情: operId=null, title=统计管理, operName=admin, operUrl=/api/statistics/adminAgentPerformanceStatistics, status=0
2025-11-06 13:08:18 [http-nio-8080-exec-7] INFO  c.deepreach.common.aspect.LogAspect - 准备异步保存操作日志到数据库...
2025-11-06 13:08:18 [http-nio-8080-exec-7] INFO  c.deepreach.common.aspect.LogAspect - 操作日志异步保存任务已提交
2025-11-06 13:08:18 [http-nio-8080-exec-7] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志返回处理完成: 统计管理
2025-11-06 13:08:18 [pool-3-thread-1] DEBUG c.d.c.c.m.S.insertOperLog - ==>  Preparing: INSERT INTO sys_oper_log ( title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2025-11-06 13:08:18 [pool-3-thread-1] DEBUG c.d.c.c.m.S.insertOperLog - ==> Parameters: 统计管理(String), 0(Integer), com.deepreach.common.core.controller.StatisticsController.getAdminAgentPerformanceStatistics(String), GET(String), 1(Integer), admin(String), ADMIN(String), /api/statistics/adminAgentPerformanceStatistics(String), 127.0.0.1(String), null, (String), {"code":200,"msg":"操作成功","data":{"generalAgent":{"identity":"agent_level_1","identityDisplay":"总代","agentCount":4,"totalRecharge":132000.00,"totalCommission":33200.00},"level1Agent":{"identity":"agent_level_2","identityDisplay":"一级代理","agentCount":4,"totalRecharge":33000.00,"totalCommission":3300.00},"level2Agent":{"identity":"agent_level_3","identityDisplay":"二级代理","agentCount":6,"totalRecharge":33000.00,"totalCommission":3300.00},"total":{"identity":"total","identityDisplay":"合计","agentCount":14,"totalRecharge":198000.00,"totalCommission":39800.00}},"timestamp":1762405698948,"error":false,"success":true}(String), 0(Integer), null, 2025-11-06T13:08:18.448325(LocalDateTime), 500(Long)
2025-11-06 13:08:18 [http-nio-8080-exec-7] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/adminAgentPerformanceStatistics from 127.0.0.1 - 状态: 200 - 耗时: 524ms
2025-11-06 13:08:19 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:19 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:08:19 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 379(Long), 1(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 354(Long), 337(Long), 342(Long), 344(Long), 332(Long), 334(Long), 320(Long), 329(Long), 333(Long), 321(Long)
2025-11-06 13:08:19 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 17
2025-11-06 13:08:19 [http-nio-8080-exec-2] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/system/user/list from 127.0.0.1 - 状态: 200 - 耗时: 10566ms
2025-11-06 13:08:19 [http-nio-8080-exec-2] WARN  c.d.c.i.PerformanceInterceptor - 检测到慢请求: POST /api/system/user/list from 127.0.0.1 - 耗时: 10566ms - 超过阈值: 3000ms
2025-11-06 13:08:19 [pool-3-thread-1] DEBUG c.d.c.c.m.S.insertOperLog - <==    Updates: 1
2025-11-06 13:08:19 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.countAiCharactersByType - <==      Total: 1
2025-11-06 13:08:19 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectAllPlatforms - ==>  Preparing: SELECT platform_id AS platformId, COALESCE(platform_name, 'UNKNOWN_PLATFORM') AS platformName, COALESCE(platform_type, 'unknown') AS platformType FROM platform WHERE status = '0' ORDER BY platform_id
2025-11-06 13:08:19 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectAllPlatforms - ==> Parameters: 
2025-11-06 13:08:19 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.A.selectCommissionByUserIds - <==      Total: 6
2025-11-06 13:08:19 [http-nio-8080-exec-6] INFO  c.deepreach.common.aspect.LogAspect - 保存操作日志: 统计管理 - admin - /api/statistics/adminMerchantsAssetStatistics - 成功
2025-11-06 13:08:19 [http-nio-8080-exec-6] INFO  c.deepreach.common.aspect.LogAspect - 操作日志对象详情: operId=null, title=统计管理, operName=admin, operUrl=/api/statistics/adminMerchantsAssetStatistics, status=0
2025-11-06 13:08:19 [http-nio-8080-exec-6] INFO  c.deepreach.common.aspect.LogAspect - 准备异步保存操作日志到数据库...
2025-11-06 13:08:19 [http-nio-8080-exec-6] INFO  c.deepreach.common.aspect.LogAspect - 操作日志异步保存任务已提交
2025-11-06 13:08:19 [http-nio-8080-exec-6] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志返回处理完成: 统计管理
2025-11-06 13:08:19 [pool-3-thread-2] DEBUG c.d.c.c.m.S.insertOperLog - ==>  Preparing: INSERT INTO sys_oper_log ( title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2025-11-06 13:08:19 [http-nio-8080-exec-6] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/adminMerchantsAssetStatistics from 127.0.0.1 - 状态: 200 - 耗时: 892ms
2025-11-06 13:08:19 [pool-3-thread-2] DEBUG c.d.c.c.m.S.insertOperLog - ==> Parameters: 统计管理(String), 0(Integer), com.deepreach.common.core.controller.StatisticsController.getAdminMerchantsAssetStatistics(String), GET(String), 1(Integer), admin(String), ADMIN(String), /api/statistics/adminMerchantsAssetStatistics(String), 127.0.0.1(String), null, (String), {"code":200,"msg":"操作成功","data":{"totalRecharge":151000.00,"settledCommission":800.00,"netValue":150200.00},"timestamp":1762405699352,"error":false,"success":true}(String), 0(Integer), null, 2025-11-06T13:08:18.464959(LocalDateTime), 887(Long)
2025-11-06 13:08:19 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectAllPlatforms - <==      Total: 8
2025-11-06 13:08:19 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.countInstancesByType - ==>  Preparing: SELECT i.instance_type AS instanceType, COUNT(*) AS count FROM ai_instance i WHERE i.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) GROUP BY i.instance_type
2025-11-06 13:08:19 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.countInstancesByType - ==> Parameters: 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 330(Long), 331(Long), 335(Long), 336(Long), 337(Long), 339(Long), 342(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 340(Long), 343(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 353(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 380(Long), 381(Long)
2025-11-06 13:08:19 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.countInstancesByType - <==      Total: 2
2025-11-06 13:08:19 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.countInstancesByPlatform - ==>  Preparing: SELECT COALESCE(i.platform_id, 0) AS platformId, COALESCE(p.platform_name, 'UNKNOWN_PLATFORM') AS platformName, COUNT(*) AS count FROM ai_instance i LEFT JOIN platform p ON i.platform_id = p.platform_id WHERE i.instance_type = ? AND i.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) GROUP BY COALESCE(i.platform_id, 0), COALESCE(p.platform_name, 'UNKNOWN_PLATFORM')
2025-11-06 13:08:19 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.countInstancesByPlatform - ==> Parameters: 0(String), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 330(Long), 331(Long), 335(Long), 336(Long), 337(Long), 339(Long), 342(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 340(Long), 343(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 353(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 380(Long), 381(Long)
2025-11-06 13:08:19 [pool-3-thread-2] DEBUG c.d.c.c.m.S.insertOperLog - <==    Updates: 1
2025-11-06 13:08:19 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.countInstancesByPlatform - <==      Total: 2
2025-11-06 13:08:19 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.countInstancesByPlatform - ==>  Preparing: SELECT COALESCE(i.platform_id, 0) AS platformId, COALESCE(p.platform_name, 'UNKNOWN_PLATFORM') AS platformName, COUNT(*) AS count FROM ai_instance i LEFT JOIN platform p ON i.platform_id = p.platform_id WHERE i.instance_type = ? AND i.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) GROUP BY COALESCE(i.platform_id, 0), COALESCE(p.platform_name, 'UNKNOWN_PLATFORM')
2025-11-06 13:08:19 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.countInstancesByPlatform - ==> Parameters: 1(String), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 330(Long), 331(Long), 335(Long), 336(Long), 337(Long), 339(Long), 342(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 340(Long), 343(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 353(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 380(Long), 381(Long)
2025-11-06 13:08:19 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.countInstancesByPlatform - <==      Total: 3
2025-11-06 13:08:19 [http-nio-8080-exec-8] INFO  c.deepreach.common.aspect.LogAspect - 保存操作日志: 统计管理 - admin - /api/statistics/adminMerchantsPerformanceStatistics - 成功
2025-11-06 13:08:19 [http-nio-8080-exec-8] INFO  c.deepreach.common.aspect.LogAspect - 操作日志对象详情: operId=null, title=统计管理, operName=admin, operUrl=/api/statistics/adminMerchantsPerformanceStatistics, status=0
2025-11-06 13:08:19 [http-nio-8080-exec-8] INFO  c.deepreach.common.aspect.LogAspect - 准备异步保存操作日志到数据库...
2025-11-06 13:08:19 [http-nio-8080-exec-8] INFO  c.deepreach.common.aspect.LogAspect - 操作日志异步保存任务已提交
2025-11-06 13:08:19 [http-nio-8080-exec-8] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志返回处理完成: 统计管理
2025-11-06 13:08:19 [pool-3-thread-3] DEBUG c.d.c.c.m.S.insertOperLog - ==>  Preparing: INSERT INTO sys_oper_log ( title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2025-11-06 13:08:19 [http-nio-8080-exec-8] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/adminMerchantsPerformanceStatistics from 127.0.0.1 - 状态: 200 - 耗时: 1523ms
2025-11-06 13:08:19 [pool-3-thread-3] DEBUG c.d.c.c.m.S.insertOperLog - ==> Parameters: 统计管理(String), 0(Integer), com.deepreach.common.core.controller.StatisticsController.getAdminMerchantsPerformanceStatistics(String), GET(String), 1(Integer), admin(String), ADMIN(String), /api/statistics/adminMerchantsPerformanceStatistics(String), 127.0.0.1(String), null, (String), {"code":200,"msg":"操作成功","data":{"merchantOverview":{"merchantCount":19,"employeeCount":15,"totalPerformance":151000.00},"aiCharacterOverview":{"totalCharacters":9,"socialAiCount":9,"customerServiceAiCount":0},"marketingInstanceOverview":{"instanceCount":13,"platformBreakdown":{"WhatsApp":7,"Telegram":6}},"prospectingInstanceOverview":{"instanceCount":7,"platformBreakdown":{"SMS":3,"Facebook":3,"Instagram":0,"TikTok":1,"X":0,"GoogleVoice":0}}},"timestamp":1762405699959,"error":false,"success":true}(String), 0(Integer), null, 2025-11-06T13:08:18.448325(LocalDateTime), 1512(Long)
2025-11-06 13:08:20 [pool-3-thread-3] DEBUG c.d.c.c.m.S.insertOperLog - <==    Updates: 1
2025-11-06 13:08:21 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing POST /system/user/list
2025-11-06 13:08:21 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 13:08:21 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 13:08:21 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 13:08:21 [http-nio-8080-exec-9] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 13:08:21 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 13:08:21 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 13:08:21 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 13:08:21 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:21 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 13:08:21 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 13:08:21 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 13:08:21 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 13:08:21 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 13:08:21 [http-nio-8080-exec-9] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 13:08:21 [http-nio-8080-exec-9] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 13:08:21 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 13:08:21 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 13:08:21 [http-nio-8080-exec-9] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 13:08:21 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured POST /system/user/list
2025-11-06 13:08:21 [http-nio-8080-exec-9] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/system/user/list from 127.0.0.1
2025-11-06 13:08:21 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserList - ==>  Preparing: SELECT DISTINCT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_name, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur_filter ON u.user_id = ur_filter.user_id LEFT JOIN sys_role r_filter ON ur_filter.role_id = r_filter.role_id AND r_filter.del_flag = '0' WHERE u.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY u.create_time DESC
2025-11-06 13:08:21 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserList - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 13:08:22 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserList - <==      Total: 49
2025-11-06 13:08:22 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:22 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 381(Long)
2025-11-06 13:08:22 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:22 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:22 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 380(Long)
2025-11-06 13:08:22 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:22 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:22 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 379(Long)
2025-11-06 13:08:22 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:22 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:22 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 378(Long)
2025-11-06 13:08:23 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:23 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:23 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 377(Long)
2025-11-06 13:08:23 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:23 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:23 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 376(Long)
2025-11-06 13:08:23 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:23 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:23 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 375(Long)
2025-11-06 13:08:23 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:23 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:23 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 374(Long)
2025-11-06 13:08:23 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:23 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:23 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 373(Long)
2025-11-06 13:08:23 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:23 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:23 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 372(Long)
2025-11-06 13:08:24 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:24 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:24 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 371(Long)
2025-11-06 13:08:24 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:24 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:24 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 370(Long)
2025-11-06 13:08:24 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:24 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:24 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 369(Long)
2025-11-06 13:08:24 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:24 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:24 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 357(Long)
2025-11-06 13:08:24 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:24 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:24 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 356(Long)
2025-11-06 13:08:25 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:25 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:25 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 355(Long)
2025-11-06 13:08:25 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:25 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:25 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 354(Long)
2025-11-06 13:08:25 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:25 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:25 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 353(Long)
2025-11-06 13:08:25 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:25 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:25 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 352(Long)
2025-11-06 13:08:25 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:25 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:25 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 351(Long)
2025-11-06 13:08:25 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:25 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:25 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 349(Long)
2025-11-06 13:08:26 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:26 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:26 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 348(Long)
2025-11-06 13:08:26 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:26 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:26 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 347(Long)
2025-11-06 13:08:26 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:26 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:26 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 345(Long)
2025-11-06 13:08:26 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:26 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:26 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 344(Long)
2025-11-06 13:08:27 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:27 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:27 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 343(Long)
2025-11-06 13:08:27 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:27 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:27 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 342(Long)
2025-11-06 13:08:27 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:27 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:27 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 340(Long)
2025-11-06 13:08:27 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:27 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:27 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 339(Long)
2025-11-06 13:08:28 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:28 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:28 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 338(Long)
2025-11-06 13:08:28 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:28 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:28 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 337(Long)
2025-11-06 13:08:28 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:28 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:28 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 336(Long)
2025-11-06 13:08:28 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:28 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:28 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 335(Long)
2025-11-06 13:08:29 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:29 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:29 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 334(Long)
2025-11-06 13:08:29 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:29 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:29 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 333(Long)
2025-11-06 13:08:29 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:29 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:29 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 332(Long)
2025-11-06 13:08:29 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:29 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:29 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 331(Long)
2025-11-06 13:08:29 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:29 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:29 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 330(Long)
2025-11-06 13:08:29 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:29 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:29 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 329(Long)
2025-11-06 13:08:30 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:30 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:30 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 328(Long)
2025-11-06 13:08:30 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:30 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:30 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 327(Long)
2025-11-06 13:08:30 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:30 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:30 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 326(Long)
2025-11-06 13:08:30 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:30 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:30 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 325(Long)
2025-11-06 13:08:30 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:30 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:30 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 324(Long)
2025-11-06 13:08:30 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:30 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:30 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 323(Long)
2025-11-06 13:08:31 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:31 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:31 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 322(Long)
2025-11-06 13:08:31 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:31 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:31 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 321(Long)
2025-11-06 13:08:32 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:32 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:32 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 320(Long)
2025-11-06 13:08:32 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:32 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:32 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 1(Long)
2025-11-06 13:08:32 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:32 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:08:32 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 379(Long), 1(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 354(Long), 337(Long), 342(Long), 344(Long), 332(Long), 334(Long), 320(Long), 329(Long), 333(Long), 321(Long)
2025-11-06 13:08:32 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 17
2025-11-06 13:08:32 [http-nio-8080-exec-9] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/system/user/list from 127.0.0.1 - 状态: 200 - 耗时: 10863ms
2025-11-06 13:08:32 [http-nio-8080-exec-9] WARN  c.d.c.i.PerformanceInterceptor - 检测到慢请求: POST /api/system/user/list from 127.0.0.1 - 耗时: 10863ms - 超过阈值: 3000ms
2025-11-06 13:08:37 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /system/user/list
2025-11-06 13:08:37 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 13:08:37 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 13:08:37 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 13:08:37 [http-nio-8080-exec-5] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 13:08:37 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 13:08:37 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 13:08:38 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 13:08:38 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:38 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 13:08:38 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 13:08:38 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 13:08:38 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 13:08:38 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 13:08:38 [http-nio-8080-exec-5] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 13:08:38 [http-nio-8080-exec-5] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 13:08:38 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 13:08:38 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 13:08:38 [http-nio-8080-exec-5] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 13:08:38 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /system/user/list
2025-11-06 13:08:38 [http-nio-8080-exec-5] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/system/user/list from 127.0.0.1
2025-11-06 13:08:38 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserList - ==>  Preparing: SELECT DISTINCT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_name, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur_filter ON u.user_id = ur_filter.user_id LEFT JOIN sys_role r_filter ON ur_filter.role_id = r_filter.role_id AND r_filter.del_flag = '0' WHERE u.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY u.create_time DESC
2025-11-06 13:08:38 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserList - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 13:08:39 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserList - <==      Total: 49
2025-11-06 13:08:39 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:39 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 381(Long)
2025-11-06 13:08:39 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:39 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:39 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 380(Long)
2025-11-06 13:08:40 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:40 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:40 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 379(Long)
2025-11-06 13:08:40 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:40 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:40 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 378(Long)
2025-11-06 13:08:40 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:40 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:40 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 377(Long)
2025-11-06 13:08:40 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:40 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:40 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 376(Long)
2025-11-06 13:08:41 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:41 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:41 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 375(Long)
2025-11-06 13:08:41 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:41 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:41 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 374(Long)
2025-11-06 13:08:41 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:41 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:41 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 373(Long)
2025-11-06 13:08:41 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:41 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:41 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 372(Long)
2025-11-06 13:08:41 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:41 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:41 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 371(Long)
2025-11-06 13:08:41 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:41 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:41 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 370(Long)
2025-11-06 13:08:42 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:42 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:42 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 369(Long)
2025-11-06 13:08:42 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:42 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:42 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 357(Long)
2025-11-06 13:08:42 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:42 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:42 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 356(Long)
2025-11-06 13:08:43 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:43 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:43 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 355(Long)
2025-11-06 13:08:43 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:43 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:43 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 354(Long)
2025-11-06 13:08:43 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:43 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:43 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 353(Long)
2025-11-06 13:08:43 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:43 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:43 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 352(Long)
2025-11-06 13:08:43 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:43 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:43 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 351(Long)
2025-11-06 13:08:44 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:44 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:44 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 349(Long)
2025-11-06 13:08:44 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:44 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:44 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 348(Long)
2025-11-06 13:08:44 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:44 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:44 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 347(Long)
2025-11-06 13:08:44 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:44 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:44 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 345(Long)
2025-11-06 13:08:44 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:44 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:44 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 344(Long)
2025-11-06 13:08:44 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:44 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:44 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 343(Long)
2025-11-06 13:08:45 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:45 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:45 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 342(Long)
2025-11-06 13:08:45 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:45 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:45 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 340(Long)
2025-11-06 13:08:45 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:45 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:45 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 339(Long)
2025-11-06 13:08:45 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:45 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:45 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 338(Long)
2025-11-06 13:08:46 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:46 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:46 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 337(Long)
2025-11-06 13:08:46 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:46 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:46 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 336(Long)
2025-11-06 13:08:46 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:46 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:46 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 335(Long)
2025-11-06 13:08:46 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:46 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:46 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 334(Long)
2025-11-06 13:08:46 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:46 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:46 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 333(Long)
2025-11-06 13:08:46 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:46 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:46 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 332(Long)
2025-11-06 13:08:46 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:46 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:46 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 331(Long)
2025-11-06 13:08:47 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:47 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:47 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 330(Long)
2025-11-06 13:08:47 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:47 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:47 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 329(Long)
2025-11-06 13:08:47 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:47 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:47 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 328(Long)
2025-11-06 13:08:47 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:47 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:47 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 327(Long)
2025-11-06 13:08:47 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:47 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:47 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 326(Long)
2025-11-06 13:08:47 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:47 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:47 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 325(Long)
2025-11-06 13:08:48 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:48 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:48 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 324(Long)
2025-11-06 13:08:48 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:48 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:48 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 323(Long)
2025-11-06 13:08:48 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:48 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:48 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 322(Long)
2025-11-06 13:08:49 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:49 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:49 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 321(Long)
2025-11-06 13:08:49 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:49 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:49 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 320(Long)
2025-11-06 13:08:49 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:49 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:08:49 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 1(Long)
2025-11-06 13:08:49 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:08:49 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:08:49 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 379(Long), 1(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 354(Long), 337(Long), 342(Long), 344(Long), 332(Long), 334(Long), 320(Long), 329(Long), 333(Long), 321(Long)
2025-11-06 13:08:49 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 17
2025-11-06 13:08:49 [http-nio-8080-exec-5] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/system/user/list from 127.0.0.1 - 状态: 200 - 耗时: 10952ms
2025-11-06 13:08:49 [http-nio-8080-exec-5] WARN  c.d.c.i.PerformanceInterceptor - 检测到慢请求: POST /api/system/user/list from 127.0.0.1 - 耗时: 10952ms - 超过阈值: 3000ms
2025-11-06 13:09:00 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /system/user/list
2025-11-06 13:09:00 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 13:09:00 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 13:09:00 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 13:09:00 [http-nio-8080-exec-3] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 13:09:00 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 13:09:00 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 13:09:00 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 13:09:00 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:00 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 13:09:00 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 13:09:00 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 13:09:00 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 13:09:00 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 13:09:00 [http-nio-8080-exec-3] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 13:09:00 [http-nio-8080-exec-3] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 13:09:00 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 13:09:00 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 13:09:00 [http-nio-8080-exec-3] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 13:09:00 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /system/user/list
2025-11-06 13:09:00 [http-nio-8080-exec-3] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/system/user/list from 127.0.0.1
2025-11-06 13:09:00 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserList - ==>  Preparing: SELECT DISTINCT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_name, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur_filter ON u.user_id = ur_filter.user_id LEFT JOIN sys_role r_filter ON ur_filter.role_id = r_filter.role_id AND r_filter.del_flag = '0' WHERE u.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY u.create_time DESC
2025-11-06 13:09:00 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserList - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 13:09:01 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserList - <==      Total: 49
2025-11-06 13:09:01 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:01 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 381(Long)
2025-11-06 13:09:01 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:01 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:01 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 380(Long)
2025-11-06 13:09:02 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:02 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:02 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 379(Long)
2025-11-06 13:09:02 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:02 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:02 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 378(Long)
2025-11-06 13:09:03 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:03 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:03 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 377(Long)
2025-11-06 13:09:03 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:03 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:03 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 376(Long)
2025-11-06 13:09:03 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:03 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:03 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 375(Long)
2025-11-06 13:09:03 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:03 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:03 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 374(Long)
2025-11-06 13:09:03 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:03 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:03 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 373(Long)
2025-11-06 13:09:03 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:03 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:03 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 372(Long)
2025-11-06 13:09:04 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:04 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:04 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 371(Long)
2025-11-06 13:09:04 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:04 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:04 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 370(Long)
2025-11-06 13:09:04 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:04 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:04 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 369(Long)
2025-11-06 13:09:04 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:04 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:04 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 357(Long)
2025-11-06 13:09:04 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:04 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:04 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 356(Long)
2025-11-06 13:09:04 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:04 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:04 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 355(Long)
2025-11-06 13:09:05 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:05 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:05 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 354(Long)
2025-11-06 13:09:05 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:05 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:05 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 353(Long)
2025-11-06 13:09:05 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:05 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:05 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 352(Long)
2025-11-06 13:09:05 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:05 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:05 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 351(Long)
2025-11-06 13:09:05 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:05 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:05 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 349(Long)
2025-11-06 13:09:05 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:05 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:05 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 348(Long)
2025-11-06 13:09:06 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:06 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:06 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 347(Long)
2025-11-06 13:09:06 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:06 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:06 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 345(Long)
2025-11-06 13:09:07 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:07 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:07 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 344(Long)
2025-11-06 13:09:07 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:07 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:07 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 343(Long)
2025-11-06 13:09:07 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:07 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:07 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 342(Long)
2025-11-06 13:09:07 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:07 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:07 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 340(Long)
2025-11-06 13:09:08 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:08 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:08 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 339(Long)
2025-11-06 13:09:08 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:08 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:08 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 338(Long)
2025-11-06 13:09:08 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:08 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:08 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 337(Long)
2025-11-06 13:09:08 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:08 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:08 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 336(Long)
2025-11-06 13:09:09 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:09 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:09 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 335(Long)
2025-11-06 13:09:09 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:09 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:09 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 334(Long)
2025-11-06 13:09:09 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:09 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:09 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 333(Long)
2025-11-06 13:09:09 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:09 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:09 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 332(Long)
2025-11-06 13:09:09 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:09 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:09 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 331(Long)
2025-11-06 13:09:09 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:09 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:09 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 330(Long)
2025-11-06 13:09:10 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:10 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:10 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 329(Long)
2025-11-06 13:09:10 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:10 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:10 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 328(Long)
2025-11-06 13:09:11 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:11 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:11 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 327(Long)
2025-11-06 13:09:11 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:11 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:11 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 326(Long)
2025-11-06 13:09:11 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:11 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:11 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 325(Long)
2025-11-06 13:09:11 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:11 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:11 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 324(Long)
2025-11-06 13:09:12 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:12 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:12 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 323(Long)
2025-11-06 13:09:12 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:12 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:12 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 322(Long)
2025-11-06 13:09:12 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:12 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:12 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 321(Long)
2025-11-06 13:09:12 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:12 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:12 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 320(Long)
2025-11-06 13:09:12 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:12 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:12 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 1(Long)
2025-11-06 13:09:12 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:12 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:09:12 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 379(Long), 1(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 354(Long), 337(Long), 342(Long), 344(Long), 332(Long), 334(Long), 320(Long), 329(Long), 333(Long), 321(Long)
2025-11-06 13:09:13 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 17
2025-11-06 13:09:13 [http-nio-8080-exec-3] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/system/user/list from 127.0.0.1 - 状态: 200 - 耗时: 12281ms
2025-11-06 13:09:13 [http-nio-8080-exec-3] WARN  c.d.c.i.PerformanceInterceptor - 检测到慢请求: POST /api/system/user/list from 127.0.0.1 - 耗时: 12281ms - 超过阈值: 3000ms
2025-11-06 13:09:44 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /system/user/list
2025-11-06 13:09:44 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 13:09:44 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 13:09:44 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 13:09:44 [http-nio-8080-exec-4] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 13:09:44 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 13:09:44 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 13:09:44 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 13:09:44 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:44 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 13:09:44 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /system/user/list
2025-11-06 13:09:44 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 13:09:44 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 13:09:44 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 13:09:44 [http-nio-8080-exec-7] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 13:09:45 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 13:09:45 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 13:09:45 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 13:09:45 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 13:09:45 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 13:09:45 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 13:09:45 [http-nio-8080-exec-4] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 13:09:45 [http-nio-8080-exec-4] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 13:09:45 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 13:09:45 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 13:09:45 [http-nio-8080-exec-4] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 13:09:45 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured POST /system/user/list
2025-11-06 13:09:45 [http-nio-8080-exec-4] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/system/user/list from 127.0.0.1
2025-11-06 13:09:45 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserList - ==>  Preparing: SELECT DISTINCT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_name, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur_filter ON u.user_id = ur_filter.user_id LEFT JOIN sys_role r_filter ON ur_filter.role_id = r_filter.role_id AND r_filter.del_flag = '0' WHERE u.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY u.create_time DESC
2025-11-06 13:09:45 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserList - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 13:09:45 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 13:09:45 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:45 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 13:09:45 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserList - <==      Total: 49
2025-11-06 13:09:45 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:45 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 381(Long)
2025-11-06 13:09:45 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 13:09:45 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 13:09:45 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 13:09:45 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:45 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:45 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 380(Long)
2025-11-06 13:09:46 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 13:09:46 [http-nio-8080-exec-7] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 13:09:46 [http-nio-8080-exec-7] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 13:09:46 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 13:09:46 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 13:09:46 [http-nio-8080-exec-7] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 13:09:46 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured POST /system/user/list
2025-11-06 13:09:46 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:46 [http-nio-8080-exec-7] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/system/user/list from 127.0.0.1
2025-11-06 13:09:46 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:46 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 379(Long)
2025-11-06 13:09:46 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserList - ==>  Preparing: SELECT DISTINCT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_name, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur_filter ON u.user_id = ur_filter.user_id LEFT JOIN sys_role r_filter ON ur_filter.role_id = r_filter.role_id AND r_filter.del_flag = '0' WHERE u.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY u.create_time DESC
2025-11-06 13:09:46 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserList - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 13:09:46 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:46 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:46 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 378(Long)
2025-11-06 13:09:46 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:46 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:46 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 377(Long)
2025-11-06 13:09:46 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:46 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:46 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 376(Long)
2025-11-06 13:09:46 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserList - <==      Total: 49
2025-11-06 13:09:46 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:46 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 381(Long)
2025-11-06 13:09:46 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:46 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:46 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 375(Long)
2025-11-06 13:09:46 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:46 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:46 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 380(Long)
2025-11-06 13:09:46 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:46 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:46 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 374(Long)
2025-11-06 13:09:46 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:46 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:46 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 379(Long)
2025-11-06 13:09:47 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:47 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:47 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 373(Long)
2025-11-06 13:09:47 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:47 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:47 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 372(Long)
2025-11-06 13:09:47 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:47 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:47 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 371(Long)
2025-11-06 13:09:47 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:47 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:47 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 378(Long)
2025-11-06 13:09:47 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:47 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:47 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 370(Long)
2025-11-06 13:09:47 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:47 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:47 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 377(Long)
2025-11-06 13:09:47 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:47 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:47 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 369(Long)
2025-11-06 13:09:47 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:47 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:47 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 376(Long)
2025-11-06 13:09:47 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:47 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:47 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 357(Long)
2025-11-06 13:09:47 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:47 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:47 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 375(Long)
2025-11-06 13:09:47 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:47 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:47 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 356(Long)
2025-11-06 13:09:48 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:48 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:48 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 374(Long)
2025-11-06 13:09:48 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:48 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:48 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 355(Long)
2025-11-06 13:09:48 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:48 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:48 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:48 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:48 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 354(Long)
2025-11-06 13:09:48 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 373(Long)
2025-11-06 13:09:48 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:48 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:48 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:48 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:48 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 372(Long)
2025-11-06 13:09:48 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 353(Long)
2025-11-06 13:09:48 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:48 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:48 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:48 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 352(Long)
2025-11-06 13:09:48 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:48 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 371(Long)
2025-11-06 13:09:48 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:48 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:48 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:48 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:48 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 370(Long)
2025-11-06 13:09:48 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 351(Long)
2025-11-06 13:09:49 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:49 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:49 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 369(Long)
2025-11-06 13:09:49 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:49 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:49 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 349(Long)
2025-11-06 13:09:49 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:49 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:49 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 357(Long)
2025-11-06 13:09:49 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:49 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:49 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 348(Long)
2025-11-06 13:09:49 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:49 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:49 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 356(Long)
2025-11-06 13:09:49 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:49 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:49 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 347(Long)
2025-11-06 13:09:49 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:49 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:49 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 355(Long)
2025-11-06 13:09:49 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:49 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:49 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 345(Long)
2025-11-06 13:09:49 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:49 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:49 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 354(Long)
2025-11-06 13:09:49 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:49 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:49 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 344(Long)
2025-11-06 13:09:49 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:49 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:49 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 343(Long)
2025-11-06 13:09:50 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:50 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:50 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 342(Long)
2025-11-06 13:09:50 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:50 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:50 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 353(Long)
2025-11-06 13:09:50 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:50 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:50 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 340(Long)
2025-11-06 13:09:50 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:50 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:50 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 339(Long)
2025-11-06 13:09:50 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:50 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:50 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 338(Long)
2025-11-06 13:09:50 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:50 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:50 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 352(Long)
2025-11-06 13:09:50 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:50 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:50 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 337(Long)
2025-11-06 13:09:50 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:50 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:50 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 351(Long)
2025-11-06 13:09:50 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:50 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:50 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 336(Long)
2025-11-06 13:09:51 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:51 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:51 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 349(Long)
2025-11-06 13:09:51 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:51 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:51 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 335(Long)
2025-11-06 13:09:51 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:51 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:51 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 334(Long)
2025-11-06 13:09:51 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:51 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:51 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 333(Long)
2025-11-06 13:09:51 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:51 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:51 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 348(Long)
2025-11-06 13:09:51 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:51 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:51 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 332(Long)
2025-11-06 13:09:51 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:51 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:51 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 347(Long)
2025-11-06 13:09:51 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:51 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:51 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 331(Long)
2025-11-06 13:09:52 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:52 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:52 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 345(Long)
2025-11-06 13:09:52 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:52 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:52 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 330(Long)
2025-11-06 13:09:52 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:52 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:52 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 344(Long)
2025-11-06 13:09:52 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:52 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:52 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 329(Long)
2025-11-06 13:09:52 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:52 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:52 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 343(Long)
2025-11-06 13:09:52 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:52 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:52 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 328(Long)
2025-11-06 13:09:52 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:52 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:52 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 342(Long)
2025-11-06 13:09:52 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:52 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:52 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 327(Long)
2025-11-06 13:09:53 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:53 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:53 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 340(Long)
2025-11-06 13:09:53 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:53 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:53 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 326(Long)
2025-11-06 13:09:53 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:53 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:53 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 339(Long)
2025-11-06 13:09:53 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:53 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:53 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 325(Long)
2025-11-06 13:09:53 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:53 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:53 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 338(Long)
2025-11-06 13:09:53 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:53 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:53 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 324(Long)
2025-11-06 13:09:53 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:53 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:53 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 337(Long)
2025-11-06 13:09:53 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:53 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:53 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 323(Long)
2025-11-06 13:09:53 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:53 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:53 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 336(Long)
2025-11-06 13:09:53 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:53 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:53 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 322(Long)
2025-11-06 13:09:53 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:53 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:53 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 335(Long)
2025-11-06 13:09:53 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:53 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:53 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 321(Long)
2025-11-06 13:09:53 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:53 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:53 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 334(Long)
2025-11-06 13:09:54 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:54 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:54 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 320(Long)
2025-11-06 13:09:54 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:54 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:54 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 333(Long)
2025-11-06 13:09:54 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:54 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:54 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 1(Long)
2025-11-06 13:09:54 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:54 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:54 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 332(Long)
2025-11-06 13:09:54 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:54 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:09:54 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 379(Long), 1(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 354(Long), 337(Long), 342(Long), 344(Long), 332(Long), 334(Long), 320(Long), 329(Long), 333(Long), 321(Long)
2025-11-06 13:09:54 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:54 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:54 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 331(Long)
2025-11-06 13:09:54 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 17
2025-11-06 13:09:54 [http-nio-8080-exec-4] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/system/user/list from 127.0.0.1 - 状态: 200 - 耗时: 9378ms
2025-11-06 13:09:54 [http-nio-8080-exec-4] WARN  c.d.c.i.PerformanceInterceptor - 检测到慢请求: POST /api/system/user/list from 127.0.0.1 - 耗时: 9378ms - 超过阈值: 3000ms
2025-11-06 13:09:54 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:54 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:54 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 330(Long)
2025-11-06 13:09:54 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:54 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:54 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 329(Long)
2025-11-06 13:09:54 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:54 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:54 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 328(Long)
2025-11-06 13:09:55 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:55 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:55 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 327(Long)
2025-11-06 13:09:55 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:55 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:55 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 326(Long)
2025-11-06 13:09:55 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:55 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:55 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 325(Long)
2025-11-06 13:09:55 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:55 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:55 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 324(Long)
2025-11-06 13:09:55 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:55 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:55 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 323(Long)
2025-11-06 13:09:55 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:55 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:55 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 322(Long)
2025-11-06 13:09:56 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:56 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:56 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 321(Long)
2025-11-06 13:09:56 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:56 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:56 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 320(Long)
2025-11-06 13:09:57 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:57 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:57 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 1(Long)
2025-11-06 13:09:58 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:09:58 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:09:58 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 379(Long), 1(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 354(Long), 337(Long), 342(Long), 344(Long), 332(Long), 334(Long), 320(Long), 329(Long), 333(Long), 321(Long)
2025-11-06 13:09:58 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 17
2025-11-06 13:09:58 [http-nio-8080-exec-7] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/system/user/list from 127.0.0.1 - 状态: 200 - 耗时: 12147ms
2025-11-06 13:09:58 [http-nio-8080-exec-7] WARN  c.d.c.i.PerformanceInterceptor - 检测到慢请求: POST /api/system/user/list from 127.0.0.1 - 耗时: 12147ms - 超过阈值: 3000ms
2025-11-06 13:09:58 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /system/user/list
2025-11-06 13:09:58 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 13:09:58 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 13:09:58 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 13:09:58 [http-nio-8080-exec-2] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 13:09:58 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 13:09:58 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 13:09:59 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 13:09:59 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:59 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 13:09:59 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 13:09:59 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 13:09:59 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 13:09:59 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 13:09:59 [http-nio-8080-exec-2] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 13:09:59 [http-nio-8080-exec-2] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 13:09:59 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 13:09:59 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 13:09:59 [http-nio-8080-exec-2] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 13:09:59 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /system/user/list
2025-11-06 13:09:59 [http-nio-8080-exec-2] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/system/user/list from 127.0.0.1
2025-11-06 13:09:59 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserList - ==>  Preparing: SELECT DISTINCT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_name, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur_filter ON u.user_id = ur_filter.user_id LEFT JOIN sys_role r_filter ON ur_filter.role_id = r_filter.role_id AND r_filter.del_flag = '0' WHERE u.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY u.create_time DESC
2025-11-06 13:09:59 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserList - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 13:09:59 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserList - <==      Total: 49
2025-11-06 13:09:59 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:09:59 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 381(Long)
2025-11-06 13:10:00 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:00 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:00 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 380(Long)
2025-11-06 13:10:00 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:00 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:00 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 379(Long)
2025-11-06 13:10:00 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:00 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:00 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 378(Long)
2025-11-06 13:10:00 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:00 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:00 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 377(Long)
2025-11-06 13:10:00 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:00 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:00 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 376(Long)
2025-11-06 13:10:00 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:00 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:00 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 375(Long)
2025-11-06 13:10:01 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:01 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:01 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 374(Long)
2025-11-06 13:10:01 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:01 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:01 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 373(Long)
2025-11-06 13:10:01 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:01 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:01 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 372(Long)
2025-11-06 13:10:01 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:01 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:01 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 371(Long)
2025-11-06 13:10:01 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:01 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:01 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 370(Long)
2025-11-06 13:10:02 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:02 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:02 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 369(Long)
2025-11-06 13:10:02 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:02 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:02 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 357(Long)
2025-11-06 13:10:02 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:02 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:02 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 356(Long)
2025-11-06 13:10:02 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:02 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:02 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 355(Long)
2025-11-06 13:10:03 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:03 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:03 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 354(Long)
2025-11-06 13:10:03 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:03 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:03 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 353(Long)
2025-11-06 13:10:03 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:03 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:03 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 352(Long)
2025-11-06 13:10:03 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:03 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:03 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 351(Long)
2025-11-06 13:10:03 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:03 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:03 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 349(Long)
2025-11-06 13:10:04 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:04 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:04 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 348(Long)
2025-11-06 13:10:04 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:04 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:04 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 347(Long)
2025-11-06 13:10:04 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:04 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:04 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 345(Long)
2025-11-06 13:10:04 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:04 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:04 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 344(Long)
2025-11-06 13:10:04 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:04 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:04 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 343(Long)
2025-11-06 13:10:04 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:04 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:04 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 342(Long)
2025-11-06 13:10:05 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:05 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:05 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 340(Long)
2025-11-06 13:10:05 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:05 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:05 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 339(Long)
2025-11-06 13:10:05 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:05 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:05 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 338(Long)
2025-11-06 13:10:05 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:05 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:05 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 337(Long)
2025-11-06 13:10:06 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:06 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:06 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 336(Long)
2025-11-06 13:10:06 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:06 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:06 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 335(Long)
2025-11-06 13:10:06 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:06 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:06 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 334(Long)
2025-11-06 13:10:06 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:06 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:06 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 333(Long)
2025-11-06 13:10:06 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:06 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:06 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 332(Long)
2025-11-06 13:10:06 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:06 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:06 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 331(Long)
2025-11-06 13:10:07 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:07 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:07 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 330(Long)
2025-11-06 13:10:07 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:07 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:07 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 329(Long)
2025-11-06 13:10:07 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:07 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:07 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 328(Long)
2025-11-06 13:10:07 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:07 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:07 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 327(Long)
2025-11-06 13:10:07 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:07 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:07 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 326(Long)
2025-11-06 13:10:07 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:07 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:07 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 325(Long)
2025-11-06 13:10:08 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:08 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:08 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 324(Long)
2025-11-06 13:10:08 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:08 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:08 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 323(Long)
2025-11-06 13:10:08 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:08 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:08 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 322(Long)
2025-11-06 13:10:08 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:08 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:08 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 321(Long)
2025-11-06 13:10:09 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:09 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:09 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 320(Long)
2025-11-06 13:10:09 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:09 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:09 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 1(Long)
2025-11-06 13:10:09 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:09 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:10:09 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 379(Long), 1(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 354(Long), 337(Long), 342(Long), 344(Long), 332(Long), 334(Long), 320(Long), 329(Long), 333(Long), 321(Long)
2025-11-06 13:10:09 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 17
2025-11-06 13:10:09 [http-nio-8080-exec-2] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/system/user/list from 127.0.0.1 - 状态: 200 - 耗时: 10046ms
2025-11-06 13:10:09 [http-nio-8080-exec-2] WARN  c.d.c.i.PerformanceInterceptor - 检测到慢请求: POST /api/system/user/list from 127.0.0.1 - 耗时: 10046ms - 超过阈值: 3000ms
2025-11-06 13:10:15 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /system/user/list
2025-11-06 13:10:15 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 13:10:15 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 13:10:15 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 13:10:15 [http-nio-8080-exec-6] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 13:10:15 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 13:10:15 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 13:10:15 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 13:10:15 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:15 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 13:10:15 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 13:10:15 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 13:10:15 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 13:10:15 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 13:10:15 [http-nio-8080-exec-6] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 13:10:15 [http-nio-8080-exec-6] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 13:10:15 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 13:10:15 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 13:10:15 [http-nio-8080-exec-6] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 13:10:15 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /system/user/list
2025-11-06 13:10:15 [http-nio-8080-exec-6] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/system/user/list from 127.0.0.1
2025-11-06 13:10:15 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserList - ==>  Preparing: SELECT DISTINCT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_name, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur_filter ON u.user_id = ur_filter.user_id LEFT JOIN sys_role r_filter ON ur_filter.role_id = r_filter.role_id AND r_filter.del_flag = '0' WHERE u.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY u.create_time DESC
2025-11-06 13:10:15 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserList - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 13:10:16 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserList - <==      Total: 49
2025-11-06 13:10:16 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:16 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 381(Long)
2025-11-06 13:10:16 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:16 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:16 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 380(Long)
2025-11-06 13:10:16 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:16 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:16 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 379(Long)
2025-11-06 13:10:16 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:16 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:16 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 378(Long)
2025-11-06 13:10:16 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:16 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:16 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 377(Long)
2025-11-06 13:10:17 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:17 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:17 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 376(Long)
2025-11-06 13:10:17 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:17 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:17 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 375(Long)
2025-11-06 13:10:17 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:17 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:17 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 374(Long)
2025-11-06 13:10:17 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:17 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:17 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 373(Long)
2025-11-06 13:10:17 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:17 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:17 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 372(Long)
2025-11-06 13:10:17 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:17 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:17 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 371(Long)
2025-11-06 13:10:18 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:18 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:18 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 370(Long)
2025-11-06 13:10:18 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:18 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:18 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 369(Long)
2025-11-06 13:10:18 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:18 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:18 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 357(Long)
2025-11-06 13:10:18 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:18 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:18 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 356(Long)
2025-11-06 13:10:18 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:18 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:18 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 355(Long)
2025-11-06 13:10:18 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:18 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:18 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 354(Long)
2025-11-06 13:10:18 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:18 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:18 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 353(Long)
2025-11-06 13:10:19 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:19 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:19 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 352(Long)
2025-11-06 13:10:19 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:19 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:19 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 351(Long)
2025-11-06 13:10:19 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:19 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:19 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 349(Long)
2025-11-06 13:10:19 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:19 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:19 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 348(Long)
2025-11-06 13:10:20 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:20 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:20 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 347(Long)
2025-11-06 13:10:20 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:20 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:20 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 345(Long)
2025-11-06 13:10:20 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:20 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:20 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 344(Long)
2025-11-06 13:10:20 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:20 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:20 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 343(Long)
2025-11-06 13:10:21 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:21 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:21 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 342(Long)
2025-11-06 13:10:21 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:21 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:21 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 340(Long)
2025-11-06 13:10:21 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:21 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:21 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 339(Long)
2025-11-06 13:10:21 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:21 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:21 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 338(Long)
2025-11-06 13:10:22 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:22 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:22 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 337(Long)
2025-11-06 13:10:22 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:22 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:22 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 336(Long)
2025-11-06 13:10:22 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:22 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:22 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 335(Long)
2025-11-06 13:10:22 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:22 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:22 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 334(Long)
2025-11-06 13:10:22 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:22 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:22 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 333(Long)
2025-11-06 13:10:22 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:22 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:22 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 332(Long)
2025-11-06 13:10:23 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:23 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:23 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 331(Long)
2025-11-06 13:10:23 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:23 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:23 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 330(Long)
2025-11-06 13:10:23 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:23 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:23 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 329(Long)
2025-11-06 13:10:23 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:23 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:23 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 328(Long)
2025-11-06 13:10:23 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:23 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:23 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 327(Long)
2025-11-06 13:10:23 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:23 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:23 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 326(Long)
2025-11-06 13:10:24 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:24 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:24 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 325(Long)
2025-11-06 13:10:24 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:24 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:24 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 324(Long)
2025-11-06 13:10:24 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:24 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:24 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 323(Long)
2025-11-06 13:10:24 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:24 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:24 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 322(Long)
2025-11-06 13:10:24 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:24 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:24 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 321(Long)
2025-11-06 13:10:24 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:24 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:24 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 320(Long)
2025-11-06 13:10:25 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:25 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:25 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 1(Long)
2025-11-06 13:10:25 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:25 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:10:25 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 379(Long), 1(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 354(Long), 337(Long), 342(Long), 344(Long), 332(Long), 334(Long), 320(Long), 329(Long), 333(Long), 321(Long)
2025-11-06 13:10:25 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 17
2025-11-06 13:10:25 [http-nio-8080-exec-6] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/system/user/list from 127.0.0.1 - 状态: 200 - 耗时: 9783ms
2025-11-06 13:10:25 [http-nio-8080-exec-6] WARN  c.d.c.i.PerformanceInterceptor - 检测到慢请求: POST /api/system/user/list from 127.0.0.1 - 耗时: 9783ms - 超过阈值: 3000ms
2025-11-06 13:10:28 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing POST /system/user/list
2025-11-06 13:10:28 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 13:10:28 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 13:10:28 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 13:10:28 [http-nio-8080-exec-8] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 13:10:28 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 13:10:28 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 13:10:29 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 13:10:29 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:29 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 13:10:29 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 13:10:29 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 13:10:29 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 13:10:29 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 13:10:29 [http-nio-8080-exec-8] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 13:10:29 [http-nio-8080-exec-8] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 13:10:29 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 13:10:29 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 13:10:29 [http-nio-8080-exec-8] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 13:10:29 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured POST /system/user/list
2025-11-06 13:10:29 [http-nio-8080-exec-8] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/system/user/list from 127.0.0.1
2025-11-06 13:10:29 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserList - ==>  Preparing: SELECT DISTINCT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_name, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur_filter ON u.user_id = ur_filter.user_id LEFT JOIN sys_role r_filter ON ur_filter.role_id = r_filter.role_id AND r_filter.del_flag = '0' WHERE u.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY u.create_time DESC
2025-11-06 13:10:29 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserList - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 13:10:30 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserList - <==      Total: 49
2025-11-06 13:10:30 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:30 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 381(Long)
2025-11-06 13:10:30 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:30 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:30 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 380(Long)
2025-11-06 13:10:30 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:30 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:30 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 379(Long)
2025-11-06 13:10:30 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:30 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:30 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 378(Long)
2025-11-06 13:10:31 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:31 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:31 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 377(Long)
2025-11-06 13:10:31 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:31 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:31 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 376(Long)
2025-11-06 13:10:32 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:32 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:32 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 375(Long)
2025-11-06 13:10:32 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:32 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:32 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 374(Long)
2025-11-06 13:10:32 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:32 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:32 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 373(Long)
2025-11-06 13:10:32 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:32 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:32 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 372(Long)
2025-11-06 13:10:32 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:32 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:32 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 371(Long)
2025-11-06 13:10:32 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:32 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:32 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 370(Long)
2025-11-06 13:10:33 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:33 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:33 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 369(Long)
2025-11-06 13:10:33 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:33 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:33 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 357(Long)
2025-11-06 13:10:33 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:33 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:33 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 356(Long)
2025-11-06 13:10:33 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:33 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:33 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 355(Long)
2025-11-06 13:10:34 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:34 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:34 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 354(Long)
2025-11-06 13:10:34 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:34 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:34 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 353(Long)
2025-11-06 13:10:34 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:34 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:34 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 352(Long)
2025-11-06 13:10:34 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:34 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:34 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 351(Long)
2025-11-06 13:10:35 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:35 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:35 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 349(Long)
2025-11-06 13:10:35 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:35 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:35 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 348(Long)
2025-11-06 13:10:35 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:35 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:35 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 347(Long)
2025-11-06 13:10:35 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:35 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:35 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 345(Long)
2025-11-06 13:10:35 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:35 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:35 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 344(Long)
2025-11-06 13:10:35 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:35 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:35 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 343(Long)
2025-11-06 13:10:36 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:36 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:36 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 342(Long)
2025-11-06 13:10:36 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:36 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:36 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 340(Long)
2025-11-06 13:10:36 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:36 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:36 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 339(Long)
2025-11-06 13:10:36 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:36 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:36 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 338(Long)
2025-11-06 13:10:36 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:36 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:36 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 337(Long)
2025-11-06 13:10:36 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:36 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:36 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 336(Long)
2025-11-06 13:10:37 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:37 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:37 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 335(Long)
2025-11-06 13:10:37 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:37 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:37 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 334(Long)
2025-11-06 13:10:37 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:37 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:37 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 333(Long)
2025-11-06 13:10:38 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:38 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:38 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 332(Long)
2025-11-06 13:10:38 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:38 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:38 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 331(Long)
2025-11-06 13:10:38 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:38 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:38 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 330(Long)
2025-11-06 13:10:38 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:38 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:38 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 329(Long)
2025-11-06 13:10:38 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:38 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:38 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 328(Long)
2025-11-06 13:10:38 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:38 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:38 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 327(Long)
2025-11-06 13:10:39 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:39 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:39 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 326(Long)
2025-11-06 13:10:39 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:39 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:39 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 325(Long)
2025-11-06 13:10:39 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:39 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:39 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 324(Long)
2025-11-06 13:10:39 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:39 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:39 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 323(Long)
2025-11-06 13:10:39 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:39 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:39 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 322(Long)
2025-11-06 13:10:40 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:40 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:40 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 321(Long)
2025-11-06 13:10:40 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:40 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:40 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 320(Long)
2025-11-06 13:10:40 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:40 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:40 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 1(Long)
2025-11-06 13:10:40 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:40 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:10:40 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 379(Long), 1(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 354(Long), 337(Long), 342(Long), 344(Long), 332(Long), 334(Long), 320(Long), 329(Long), 333(Long), 321(Long)
2025-11-06 13:10:40 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 17
2025-11-06 13:10:40 [http-nio-8080-exec-8] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/system/user/list from 127.0.0.1 - 状态: 200 - 耗时: 11008ms
2025-11-06 13:10:40 [http-nio-8080-exec-8] WARN  c.d.c.i.PerformanceInterceptor - 检测到慢请求: POST /api/system/user/list from 127.0.0.1 - 耗时: 11008ms - 超过阈值: 3000ms
2025-11-06 13:10:42 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing POST /system/user/list
2025-11-06 13:10:42 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 13:10:42 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 13:10:42 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 13:10:42 [http-nio-8080-exec-10] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 13:10:42 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 13:10:42 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 13:10:43 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 13:10:43 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:43 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 13:10:43 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 13:10:43 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 13:10:43 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 13:10:43 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 13:10:43 [http-nio-8080-exec-10] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 13:10:43 [http-nio-8080-exec-10] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 13:10:43 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 13:10:43 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 13:10:43 [http-nio-8080-exec-10] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 13:10:43 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured POST /system/user/list
2025-11-06 13:10:43 [http-nio-8080-exec-10] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/system/user/list from 127.0.0.1
2025-11-06 13:10:43 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserList - ==>  Preparing: SELECT DISTINCT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_name, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur_filter ON u.user_id = ur_filter.user_id LEFT JOIN sys_role r_filter ON ur_filter.role_id = r_filter.role_id AND r_filter.del_flag = '0' WHERE u.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY u.create_time DESC
2025-11-06 13:10:43 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserList - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 13:10:44 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserList - <==      Total: 49
2025-11-06 13:10:44 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:44 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 381(Long)
2025-11-06 13:10:44 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:44 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:44 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 380(Long)
2025-11-06 13:10:44 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:44 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:44 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 379(Long)
2025-11-06 13:10:44 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:44 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:44 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 378(Long)
2025-11-06 13:10:44 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:44 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:44 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 377(Long)
2025-11-06 13:10:44 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:44 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:44 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 376(Long)
2025-11-06 13:10:45 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:45 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:45 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 375(Long)
2025-11-06 13:10:45 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:45 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:45 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 374(Long)
2025-11-06 13:10:45 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:45 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:45 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 373(Long)
2025-11-06 13:10:45 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:45 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:45 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 372(Long)
2025-11-06 13:10:45 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:45 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:45 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 371(Long)
2025-11-06 13:10:45 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:45 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:45 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 370(Long)
2025-11-06 13:10:46 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:46 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:46 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 369(Long)
2025-11-06 13:10:46 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:46 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:46 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 357(Long)
2025-11-06 13:10:46 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:46 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:46 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 356(Long)
2025-11-06 13:10:46 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:46 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:46 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 355(Long)
2025-11-06 13:10:46 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:46 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:46 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 354(Long)
2025-11-06 13:10:46 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:46 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:46 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 353(Long)
2025-11-06 13:10:46 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:46 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:46 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 352(Long)
2025-11-06 13:10:47 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:47 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:47 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 351(Long)
2025-11-06 13:10:47 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:47 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:47 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 349(Long)
2025-11-06 13:10:47 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:47 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:47 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 348(Long)
2025-11-06 13:10:47 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:47 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:47 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 347(Long)
2025-11-06 13:10:48 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:48 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:48 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 345(Long)
2025-11-06 13:10:48 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:48 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:48 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 344(Long)
2025-11-06 13:10:48 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:48 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:48 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 343(Long)
2025-11-06 13:10:48 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:48 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:48 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 342(Long)
2025-11-06 13:10:48 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:48 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:48 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 340(Long)
2025-11-06 13:10:48 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:48 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:48 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 339(Long)
2025-11-06 13:10:49 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:49 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:49 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 338(Long)
2025-11-06 13:10:49 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:49 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:49 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 337(Long)
2025-11-06 13:10:49 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:49 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:49 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 336(Long)
2025-11-06 13:10:50 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:50 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:50 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 335(Long)
2025-11-06 13:10:50 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:50 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:50 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 334(Long)
2025-11-06 13:10:50 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:50 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:50 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 333(Long)
2025-11-06 13:10:50 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:50 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:50 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 332(Long)
2025-11-06 13:10:50 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:50 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:50 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 331(Long)
2025-11-06 13:10:50 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /system/user/list
2025-11-06 13:10:50 [http-nio-8080-exec-1] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 13:10:50 [http-nio-8080-exec-1] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 13:10:50 [http-nio-8080-exec-1] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 13:10:50 [http-nio-8080-exec-1] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 13:10:50 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 13:10:50 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 13:10:50 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:50 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:50 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 330(Long)
2025-11-06 13:10:51 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 13:10:51 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:51 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 13:10:51 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:51 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:51 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 329(Long)
2025-11-06 13:10:51 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 13:10:51 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 13:10:51 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 13:10:51 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:51 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:51 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 328(Long)
2025-11-06 13:10:51 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:51 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:51 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 327(Long)
2025-11-06 13:10:51 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 13:10:51 [http-nio-8080-exec-1] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 13:10:51 [http-nio-8080-exec-1] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 13:10:51 [http-nio-8080-exec-1] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 13:10:51 [http-nio-8080-exec-1] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 13:10:51 [http-nio-8080-exec-1] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 13:10:51 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /system/user/list
2025-11-06 13:10:51 [http-nio-8080-exec-1] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/system/user/list from 127.0.0.1
2025-11-06 13:10:51 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectUserList - ==>  Preparing: SELECT DISTINCT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_name, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur_filter ON u.user_id = ur_filter.user_id LEFT JOIN sys_role r_filter ON ur_filter.role_id = r_filter.role_id AND r_filter.del_flag = '0' WHERE u.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY u.create_time DESC
2025-11-06 13:10:51 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectUserList - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 13:10:51 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:51 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:51 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 326(Long)
2025-11-06 13:10:51 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:51 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:51 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 325(Long)
2025-11-06 13:10:51 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectUserList - <==      Total: 49
2025-11-06 13:10:51 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:51 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 381(Long)
2025-11-06 13:10:52 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:52 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:52 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 380(Long)
2025-11-06 13:10:52 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing POST /system/user/list
2025-11-06 13:10:52 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 13:10:52 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 13:10:52 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 13:10:52 [http-nio-8080-exec-9] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 13:10:52 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 13:10:52 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 13:10:52 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:52 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:52 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 324(Long)
2025-11-06 13:10:52 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 13:10:52 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:52 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 13:10:52 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:52 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:52 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 379(Long)
2025-11-06 13:10:52 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:52 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:52 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 323(Long)
2025-11-06 13:10:52 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 13:10:52 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 13:10:52 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 13:10:52 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:52 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:52 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 378(Long)
2025-11-06 13:10:52 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 13:10:52 [http-nio-8080-exec-9] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 13:10:52 [http-nio-8080-exec-9] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 13:10:52 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 13:10:52 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 13:10:52 [http-nio-8080-exec-9] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 13:10:52 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured POST /system/user/list
2025-11-06 13:10:52 [http-nio-8080-exec-9] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/system/user/list from 127.0.0.1
2025-11-06 13:10:52 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserList - ==>  Preparing: SELECT DISTINCT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_name, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur_filter ON u.user_id = ur_filter.user_id LEFT JOIN sys_role r_filter ON ur_filter.role_id = r_filter.role_id AND r_filter.del_flag = '0' WHERE u.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY u.create_time DESC
2025-11-06 13:10:52 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserList - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 13:10:53 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:53 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:53 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 377(Long)
2025-11-06 13:10:53 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:53 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:53 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 376(Long)
2025-11-06 13:10:53 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:53 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:53 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 322(Long)
2025-11-06 13:10:53 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:53 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:53 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 375(Long)
2025-11-06 13:10:53 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:53 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:53 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 321(Long)
2025-11-06 13:10:53 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserList - <==      Total: 49
2025-11-06 13:10:53 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:53 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 381(Long)
2025-11-06 13:10:53 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:53 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:53 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 374(Long)
2025-11-06 13:10:53 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:53 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:53 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:53 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:53 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 380(Long)
2025-11-06 13:10:53 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 320(Long)
2025-11-06 13:10:53 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:53 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:53 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 373(Long)
2025-11-06 13:10:53 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:53 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:53 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 1(Long)
2025-11-06 13:10:53 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:53 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:53 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 372(Long)
2025-11-06 13:10:53 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:53 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:10:53 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 379(Long), 1(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 354(Long), 337(Long), 342(Long), 344(Long), 332(Long), 334(Long), 320(Long), 329(Long), 333(Long), 321(Long)
2025-11-06 13:10:54 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:54 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:54 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 371(Long)
2025-11-06 13:10:54 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 17
2025-11-06 13:10:54 [http-nio-8080-exec-10] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/system/user/list from 127.0.0.1 - 状态: 200 - 耗时: 10696ms
2025-11-06 13:10:54 [http-nio-8080-exec-10] WARN  c.d.c.i.PerformanceInterceptor - 检测到慢请求: POST /api/system/user/list from 127.0.0.1 - 耗时: 10696ms - 超过阈值: 3000ms
2025-11-06 13:10:54 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:54 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:54 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 379(Long)
2025-11-06 13:10:54 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:54 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:54 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 370(Long)
2025-11-06 13:10:54 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:54 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:54 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 378(Long)
2025-11-06 13:10:54 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:54 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:54 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 369(Long)
2025-11-06 13:10:54 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:54 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:54 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 377(Long)
2025-11-06 13:10:54 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:54 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:54 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 357(Long)
2025-11-06 13:10:54 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:54 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:54 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 376(Long)
2025-11-06 13:10:54 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:54 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:54 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 356(Long)
2025-11-06 13:10:54 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:54 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:54 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 375(Long)
2025-11-06 13:10:54 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:54 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:54 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 355(Long)
2025-11-06 13:10:54 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:54 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:54 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 374(Long)
2025-11-06 13:10:55 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:55 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:55 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 354(Long)
2025-11-06 13:10:55 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:55 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:55 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 373(Long)
2025-11-06 13:10:55 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:55 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:55 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 353(Long)
2025-11-06 13:10:55 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:55 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:55 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 372(Long)
2025-11-06 13:10:55 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:55 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:55 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 352(Long)
2025-11-06 13:10:55 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:55 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:55 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 371(Long)
2025-11-06 13:10:55 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:55 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:55 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 351(Long)
2025-11-06 13:10:55 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:55 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:55 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 370(Long)
2025-11-06 13:10:55 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:55 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:55 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 349(Long)
2025-11-06 13:10:55 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:55 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:55 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 369(Long)
2025-11-06 13:10:55 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:55 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:55 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 348(Long)
2025-11-06 13:10:55 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:55 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:55 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 357(Long)
2025-11-06 13:10:56 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:56 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:56 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:56 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:56 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 356(Long)
2025-11-06 13:10:56 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 347(Long)
2025-11-06 13:10:56 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:56 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:56 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 355(Long)
2025-11-06 13:10:56 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:56 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:56 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 345(Long)
2025-11-06 13:10:56 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:56 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:56 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 354(Long)
2025-11-06 13:10:56 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:56 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:56 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 344(Long)
2025-11-06 13:10:56 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:56 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:56 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 353(Long)
2025-11-06 13:10:56 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:56 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:56 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 343(Long)
2025-11-06 13:10:56 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:56 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:56 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 352(Long)
2025-11-06 13:10:56 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:56 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:56 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 342(Long)
2025-11-06 13:10:56 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:56 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:56 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 351(Long)
2025-11-06 13:10:57 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:57 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:57 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 349(Long)
2025-11-06 13:10:57 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:57 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:57 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 348(Long)
2025-11-06 13:10:57 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:57 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:57 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 340(Long)
2025-11-06 13:10:57 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:57 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:57 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 347(Long)
2025-11-06 13:10:57 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:57 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:57 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 339(Long)
2025-11-06 13:10:57 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:57 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:57 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 345(Long)
2025-11-06 13:10:58 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:58 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:58 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 338(Long)
2025-11-06 13:10:58 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:58 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:58 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 344(Long)
2025-11-06 13:10:58 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:58 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:58 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 337(Long)
2025-11-06 13:10:58 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:58 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:58 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 343(Long)
2025-11-06 13:10:58 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:58 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:58 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 342(Long)
2025-11-06 13:10:58 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:58 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:58 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 336(Long)
2025-11-06 13:10:58 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:58 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:58 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 340(Long)
2025-11-06 13:10:58 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:58 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:58 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 335(Long)
2025-11-06 13:10:58 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:58 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:58 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 339(Long)
2025-11-06 13:10:58 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:58 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:58 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 334(Long)
2025-11-06 13:10:58 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:58 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:58 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 338(Long)
2025-11-06 13:10:58 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:58 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:58 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 333(Long)
2025-11-06 13:10:58 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:58 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:58 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 337(Long)
2025-11-06 13:10:59 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:59 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:59 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 332(Long)
2025-11-06 13:10:59 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:59 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:59 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 336(Long)
2025-11-06 13:10:59 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:59 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:59 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 331(Long)
2025-11-06 13:10:59 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:59 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:59 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 335(Long)
2025-11-06 13:10:59 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:59 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:59 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 330(Long)
2025-11-06 13:10:59 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:59 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:59 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 334(Long)
2025-11-06 13:10:59 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:59 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:59 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 329(Long)
2025-11-06 13:10:59 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:59 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:59 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 333(Long)
2025-11-06 13:10:59 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:59 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:59 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 328(Long)
2025-11-06 13:10:59 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:59 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:59 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 332(Long)
2025-11-06 13:10:59 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:59 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:59 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 327(Long)
2025-11-06 13:10:59 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:10:59 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:10:59 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 331(Long)
2025-11-06 13:11:00 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:00 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:00 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 326(Long)
2025-11-06 13:11:00 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:00 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:00 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 330(Long)
2025-11-06 13:11:00 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:00 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:00 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 329(Long)
2025-11-06 13:11:00 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:00 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:00 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 328(Long)
2025-11-06 13:11:00 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:00 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:00 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:00 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:00 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 327(Long)
2025-11-06 13:11:00 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 325(Long)
2025-11-06 13:11:00 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:00 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:00 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 326(Long)
2025-11-06 13:11:00 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:00 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:00 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 324(Long)
2025-11-06 13:11:00 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:00 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:00 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 325(Long)
2025-11-06 13:11:00 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:00 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:00 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 323(Long)
2025-11-06 13:11:01 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:01 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:01 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 324(Long)
2025-11-06 13:11:01 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:01 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:01 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 322(Long)
2025-11-06 13:11:01 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:01 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:01 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 323(Long)
2025-11-06 13:11:01 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:01 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:01 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 321(Long)
2025-11-06 13:11:01 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:01 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:01 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 322(Long)
2025-11-06 13:11:01 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:01 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:01 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 320(Long)
2025-11-06 13:11:01 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:01 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:01 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 321(Long)
2025-11-06 13:11:01 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:01 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:01 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 320(Long)
2025-11-06 13:11:01 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:01 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:01 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 1(Long)
2025-11-06 13:11:02 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:02 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:02 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 1(Long)
2025-11-06 13:11:02 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:02 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:11:02 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 379(Long), 1(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 354(Long), 337(Long), 342(Long), 344(Long), 332(Long), 334(Long), 320(Long), 329(Long), 333(Long), 321(Long)
2025-11-06 13:11:02 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 17
2025-11-06 13:11:02 [http-nio-8080-exec-1] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/system/user/list from 127.0.0.1 - 状态: 200 - 耗时: 11020ms
2025-11-06 13:11:02 [http-nio-8080-exec-1] WARN  c.d.c.i.PerformanceInterceptor - 检测到慢请求: POST /api/system/user/list from 127.0.0.1 - 耗时: 11020ms - 超过阈值: 3000ms
2025-11-06 13:11:02 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:02 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:11:02 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 379(Long), 1(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 354(Long), 337(Long), 342(Long), 344(Long), 332(Long), 334(Long), 320(Long), 329(Long), 333(Long), 321(Long)
2025-11-06 13:11:02 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 17
2025-11-06 13:11:02 [http-nio-8080-exec-9] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/system/user/list from 127.0.0.1 - 状态: 200 - 耗时: 9673ms
2025-11-06 13:11:02 [http-nio-8080-exec-9] WARN  c.d.c.i.PerformanceInterceptor - 检测到慢请求: POST /api/system/user/list from 127.0.0.1 - 耗时: 9673ms - 超过阈值: 3000ms
2025-11-06 13:11:10 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /system/user/list
2025-11-06 13:11:10 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 13:11:10 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 13:11:10 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 13:11:10 [http-nio-8080-exec-5] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 13:11:10 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 13:11:10 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 13:11:11 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 13:11:11 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:11 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 13:11:11 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 13:11:11 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 13:11:11 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 13:11:11 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 13:11:11 [http-nio-8080-exec-5] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 13:11:11 [http-nio-8080-exec-5] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 13:11:11 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 13:11:11 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 13:11:11 [http-nio-8080-exec-5] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 13:11:11 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /system/user/list
2025-11-06 13:11:11 [http-nio-8080-exec-5] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/system/user/list from 127.0.0.1
2025-11-06 13:11:11 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserList - ==>  Preparing: SELECT DISTINCT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_name, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur_filter ON u.user_id = ur_filter.user_id LEFT JOIN sys_role r_filter ON ur_filter.role_id = r_filter.role_id AND r_filter.del_flag = '0' WHERE u.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY u.create_time DESC
2025-11-06 13:11:11 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserList - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 13:11:11 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserList - <==      Total: 49
2025-11-06 13:11:11 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:11 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 381(Long)
2025-11-06 13:11:12 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:12 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:12 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 380(Long)
2025-11-06 13:11:12 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:12 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:12 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 379(Long)
2025-11-06 13:11:12 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:12 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:12 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 378(Long)
2025-11-06 13:11:12 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:12 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:12 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 377(Long)
2025-11-06 13:11:12 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:12 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:12 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 376(Long)
2025-11-06 13:11:12 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:12 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:12 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 375(Long)
2025-11-06 13:11:12 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:12 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:12 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 374(Long)
2025-11-06 13:11:13 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:13 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:13 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 373(Long)
2025-11-06 13:11:13 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:13 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:13 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 372(Long)
2025-11-06 13:11:13 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:13 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:13 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 371(Long)
2025-11-06 13:11:13 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:13 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:13 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 370(Long)
2025-11-06 13:11:13 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:13 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:13 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 369(Long)
2025-11-06 13:11:14 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:14 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:14 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 357(Long)
2025-11-06 13:11:14 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:14 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:14 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 356(Long)
2025-11-06 13:11:14 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:14 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:14 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 355(Long)
2025-11-06 13:11:14 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:14 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:14 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 354(Long)
2025-11-06 13:11:14 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:14 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:14 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 353(Long)
2025-11-06 13:11:14 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:14 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:14 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 352(Long)
2025-11-06 13:11:15 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:15 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:15 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 351(Long)
2025-11-06 13:11:15 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:15 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:15 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 349(Long)
2025-11-06 13:11:15 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:15 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:15 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 348(Long)
2025-11-06 13:11:15 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:15 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:15 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 347(Long)
2025-11-06 13:11:16 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:16 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:16 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 345(Long)
2025-11-06 13:11:16 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:16 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:16 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 344(Long)
2025-11-06 13:11:16 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:16 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:16 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 343(Long)
2025-11-06 13:11:16 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:16 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:16 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 342(Long)
2025-11-06 13:11:17 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:17 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:17 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 340(Long)
2025-11-06 13:11:17 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:17 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:17 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 339(Long)
2025-11-06 13:11:17 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:17 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:17 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 338(Long)
2025-11-06 13:11:17 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:17 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:17 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 337(Long)
2025-11-06 13:11:17 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:17 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:17 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 336(Long)
2025-11-06 13:11:17 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:17 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:17 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 335(Long)
2025-11-06 13:11:18 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:18 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:18 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 334(Long)
2025-11-06 13:11:18 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:18 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:18 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 333(Long)
2025-11-06 13:11:18 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:18 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:18 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 332(Long)
2025-11-06 13:11:18 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:18 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:18 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 331(Long)
2025-11-06 13:11:18 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:18 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:18 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 330(Long)
2025-11-06 13:11:18 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:18 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:18 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 329(Long)
2025-11-06 13:11:18 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:18 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:18 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 328(Long)
2025-11-06 13:11:19 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:19 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:19 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 327(Long)
2025-11-06 13:11:19 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:19 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:19 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 326(Long)
2025-11-06 13:11:19 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:19 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:19 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 325(Long)
2025-11-06 13:11:19 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:19 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:19 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 324(Long)
2025-11-06 13:11:20 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:20 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:20 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 323(Long)
2025-11-06 13:11:20 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:20 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:20 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 322(Long)
2025-11-06 13:11:20 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:20 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:20 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 321(Long)
2025-11-06 13:11:20 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:20 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:20 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 320(Long)
2025-11-06 13:11:20 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:20 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:20 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 1(Long)
2025-11-06 13:11:20 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:20 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:11:20 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 379(Long), 1(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 354(Long), 337(Long), 342(Long), 344(Long), 332(Long), 334(Long), 320(Long), 329(Long), 333(Long), 321(Long)
2025-11-06 13:11:21 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 17
2025-11-06 13:11:21 [http-nio-8080-exec-5] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/system/user/list from 127.0.0.1 - 状态: 200 - 耗时: 9694ms
2025-11-06 13:11:21 [http-nio-8080-exec-5] WARN  c.d.c.i.PerformanceInterceptor - 检测到慢请求: POST /api/system/user/list from 127.0.0.1 - 耗时: 9694ms - 超过阈值: 3000ms
2025-11-06 13:11:31 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /system/user/list
2025-11-06 13:11:31 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 13:11:31 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 13:11:31 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 13:11:31 [http-nio-8080-exec-3] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 13:11:31 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 13:11:31 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 13:11:32 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 13:11:32 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:32 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 13:11:32 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 13:11:32 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 13:11:32 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 13:11:32 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 13:11:32 [http-nio-8080-exec-3] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 13:11:32 [http-nio-8080-exec-3] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 13:11:32 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 13:11:32 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 13:11:32 [http-nio-8080-exec-3] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 13:11:32 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /system/user/list
2025-11-06 13:11:32 [http-nio-8080-exec-3] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/system/user/list from 127.0.0.1
2025-11-06 13:11:32 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserList - ==>  Preparing: SELECT DISTINCT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_name, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur_filter ON u.user_id = ur_filter.user_id LEFT JOIN sys_role r_filter ON ur_filter.role_id = r_filter.role_id AND r_filter.del_flag = '0' WHERE u.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY u.create_time DESC
2025-11-06 13:11:32 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserList - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 13:11:32 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserList - <==      Total: 49
2025-11-06 13:11:32 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:32 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 381(Long)
2025-11-06 13:11:33 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:33 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:33 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 380(Long)
2025-11-06 13:11:33 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:33 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:33 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 379(Long)
2025-11-06 13:11:33 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:33 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:33 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 378(Long)
2025-11-06 13:11:33 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:33 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:33 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 377(Long)
2025-11-06 13:11:33 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:33 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:33 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 376(Long)
2025-11-06 13:11:33 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:33 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:33 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 375(Long)
2025-11-06 13:11:34 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:34 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:34 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 374(Long)
2025-11-06 13:11:34 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:34 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:34 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 373(Long)
2025-11-06 13:11:34 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:34 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:34 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 372(Long)
2025-11-06 13:11:34 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:34 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:34 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 371(Long)
2025-11-06 13:11:34 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:34 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:34 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 370(Long)
2025-11-06 13:11:34 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:34 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:34 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 369(Long)
2025-11-06 13:11:35 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:35 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:35 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 357(Long)
2025-11-06 13:11:35 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:35 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:35 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 356(Long)
2025-11-06 13:11:35 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:35 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:35 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 355(Long)
2025-11-06 13:11:35 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:35 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:35 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 354(Long)
2025-11-06 13:11:36 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:36 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:36 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 353(Long)
2025-11-06 13:11:36 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:36 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:36 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 352(Long)
2025-11-06 13:11:36 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:36 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:36 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 351(Long)
2025-11-06 13:11:36 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:36 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:36 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 349(Long)
2025-11-06 13:11:36 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:36 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:36 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 348(Long)
2025-11-06 13:11:37 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:37 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:37 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 347(Long)
2025-11-06 13:11:37 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:37 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:37 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 345(Long)
2025-11-06 13:11:37 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:37 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:37 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 344(Long)
2025-11-06 13:11:37 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:37 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:37 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 343(Long)
2025-11-06 13:11:37 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:37 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:37 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 342(Long)
2025-11-06 13:11:38 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:38 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:38 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 340(Long)
2025-11-06 13:11:38 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:38 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:38 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 339(Long)
2025-11-06 13:11:39 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:39 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:39 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 338(Long)
2025-11-06 13:11:40 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:40 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:40 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 337(Long)
2025-11-06 13:11:40 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:40 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:40 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 336(Long)
2025-11-06 13:11:40 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:40 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:40 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 335(Long)
2025-11-06 13:11:40 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:40 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:40 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 334(Long)
2025-11-06 13:11:41 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:41 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:41 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 333(Long)
2025-11-06 13:11:41 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:41 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:41 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 332(Long)
2025-11-06 13:11:41 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:41 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:41 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 331(Long)
2025-11-06 13:11:41 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:41 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:41 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 330(Long)
2025-11-06 13:11:42 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:42 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:42 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 329(Long)
2025-11-06 13:11:42 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:42 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:42 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 328(Long)
2025-11-06 13:11:42 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:42 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:42 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 327(Long)
2025-11-06 13:11:42 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:42 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:42 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 326(Long)
2025-11-06 13:11:42 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:42 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:42 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 325(Long)
2025-11-06 13:11:42 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:42 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:42 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 324(Long)
2025-11-06 13:11:42 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:42 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:42 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 323(Long)
2025-11-06 13:11:43 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:43 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:43 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 322(Long)
2025-11-06 13:11:43 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:43 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:43 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 321(Long)
2025-11-06 13:11:43 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:43 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:43 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 320(Long)
2025-11-06 13:11:43 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:43 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:43 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 1(Long)
2025-11-06 13:11:43 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:43 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:11:43 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 379(Long), 1(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 354(Long), 337(Long), 342(Long), 344(Long), 332(Long), 334(Long), 320(Long), 329(Long), 333(Long), 321(Long)
2025-11-06 13:11:43 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 17
2025-11-06 13:11:43 [http-nio-8080-exec-3] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/system/user/list from 127.0.0.1 - 状态: 200 - 耗时: 11474ms
2025-11-06 13:11:43 [http-nio-8080-exec-3] WARN  c.d.c.i.PerformanceInterceptor - 检测到慢请求: POST /api/system/user/list from 127.0.0.1 - 耗时: 11474ms - 超过阈值: 3000ms
2025-11-06 13:11:52 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /auth/login
2025-11-06 13:11:52 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2025-11-06 13:11:52 [http-nio-8080-exec-7] WARN  c.d.c.s.JwtAuthenticationFilter - 从请求中未能提取到有效Token
2025-11-06 13:11:52 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-11-06 13:11:52 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2025-11-06 13:11:52 [http-nio-8080-exec-7] INFO  c.d.auth.controller.AuthController - 用户登录请求：admin
2025-11-06 13:11:52 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 13:11:52 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 13:11:52 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 13:11:52 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:52 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 1(Long)
2025-11-06 13:11:53 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:53 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 13:11:53 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 13:11:53 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 13:11:53 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserById - ==>  Preparing: SELECT DISTINCT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_name, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id WHERE u.user_id = ?
2025-11-06 13:11:53 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserById - ==> Parameters: 1(Long)
2025-11-06 13:11:53 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserById - <==      Total: 1
2025-11-06 13:11:53 [http-nio-8080-exec-7] DEBUG c.d.c.c.s.impl.SysUserServiceImpl - 查询用户成功：用户ID=1, 用户名=admin
2025-11-06 13:11:53 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.updateUserLoginInfo - ==>  Preparing: UPDATE sys_user SET login_ip = ?, login_time = ?, update_time = sysdate() WHERE user_id = ?
2025-11-06 13:11:53 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.updateUserLoginInfo - ==> Parameters: 0:0:0:0:0:0:0:1(String), 2025-11-06T13:11:53.458782(LocalDateTime), 1(Long)
2025-11-06 13:11:53 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.updateUserLoginInfo - <==    Updates: 1
2025-11-06 13:11:53 [http-nio-8080-exec-7] INFO  c.d.c.c.s.impl.SysUserServiceImpl - 用户登录日志 - 用户ID: 1, 用户名: admin, 部门: , 登录IP: 0:0:0:0:0:0:0:1, 登录地点: , 登录时间: 2025-11-06T13:11:53.774636
2025-11-06 13:11:53 [http-nio-8080-exec-7] DEBUG c.d.c.c.s.impl.SysUserServiceImpl - 记录用户登录信息成功：用户ID=1, 用户名=admin, 登录IP=0:0:0:0:0:0:0:1
2025-11-06 13:11:53 [http-nio-8080-exec-7] INFO  c.d.c.c.s.impl.SysUserServiceImpl - 用户登录成功：用户ID=1, 用户名=admin, 登录IP=0:0:0:0:0:0:0:1
2025-11-06 13:11:53 [http-nio-8080-exec-7] DEBUG c.d.c.s.impl.RedisSecurityCache - Stored user admin with token eyJhbGci... in Redis, expire in 21600 seconds
2025-11-06 13:11:53 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectCompleteUserInfo - ==>  Preparing: SELECT u.user_id as id, u.username, u.nickname, u.real_name as realName, u.email, u.phone, u.avatar, u.user_type as userType, u.status, u.parent_user_id as parentUserId, u.invitation_code as invitationCode, u.login_ip as loginIp, u.login_time as loginTime, u.create_time as createTime, u.update_time as updateTime FROM sys_user u WHERE u.user_id = ? AND u.status = '0'
2025-11-06 13:11:53 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectCompleteUserInfo - ==> Parameters: 1(Long)
2025-11-06 13:11:53 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectCompleteUserInfo - <==      Total: 1
2025-11-06 13:11:53 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:53 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 1(Long)
2025-11-06 13:11:54 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:11:54 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 13:11:54 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 13:11:54 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 13:11:54 [http-nio-8080-exec-7] INFO  c.d.auth.controller.AuthController - 用户 admin 登录成功，IP：0:0:0:0:0:0:0:1
2025-11-06 13:11:54 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/adminAgentPerformanceStatistics
2025-11-06 13:11:54 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 13:11:54 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/adminMerchantsAssetStatistics
2025-11-06 13:11:54 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/adminMerchantsPerformanceStatistics
2025-11-06 13:11:54 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 13:11:54 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 13:11:54 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 13:11:54 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 13:11:54 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 13:11:54 [http-nio-8080-exec-2] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 13:11:54 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 13:11:54 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 13:11:54 [http-nio-8080-exec-8] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 13:11:54 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 13:11:54 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 13:11:54 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 13:11:54 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 13:11:54 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 13:11:54 [http-nio-8080-exec-6] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 13:11:54 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 13:11:54 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 13:11:54 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 13:11:54 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:54 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 13:11:54 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 13:11:54 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:54 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 13:11:54 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 13:11:54 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 13:11:54 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 13:11:54 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 13:11:54 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 13:11:54 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 13:11:54 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 13:11:54 [http-nio-8080-exec-8] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 13:11:54 [http-nio-8080-exec-8] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 13:11:54 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 13:11:54 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 13:11:54 [http-nio-8080-exec-8] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 13:11:54 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/adminMerchantsAssetStatistics
2025-11-06 13:11:54 [http-nio-8080-exec-8] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/adminMerchantsAssetStatistics from 127.0.0.1
2025-11-06 13:11:54 [http-nio-8080-exec-8] INFO  c.deepreach.common.aspect.LogAspect - LogAspect doBefore 被触发: 统计管理 - getAdminMerchantsAssetStatistics
2025-11-06 13:11:54 [http-nio-8080-exec-8] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志前置处理完成: 统计管理
2025-11-06 13:11:54 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:11:54 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 13:11:54 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 13:11:54 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:54 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 13:11:55 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 49
2025-11-06 13:11:55 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.sumTotalRechargeByUserIds - ==>  Preparing: SELECT b.user_id AS userId, COALESCE(b.total_recharge, 0) AS totalRecharge FROM user_dr_balance b WHERE b.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:11:55 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.sumTotalRechargeByUserIds - ==> Parameters: 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 330(Long), 331(Long), 335(Long), 336(Long), 337(Long), 339(Long), 342(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long)
2025-11-06 13:11:55 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 13:11:55 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 13:11:55 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 13:11:55 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.sumTotalRechargeByUserIds - <==      Total: 13
2025-11-06 13:11:55 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.A.selectCommissionByUserIds - ==>  Preparing: SELECT agent_user_id AS userId, COALESCE(total_commission, 0) AS totalCommission, COALESCE(settled_commission, 0) AS settledCommission FROM dr_agent_commission_account WHERE agent_user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:11:55 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.A.selectCommissionByUserIds - ==> Parameters: 320(Long), 332(Long), 354(Long), 356(Long), 321(Long), 333(Long), 344(Long), 355(Long), 322(Long), 329(Long), 334(Long), 338(Long), 345(Long), 357(Long)
2025-11-06 13:11:55 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 13:11:55 [http-nio-8080-exec-2] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 13:11:55 [http-nio-8080-exec-2] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 13:11:55 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 13:11:55 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 13:11:55 [http-nio-8080-exec-2] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 13:11:55 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/adminAgentPerformanceStatistics
2025-11-06 13:11:55 [http-nio-8080-exec-2] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/adminAgentPerformanceStatistics from 127.0.0.1
2025-11-06 13:11:55 [http-nio-8080-exec-2] INFO  c.deepreach.common.aspect.LogAspect - LogAspect doBefore 被触发: 统计管理 - getAdminAgentPerformanceStatistics
2025-11-06 13:11:55 [http-nio-8080-exec-2] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志前置处理完成: 统计管理
2025-11-06 13:11:55 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:11:55 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 13:11:55 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 13:11:55 [http-nio-8080-exec-6] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 13:11:55 [http-nio-8080-exec-6] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 13:11:55 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 13:11:55 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 13:11:55 [http-nio-8080-exec-6] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 13:11:55 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/adminMerchantsPerformanceStatistics
2025-11-06 13:11:55 [http-nio-8080-exec-6] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/adminMerchantsPerformanceStatistics from 127.0.0.1
2025-11-06 13:11:55 [http-nio-8080-exec-6] INFO  c.deepreach.common.aspect.LogAspect - LogAspect doBefore 被触发: 统计管理 - getAdminMerchantsPerformanceStatistics
2025-11-06 13:11:55 [http-nio-8080-exec-6] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志前置处理完成: 统计管理
2025-11-06 13:11:55 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:11:55 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 13:11:55 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 49
2025-11-06 13:11:55 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.sumTotalRechargeByUserIds - ==>  Preparing: SELECT b.user_id AS userId, COALESCE(b.total_recharge, 0) AS totalRecharge FROM user_dr_balance b WHERE b.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:11:55 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.sumTotalRechargeByUserIds - ==> Parameters: 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 330(Long), 331(Long), 335(Long), 336(Long), 337(Long), 339(Long), 342(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 340(Long), 343(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 353(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 380(Long), 381(Long)
2025-11-06 13:11:55 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 49
2025-11-06 13:11:55 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.sumTotalRechargeByUserIds - ==>  Preparing: SELECT b.user_id AS userId, COALESCE(b.total_recharge, 0) AS totalRecharge FROM user_dr_balance b WHERE b.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:11:55 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.sumTotalRechargeByUserIds - ==> Parameters: 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 330(Long), 331(Long), 335(Long), 336(Long), 337(Long), 339(Long), 342(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long)
2025-11-06 13:11:55 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.sumTotalRechargeByUserIds - <==      Total: 13
2025-11-06 13:11:55 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.A.selectCommissionByUserIds - ==>  Preparing: SELECT agent_user_id AS userId, COALESCE(total_commission, 0) AS totalCommission, COALESCE(settled_commission, 0) AS settledCommission FROM dr_agent_commission_account WHERE agent_user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:11:55 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.A.selectCommissionByUserIds - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 13:11:55 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.sumTotalRechargeByUserIds - <==      Total: 13
2025-11-06 13:11:55 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.countAiCharactersByType - ==>  Preparing: SELECT COALESCE(c.type, 'unknown') AS type, COUNT(*) AS count FROM ai_character c WHERE c.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) GROUP BY COALESCE(c.type, 'unknown')
2025-11-06 13:11:55 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.countAiCharactersByType - ==> Parameters: 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 330(Long), 331(Long), 335(Long), 336(Long), 337(Long), 339(Long), 342(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 340(Long), 343(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 353(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 380(Long), 381(Long)
2025-11-06 13:11:55 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.A.selectCommissionByUserIds - <==      Total: 6
2025-11-06 13:11:55 [http-nio-8080-exec-8] INFO  c.deepreach.common.aspect.LogAspect - 保存操作日志: 统计管理 - admin - /api/statistics/adminMerchantsAssetStatistics - 成功
2025-11-06 13:11:55 [http-nio-8080-exec-8] INFO  c.deepreach.common.aspect.LogAspect - 操作日志对象详情: operId=null, title=统计管理, operName=admin, operUrl=/api/statistics/adminMerchantsAssetStatistics, status=0
2025-11-06 13:11:55 [http-nio-8080-exec-8] INFO  c.deepreach.common.aspect.LogAspect - 准备异步保存操作日志到数据库...
2025-11-06 13:11:55 [http-nio-8080-exec-8] INFO  c.deepreach.common.aspect.LogAspect - 操作日志异步保存任务已提交
2025-11-06 13:11:55 [http-nio-8080-exec-8] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志返回处理完成: 统计管理
2025-11-06 13:11:55 [pool-3-thread-4] DEBUG c.d.c.c.m.S.insertOperLog - ==>  Preparing: INSERT INTO sys_oper_log ( title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2025-11-06 13:11:55 [http-nio-8080-exec-8] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/adminMerchantsAssetStatistics from 127.0.0.1 - 状态: 200 - 耗时: 892ms
2025-11-06 13:11:55 [pool-3-thread-4] DEBUG c.d.c.c.m.S.insertOperLog - ==> Parameters: 统计管理(String), 0(Integer), com.deepreach.common.core.controller.StatisticsController.getAdminMerchantsAssetStatistics(String), GET(String), 1(Integer), admin(String), ADMIN(String), /api/statistics/adminMerchantsAssetStatistics(String), 127.0.0.1(String), null, (String), {"code":200,"msg":"操作成功","data":{"totalRecharge":151000.00,"settledCommission":800.00,"netValue":150200.00},"timestamp":1762405915759,"error":false,"success":true}(String), 0(Integer), null, 2025-11-06T13:11:54.871676(LocalDateTime), 888(Long)
2025-11-06 13:11:55 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.A.selectCommissionByUserIds - <==      Total: 6
2025-11-06 13:11:55 [http-nio-8080-exec-2] INFO  c.deepreach.common.aspect.LogAspect - 保存操作日志: 统计管理 - admin - /api/statistics/adminAgentPerformanceStatistics - 成功
2025-11-06 13:11:55 [http-nio-8080-exec-2] INFO  c.deepreach.common.aspect.LogAspect - 操作日志对象详情: operId=null, title=统计管理, operName=admin, operUrl=/api/statistics/adminAgentPerformanceStatistics, status=0
2025-11-06 13:11:55 [http-nio-8080-exec-2] INFO  c.deepreach.common.aspect.LogAspect - 准备异步保存操作日志到数据库...
2025-11-06 13:11:55 [http-nio-8080-exec-2] INFO  c.deepreach.common.aspect.LogAspect - 操作日志异步保存任务已提交
2025-11-06 13:11:55 [http-nio-8080-exec-2] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志返回处理完成: 统计管理
2025-11-06 13:11:55 [pool-3-thread-5] DEBUG c.d.c.c.m.S.insertOperLog - ==>  Preparing: INSERT INTO sys_oper_log ( title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2025-11-06 13:11:55 [pool-3-thread-5] DEBUG c.d.c.c.m.S.insertOperLog - ==> Parameters: 统计管理(String), 0(Integer), com.deepreach.common.core.controller.StatisticsController.getAdminAgentPerformanceStatistics(String), GET(String), 1(Integer), admin(String), ADMIN(String), /api/statistics/adminAgentPerformanceStatistics(String), 127.0.0.1(String), null, (String), {"code":200,"msg":"操作成功","data":{"generalAgent":{"identity":"agent_level_1","identityDisplay":"总代","agentCount":4,"totalRecharge":132000.00,"totalCommission":33200.00},"level1Agent":{"identity":"agent_level_2","identityDisplay":"一级代理","agentCount":4,"totalRecharge":33000.00,"totalCommission":3300.00},"level2Agent":{"identity":"agent_level_3","identityDisplay":"二级代理","agentCount":6,"totalRecharge":33000.00,"totalCommission":3300.00},"total":{"identity":"total","identityDisplay":"合计","agentCount":14,"totalRecharge":198000.00,"totalCommission":39800.00}},"timestamp":1762405915798,"error":false,"success":true}(String), 0(Integer), null, 2025-11-06T13:11:55.310744(LocalDateTime), 487(Long)
2025-11-06 13:11:55 [http-nio-8080-exec-2] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/adminAgentPerformanceStatistics from 127.0.0.1 - 状态: 200 - 耗时: 489ms
2025-11-06 13:11:55 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.countAiCharactersByType - <==      Total: 1
2025-11-06 13:11:55 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectAllPlatforms - ==>  Preparing: SELECT platform_id AS platformId, COALESCE(platform_name, 'UNKNOWN_PLATFORM') AS platformName, COALESCE(platform_type, 'unknown') AS platformType FROM platform WHERE status = '0' ORDER BY platform_id
2025-11-06 13:11:55 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectAllPlatforms - ==> Parameters: 
2025-11-06 13:11:56 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectAllPlatforms - <==      Total: 8
2025-11-06 13:11:56 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.countInstancesByType - ==>  Preparing: SELECT i.instance_type AS instanceType, COUNT(*) AS count FROM ai_instance i WHERE i.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) GROUP BY i.instance_type
2025-11-06 13:11:56 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.countInstancesByType - ==> Parameters: 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 330(Long), 331(Long), 335(Long), 336(Long), 337(Long), 339(Long), 342(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 340(Long), 343(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 353(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 380(Long), 381(Long)
2025-11-06 13:11:56 [pool-3-thread-4] DEBUG c.d.c.c.m.S.insertOperLog - <==    Updates: 1
2025-11-06 13:11:56 [pool-3-thread-5] DEBUG c.d.c.c.m.S.insertOperLog - <==    Updates: 1
2025-11-06 13:11:56 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.countInstancesByType - <==      Total: 2
2025-11-06 13:11:56 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.countInstancesByPlatform - ==>  Preparing: SELECT COALESCE(i.platform_id, 0) AS platformId, COALESCE(p.platform_name, 'UNKNOWN_PLATFORM') AS platformName, COUNT(*) AS count FROM ai_instance i LEFT JOIN platform p ON i.platform_id = p.platform_id WHERE i.instance_type = ? AND i.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) GROUP BY COALESCE(i.platform_id, 0), COALESCE(p.platform_name, 'UNKNOWN_PLATFORM')
2025-11-06 13:11:56 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.countInstancesByPlatform - ==> Parameters: 0(String), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 330(Long), 331(Long), 335(Long), 336(Long), 337(Long), 339(Long), 342(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 340(Long), 343(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 353(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 380(Long), 381(Long)
2025-11-06 13:11:56 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.countInstancesByPlatform - <==      Total: 2
2025-11-06 13:11:56 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.countInstancesByPlatform - ==>  Preparing: SELECT COALESCE(i.platform_id, 0) AS platformId, COALESCE(p.platform_name, 'UNKNOWN_PLATFORM') AS platformName, COUNT(*) AS count FROM ai_instance i LEFT JOIN platform p ON i.platform_id = p.platform_id WHERE i.instance_type = ? AND i.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) GROUP BY COALESCE(i.platform_id, 0), COALESCE(p.platform_name, 'UNKNOWN_PLATFORM')
2025-11-06 13:11:56 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.countInstancesByPlatform - ==> Parameters: 1(String), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 330(Long), 331(Long), 335(Long), 336(Long), 337(Long), 339(Long), 342(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 340(Long), 343(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 353(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 380(Long), 381(Long)
2025-11-06 13:11:56 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.countInstancesByPlatform - <==      Total: 3
2025-11-06 13:11:56 [http-nio-8080-exec-6] INFO  c.deepreach.common.aspect.LogAspect - 保存操作日志: 统计管理 - admin - /api/statistics/adminMerchantsPerformanceStatistics - 成功
2025-11-06 13:11:56 [http-nio-8080-exec-6] INFO  c.deepreach.common.aspect.LogAspect - 操作日志对象详情: operId=null, title=统计管理, operName=admin, operUrl=/api/statistics/adminMerchantsPerformanceStatistics, status=0
2025-11-06 13:11:56 [http-nio-8080-exec-6] INFO  c.deepreach.common.aspect.LogAspect - 准备异步保存操作日志到数据库...
2025-11-06 13:11:56 [http-nio-8080-exec-6] INFO  c.deepreach.common.aspect.LogAspect - 操作日志异步保存任务已提交
2025-11-06 13:11:56 [http-nio-8080-exec-6] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志返回处理完成: 统计管理
2025-11-06 13:11:56 [pool-3-thread-1] DEBUG c.d.c.c.m.S.insertOperLog - ==>  Preparing: INSERT INTO sys_oper_log ( title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2025-11-06 13:11:56 [http-nio-8080-exec-6] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/adminMerchantsPerformanceStatistics from 127.0.0.1 - 状态: 200 - 耗时: 1129ms
2025-11-06 13:11:56 [pool-3-thread-1] DEBUG c.d.c.c.m.S.insertOperLog - ==> Parameters: 统计管理(String), 0(Integer), com.deepreach.common.core.controller.StatisticsController.getAdminMerchantsPerformanceStatistics(String), GET(String), 1(Integer), admin(String), ADMIN(String), /api/statistics/adminMerchantsPerformanceStatistics(String), 127.0.0.1(String), null, (String), {"code":200,"msg":"操作成功","data":{"merchantOverview":{"merchantCount":19,"employeeCount":15,"totalPerformance":151000.00},"aiCharacterOverview":{"totalCharacters":9,"socialAiCount":9,"customerServiceAiCount":0},"marketingInstanceOverview":{"instanceCount":13,"platformBreakdown":{"WhatsApp":7,"Telegram":6}},"prospectingInstanceOverview":{"instanceCount":7,"platformBreakdown":{"SMS":3,"Facebook":3,"Instagram":0,"TikTok":1,"X":0,"GoogleVoice":0}}},"timestamp":1762405916503,"error":false,"success":true}(String), 0(Integer), null, 2025-11-06T13:11:55.378530(LocalDateTime), 1124(Long)
2025-11-06 13:11:56 [pool-3-thread-1] DEBUG c.d.c.c.m.S.insertOperLog - <==    Updates: 1
2025-11-06 13:11:59 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /system/user/list
2025-11-06 13:11:59 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 13:11:59 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 13:11:59 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 13:11:59 [http-nio-8080-exec-5] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 13:11:59 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 13:11:59 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 13:11:59 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 13:11:59 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:11:59 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 13:11:59 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 13:11:59 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 13:11:59 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 13:11:59 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 13:11:59 [http-nio-8080-exec-5] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 13:11:59 [http-nio-8080-exec-5] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 13:11:59 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 13:11:59 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 13:11:59 [http-nio-8080-exec-5] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 13:11:59 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /system/user/list
2025-11-06 13:11:59 [http-nio-8080-exec-5] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/system/user/list from 127.0.0.1
2025-11-06 13:11:59 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserList - ==>  Preparing: SELECT DISTINCT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_name, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur_filter ON u.user_id = ur_filter.user_id LEFT JOIN sys_role r_filter ON ur_filter.role_id = r_filter.role_id AND r_filter.del_flag = '0' WHERE u.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY u.create_time DESC
2025-11-06 13:11:59 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserList - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 13:12:00 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserList - <==      Total: 49
2025-11-06 13:12:00 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:00 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 381(Long)
2025-11-06 13:12:00 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:00 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:00 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 380(Long)
2025-11-06 13:12:00 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:00 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:00 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 379(Long)
2025-11-06 13:12:01 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:01 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:01 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 378(Long)
2025-11-06 13:12:01 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:01 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:01 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 377(Long)
2025-11-06 13:12:01 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:01 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:01 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 376(Long)
2025-11-06 13:12:01 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:01 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:01 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 375(Long)
2025-11-06 13:12:02 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:02 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:02 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 374(Long)
2025-11-06 13:12:02 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:02 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:02 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 373(Long)
2025-11-06 13:12:02 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:02 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:02 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 372(Long)
2025-11-06 13:12:02 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:02 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:02 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 371(Long)
2025-11-06 13:12:02 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:02 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:02 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 370(Long)
2025-11-06 13:12:02 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:02 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:02 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 369(Long)
2025-11-06 13:12:03 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:03 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:03 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 357(Long)
2025-11-06 13:12:03 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:03 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:03 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 356(Long)
2025-11-06 13:12:03 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:03 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:03 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 355(Long)
2025-11-06 13:12:03 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:03 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:03 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 354(Long)
2025-11-06 13:12:04 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:04 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:04 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 353(Long)
2025-11-06 13:12:04 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:04 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:04 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 352(Long)
2025-11-06 13:12:04 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:04 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:04 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 351(Long)
2025-11-06 13:12:04 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:04 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:04 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 349(Long)
2025-11-06 13:12:05 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:05 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:05 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 348(Long)
2025-11-06 13:12:05 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:05 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:05 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 347(Long)
2025-11-06 13:12:05 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:05 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:05 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 345(Long)
2025-11-06 13:12:05 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:05 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:05 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 344(Long)
2025-11-06 13:12:05 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:05 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:05 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 343(Long)
2025-11-06 13:12:05 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:05 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:05 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 342(Long)
2025-11-06 13:12:06 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:06 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:06 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 340(Long)
2025-11-06 13:12:06 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:06 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:06 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 339(Long)
2025-11-06 13:12:06 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:06 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:06 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 338(Long)
2025-11-06 13:12:06 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:06 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:06 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 337(Long)
2025-11-06 13:12:07 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:07 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:07 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 336(Long)
2025-11-06 13:12:07 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:07 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:07 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 335(Long)
2025-11-06 13:12:07 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:07 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:07 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 334(Long)
2025-11-06 13:12:07 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:07 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:07 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 333(Long)
2025-11-06 13:12:07 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:07 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:07 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 332(Long)
2025-11-06 13:12:07 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:07 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:07 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 331(Long)
2025-11-06 13:12:07 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:07 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:07 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 330(Long)
2025-11-06 13:12:08 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:08 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:08 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 329(Long)
2025-11-06 13:12:08 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:08 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:08 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 328(Long)
2025-11-06 13:12:08 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:08 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:08 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 327(Long)
2025-11-06 13:12:08 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:08 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:08 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 326(Long)
2025-11-06 13:12:09 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:09 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:09 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 325(Long)
2025-11-06 13:12:09 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:09 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:09 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 324(Long)
2025-11-06 13:12:09 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:09 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:09 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 323(Long)
2025-11-06 13:12:09 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:09 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:09 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 322(Long)
2025-11-06 13:12:09 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:09 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:09 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 321(Long)
2025-11-06 13:12:10 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:10 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:10 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 320(Long)
2025-11-06 13:12:10 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:10 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:10 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 1(Long)
2025-11-06 13:12:10 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:10 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:12:10 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 379(Long), 1(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 354(Long), 337(Long), 342(Long), 344(Long), 332(Long), 334(Long), 320(Long), 329(Long), 333(Long), 321(Long)
2025-11-06 13:12:10 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 17
2025-11-06 13:12:10 [http-nio-8080-exec-5] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/system/user/list from 127.0.0.1 - 状态: 200 - 耗时: 11153ms
2025-11-06 13:12:10 [http-nio-8080-exec-5] WARN  c.d.c.i.PerformanceInterceptor - 检测到慢请求: POST /api/system/user/list from 127.0.0.1 - 耗时: 11153ms - 超过阈值: 3000ms
2025-11-06 13:12:19 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /system/user/list
2025-11-06 13:12:19 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 13:12:19 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 13:12:19 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 13:12:19 [http-nio-8080-exec-3] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 13:12:19 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 13:12:19 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 13:12:19 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 13:12:19 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:19 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 13:12:19 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 13:12:19 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 13:12:19 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 13:12:20 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 13:12:20 [http-nio-8080-exec-3] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 13:12:20 [http-nio-8080-exec-3] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 13:12:20 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 13:12:20 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 13:12:20 [http-nio-8080-exec-3] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 13:12:20 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /system/user/list
2025-11-06 13:12:20 [http-nio-8080-exec-3] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/system/user/list from 127.0.0.1
2025-11-06 13:12:20 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserList - ==>  Preparing: SELECT DISTINCT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_name, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur_filter ON u.user_id = ur_filter.user_id LEFT JOIN sys_role r_filter ON ur_filter.role_id = r_filter.role_id AND r_filter.del_flag = '0' WHERE u.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY u.create_time DESC
2025-11-06 13:12:20 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserList - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 13:12:20 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserList - <==      Total: 49
2025-11-06 13:12:20 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:20 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 381(Long)
2025-11-06 13:12:20 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:20 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:20 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 380(Long)
2025-11-06 13:12:20 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:20 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:20 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 379(Long)
2025-11-06 13:12:21 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:21 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:21 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 378(Long)
2025-11-06 13:12:21 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:21 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:21 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 377(Long)
2025-11-06 13:12:21 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:21 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:21 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 376(Long)
2025-11-06 13:12:21 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:21 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:21 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 375(Long)
2025-11-06 13:12:22 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:22 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:22 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 374(Long)
2025-11-06 13:12:22 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:22 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:22 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 373(Long)
2025-11-06 13:12:22 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:22 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:22 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 372(Long)
2025-11-06 13:12:22 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:22 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:22 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 371(Long)
2025-11-06 13:12:23 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:23 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:23 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 370(Long)
2025-11-06 13:12:23 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:23 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:23 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 369(Long)
2025-11-06 13:12:23 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:23 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:23 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 357(Long)
2025-11-06 13:12:24 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:24 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:24 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 356(Long)
2025-11-06 13:12:24 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:24 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:24 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 355(Long)
2025-11-06 13:12:24 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:24 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:24 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 354(Long)
2025-11-06 13:12:24 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:24 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:24 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 353(Long)
2025-11-06 13:12:25 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:25 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:25 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 352(Long)
2025-11-06 13:12:25 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:25 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:25 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 351(Long)
2025-11-06 13:12:25 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:25 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:25 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 349(Long)
2025-11-06 13:12:26 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:26 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:26 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 348(Long)
2025-11-06 13:12:26 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:26 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:26 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 347(Long)
2025-11-06 13:12:26 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:26 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:26 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 345(Long)
2025-11-06 13:12:26 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:26 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:26 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 344(Long)
2025-11-06 13:12:27 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:27 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:27 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 343(Long)
2025-11-06 13:12:27 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:27 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:27 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 342(Long)
2025-11-06 13:12:27 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:27 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:27 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 340(Long)
2025-11-06 13:12:27 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:27 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:27 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 339(Long)
2025-11-06 13:12:28 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:28 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:28 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 338(Long)
2025-11-06 13:12:28 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:28 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:28 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 337(Long)
2025-11-06 13:12:28 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:28 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:28 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 336(Long)
2025-11-06 13:12:28 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:28 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:28 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 335(Long)
2025-11-06 13:12:29 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:29 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:29 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 334(Long)
2025-11-06 13:12:29 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:29 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:29 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 333(Long)
2025-11-06 13:12:29 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:29 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:29 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 332(Long)
2025-11-06 13:12:29 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:29 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:29 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 331(Long)
2025-11-06 13:12:29 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:29 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:29 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 330(Long)
2025-11-06 13:12:29 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:29 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:29 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 329(Long)
2025-11-06 13:12:30 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:30 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:30 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 328(Long)
2025-11-06 13:12:30 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:30 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:30 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 327(Long)
2025-11-06 13:12:30 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:30 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:30 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 326(Long)
2025-11-06 13:12:30 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:30 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:30 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 325(Long)
2025-11-06 13:12:31 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:31 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:31 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 324(Long)
2025-11-06 13:12:31 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:31 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:31 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 323(Long)
2025-11-06 13:12:31 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:31 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:31 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 322(Long)
2025-11-06 13:12:31 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:31 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:31 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 321(Long)
2025-11-06 13:12:31 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:31 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:31 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 320(Long)
2025-11-06 13:12:31 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:31 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:31 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 1(Long)
2025-11-06 13:12:32 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:32 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:12:32 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 379(Long), 1(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 354(Long), 337(Long), 342(Long), 344(Long), 332(Long), 334(Long), 320(Long), 329(Long), 333(Long), 321(Long)
2025-11-06 13:12:32 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 17
2025-11-06 13:12:32 [http-nio-8080-exec-3] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/system/user/list from 127.0.0.1 - 状态: 200 - 耗时: 12062ms
2025-11-06 13:12:32 [http-nio-8080-exec-3] WARN  c.d.c.i.PerformanceInterceptor - 检测到慢请求: POST /api/system/user/list from 127.0.0.1 - 耗时: 12062ms - 超过阈值: 3000ms
2025-11-06 13:12:44 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /auth/login
2025-11-06 13:12:44 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2025-11-06 13:12:44 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 13:12:44 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 13:12:44 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 13:12:44 [http-nio-8080-exec-7] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 13:12:44 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 13:12:44 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 13:12:44 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 13:12:44 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:44 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 13:12:44 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 13:12:44 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 13:12:44 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 13:12:44 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 13:12:44 [http-nio-8080-exec-7] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 13:12:44 [http-nio-8080-exec-7] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 13:12:44 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 13:12:44 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 13:12:44 [http-nio-8080-exec-7] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 13:12:44 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2025-11-06 13:12:44 [http-nio-8080-exec-7] INFO  c.d.auth.controller.AuthController - 用户登录请求：admin
2025-11-06 13:12:44 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 13:12:44 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 13:12:45 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 13:12:45 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:45 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 1(Long)
2025-11-06 13:12:45 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:45 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 13:12:45 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 13:12:45 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 13:12:45 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserById - ==>  Preparing: SELECT DISTINCT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_name, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id WHERE u.user_id = ?
2025-11-06 13:12:45 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserById - ==> Parameters: 1(Long)
2025-11-06 13:12:45 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserById - <==      Total: 1
2025-11-06 13:12:45 [http-nio-8080-exec-7] DEBUG c.d.c.c.s.impl.SysUserServiceImpl - 查询用户成功：用户ID=1, 用户名=admin
2025-11-06 13:12:45 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.updateUserLoginInfo - ==>  Preparing: UPDATE sys_user SET login_ip = ?, login_time = ?, update_time = sysdate() WHERE user_id = ?
2025-11-06 13:12:45 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.updateUserLoginInfo - ==> Parameters: 0:0:0:0:0:0:0:1(String), 2025-11-06T13:12:45.895570(LocalDateTime), 1(Long)
2025-11-06 13:12:46 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.updateUserLoginInfo - <==    Updates: 1
2025-11-06 13:12:46 [http-nio-8080-exec-7] INFO  c.d.c.c.s.impl.SysUserServiceImpl - 用户登录日志 - 用户ID: 1, 用户名: admin, 部门: , 登录IP: 0:0:0:0:0:0:0:1, 登录地点: , 登录时间: 2025-11-06T13:12:46.213076
2025-11-06 13:12:46 [http-nio-8080-exec-7] DEBUG c.d.c.c.s.impl.SysUserServiceImpl - 记录用户登录信息成功：用户ID=1, 用户名=admin, 登录IP=0:0:0:0:0:0:0:1
2025-11-06 13:12:46 [http-nio-8080-exec-7] INFO  c.d.c.c.s.impl.SysUserServiceImpl - 用户登录成功：用户ID=1, 用户名=admin, 登录IP=0:0:0:0:0:0:0:1
2025-11-06 13:12:46 [http-nio-8080-exec-7] DEBUG c.d.c.s.impl.RedisSecurityCache - Stored user admin with token eyJhbGci... in Redis, expire in 21600 seconds
2025-11-06 13:12:46 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectCompleteUserInfo - ==>  Preparing: SELECT u.user_id as id, u.username, u.nickname, u.real_name as realName, u.email, u.phone, u.avatar, u.user_type as userType, u.status, u.parent_user_id as parentUserId, u.invitation_code as invitationCode, u.login_ip as loginIp, u.login_time as loginTime, u.create_time as createTime, u.update_time as updateTime FROM sys_user u WHERE u.user_id = ? AND u.status = '0'
2025-11-06 13:12:46 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectCompleteUserInfo - ==> Parameters: 1(Long)
2025-11-06 13:12:46 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectCompleteUserInfo - <==      Total: 1
2025-11-06 13:12:46 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:46 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 1(Long)
2025-11-06 13:12:46 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:46 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 13:12:46 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 13:12:47 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 13:12:47 [http-nio-8080-exec-7] INFO  c.d.auth.controller.AuthController - 用户 admin 登录成功，IP：0:0:0:0:0:0:0:1
2025-11-06 13:12:47 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/adminAgentPerformanceStatistics
2025-11-06 13:12:47 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/adminMerchantsAssetStatistics
2025-11-06 13:12:47 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/adminMerchantsPerformanceStatistics
2025-11-06 13:12:47 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 13:12:47 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 13:12:47 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 13:12:47 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 13:12:47 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 13:12:47 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 13:12:47 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 13:12:47 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 13:12:47 [http-nio-8080-exec-2] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 13:12:47 [http-nio-8080-exec-6] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 13:12:47 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 13:12:47 [http-nio-8080-exec-8] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 13:12:47 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 13:12:47 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 13:12:47 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 13:12:47 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 13:12:47 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 13:12:47 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 13:12:48 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 13:12:48 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:48 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 13:12:48 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 13:12:48 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:48 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 13:12:48 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 13:12:48 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:48 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 13:12:48 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 13:12:48 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 13:12:48 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 13:12:48 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 13:12:48 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 13:12:48 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 13:12:48 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 13:12:48 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 13:12:48 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 13:12:48 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 13:12:48 [http-nio-8080-exec-6] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 13:12:48 [http-nio-8080-exec-6] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 13:12:48 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 13:12:48 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 13:12:48 [http-nio-8080-exec-2] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 13:12:48 [http-nio-8080-exec-2] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 13:12:48 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 13:12:48 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 13:12:48 [http-nio-8080-exec-6] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 13:12:48 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 13:12:48 [http-nio-8080-exec-2] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 13:12:48 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/adminMerchantsPerformanceStatistics
2025-11-06 13:12:48 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/adminMerchantsAssetStatistics
2025-11-06 13:12:48 [http-nio-8080-exec-6] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/adminMerchantsPerformanceStatistics from 127.0.0.1
2025-11-06 13:12:48 [http-nio-8080-exec-2] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/adminMerchantsAssetStatistics from 127.0.0.1
2025-11-06 13:12:48 [http-nio-8080-exec-6] INFO  c.deepreach.common.aspect.LogAspect - LogAspect doBefore 被触发: 统计管理 - getAdminMerchantsPerformanceStatistics
2025-11-06 13:12:48 [http-nio-8080-exec-2] INFO  c.deepreach.common.aspect.LogAspect - LogAspect doBefore 被触发: 统计管理 - getAdminMerchantsAssetStatistics
2025-11-06 13:12:48 [http-nio-8080-exec-6] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志前置处理完成: 统计管理
2025-11-06 13:12:48 [http-nio-8080-exec-2] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志前置处理完成: 统计管理
2025-11-06 13:12:48 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:12:48 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:12:48 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 13:12:48 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 13:12:48 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 13:12:48 [http-nio-8080-exec-8] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 13:12:48 [http-nio-8080-exec-8] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 13:12:48 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 13:12:48 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 13:12:48 [http-nio-8080-exec-8] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 13:12:48 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/adminAgentPerformanceStatistics
2025-11-06 13:12:48 [http-nio-8080-exec-8] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/adminAgentPerformanceStatistics from 127.0.0.1
2025-11-06 13:12:48 [http-nio-8080-exec-8] INFO  c.deepreach.common.aspect.LogAspect - LogAspect doBefore 被触发: 统计管理 - getAdminAgentPerformanceStatistics
2025-11-06 13:12:48 [http-nio-8080-exec-8] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志前置处理完成: 统计管理
2025-11-06 13:12:48 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:12:48 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 13:12:48 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 49
2025-11-06 13:12:48 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.sumTotalRechargeByUserIds - ==>  Preparing: SELECT b.user_id AS userId, COALESCE(b.total_recharge, 0) AS totalRecharge FROM user_dr_balance b WHERE b.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:12:48 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.sumTotalRechargeByUserIds - ==> Parameters: 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 330(Long), 331(Long), 335(Long), 336(Long), 337(Long), 339(Long), 342(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long)
2025-11-06 13:12:48 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.sumTotalRechargeByUserIds - <==      Total: 13
2025-11-06 13:12:48 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.A.selectCommissionByUserIds - ==>  Preparing: SELECT agent_user_id AS userId, COALESCE(total_commission, 0) AS totalCommission, COALESCE(settled_commission, 0) AS settledCommission FROM dr_agent_commission_account WHERE agent_user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:12:48 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.A.selectCommissionByUserIds - ==> Parameters: 320(Long), 332(Long), 354(Long), 356(Long), 321(Long), 333(Long), 344(Long), 355(Long), 322(Long), 329(Long), 334(Long), 338(Long), 345(Long), 357(Long)
2025-11-06 13:12:48 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.A.selectCommissionByUserIds - <==      Total: 6
2025-11-06 13:12:48 [http-nio-8080-exec-2] INFO  c.deepreach.common.aspect.LogAspect - 保存操作日志: 统计管理 - admin - /api/statistics/adminMerchantsAssetStatistics - 成功
2025-11-06 13:12:48 [http-nio-8080-exec-2] INFO  c.deepreach.common.aspect.LogAspect - 操作日志对象详情: operId=null, title=统计管理, operName=admin, operUrl=/api/statistics/adminMerchantsAssetStatistics, status=0
2025-11-06 13:12:48 [http-nio-8080-exec-2] INFO  c.deepreach.common.aspect.LogAspect - 准备异步保存操作日志到数据库...
2025-11-06 13:12:48 [http-nio-8080-exec-2] INFO  c.deepreach.common.aspect.LogAspect - 操作日志异步保存任务已提交
2025-11-06 13:12:48 [http-nio-8080-exec-2] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志返回处理完成: 统计管理
2025-11-06 13:12:48 [pool-3-thread-2] DEBUG c.d.c.c.m.S.insertOperLog - ==>  Preparing: INSERT INTO sys_oper_log ( title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2025-11-06 13:12:48 [pool-3-thread-2] DEBUG c.d.c.c.m.S.insertOperLog - ==> Parameters: 统计管理(String), 0(Integer), com.deepreach.common.core.controller.StatisticsController.getAdminMerchantsAssetStatistics(String), GET(String), 1(Integer), admin(String), ADMIN(String), /api/statistics/adminMerchantsAssetStatistics(String), 127.0.0.1(String), null, (String), {"code":200,"msg":"操作成功","data":{"totalRecharge":151000.00,"settledCommission":800.00,"netValue":150200.00},"timestamp":1762405968870,"error":false,"success":true}(String), 0(Integer), null, 2025-11-06T13:12:48.384505(LocalDateTime), 486(Long)
2025-11-06 13:12:48 [http-nio-8080-exec-2] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/adminMerchantsAssetStatistics from 127.0.0.1 - 状态: 200 - 耗时: 494ms
2025-11-06 13:12:48 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 49
2025-11-06 13:12:48 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.sumTotalRechargeByUserIds - ==>  Preparing: SELECT b.user_id AS userId, COALESCE(b.total_recharge, 0) AS totalRecharge FROM user_dr_balance b WHERE b.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:12:48 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.sumTotalRechargeByUserIds - ==> Parameters: 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 330(Long), 331(Long), 335(Long), 336(Long), 337(Long), 339(Long), 342(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long)
2025-11-06 13:12:48 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 49
2025-11-06 13:12:48 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.sumTotalRechargeByUserIds - ==>  Preparing: SELECT b.user_id AS userId, COALESCE(b.total_recharge, 0) AS totalRecharge FROM user_dr_balance b WHERE b.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:12:48 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.sumTotalRechargeByUserIds - ==> Parameters: 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 330(Long), 331(Long), 335(Long), 336(Long), 337(Long), 339(Long), 342(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 340(Long), 343(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 353(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 380(Long), 381(Long)
2025-11-06 13:12:49 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.sumTotalRechargeByUserIds - <==      Total: 13
2025-11-06 13:12:49 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.countAiCharactersByType - ==>  Preparing: SELECT COALESCE(c.type, 'unknown') AS type, COUNT(*) AS count FROM ai_character c WHERE c.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) GROUP BY COALESCE(c.type, 'unknown')
2025-11-06 13:12:49 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.countAiCharactersByType - ==> Parameters: 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 330(Long), 331(Long), 335(Long), 336(Long), 337(Long), 339(Long), 342(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 340(Long), 343(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 353(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 380(Long), 381(Long)
2025-11-06 13:12:49 [pool-3-thread-2] DEBUG c.d.c.c.m.S.insertOperLog - <==    Updates: 1
2025-11-06 13:12:49 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.countAiCharactersByType - <==      Total: 1
2025-11-06 13:12:49 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectAllPlatforms - ==>  Preparing: SELECT platform_id AS platformId, COALESCE(platform_name, 'UNKNOWN_PLATFORM') AS platformName, COALESCE(platform_type, 'unknown') AS platformType FROM platform WHERE status = '0' ORDER BY platform_id
2025-11-06 13:12:49 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectAllPlatforms - ==> Parameters: 
2025-11-06 13:12:49 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectAllPlatforms - <==      Total: 8
2025-11-06 13:12:49 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.sumTotalRechargeByUserIds - <==      Total: 13
2025-11-06 13:12:49 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.countInstancesByType - ==>  Preparing: SELECT i.instance_type AS instanceType, COUNT(*) AS count FROM ai_instance i WHERE i.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) GROUP BY i.instance_type
2025-11-06 13:12:49 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.A.selectCommissionByUserIds - ==>  Preparing: SELECT agent_user_id AS userId, COALESCE(total_commission, 0) AS totalCommission, COALESCE(settled_commission, 0) AS settledCommission FROM dr_agent_commission_account WHERE agent_user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:12:49 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.countInstancesByType - ==> Parameters: 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 330(Long), 331(Long), 335(Long), 336(Long), 337(Long), 339(Long), 342(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 340(Long), 343(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 353(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 380(Long), 381(Long)
2025-11-06 13:12:49 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.A.selectCommissionByUserIds - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 13:12:49 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.countInstancesByType - <==      Total: 2
2025-11-06 13:12:49 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.A.selectCommissionByUserIds - <==      Total: 6
2025-11-06 13:12:49 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.countInstancesByPlatform - ==>  Preparing: SELECT COALESCE(i.platform_id, 0) AS platformId, COALESCE(p.platform_name, 'UNKNOWN_PLATFORM') AS platformName, COUNT(*) AS count FROM ai_instance i LEFT JOIN platform p ON i.platform_id = p.platform_id WHERE i.instance_type = ? AND i.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) GROUP BY COALESCE(i.platform_id, 0), COALESCE(p.platform_name, 'UNKNOWN_PLATFORM')
2025-11-06 13:12:49 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.countInstancesByPlatform - ==> Parameters: 0(String), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 330(Long), 331(Long), 335(Long), 336(Long), 337(Long), 339(Long), 342(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 340(Long), 343(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 353(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 380(Long), 381(Long)
2025-11-06 13:12:49 [http-nio-8080-exec-8] INFO  c.deepreach.common.aspect.LogAspect - 保存操作日志: 统计管理 - admin - /api/statistics/adminAgentPerformanceStatistics - 成功
2025-11-06 13:12:49 [http-nio-8080-exec-8] INFO  c.deepreach.common.aspect.LogAspect - 操作日志对象详情: operId=null, title=统计管理, operName=admin, operUrl=/api/statistics/adminAgentPerformanceStatistics, status=0
2025-11-06 13:12:49 [http-nio-8080-exec-8] INFO  c.deepreach.common.aspect.LogAspect - 准备异步保存操作日志到数据库...
2025-11-06 13:12:49 [http-nio-8080-exec-8] INFO  c.deepreach.common.aspect.LogAspect - 操作日志异步保存任务已提交
2025-11-06 13:12:49 [http-nio-8080-exec-8] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志返回处理完成: 统计管理
2025-11-06 13:12:49 [pool-3-thread-3] DEBUG c.d.c.c.m.S.insertOperLog - ==>  Preparing: INSERT INTO sys_oper_log ( title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2025-11-06 13:12:49 [pool-3-thread-3] DEBUG c.d.c.c.m.S.insertOperLog - ==> Parameters: 统计管理(String), 0(Integer), com.deepreach.common.core.controller.StatisticsController.getAdminAgentPerformanceStatistics(String), GET(String), 1(Integer), admin(String), ADMIN(String), /api/statistics/adminAgentPerformanceStatistics(String), 127.0.0.1(String), null, (String), {"code":200,"msg":"操作成功","data":{"generalAgent":{"identity":"agent_level_1","identityDisplay":"总代","agentCount":4,"totalRecharge":132000.00,"totalCommission":33200.00},"level1Agent":{"identity":"agent_level_2","identityDisplay":"一级代理","agentCount":4,"totalRecharge":33000.00,"totalCommission":3300.00},"level2Agent":{"identity":"agent_level_3","identityDisplay":"二级代理","agentCount":6,"totalRecharge":33000.00,"totalCommission":3300.00},"total":{"identity":"total","identityDisplay":"合计","agentCount":14,"totalRecharge":198000.00,"totalCommission":39800.00}},"timestamp":1762405969791,"error":false,"success":true}(String), 0(Integer), null, 2025-11-06T13:12:48.411041(LocalDateTime), 1380(Long)
2025-11-06 13:12:49 [http-nio-8080-exec-8] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/adminAgentPerformanceStatistics from 127.0.0.1 - 状态: 200 - 耗时: 1384ms
2025-11-06 13:12:49 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.countInstancesByPlatform - <==      Total: 2
2025-11-06 13:12:49 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.countInstancesByPlatform - ==>  Preparing: SELECT COALESCE(i.platform_id, 0) AS platformId, COALESCE(p.platform_name, 'UNKNOWN_PLATFORM') AS platformName, COUNT(*) AS count FROM ai_instance i LEFT JOIN platform p ON i.platform_id = p.platform_id WHERE i.instance_type = ? AND i.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) GROUP BY COALESCE(i.platform_id, 0), COALESCE(p.platform_name, 'UNKNOWN_PLATFORM')
2025-11-06 13:12:49 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.countInstancesByPlatform - ==> Parameters: 1(String), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 330(Long), 331(Long), 335(Long), 336(Long), 337(Long), 339(Long), 342(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 340(Long), 343(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 353(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 380(Long), 381(Long)
2025-11-06 13:12:50 [pool-3-thread-3] DEBUG c.d.c.c.m.S.insertOperLog - <==    Updates: 1
2025-11-06 13:12:50 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.countInstancesByPlatform - <==      Total: 3
2025-11-06 13:12:50 [http-nio-8080-exec-6] INFO  c.deepreach.common.aspect.LogAspect - 保存操作日志: 统计管理 - admin - /api/statistics/adminMerchantsPerformanceStatistics - 成功
2025-11-06 13:12:50 [http-nio-8080-exec-6] INFO  c.deepreach.common.aspect.LogAspect - 操作日志对象详情: operId=null, title=统计管理, operName=admin, operUrl=/api/statistics/adminMerchantsPerformanceStatistics, status=0
2025-11-06 13:12:50 [http-nio-8080-exec-6] INFO  c.deepreach.common.aspect.LogAspect - 准备异步保存操作日志到数据库...
2025-11-06 13:12:50 [http-nio-8080-exec-6] INFO  c.deepreach.common.aspect.LogAspect - 操作日志异步保存任务已提交
2025-11-06 13:12:50 [http-nio-8080-exec-6] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志返回处理完成: 统计管理
2025-11-06 13:12:50 [pool-3-thread-4] DEBUG c.d.c.c.m.S.insertOperLog - ==>  Preparing: INSERT INTO sys_oper_log ( title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2025-11-06 13:12:50 [pool-3-thread-4] DEBUG c.d.c.c.m.S.insertOperLog - ==> Parameters: 统计管理(String), 0(Integer), com.deepreach.common.core.controller.StatisticsController.getAdminMerchantsPerformanceStatistics(String), GET(String), 1(Integer), admin(String), ADMIN(String), /api/statistics/adminMerchantsPerformanceStatistics(String), 127.0.0.1(String), null, (String), {"code":200,"msg":"操作成功","data":{"merchantOverview":{"merchantCount":19,"employeeCount":15,"totalPerformance":151000.00},"aiCharacterOverview":{"totalCharacters":9,"socialAiCount":9,"customerServiceAiCount":0},"marketingInstanceOverview":{"instanceCount":13,"platformBreakdown":{"WhatsApp":7,"Telegram":6}},"prospectingInstanceOverview":{"instanceCount":7,"platformBreakdown":{"SMS":3,"Facebook":3,"Instagram":0,"TikTok":1,"X":0,"GoogleVoice":0}}},"timestamp":1762405970221,"error":false,"success":true}(String), 0(Integer), null, 2025-11-06T13:12:48.384505(LocalDateTime), 1838(Long)
2025-11-06 13:12:50 [http-nio-8080-exec-6] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/adminMerchantsPerformanceStatistics from 127.0.0.1 - 状态: 200 - 耗时: 1848ms
2025-11-06 13:12:50 [pool-3-thread-4] DEBUG c.d.c.c.m.S.insertOperLog - <==    Updates: 1
2025-11-06 13:12:53 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing POST /system/user/list
2025-11-06 13:12:53 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 13:12:53 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 13:12:53 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 13:12:53 [http-nio-8080-exec-9] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 13:12:53 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 13:12:53 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 13:12:53 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 13:12:53 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:53 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 13:12:53 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 13:12:53 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 13:12:53 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 13:12:53 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 13:12:53 [http-nio-8080-exec-9] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 13:12:53 [http-nio-8080-exec-9] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 13:12:53 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 13:12:53 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 13:12:53 [http-nio-8080-exec-9] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 13:12:53 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured POST /system/user/list
2025-11-06 13:12:53 [http-nio-8080-exec-9] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/system/user/list from 127.0.0.1
2025-11-06 13:12:53 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserList - ==>  Preparing: SELECT DISTINCT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_name, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur_filter ON u.user_id = ur_filter.user_id LEFT JOIN sys_role r_filter ON ur_filter.role_id = r_filter.role_id AND r_filter.del_flag = '0' WHERE u.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY u.create_time DESC
2025-11-06 13:12:53 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserList - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 13:12:54 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserList - <==      Total: 49
2025-11-06 13:12:54 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:54 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 381(Long)
2025-11-06 13:12:54 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:54 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:54 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 380(Long)
2025-11-06 13:12:54 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:54 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:54 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 379(Long)
2025-11-06 13:12:54 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:54 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:54 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 378(Long)
2025-11-06 13:12:55 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:55 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:55 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 377(Long)
2025-11-06 13:12:55 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:55 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:55 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 376(Long)
2025-11-06 13:12:55 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:55 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:55 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 375(Long)
2025-11-06 13:12:55 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:55 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:55 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 374(Long)
2025-11-06 13:12:55 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:55 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:55 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 373(Long)
2025-11-06 13:12:55 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:55 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:55 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 372(Long)
2025-11-06 13:12:56 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:56 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:56 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 371(Long)
2025-11-06 13:12:56 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:56 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:56 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 370(Long)
2025-11-06 13:12:56 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:56 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:56 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 369(Long)
2025-11-06 13:12:57 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:57 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:57 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 357(Long)
2025-11-06 13:12:57 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:57 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:57 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 356(Long)
2025-11-06 13:12:57 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:57 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:57 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 355(Long)
2025-11-06 13:12:57 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:57 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:57 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 354(Long)
2025-11-06 13:12:57 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:57 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:57 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 353(Long)
2025-11-06 13:12:58 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:58 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:58 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 352(Long)
2025-11-06 13:12:58 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:58 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:58 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 351(Long)
2025-11-06 13:12:58 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:58 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:58 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 349(Long)
2025-11-06 13:12:58 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:58 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:58 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 348(Long)
2025-11-06 13:12:58 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:58 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:58 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 347(Long)
2025-11-06 13:12:59 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:59 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:59 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 345(Long)
2025-11-06 13:12:59 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:59 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:59 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 344(Long)
2025-11-06 13:12:59 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:59 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:59 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 343(Long)
2025-11-06 13:12:59 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:59 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:59 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 342(Long)
2025-11-06 13:12:59 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:12:59 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:12:59 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 340(Long)
2025-11-06 13:13:01 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:01 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:01 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 339(Long)
2025-11-06 13:13:01 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:01 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:01 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 338(Long)
2025-11-06 13:13:02 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:02 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:02 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 337(Long)
2025-11-06 13:13:02 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:02 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:02 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 336(Long)
2025-11-06 13:13:02 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:02 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:02 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 335(Long)
2025-11-06 13:13:02 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:02 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:02 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 334(Long)
2025-11-06 13:13:03 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:03 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:03 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 333(Long)
2025-11-06 13:13:03 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:03 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:03 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 332(Long)
2025-11-06 13:13:03 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:03 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:03 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 331(Long)
2025-11-06 13:13:03 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:03 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:03 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 330(Long)
2025-11-06 13:13:03 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:03 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:03 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 329(Long)
2025-11-06 13:13:03 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:03 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:03 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 328(Long)
2025-11-06 13:13:03 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:03 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:03 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 327(Long)
2025-11-06 13:13:04 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:04 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:04 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 326(Long)
2025-11-06 13:13:04 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:04 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:04 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 325(Long)
2025-11-06 13:13:05 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:05 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:05 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 324(Long)
2025-11-06 13:13:05 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:05 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:05 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 323(Long)
2025-11-06 13:13:05 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:05 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:05 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 322(Long)
2025-11-06 13:13:05 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:05 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:05 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 321(Long)
2025-11-06 13:13:06 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:06 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:06 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 320(Long)
2025-11-06 13:13:06 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:06 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:06 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 1(Long)
2025-11-06 13:13:06 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:06 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:13:06 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 379(Long), 1(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 354(Long), 337(Long), 342(Long), 344(Long), 332(Long), 334(Long), 320(Long), 329(Long), 333(Long), 321(Long)
2025-11-06 13:13:06 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 17
2025-11-06 13:13:06 [http-nio-8080-exec-9] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/system/user/list from 127.0.0.1 - 状态: 200 - 耗时: 12704ms
2025-11-06 13:13:06 [http-nio-8080-exec-9] WARN  c.d.c.i.PerformanceInterceptor - 检测到慢请求: POST /api/system/user/list from 127.0.0.1 - 耗时: 12704ms - 超过阈值: 3000ms
2025-11-06 13:13:13 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /system/user/list
2025-11-06 13:13:13 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 13:13:13 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 13:13:13 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 13:13:13 [http-nio-8080-exec-5] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 13:13:13 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 13:13:13 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 13:13:13 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 13:13:13 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:13 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 13:13:14 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 13:13:14 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 13:13:14 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 13:13:14 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 13:13:14 [http-nio-8080-exec-5] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 13:13:14 [http-nio-8080-exec-5] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 13:13:14 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 13:13:14 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 13:13:14 [http-nio-8080-exec-5] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 13:13:14 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /system/user/list
2025-11-06 13:13:14 [http-nio-8080-exec-5] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/system/user/list from 127.0.0.1
2025-11-06 13:13:14 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserList - ==>  Preparing: SELECT DISTINCT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_name, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur_filter ON u.user_id = ur_filter.user_id LEFT JOIN sys_role r_filter ON ur_filter.role_id = r_filter.role_id AND r_filter.del_flag = '0' WHERE u.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY u.create_time DESC
2025-11-06 13:13:14 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserList - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 13:13:15 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserList - <==      Total: 49
2025-11-06 13:13:15 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:15 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 381(Long)
2025-11-06 13:13:15 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:15 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:15 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 380(Long)
2025-11-06 13:13:15 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:15 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:15 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 379(Long)
2025-11-06 13:13:15 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:15 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:15 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 378(Long)
2025-11-06 13:13:15 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:15 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:15 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 377(Long)
2025-11-06 13:13:16 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:16 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:16 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 376(Long)
2025-11-06 13:13:16 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:16 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:16 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 375(Long)
2025-11-06 13:13:16 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:16 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:16 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 374(Long)
2025-11-06 13:13:16 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:16 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:16 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 373(Long)
2025-11-06 13:13:16 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:16 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:16 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 372(Long)
2025-11-06 13:13:16 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:16 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:16 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 371(Long)
2025-11-06 13:13:17 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:17 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:17 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 370(Long)
2025-11-06 13:13:17 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:17 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:17 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 369(Long)
2025-11-06 13:13:17 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:17 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:17 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 357(Long)
2025-11-06 13:13:17 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:17 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:17 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 356(Long)
2025-11-06 13:13:18 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:18 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:18 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 355(Long)
2025-11-06 13:13:18 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:18 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:18 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 354(Long)
2025-11-06 13:13:18 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:18 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:18 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 353(Long)
2025-11-06 13:13:18 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:18 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:18 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 352(Long)
2025-11-06 13:13:19 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:19 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:19 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 351(Long)
2025-11-06 13:13:19 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:19 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:19 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 349(Long)
2025-11-06 13:13:19 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:19 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:19 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 348(Long)
2025-11-06 13:13:19 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:19 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:19 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 347(Long)
2025-11-06 13:13:20 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:20 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:20 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 345(Long)
2025-11-06 13:13:20 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:20 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:20 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 344(Long)
2025-11-06 13:13:20 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:20 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:20 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 343(Long)
2025-11-06 13:13:20 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:20 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:20 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 342(Long)
2025-11-06 13:13:20 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:20 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:20 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 340(Long)
2025-11-06 13:13:21 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:21 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:21 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 339(Long)
2025-11-06 13:13:21 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:21 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:21 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 338(Long)
2025-11-06 13:13:21 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:21 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:21 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 337(Long)
2025-11-06 13:13:22 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:22 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:22 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 336(Long)
2025-11-06 13:13:22 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:22 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:22 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 335(Long)
2025-11-06 13:13:22 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:22 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:22 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 334(Long)
2025-11-06 13:13:22 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:22 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:22 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 333(Long)
2025-11-06 13:13:22 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:22 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:22 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 332(Long)
2025-11-06 13:13:22 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:22 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:22 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 331(Long)
2025-11-06 13:13:23 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:23 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:23 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 330(Long)
2025-11-06 13:13:23 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:23 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:23 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 329(Long)
2025-11-06 13:13:23 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:23 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:23 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 328(Long)
2025-11-06 13:13:23 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:23 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:23 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 327(Long)
2025-11-06 13:13:24 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:24 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:24 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 326(Long)
2025-11-06 13:13:24 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:24 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:24 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 325(Long)
2025-11-06 13:13:24 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:24 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:24 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 324(Long)
2025-11-06 13:13:24 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:24 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:24 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 323(Long)
2025-11-06 13:13:24 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:24 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:24 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 322(Long)
2025-11-06 13:13:24 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:24 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:24 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 321(Long)
2025-11-06 13:13:25 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:25 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:25 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 320(Long)
2025-11-06 13:13:25 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:25 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:25 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 1(Long)
2025-11-06 13:13:25 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:25 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:13:25 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 379(Long), 1(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 354(Long), 337(Long), 342(Long), 344(Long), 332(Long), 334(Long), 320(Long), 329(Long), 333(Long), 321(Long)
2025-11-06 13:13:25 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 17
2025-11-06 13:13:25 [http-nio-8080-exec-5] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/system/user/list from 127.0.0.1 - 状态: 200 - 耗时: 11323ms
2025-11-06 13:13:25 [http-nio-8080-exec-5] WARN  c.d.c.i.PerformanceInterceptor - 检测到慢请求: POST /api/system/user/list from 127.0.0.1 - 耗时: 11323ms - 超过阈值: 3000ms
2025-11-06 13:13:31 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /system/user/list
2025-11-06 13:13:31 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 13:13:31 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 13:13:31 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 13:13:31 [http-nio-8080-exec-3] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 13:13:31 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 13:13:31 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 13:13:31 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 13:13:31 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:31 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 13:13:32 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 13:13:32 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 13:13:32 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 13:13:32 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 13:13:32 [http-nio-8080-exec-3] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 13:13:32 [http-nio-8080-exec-3] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 13:13:32 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 13:13:32 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 13:13:32 [http-nio-8080-exec-3] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 13:13:32 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /system/user/list
2025-11-06 13:13:32 [http-nio-8080-exec-3] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/system/user/list from 127.0.0.1
2025-11-06 13:13:32 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserList - ==>  Preparing: SELECT DISTINCT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_name, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur_filter ON u.user_id = ur_filter.user_id LEFT JOIN sys_role r_filter ON ur_filter.role_id = r_filter.role_id AND r_filter.del_flag = '0' WHERE u.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY u.create_time DESC
2025-11-06 13:13:32 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserList - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 13:13:32 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserList - <==      Total: 49
2025-11-06 13:13:32 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:32 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 381(Long)
2025-11-06 13:13:32 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:32 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:32 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 380(Long)
2025-11-06 13:13:33 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:33 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:33 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 379(Long)
2025-11-06 13:13:33 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:33 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:33 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 378(Long)
2025-11-06 13:13:33 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:33 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:33 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 377(Long)
2025-11-06 13:13:33 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:33 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:33 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 376(Long)
2025-11-06 13:13:34 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:34 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:34 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 375(Long)
2025-11-06 13:13:34 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:34 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:34 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 374(Long)
2025-11-06 13:13:34 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:34 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:34 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 373(Long)
2025-11-06 13:13:34 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:34 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:34 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 372(Long)
2025-11-06 13:13:34 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:34 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:34 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 371(Long)
2025-11-06 13:13:34 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:34 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:34 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 370(Long)
2025-11-06 13:13:35 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:35 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:35 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 369(Long)
2025-11-06 13:13:35 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:35 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:35 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 357(Long)
2025-11-06 13:13:35 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:35 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:35 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 356(Long)
2025-11-06 13:13:35 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:35 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:35 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 355(Long)
2025-11-06 13:13:36 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:36 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:36 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 354(Long)
2025-11-06 13:13:36 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:36 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:36 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 353(Long)
2025-11-06 13:13:36 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:36 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:36 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 352(Long)
2025-11-06 13:13:36 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:36 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:36 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 351(Long)
2025-11-06 13:13:37 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:37 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:37 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 349(Long)
2025-11-06 13:13:37 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:37 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:37 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 348(Long)
2025-11-06 13:13:37 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:37 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:37 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 347(Long)
2025-11-06 13:13:37 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:37 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:37 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 345(Long)
2025-11-06 13:13:37 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:37 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:37 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 344(Long)
2025-11-06 13:13:38 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:38 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:38 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 343(Long)
2025-11-06 13:13:38 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:38 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:38 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 342(Long)
2025-11-06 13:13:38 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:38 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:38 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 340(Long)
2025-11-06 13:13:38 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:38 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:38 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 339(Long)
2025-11-06 13:13:38 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:38 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:38 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 338(Long)
2025-11-06 13:13:38 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:38 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:38 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 337(Long)
2025-11-06 13:13:39 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:39 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:39 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 336(Long)
2025-11-06 13:13:39 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:39 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:39 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 335(Long)
2025-11-06 13:13:39 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:39 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:39 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 334(Long)
2025-11-06 13:13:39 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:39 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:39 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 333(Long)
2025-11-06 13:13:39 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:39 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:39 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 332(Long)
2025-11-06 13:13:39 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:39 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:39 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 331(Long)
2025-11-06 13:13:40 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:40 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:40 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 330(Long)
2025-11-06 13:13:40 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:40 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:40 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 329(Long)
2025-11-06 13:13:40 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:40 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:40 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 328(Long)
2025-11-06 13:13:40 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:40 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:40 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 327(Long)
2025-11-06 13:13:40 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:40 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:40 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 326(Long)
2025-11-06 13:13:40 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:40 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:40 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 325(Long)
2025-11-06 13:13:40 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:40 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:40 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 324(Long)
2025-11-06 13:13:41 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:41 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:41 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 323(Long)
2025-11-06 13:13:41 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:41 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:41 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 322(Long)
2025-11-06 13:13:41 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:41 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:41 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 321(Long)
2025-11-06 13:13:41 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:41 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:41 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 320(Long)
2025-11-06 13:13:41 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:41 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:13:41 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 1(Long)
2025-11-06 13:13:41 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:13:41 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:13:41 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 379(Long), 1(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 354(Long), 337(Long), 342(Long), 344(Long), 332(Long), 334(Long), 320(Long), 329(Long), 333(Long), 321(Long)
2025-11-06 13:13:42 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 17
2025-11-06 13:13:42 [http-nio-8080-exec-3] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/system/user/list from 127.0.0.1 - 状态: 200 - 耗时: 9789ms
2025-11-06 13:13:42 [http-nio-8080-exec-3] WARN  c.d.c.i.PerformanceInterceptor - 检测到慢请求: POST /api/system/user/list from 127.0.0.1 - 耗时: 9789ms - 超过阈值: 3000ms
2025-11-06 13:14:23 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /system/user/list
2025-11-06 13:14:23 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 13:14:23 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 13:14:23 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 13:14:23 [http-nio-8080-exec-4] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 13:14:23 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 13:14:23 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 13:14:23 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 13:14:23 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:23 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 13:14:23 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 13:14:23 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 13:14:23 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 13:14:23 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 13:14:23 [http-nio-8080-exec-4] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 13:14:23 [http-nio-8080-exec-4] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 13:14:23 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 13:14:23 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 13:14:23 [http-nio-8080-exec-4] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 13:14:23 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured POST /system/user/list
2025-11-06 13:14:23 [http-nio-8080-exec-4] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/system/user/list from 127.0.0.1
2025-11-06 13:14:23 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserList - ==>  Preparing: SELECT DISTINCT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_name, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur_filter ON u.user_id = ur_filter.user_id LEFT JOIN sys_role r_filter ON ur_filter.role_id = r_filter.role_id AND r_filter.del_flag = '0' WHERE u.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY u.create_time DESC
2025-11-06 13:14:23 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserList - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 13:14:24 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserList - <==      Total: 49
2025-11-06 13:14:24 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:24 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 381(Long)
2025-11-06 13:14:24 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:24 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:24 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 380(Long)
2025-11-06 13:14:24 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:24 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:24 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 379(Long)
2025-11-06 13:14:24 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:24 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:24 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 378(Long)
2025-11-06 13:14:25 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:25 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:25 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 377(Long)
2025-11-06 13:14:25 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:25 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:25 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 376(Long)
2025-11-06 13:14:25 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:25 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:25 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 375(Long)
2025-11-06 13:14:26 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:26 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:26 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 374(Long)
2025-11-06 13:14:26 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:26 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:26 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 373(Long)
2025-11-06 13:14:26 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:26 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:26 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 372(Long)
2025-11-06 13:14:26 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:26 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:26 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 371(Long)
2025-11-06 13:14:27 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:27 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:27 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 370(Long)
2025-11-06 13:14:27 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:27 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:27 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 369(Long)
2025-11-06 13:14:27 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:27 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:27 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 357(Long)
2025-11-06 13:14:27 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:27 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:27 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 356(Long)
2025-11-06 13:14:28 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:28 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:28 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 355(Long)
2025-11-06 13:14:28 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:28 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:28 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 354(Long)
2025-11-06 13:14:28 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:28 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:28 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 353(Long)
2025-11-06 13:14:28 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:28 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:28 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 352(Long)
2025-11-06 13:14:29 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:29 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:29 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 351(Long)
2025-11-06 13:14:29 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:29 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:29 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 349(Long)
2025-11-06 13:14:29 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:29 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:29 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 348(Long)
2025-11-06 13:14:29 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:29 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:29 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 347(Long)
2025-11-06 13:14:29 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:29 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:29 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 345(Long)
2025-11-06 13:14:29 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:29 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:29 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 344(Long)
2025-11-06 13:14:30 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:30 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:30 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 343(Long)
2025-11-06 13:14:30 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:30 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:30 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 342(Long)
2025-11-06 13:14:30 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:30 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:30 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 340(Long)
2025-11-06 13:14:30 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:30 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:30 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 339(Long)
2025-11-06 13:14:30 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:30 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:30 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 338(Long)
2025-11-06 13:14:30 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:30 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:30 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 337(Long)
2025-11-06 13:14:31 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:31 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:31 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 336(Long)
2025-11-06 13:14:31 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:31 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:31 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 335(Long)
2025-11-06 13:14:31 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:31 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:31 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 334(Long)
2025-11-06 13:14:31 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:31 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:31 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 333(Long)
2025-11-06 13:14:32 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:32 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:32 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 332(Long)
2025-11-06 13:14:32 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:32 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:32 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 331(Long)
2025-11-06 13:14:32 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:32 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:32 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 330(Long)
2025-11-06 13:14:32 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:32 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:32 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 329(Long)
2025-11-06 13:14:32 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:32 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:32 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 328(Long)
2025-11-06 13:14:32 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:32 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:32 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 327(Long)
2025-11-06 13:14:32 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:32 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:32 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 326(Long)
2025-11-06 13:14:33 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:33 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:33 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 325(Long)
2025-11-06 13:14:33 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:33 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:33 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 324(Long)
2025-11-06 13:14:33 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:33 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:33 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 323(Long)
2025-11-06 13:14:33 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:33 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:33 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 322(Long)
2025-11-06 13:14:34 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:34 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:34 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 321(Long)
2025-11-06 13:14:34 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:34 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:34 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 320(Long)
2025-11-06 13:14:34 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:34 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:34 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 1(Long)
2025-11-06 13:14:34 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:34 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:14:34 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 379(Long), 1(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 354(Long), 337(Long), 342(Long), 344(Long), 332(Long), 334(Long), 320(Long), 329(Long), 333(Long), 321(Long)
2025-11-06 13:14:35 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 17
2025-11-06 13:14:35 [http-nio-8080-exec-4] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/system/user/list from 127.0.0.1 - 状态: 200 - 耗时: 11544ms
2025-11-06 13:14:35 [http-nio-8080-exec-4] WARN  c.d.c.i.PerformanceInterceptor - 检测到慢请求: POST /api/system/user/list from 127.0.0.1 - 耗时: 11544ms - 超过阈值: 3000ms
2025-11-06 13:14:39 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /system/user/list
2025-11-06 13:14:39 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 13:14:39 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 13:14:39 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 13:14:39 [http-nio-8080-exec-7] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 13:14:39 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 13:14:39 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 13:14:40 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 13:14:40 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:40 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 13:14:40 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 13:14:40 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 13:14:40 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 13:14:40 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 13:14:40 [http-nio-8080-exec-7] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 13:14:40 [http-nio-8080-exec-7] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 13:14:40 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 13:14:40 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 13:14:40 [http-nio-8080-exec-7] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 13:14:40 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured POST /system/user/list
2025-11-06 13:14:40 [http-nio-8080-exec-7] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/system/user/list from 127.0.0.1
2025-11-06 13:14:40 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserList - ==>  Preparing: SELECT DISTINCT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_name, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur_filter ON u.user_id = ur_filter.user_id LEFT JOIN sys_role r_filter ON ur_filter.role_id = r_filter.role_id AND r_filter.del_flag = '0' WHERE u.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY u.create_time DESC
2025-11-06 13:14:40 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserList - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 13:14:40 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserList - <==      Total: 49
2025-11-06 13:14:40 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:40 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 381(Long)
2025-11-06 13:14:41 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:41 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:41 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 380(Long)
2025-11-06 13:14:41 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:41 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:41 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 379(Long)
2025-11-06 13:14:41 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:41 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:41 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 378(Long)
2025-11-06 13:14:41 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:41 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:41 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 377(Long)
2025-11-06 13:14:42 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:42 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:42 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 376(Long)
2025-11-06 13:14:42 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:42 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:42 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 375(Long)
2025-11-06 13:14:42 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:42 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:42 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 374(Long)
2025-11-06 13:14:42 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:42 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:42 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 373(Long)
2025-11-06 13:14:42 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:42 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:42 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 372(Long)
2025-11-06 13:14:42 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:42 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:42 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 371(Long)
2025-11-06 13:14:42 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:42 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:42 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 370(Long)
2025-11-06 13:14:43 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:43 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:43 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 369(Long)
2025-11-06 13:14:43 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:43 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:43 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 357(Long)
2025-11-06 13:14:43 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:43 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:43 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 356(Long)
2025-11-06 13:14:43 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:43 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:43 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 355(Long)
2025-11-06 13:14:43 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:43 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:43 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 354(Long)
2025-11-06 13:14:43 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:43 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:43 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 353(Long)
2025-11-06 13:14:44 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:44 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:44 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 352(Long)
2025-11-06 13:14:44 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:44 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:44 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 351(Long)
2025-11-06 13:14:44 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:44 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:44 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 349(Long)
2025-11-06 13:14:44 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:44 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:44 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 348(Long)
2025-11-06 13:14:44 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:44 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:44 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 347(Long)
2025-11-06 13:14:44 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:44 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:44 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 345(Long)
2025-11-06 13:14:45 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:45 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:45 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 344(Long)
2025-11-06 13:14:45 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:45 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:45 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 343(Long)
2025-11-06 13:14:45 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:45 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:45 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 342(Long)
2025-11-06 13:14:45 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:45 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:45 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 340(Long)
2025-11-06 13:14:46 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:46 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:46 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 339(Long)
2025-11-06 13:14:46 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:46 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:46 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 338(Long)
2025-11-06 13:14:46 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:46 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:46 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 337(Long)
2025-11-06 13:14:46 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:46 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:46 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 336(Long)
2025-11-06 13:14:46 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:46 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:46 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 335(Long)
2025-11-06 13:14:46 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:46 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:46 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 334(Long)
2025-11-06 13:14:47 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:47 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:47 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 333(Long)
2025-11-06 13:14:47 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:47 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:47 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 332(Long)
2025-11-06 13:14:47 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:47 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:47 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 331(Long)
2025-11-06 13:14:47 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:47 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:47 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 330(Long)
2025-11-06 13:14:47 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:47 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:47 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 329(Long)
2025-11-06 13:14:47 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:47 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:47 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 328(Long)
2025-11-06 13:14:48 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:48 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:48 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 327(Long)
2025-11-06 13:14:48 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:48 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:48 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 326(Long)
2025-11-06 13:14:48 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:48 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:48 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 325(Long)
2025-11-06 13:14:48 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:48 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:48 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 324(Long)
2025-11-06 13:14:48 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:48 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:48 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 323(Long)
2025-11-06 13:14:48 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:48 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:48 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 322(Long)
2025-11-06 13:14:48 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:48 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:48 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 321(Long)
2025-11-06 13:14:49 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:49 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:49 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 320(Long)
2025-11-06 13:14:49 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:49 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:14:49 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 1(Long)
2025-11-06 13:14:49 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:14:49 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:14:49 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 379(Long), 1(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 354(Long), 337(Long), 342(Long), 344(Long), 332(Long), 334(Long), 320(Long), 329(Long), 333(Long), 321(Long)
2025-11-06 13:14:50 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 17
2025-11-06 13:14:50 [http-nio-8080-exec-7] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/system/user/list from 127.0.0.1 - 状态: 200 - 耗时: 10034ms
2025-11-06 13:14:50 [http-nio-8080-exec-7] WARN  c.d.c.i.PerformanceInterceptor - 检测到慢请求: POST /api/system/user/list from 127.0.0.1 - 耗时: 10034ms - 超过阈值: 3000ms
2025-11-06 13:15:38 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /system/user/list
2025-11-06 13:15:38 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 13:15:38 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 13:15:38 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 13:15:38 [http-nio-8080-exec-2] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 13:15:38 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 13:15:38 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 13:15:39 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 13:15:39 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:15:39 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 13:15:39 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 13:15:39 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 13:15:39 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 13:15:39 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 13:15:39 [http-nio-8080-exec-2] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 13:15:39 [http-nio-8080-exec-2] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 13:15:39 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 13:15:39 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 13:15:39 [http-nio-8080-exec-2] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 13:15:39 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /system/user/list
2025-11-06 13:15:39 [http-nio-8080-exec-2] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/system/user/list from 127.0.0.1
2025-11-06 13:15:39 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserList - ==>  Preparing: SELECT DISTINCT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_name, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur_filter ON u.user_id = ur_filter.user_id LEFT JOIN sys_role r_filter ON ur_filter.role_id = r_filter.role_id AND r_filter.del_flag = '0' WHERE u.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY u.create_time DESC
2025-11-06 13:15:39 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserList - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 13:15:41 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserList - <==      Total: 49
2025-11-06 13:15:41 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:15:41 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 381(Long)
2025-11-06 13:15:41 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:15:41 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:15:41 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 380(Long)
2025-11-06 13:15:41 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:15:41 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:15:41 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 379(Long)
2025-11-06 13:15:41 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:15:41 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:15:41 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 378(Long)
2025-11-06 13:15:42 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:15:42 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:15:42 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 377(Long)
2025-11-06 13:15:42 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:15:42 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:15:42 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 376(Long)
2025-11-06 13:15:42 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:15:42 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:15:42 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 375(Long)
2025-11-06 13:15:42 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:15:42 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:15:42 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 374(Long)
2025-11-06 13:15:43 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:15:43 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:15:43 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 373(Long)
2025-11-06 13:15:43 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:15:43 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:15:43 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 372(Long)
2025-11-06 13:15:44 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:15:44 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:15:44 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 371(Long)
2025-11-06 13:15:44 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:15:44 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:15:44 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 370(Long)
2025-11-06 13:15:44 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:15:44 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:15:44 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 369(Long)
2025-11-06 13:15:44 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:15:44 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:15:44 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 357(Long)
2025-11-06 13:15:44 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:15:44 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:15:44 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 356(Long)
2025-11-06 13:15:44 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:15:44 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:15:44 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 355(Long)
2025-11-06 13:15:45 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:15:45 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:15:45 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 354(Long)
2025-11-06 13:15:45 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:15:45 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:15:45 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 353(Long)
2025-11-06 13:15:45 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:15:45 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:15:45 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 352(Long)
2025-11-06 13:15:45 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:15:45 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:15:45 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 351(Long)
2025-11-06 13:15:45 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:15:45 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:15:45 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 349(Long)
2025-11-06 13:15:45 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:15:45 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:15:45 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 348(Long)
2025-11-06 13:15:46 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:15:46 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:15:46 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 347(Long)
2025-11-06 13:15:46 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:15:46 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:15:46 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 345(Long)
2025-11-06 13:15:46 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:15:46 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:15:46 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 344(Long)
2025-11-06 13:15:46 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:15:46 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:15:46 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 343(Long)
2025-11-06 13:15:46 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:15:46 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:15:46 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 342(Long)
2025-11-06 13:15:46 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:15:46 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:15:46 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 340(Long)
2025-11-06 13:15:46 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:15:46 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:15:46 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 339(Long)
2025-11-06 13:15:47 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:15:47 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:15:47 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 338(Long)
2025-11-06 13:15:47 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:15:47 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:15:47 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 337(Long)
2025-11-06 13:15:47 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:15:47 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:15:47 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 336(Long)
2025-11-06 13:15:47 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:15:47 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:15:47 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 335(Long)
2025-11-06 13:15:48 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:15:48 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:15:48 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 334(Long)
2025-11-06 13:15:48 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:15:48 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:15:48 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 333(Long)
2025-11-06 13:15:48 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:15:48 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:15:48 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 332(Long)
2025-11-06 13:15:48 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:15:48 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:15:48 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 331(Long)
2025-11-06 13:15:48 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:15:48 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:15:48 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 330(Long)
2025-11-06 13:15:48 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:15:48 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:15:48 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 329(Long)
2025-11-06 13:15:49 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:15:49 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:15:49 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 328(Long)
2025-11-06 13:15:49 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:15:49 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:15:49 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 327(Long)
2025-11-06 13:15:49 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:15:49 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:15:49 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 326(Long)
2025-11-06 13:15:49 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:15:49 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:15:49 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 325(Long)
2025-11-06 13:15:49 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:15:49 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:15:49 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 324(Long)
2025-11-06 13:15:49 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:15:49 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:15:49 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 323(Long)
2025-11-06 13:15:50 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:15:50 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:15:50 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 322(Long)
2025-11-06 13:15:50 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:15:50 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:15:50 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 321(Long)
2025-11-06 13:15:50 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:15:50 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:15:50 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 320(Long)
2025-11-06 13:15:50 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:15:50 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:15:50 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 1(Long)
2025-11-06 13:15:50 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:15:50 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:15:50 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 379(Long), 1(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 354(Long), 337(Long), 342(Long), 344(Long), 332(Long), 334(Long), 320(Long), 329(Long), 333(Long), 321(Long)
2025-11-06 13:15:51 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 17
2025-11-06 13:15:51 [http-nio-8080-exec-2] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/system/user/list from 127.0.0.1 - 状态: 200 - 耗时: 11524ms
2025-11-06 13:15:51 [http-nio-8080-exec-2] WARN  c.d.c.i.PerformanceInterceptor - 检测到慢请求: POST /api/system/user/list from 127.0.0.1 - 耗时: 11524ms - 超过阈值: 3000ms
2025-11-06 13:15:53 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/adminMerchantsAssetStatistics
2025-11-06 13:15:53 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/adminMerchantsPerformanceStatistics
2025-11-06 13:15:53 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/adminAgentPerformanceStatistics
2025-11-06 13:15:53 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 13:15:53 [http-nio-8080-exec-1] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 13:15:53 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 13:15:53 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 13:15:53 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 13:15:53 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 13:15:53 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 13:15:53 [http-nio-8080-exec-1] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 13:15:53 [http-nio-8080-exec-10] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 13:15:53 [http-nio-8080-exec-1] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 13:15:53 [http-nio-8080-exec-6] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 13:15:53 [http-nio-8080-exec-1] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 13:15:53 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 13:15:53 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 13:15:54 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 13:15:54 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 13:15:54 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 13:15:54 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:15:54 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 13:15:54 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 13:15:54 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 13:15:54 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 13:15:54 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:15:54 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 13:15:54 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 13:15:54 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 13:15:54 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 13:15:54 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 13:15:54 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:15:54 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 13:15:54 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 13:15:54 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 13:15:54 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 13:15:54 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 13:15:54 [http-nio-8080-exec-6] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 13:15:54 [http-nio-8080-exec-6] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 13:15:54 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 13:15:54 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 13:15:54 [http-nio-8080-exec-6] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 13:15:54 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/adminAgentPerformanceStatistics
2025-11-06 13:15:54 [http-nio-8080-exec-6] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/adminAgentPerformanceStatistics from 127.0.0.1
2025-11-06 13:15:54 [http-nio-8080-exec-6] INFO  c.deepreach.common.aspect.LogAspect - LogAspect doBefore 被触发: 统计管理 - getAdminAgentPerformanceStatistics
2025-11-06 13:15:54 [http-nio-8080-exec-6] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志前置处理完成: 统计管理
2025-11-06 13:15:54 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:15:54 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 13:15:54 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 13:15:54 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 13:15:54 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 13:15:54 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 13:15:54 [http-nio-8080-exec-10] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 13:15:54 [http-nio-8080-exec-10] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 13:15:54 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 13:15:54 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 13:15:54 [http-nio-8080-exec-10] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 13:15:54 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/adminMerchantsPerformanceStatistics
2025-11-06 13:15:54 [http-nio-8080-exec-10] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/adminMerchantsPerformanceStatistics from 127.0.0.1
2025-11-06 13:15:54 [http-nio-8080-exec-10] INFO  c.deepreach.common.aspect.LogAspect - LogAspect doBefore 被触发: 统计管理 - getAdminMerchantsPerformanceStatistics
2025-11-06 13:15:54 [http-nio-8080-exec-10] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志前置处理完成: 统计管理
2025-11-06 13:15:54 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:15:54 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 13:15:54 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 49
2025-11-06 13:15:54 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.sumTotalRechargeByUserIds - ==>  Preparing: SELECT b.user_id AS userId, COALESCE(b.total_recharge, 0) AS totalRecharge FROM user_dr_balance b WHERE b.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:15:54 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.sumTotalRechargeByUserIds - ==> Parameters: 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 330(Long), 331(Long), 335(Long), 336(Long), 337(Long), 339(Long), 342(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 340(Long), 343(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 353(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 380(Long), 381(Long)
2025-11-06 13:15:54 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 13:15:54 [http-nio-8080-exec-1] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 13:15:54 [http-nio-8080-exec-1] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 13:15:54 [http-nio-8080-exec-1] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 13:15:54 [http-nio-8080-exec-1] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 13:15:54 [http-nio-8080-exec-1] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 13:15:54 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/adminMerchantsAssetStatistics
2025-11-06 13:15:54 [http-nio-8080-exec-1] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/adminMerchantsAssetStatistics from 127.0.0.1
2025-11-06 13:15:54 [http-nio-8080-exec-1] INFO  c.deepreach.common.aspect.LogAspect - LogAspect doBefore 被触发: 统计管理 - getAdminMerchantsAssetStatistics
2025-11-06 13:15:54 [http-nio-8080-exec-1] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志前置处理完成: 统计管理
2025-11-06 13:15:54 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:15:54 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 13:15:54 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.sumTotalRechargeByUserIds - <==      Total: 13
2025-11-06 13:15:54 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.A.selectCommissionByUserIds - ==>  Preparing: SELECT agent_user_id AS userId, COALESCE(total_commission, 0) AS totalCommission, COALESCE(settled_commission, 0) AS settledCommission FROM dr_agent_commission_account WHERE agent_user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:15:54 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.A.selectCommissionByUserIds - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 13:15:54 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.A.selectCommissionByUserIds - <==      Total: 6
2025-11-06 13:15:55 [http-nio-8080-exec-6] INFO  c.deepreach.common.aspect.LogAspect - 保存操作日志: 统计管理 - admin - /api/statistics/adminAgentPerformanceStatistics - 成功
2025-11-06 13:15:55 [http-nio-8080-exec-6] INFO  c.deepreach.common.aspect.LogAspect - 操作日志对象详情: operId=null, title=统计管理, operName=admin, operUrl=/api/statistics/adminAgentPerformanceStatistics, status=0
2025-11-06 13:15:55 [http-nio-8080-exec-6] INFO  c.deepreach.common.aspect.LogAspect - 准备异步保存操作日志到数据库...
2025-11-06 13:15:55 [http-nio-8080-exec-6] INFO  c.deepreach.common.aspect.LogAspect - 操作日志异步保存任务已提交
2025-11-06 13:15:55 [http-nio-8080-exec-6] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志返回处理完成: 统计管理
2025-11-06 13:15:55 [pool-3-thread-5] DEBUG c.d.c.c.m.S.insertOperLog - ==>  Preparing: INSERT INTO sys_oper_log ( title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2025-11-06 13:15:55 [pool-3-thread-5] DEBUG c.d.c.c.m.S.insertOperLog - ==> Parameters: 统计管理(String), 0(Integer), com.deepreach.common.core.controller.StatisticsController.getAdminAgentPerformanceStatistics(String), GET(String), 1(Integer), admin(String), ADMIN(String), /api/statistics/adminAgentPerformanceStatistics(String), 127.0.0.1(String), null, (String), {"code":200,"msg":"操作成功","data":{"generalAgent":{"identity":"agent_level_1","identityDisplay":"总代","agentCount":4,"totalRecharge":132000.00,"totalCommission":33200.00},"level1Agent":{"identity":"agent_level_2","identityDisplay":"一级代理","agentCount":4,"totalRecharge":33000.00,"totalCommission":3300.00},"level2Agent":{"identity":"agent_level_3","identityDisplay":"二级代理","agentCount":6,"totalRecharge":33000.00,"totalCommission":3300.00},"total":{"identity":"total","identityDisplay":"合计","agentCount":14,"totalRecharge":198000.00,"totalCommission":39800.00}},"timestamp":1762406155001,"error":false,"success":true}(String), 0(Integer), null, 2025-11-06T13:15:54.487133(LocalDateTime), 514(Long)
2025-11-06 13:15:55 [http-nio-8080-exec-6] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/adminAgentPerformanceStatistics from 127.0.0.1 - 状态: 200 - 耗时: 518ms
2025-11-06 13:15:55 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 49
2025-11-06 13:15:55 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.sumTotalRechargeByUserIds - ==>  Preparing: SELECT b.user_id AS userId, COALESCE(b.total_recharge, 0) AS totalRecharge FROM user_dr_balance b WHERE b.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:15:55 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.sumTotalRechargeByUserIds - ==> Parameters: 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 330(Long), 331(Long), 335(Long), 336(Long), 337(Long), 339(Long), 342(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long)
2025-11-06 13:15:55 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 49
2025-11-06 13:15:55 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.sumTotalRechargeByUserIds - ==>  Preparing: SELECT b.user_id AS userId, COALESCE(b.total_recharge, 0) AS totalRecharge FROM user_dr_balance b WHERE b.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:15:55 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.sumTotalRechargeByUserIds - ==> Parameters: 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 330(Long), 331(Long), 335(Long), 336(Long), 337(Long), 339(Long), 342(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long)
2025-11-06 13:15:55 [pool-3-thread-5] DEBUG c.d.c.c.m.S.insertOperLog - <==    Updates: 1
2025-11-06 13:15:55 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.sumTotalRechargeByUserIds - <==      Total: 13
2025-11-06 13:15:55 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.countAiCharactersByType - ==>  Preparing: SELECT COALESCE(c.type, 'unknown') AS type, COUNT(*) AS count FROM ai_character c WHERE c.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) GROUP BY COALESCE(c.type, 'unknown')
2025-11-06 13:15:55 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.countAiCharactersByType - ==> Parameters: 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 330(Long), 331(Long), 335(Long), 336(Long), 337(Long), 339(Long), 342(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 340(Long), 343(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 353(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 380(Long), 381(Long)
2025-11-06 13:15:55 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.sumTotalRechargeByUserIds - <==      Total: 13
2025-11-06 13:15:55 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.A.selectCommissionByUserIds - ==>  Preparing: SELECT agent_user_id AS userId, COALESCE(total_commission, 0) AS totalCommission, COALESCE(settled_commission, 0) AS settledCommission FROM dr_agent_commission_account WHERE agent_user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:15:55 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.A.selectCommissionByUserIds - ==> Parameters: 320(Long), 332(Long), 354(Long), 356(Long), 321(Long), 333(Long), 344(Long), 355(Long), 322(Long), 329(Long), 334(Long), 338(Long), 345(Long), 357(Long)
2025-11-06 13:15:55 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.countAiCharactersByType - <==      Total: 1
2025-11-06 13:15:55 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectAllPlatforms - ==>  Preparing: SELECT platform_id AS platformId, COALESCE(platform_name, 'UNKNOWN_PLATFORM') AS platformName, COALESCE(platform_type, 'unknown') AS platformType FROM platform WHERE status = '0' ORDER BY platform_id
2025-11-06 13:15:55 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectAllPlatforms - ==> Parameters: 
2025-11-06 13:15:55 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.A.selectCommissionByUserIds - <==      Total: 6
2025-11-06 13:15:55 [http-nio-8080-exec-1] INFO  c.deepreach.common.aspect.LogAspect - 保存操作日志: 统计管理 - admin - /api/statistics/adminMerchantsAssetStatistics - 成功
2025-11-06 13:15:55 [http-nio-8080-exec-1] INFO  c.deepreach.common.aspect.LogAspect - 操作日志对象详情: operId=null, title=统计管理, operName=admin, operUrl=/api/statistics/adminMerchantsAssetStatistics, status=0
2025-11-06 13:15:55 [http-nio-8080-exec-1] INFO  c.deepreach.common.aspect.LogAspect - 准备异步保存操作日志到数据库...
2025-11-06 13:15:55 [http-nio-8080-exec-1] INFO  c.deepreach.common.aspect.LogAspect - 操作日志异步保存任务已提交
2025-11-06 13:15:55 [http-nio-8080-exec-1] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志返回处理完成: 统计管理
2025-11-06 13:15:55 [pool-3-thread-1] DEBUG c.d.c.c.m.S.insertOperLog - ==>  Preparing: INSERT INTO sys_oper_log ( title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2025-11-06 13:15:55 [pool-3-thread-1] DEBUG c.d.c.c.m.S.insertOperLog - ==> Parameters: 统计管理(String), 0(Integer), com.deepreach.common.core.controller.StatisticsController.getAdminMerchantsAssetStatistics(String), GET(String), 1(Integer), admin(String), ADMIN(String), /api/statistics/adminMerchantsAssetStatistics(String), 127.0.0.1(String), null, (String), {"code":200,"msg":"操作成功","data":{"totalRecharge":151000.00,"settledCommission":800.00,"netValue":150200.00},"timestamp":1762406155580,"error":false,"success":true}(String), 0(Integer), null, 2025-11-06T13:15:54.679922(LocalDateTime), 901(Long)
2025-11-06 13:15:55 [http-nio-8080-exec-1] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/adminMerchantsAssetStatistics from 127.0.0.1 - 状态: 200 - 耗时: 906ms
2025-11-06 13:15:55 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectAllPlatforms - <==      Total: 8
2025-11-06 13:15:55 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.countInstancesByType - ==>  Preparing: SELECT i.instance_type AS instanceType, COUNT(*) AS count FROM ai_instance i WHERE i.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) GROUP BY i.instance_type
2025-11-06 13:15:55 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.countInstancesByType - ==> Parameters: 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 330(Long), 331(Long), 335(Long), 336(Long), 337(Long), 339(Long), 342(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 340(Long), 343(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 353(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 380(Long), 381(Long)
2025-11-06 13:15:55 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.countInstancesByType - <==      Total: 2
2025-11-06 13:15:55 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.countInstancesByPlatform - ==>  Preparing: SELECT COALESCE(i.platform_id, 0) AS platformId, COALESCE(p.platform_name, 'UNKNOWN_PLATFORM') AS platformName, COUNT(*) AS count FROM ai_instance i LEFT JOIN platform p ON i.platform_id = p.platform_id WHERE i.instance_type = ? AND i.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) GROUP BY COALESCE(i.platform_id, 0), COALESCE(p.platform_name, 'UNKNOWN_PLATFORM')
2025-11-06 13:15:55 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.countInstancesByPlatform - ==> Parameters: 0(String), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 330(Long), 331(Long), 335(Long), 336(Long), 337(Long), 339(Long), 342(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 340(Long), 343(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 353(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 380(Long), 381(Long)
2025-11-06 13:15:55 [pool-3-thread-1] DEBUG c.d.c.c.m.S.insertOperLog - <==    Updates: 1
2025-11-06 13:15:55 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.countInstancesByPlatform - <==      Total: 2
2025-11-06 13:15:55 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.countInstancesByPlatform - ==>  Preparing: SELECT COALESCE(i.platform_id, 0) AS platformId, COALESCE(p.platform_name, 'UNKNOWN_PLATFORM') AS platformName, COUNT(*) AS count FROM ai_instance i LEFT JOIN platform p ON i.platform_id = p.platform_id WHERE i.instance_type = ? AND i.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) GROUP BY COALESCE(i.platform_id, 0), COALESCE(p.platform_name, 'UNKNOWN_PLATFORM')
2025-11-06 13:15:55 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.countInstancesByPlatform - ==> Parameters: 1(String), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 330(Long), 331(Long), 335(Long), 336(Long), 337(Long), 339(Long), 342(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 340(Long), 343(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 353(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 380(Long), 381(Long)
2025-11-06 13:15:56 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.countInstancesByPlatform - <==      Total: 3
2025-11-06 13:15:56 [http-nio-8080-exec-10] INFO  c.deepreach.common.aspect.LogAspect - 保存操作日志: 统计管理 - admin - /api/statistics/adminMerchantsPerformanceStatistics - 成功
2025-11-06 13:15:56 [http-nio-8080-exec-10] INFO  c.deepreach.common.aspect.LogAspect - 操作日志对象详情: operId=null, title=统计管理, operName=admin, operUrl=/api/statistics/adminMerchantsPerformanceStatistics, status=0
2025-11-06 13:15:56 [http-nio-8080-exec-10] INFO  c.deepreach.common.aspect.LogAspect - 准备异步保存操作日志到数据库...
2025-11-06 13:15:56 [http-nio-8080-exec-10] INFO  c.deepreach.common.aspect.LogAspect - 操作日志异步保存任务已提交
2025-11-06 13:15:56 [http-nio-8080-exec-10] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志返回处理完成: 统计管理
2025-11-06 13:15:56 [pool-3-thread-2] DEBUG c.d.c.c.m.S.insertOperLog - ==>  Preparing: INSERT INTO sys_oper_log ( title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2025-11-06 13:15:56 [http-nio-8080-exec-10] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/adminMerchantsPerformanceStatistics from 127.0.0.1 - 状态: 200 - 耗时: 1490ms
2025-11-06 13:15:56 [pool-3-thread-2] DEBUG c.d.c.c.m.S.insertOperLog - ==> Parameters: 统计管理(String), 0(Integer), com.deepreach.common.core.controller.StatisticsController.getAdminMerchantsPerformanceStatistics(String), GET(String), 1(Integer), admin(String), ADMIN(String), /api/statistics/adminMerchantsPerformanceStatistics(String), 127.0.0.1(String), null, (String), {"code":200,"msg":"操作成功","data":{"merchantOverview":{"merchantCount":19,"employeeCount":15,"totalPerformance":151000.00},"aiCharacterOverview":{"totalCharacters":9,"socialAiCount":9,"customerServiceAiCount":0},"marketingInstanceOverview":{"instanceCount":13,"platformBreakdown":{"WhatsApp":7,"Telegram":6}},"prospectingInstanceOverview":{"instanceCount":7,"platformBreakdown":{"SMS":3,"Facebook":3,"Instagram":0,"TikTok":1,"X":0,"GoogleVoice":0}}},"timestamp":1762406156129,"error":false,"success":true}(String), 0(Integer), null, 2025-11-06T13:15:54.643149(LocalDateTime), 1486(Long)
2025-11-06 13:15:56 [pool-3-thread-2] DEBUG c.d.c.c.m.S.insertOperLog - <==    Updates: 1
2025-11-06 13:15:57 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing POST /system/user/list
2025-11-06 13:15:57 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 13:15:57 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 13:15:57 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 13:15:57 [http-nio-8080-exec-9] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 13:15:57 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 13:15:57 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 13:15:57 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 13:15:57 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:15:57 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 13:15:58 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 13:15:58 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 13:15:58 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 13:15:58 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 13:15:58 [http-nio-8080-exec-9] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 13:15:58 [http-nio-8080-exec-9] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 13:15:58 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 13:15:58 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 13:15:58 [http-nio-8080-exec-9] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 13:15:58 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured POST /system/user/list
2025-11-06 13:15:58 [http-nio-8080-exec-9] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/system/user/list from 127.0.0.1
2025-11-06 13:15:58 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserList - ==>  Preparing: SELECT DISTINCT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_name, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur_filter ON u.user_id = ur_filter.user_id LEFT JOIN sys_role r_filter ON ur_filter.role_id = r_filter.role_id AND r_filter.del_flag = '0' WHERE u.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY u.create_time DESC
2025-11-06 13:15:58 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserList - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 13:15:59 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserList - <==      Total: 49
2025-11-06 13:15:59 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:15:59 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 381(Long)
2025-11-06 13:16:00 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:16:00 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:16:00 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 380(Long)
2025-11-06 13:16:00 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:16:00 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:16:00 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 379(Long)
2025-11-06 13:16:00 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:16:00 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:16:00 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 378(Long)
2025-11-06 13:16:00 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:16:00 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:16:00 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 377(Long)
2025-11-06 13:16:01 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:16:01 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:16:01 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 376(Long)
2025-11-06 13:16:01 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:16:01 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:16:01 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 375(Long)
2025-11-06 13:16:01 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:16:01 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:16:01 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 374(Long)
2025-11-06 13:16:01 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:16:01 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:16:01 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 373(Long)
2025-11-06 13:16:02 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:16:02 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:16:02 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 372(Long)
2025-11-06 13:16:02 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:16:02 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:16:02 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 371(Long)
2025-11-06 13:16:02 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:16:02 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:16:02 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 370(Long)
2025-11-06 13:16:02 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:16:02 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:16:02 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 369(Long)
2025-11-06 13:16:03 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:16:03 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:16:03 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 357(Long)
2025-11-06 13:16:03 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:16:03 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:16:03 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 356(Long)
2025-11-06 13:16:03 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:16:03 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:16:03 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 355(Long)
2025-11-06 13:16:03 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:16:03 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:16:03 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 354(Long)
2025-11-06 13:16:03 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:16:03 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:16:03 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 353(Long)
2025-11-06 13:16:04 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:16:04 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:16:04 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 352(Long)
2025-11-06 13:16:04 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:16:04 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:16:04 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 351(Long)
2025-11-06 13:16:04 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:16:04 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:16:04 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 349(Long)
2025-11-06 13:16:04 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:16:04 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:16:04 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 348(Long)
2025-11-06 13:16:04 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:16:04 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:16:04 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 347(Long)
2025-11-06 13:16:04 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:16:04 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:16:04 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 345(Long)
2025-11-06 13:16:05 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:16:05 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:16:05 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 344(Long)
2025-11-06 13:16:05 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:16:05 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:16:05 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 343(Long)
2025-11-06 13:16:05 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:16:05 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:16:05 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 342(Long)
2025-11-06 13:16:05 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:16:05 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:16:05 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 340(Long)
2025-11-06 13:16:06 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:16:06 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:16:06 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 339(Long)
2025-11-06 13:16:06 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:16:06 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:16:06 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 338(Long)
2025-11-06 13:16:06 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:16:06 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:16:06 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 337(Long)
2025-11-06 13:16:06 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:16:06 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:16:06 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 336(Long)
2025-11-06 13:16:06 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:16:06 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:16:06 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 335(Long)
2025-11-06 13:16:06 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:16:06 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:16:06 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 334(Long)
2025-11-06 13:16:07 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:16:07 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:16:07 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 333(Long)
2025-11-06 13:16:07 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:16:07 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:16:07 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 332(Long)
2025-11-06 13:16:07 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:16:07 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:16:07 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 331(Long)
2025-11-06 13:16:07 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:16:07 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:16:07 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 330(Long)
2025-11-06 13:16:08 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:16:08 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:16:08 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 329(Long)
2025-11-06 13:16:08 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:16:08 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:16:08 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 328(Long)
2025-11-06 13:16:08 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:16:08 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:16:08 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 327(Long)
2025-11-06 13:16:08 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:16:08 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:16:08 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 326(Long)
2025-11-06 13:16:09 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:16:09 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:16:09 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 325(Long)
2025-11-06 13:16:10 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:16:10 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:16:10 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 324(Long)
2025-11-06 13:16:10 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:16:10 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:16:10 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 323(Long)
2025-11-06 13:16:10 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:16:10 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:16:10 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 322(Long)
2025-11-06 13:16:10 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:16:10 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:16:10 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 321(Long)
2025-11-06 13:16:10 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:16:10 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:16:10 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 320(Long)
2025-11-06 13:16:11 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:16:11 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:16:11 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 1(Long)
2025-11-06 13:16:11 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:16:11 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:16:11 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 379(Long), 1(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 354(Long), 337(Long), 342(Long), 344(Long), 332(Long), 334(Long), 320(Long), 329(Long), 333(Long), 321(Long)
2025-11-06 13:16:11 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 17
2025-11-06 13:16:11 [http-nio-8080-exec-9] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/system/user/list from 127.0.0.1 - 状态: 200 - 耗时: 12864ms
2025-11-06 13:16:11 [http-nio-8080-exec-9] WARN  c.d.c.i.PerformanceInterceptor - 检测到慢请求: POST /api/system/user/list from 127.0.0.1 - 耗时: 12864ms - 超过阈值: 3000ms
2025-11-06 13:16:38 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /system/user/357/agent-identity
2025-11-06 13:16:38 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /system/user/357/agent-identity
2025-11-06 13:16:38 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 13:16:38 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 13:16:38 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 13:16:38 [http-nio-8080-exec-2] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 13:16:38 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 13:16:38 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 13:16:38 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 13:16:38 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:16:38 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 13:16:39 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 13:16:39 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 13:16:39 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 13:16:39 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 13:16:39 [http-nio-8080-exec-2] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 13:16:39 [http-nio-8080-exec-2] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 13:16:39 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 13:16:39 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 13:16:39 [http-nio-8080-exec-2] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 13:16:39 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /system/user/357/agent-identity
2025-11-06 13:16:39 [http-nio-8080-exec-2] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: PUT /api/system/user/357/agent-identity from 127.0.0.1
2025-11-06 13:16:39 [http-nio-8080-exec-2] INFO  c.deepreach.common.aspect.LogAspect - LogAspect doBefore 被触发: 调整代理身份 - adjustAgentIdentity
2025-11-06 13:16:39 [http-nio-8080-exec-2] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志前置处理完成: 调整代理身份
2025-11-06 13:16:40 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithDept - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.user_id = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 13:16:40 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithDept - ==> Parameters: 357(Long)
2025-11-06 13:16:40 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithDept - <==      Total: 1
2025-11-06 13:16:40 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:16:40 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 357(Long)
2025-11-06 13:16:40 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:16:40 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithDept - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.user_id = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 13:16:40 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithDept - ==> Parameters: 354(Long)
2025-11-06 13:16:40 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithDept - <==      Total: 1
2025-11-06 13:16:40 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:16:40 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 354(Long)
2025-11-06 13:16:40 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:16:40 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleByKey - ==>  Preparing: SELECT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.menu_check_strictly, r.dept_check_strictly, r.status, r.del_flag, r.create_by, r.create_time, r.update_by, r.update_time, r.remark FROM sys_role r WHERE role_key = ?
2025-11-06 13:16:40 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleByKey - ==> Parameters: agent_level_2(String)
2025-11-06 13:16:40 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleByKey - <==      Total: 1
2025-11-06 13:16:40 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.deleteUserRoles - ==>  Preparing: DELETE FROM sys_user_role WHERE user_id = ?
2025-11-06 13:16:40 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.deleteUserRoles - ==> Parameters: 357(Long)
2025-11-06 13:16:41 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.deleteUserRoles - <==    Updates: 1
2025-11-06 13:16:41 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.assignUserRoles - ==>  Preparing: INSERT INTO sys_user_role (user_id, role_id) VALUES (?, ?)
2025-11-06 13:16:41 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.assignUserRoles - ==> Parameters: 357(Long), 11(Long)
2025-11-06 13:16:42 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.assignUserRoles - <==    Updates: 1
2025-11-06 13:16:42 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectAllUserHierarchyRelations - ==>  Preparing: SELECT u.user_id AS userId, u.parent_user_id AS parentUserId FROM sys_user u WHERE u.status = '0'
2025-11-06 13:16:42 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectAllUserHierarchyRelations - ==> Parameters: 
2025-11-06 13:16:42 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectAllUserHierarchyRelations - <==      Total: 49
2025-11-06 13:16:42 [http-nio-8080-exec-2] INFO  c.d.c.c.s.impl.SysUserServiceImpl - 用户层级树缓存刷新成功：记录总数=49, 根节点数量=1
2025-11-06 13:16:42 [http-nio-8080-exec-2] INFO  c.d.c.c.s.impl.SysUserServiceImpl - 调整代理身份成功：userId=357, from=AGENT_LEVEL_3, to=AGENT_LEVEL_2
2025-11-06 13:16:43 [http-nio-8080-exec-2] INFO  c.deepreach.common.aspect.LogAspect - 保存操作日志: 调整代理身份 - admin - /api/system/user/357/agent-identity - 成功
2025-11-06 13:16:43 [http-nio-8080-exec-2] INFO  c.deepreach.common.aspect.LogAspect - 操作日志对象详情: operId=null, title=调整代理身份, operName=admin, operUrl=/api/system/user/357/agent-identity, status=0
2025-11-06 13:16:43 [http-nio-8080-exec-2] INFO  c.deepreach.common.aspect.LogAspect - 准备异步保存操作日志到数据库...
2025-11-06 13:16:43 [http-nio-8080-exec-2] INFO  c.deepreach.common.aspect.LogAspect - 操作日志异步保存任务已提交
2025-11-06 13:16:43 [http-nio-8080-exec-2] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志返回处理完成: 调整代理身份
2025-11-06 13:16:43 [pool-3-thread-3] DEBUG c.d.c.c.m.S.insertOperLog - ==>  Preparing: INSERT INTO sys_oper_log ( title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2025-11-06 13:16:43 [pool-3-thread-3] DEBUG c.d.c.c.m.S.insertOperLog - ==> Parameters: 调整代理身份(String), 2(Integer), com.deepreach.common.core.controller.SysUserController.adjustAgentIdentity(String), PUT(String), 1(Integer), admin(String), ADMIN(String), /api/system/user/357/agent-identity(String), 127.0.0.1(String), null, [357,{"targetIdentity":"agent_level_2"}](String), {"code":200,"msg":"调整代理身份成功","data":null,"timestamp":1762406203417,"error":false,"success":true}(String), 0(Integer), null, 2025-11-06T13:16:39.516340(LocalDateTime), 3905(Long)
2025-11-06 13:16:43 [http-nio-8080-exec-2] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: PUT /api/system/user/357/agent-identity from 127.0.0.1 - 状态: 200 - 耗时: 3926ms
2025-11-06 13:16:43 [http-nio-8080-exec-2] WARN  c.d.c.i.PerformanceInterceptor - 检测到慢请求: PUT /api/system/user/357/agent-identity from 127.0.0.1 - 耗时: 3926ms - 超过阈值: 3000ms
2025-11-06 13:16:44 [pool-3-thread-3] DEBUG c.d.c.c.m.S.insertOperLog - <==    Updates: 1
2025-11-06 13:16:53 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /system/user/357/agent-identity
2025-11-06 13:16:53 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 13:16:53 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 13:16:53 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 13:16:53 [http-nio-8080-exec-6] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 13:16:53 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 13:16:53 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 13:16:53 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 13:16:53 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:16:53 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 13:16:53 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 13:16:53 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 13:16:53 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 13:16:53 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 13:16:53 [http-nio-8080-exec-6] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 13:16:53 [http-nio-8080-exec-6] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 13:16:53 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 13:16:53 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 13:16:53 [http-nio-8080-exec-6] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 13:16:53 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /system/user/357/agent-identity
2025-11-06 13:16:53 [http-nio-8080-exec-6] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: PUT /api/system/user/357/agent-identity from 127.0.0.1
2025-11-06 13:16:53 [http-nio-8080-exec-6] INFO  c.deepreach.common.aspect.LogAspect - LogAspect doBefore 被触发: 调整代理身份 - adjustAgentIdentity
2025-11-06 13:16:53 [http-nio-8080-exec-6] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志前置处理完成: 调整代理身份
2025-11-06 13:16:53 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithDept - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.user_id = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 13:16:53 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithDept - ==> Parameters: 357(Long)
2025-11-06 13:16:53 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithDept - <==      Total: 1
2025-11-06 13:16:53 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:16:53 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 357(Long)
2025-11-06 13:16:54 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:16:54 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithDept - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.user_id = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 13:16:54 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithDept - ==> Parameters: 354(Long)
2025-11-06 13:16:54 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithDept - <==      Total: 1
2025-11-06 13:16:54 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:16:54 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 354(Long)
2025-11-06 13:16:54 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:16:54 [http-nio-8080-exec-6] ERROR c.d.c.c.controller.SysUserController - 调整代理身份失败：userId=357, request=AgentIdentityAdjustRequest(targetIdentity=agent_level_1)
java.lang.RuntimeException: 上级用户身份不足，无法执行该调整
	at com.deepreach.common.core.service.impl.SysUserServiceImpl.adjustAgentIdentity(SysUserServiceImpl.java:917)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.deepreach.common.core.service.impl.SysUserServiceImpl$$SpringCGLIB$$0.adjustAgentIdentity(<generated>)
	at com.deepreach.common.core.controller.SysUserController.adjustAgentIdentity(SysUserController.java:820)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:64)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:58)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.deepreach.common.core.controller.SysUserController$$SpringCGLIB$$0.adjustAgentIdentity(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPut(FrameworkServlet.java:925)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:593)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.deepreach.common.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:136)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-11-06 13:16:54 [http-nio-8080-exec-6] INFO  c.deepreach.common.aspect.LogAspect - 保存操作日志: 调整代理身份 - admin - /api/system/user/357/agent-identity - 成功
2025-11-06 13:16:54 [http-nio-8080-exec-6] INFO  c.deepreach.common.aspect.LogAspect - 操作日志对象详情: operId=null, title=调整代理身份, operName=admin, operUrl=/api/system/user/357/agent-identity, status=0
2025-11-06 13:16:54 [http-nio-8080-exec-6] INFO  c.deepreach.common.aspect.LogAspect - 准备异步保存操作日志到数据库...
2025-11-06 13:16:54 [http-nio-8080-exec-6] INFO  c.deepreach.common.aspect.LogAspect - 操作日志异步保存任务已提交
2025-11-06 13:16:54 [http-nio-8080-exec-6] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志返回处理完成: 调整代理身份
2025-11-06 13:16:54 [pool-3-thread-4] DEBUG c.d.c.c.m.S.insertOperLog - ==>  Preparing: INSERT INTO sys_oper_log ( title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2025-11-06 13:16:54 [http-nio-8080-exec-6] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: PUT /api/system/user/357/agent-identity from 127.0.0.1 - 状态: 200 - 耗时: 1136ms
2025-11-06 13:16:54 [pool-3-thread-4] DEBUG c.d.c.c.m.S.insertOperLog - ==> Parameters: 调整代理身份(String), 2(Integer), com.deepreach.common.core.controller.SysUserController.adjustAgentIdentity(String), PUT(String), 1(Integer), admin(String), ADMIN(String), /api/system/user/357/agent-identity(String), 127.0.0.1(String), null, [357,{"targetIdentity":"agent_level_1"}](String), {"code":500,"msg":"调整代理身份失败：上级用户身份不足，无法执行该调整","data":null,"timestamp":1762406214783,"error":true,"success":false}(String), 0(Integer), null, 2025-11-06T13:16:53.651265(LocalDateTime), 1132(Long)
2025-11-06 13:16:55 [pool-3-thread-4] DEBUG c.d.c.c.m.S.insertOperLog - <==    Updates: 1
2025-11-06 13:17:05 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing POST /system/user/list
2025-11-06 13:17:05 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 13:17:05 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 13:17:05 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 13:17:05 [http-nio-8080-exec-10] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 13:17:05 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 13:17:05 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 13:17:06 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 13:17:06 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:06 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 13:17:06 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 13:17:06 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 13:17:06 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 13:17:06 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 13:17:06 [http-nio-8080-exec-10] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 13:17:06 [http-nio-8080-exec-10] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 13:17:06 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 13:17:06 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 13:17:06 [http-nio-8080-exec-10] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 13:17:06 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured POST /system/user/list
2025-11-06 13:17:06 [http-nio-8080-exec-10] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/system/user/list from 127.0.0.1
2025-11-06 13:17:06 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserList - ==>  Preparing: SELECT DISTINCT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_name, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur_filter ON u.user_id = ur_filter.user_id LEFT JOIN sys_role r_filter ON ur_filter.role_id = r_filter.role_id AND r_filter.del_flag = '0' WHERE u.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY u.create_time DESC
2025-11-06 13:17:06 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserList - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 13:17:06 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserList - <==      Total: 49
2025-11-06 13:17:06 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:06 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 381(Long)
2025-11-06 13:17:07 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:07 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:07 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 380(Long)
2025-11-06 13:17:07 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:07 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:07 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 379(Long)
2025-11-06 13:17:07 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:07 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:07 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 378(Long)
2025-11-06 13:17:07 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:07 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:07 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 377(Long)
2025-11-06 13:17:07 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:07 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:07 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 376(Long)
2025-11-06 13:17:08 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:08 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:08 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 375(Long)
2025-11-06 13:17:08 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:08 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:08 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 374(Long)
2025-11-06 13:17:08 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:08 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:08 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 373(Long)
2025-11-06 13:17:08 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:08 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:08 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 372(Long)
2025-11-06 13:17:08 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:08 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:08 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 371(Long)
2025-11-06 13:17:08 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:08 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:08 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 370(Long)
2025-11-06 13:17:09 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:09 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:09 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 369(Long)
2025-11-06 13:17:09 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:09 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:09 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 357(Long)
2025-11-06 13:17:09 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:09 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:09 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 356(Long)
2025-11-06 13:17:09 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:09 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:09 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 355(Long)
2025-11-06 13:17:09 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:09 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:09 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 354(Long)
2025-11-06 13:17:09 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:09 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:09 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 353(Long)
2025-11-06 13:17:10 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:10 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:10 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 352(Long)
2025-11-06 13:17:10 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:10 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:10 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 351(Long)
2025-11-06 13:17:10 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:10 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:10 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 349(Long)
2025-11-06 13:17:10 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:10 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:10 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 348(Long)
2025-11-06 13:17:10 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:10 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:10 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 347(Long)
2025-11-06 13:17:10 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:10 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:10 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 345(Long)
2025-11-06 13:17:10 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:10 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:10 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 344(Long)
2025-11-06 13:17:11 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:11 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:11 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 343(Long)
2025-11-06 13:17:11 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:11 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:11 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 342(Long)
2025-11-06 13:17:12 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:12 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:12 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 340(Long)
2025-11-06 13:17:12 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:12 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:12 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 339(Long)
2025-11-06 13:17:12 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:12 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:12 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 338(Long)
2025-11-06 13:17:12 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:12 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:12 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 337(Long)
2025-11-06 13:17:12 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:12 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:12 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 336(Long)
2025-11-06 13:17:12 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:12 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:12 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 335(Long)
2025-11-06 13:17:13 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:13 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:13 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 334(Long)
2025-11-06 13:17:14 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:14 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:14 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 333(Long)
2025-11-06 13:17:15 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:15 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:15 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 332(Long)
2025-11-06 13:17:15 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:15 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:15 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 331(Long)
2025-11-06 13:17:15 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:15 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:15 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 330(Long)
2025-11-06 13:17:16 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:16 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:16 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 329(Long)
2025-11-06 13:17:16 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:16 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:16 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 328(Long)
2025-11-06 13:17:16 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:16 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:16 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 327(Long)
2025-11-06 13:17:16 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:16 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:16 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 326(Long)
2025-11-06 13:17:17 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:17 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:17 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 325(Long)
2025-11-06 13:17:17 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:17 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:17 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 324(Long)
2025-11-06 13:17:17 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:17 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:17 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 323(Long)
2025-11-06 13:17:17 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:17 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:17 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 322(Long)
2025-11-06 13:17:18 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:18 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:18 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 321(Long)
2025-11-06 13:17:18 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:18 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:18 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 320(Long)
2025-11-06 13:17:18 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:18 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:18 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 1(Long)
2025-11-06 13:17:18 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:18 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:17:18 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 379(Long), 1(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 354(Long), 337(Long), 342(Long), 344(Long), 332(Long), 334(Long), 320(Long), 329(Long), 333(Long), 321(Long)
2025-11-06 13:17:19 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 17
2025-11-06 13:17:19 [http-nio-8080-exec-10] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/system/user/list from 127.0.0.1 - 状态: 200 - 耗时: 12633ms
2025-11-06 13:17:19 [http-nio-8080-exec-10] WARN  c.d.c.i.PerformanceInterceptor - 检测到慢请求: POST /api/system/user/list from 127.0.0.1 - 耗时: 12633ms - 超过阈值: 3000ms
2025-11-06 13:17:42 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /system/user/345/agent-identity
2025-11-06 13:17:42 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /system/user/345/agent-identity
2025-11-06 13:17:42 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 13:17:42 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 13:17:42 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 13:17:42 [http-nio-8080-exec-9] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 13:17:42 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 13:17:42 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 13:17:43 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 13:17:43 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:43 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 13:17:43 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 13:17:43 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 13:17:43 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 13:17:43 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 13:17:43 [http-nio-8080-exec-9] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 13:17:43 [http-nio-8080-exec-9] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 13:17:43 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 13:17:43 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 13:17:43 [http-nio-8080-exec-9] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 13:17:43 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /system/user/345/agent-identity
2025-11-06 13:17:43 [http-nio-8080-exec-9] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: PUT /api/system/user/345/agent-identity from 127.0.0.1
2025-11-06 13:17:43 [http-nio-8080-exec-9] INFO  c.deepreach.common.aspect.LogAspect - LogAspect doBefore 被触发: 调整代理身份 - adjustAgentIdentity
2025-11-06 13:17:43 [http-nio-8080-exec-9] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志前置处理完成: 调整代理身份
2025-11-06 13:17:43 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserWithDept - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.user_id = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 13:17:43 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserWithDept - ==> Parameters: 345(Long)
2025-11-06 13:17:43 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserWithDept - <==      Total: 1
2025-11-06 13:17:43 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:43 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 345(Long)
2025-11-06 13:17:43 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:43 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserWithDept - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.user_id = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 13:17:43 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserWithDept - ==> Parameters: 344(Long)
2025-11-06 13:17:44 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserWithDept - <==      Total: 1
2025-11-06 13:17:44 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:44 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 344(Long)
2025-11-06 13:17:44 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:44 [http-nio-8080-exec-9] ERROR c.d.c.c.controller.SysUserController - 调整代理身份失败：userId=345, request=AgentIdentityAdjustRequest(targetIdentity=agent_level_2)
java.lang.RuntimeException: 上级用户身份不足，无法执行该调整
	at com.deepreach.common.core.service.impl.SysUserServiceImpl.adjustAgentIdentity(SysUserServiceImpl.java:917)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.deepreach.common.core.service.impl.SysUserServiceImpl$$SpringCGLIB$$0.adjustAgentIdentity(<generated>)
	at com.deepreach.common.core.controller.SysUserController.adjustAgentIdentity(SysUserController.java:820)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:64)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:58)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.deepreach.common.core.controller.SysUserController$$SpringCGLIB$$0.adjustAgentIdentity(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPut(FrameworkServlet.java:925)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:593)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.deepreach.common.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:136)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-11-06 13:17:44 [http-nio-8080-exec-9] INFO  c.deepreach.common.aspect.LogAspect - 保存操作日志: 调整代理身份 - admin - /api/system/user/345/agent-identity - 成功
2025-11-06 13:17:44 [http-nio-8080-exec-9] INFO  c.deepreach.common.aspect.LogAspect - 操作日志对象详情: operId=null, title=调整代理身份, operName=admin, operUrl=/api/system/user/345/agent-identity, status=0
2025-11-06 13:17:44 [http-nio-8080-exec-9] INFO  c.deepreach.common.aspect.LogAspect - 准备异步保存操作日志到数据库...
2025-11-06 13:17:44 [http-nio-8080-exec-9] INFO  c.deepreach.common.aspect.LogAspect - 操作日志异步保存任务已提交
2025-11-06 13:17:44 [http-nio-8080-exec-9] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志返回处理完成: 调整代理身份
2025-11-06 13:17:44 [pool-3-thread-5] DEBUG c.d.c.c.m.S.insertOperLog - ==>  Preparing: INSERT INTO sys_oper_log ( title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2025-11-06 13:17:44 [http-nio-8080-exec-9] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: PUT /api/system/user/345/agent-identity from 127.0.0.1 - 状态: 200 - 耗时: 1128ms
2025-11-06 13:17:44 [pool-3-thread-5] DEBUG c.d.c.c.m.S.insertOperLog - ==> Parameters: 调整代理身份(String), 2(Integer), com.deepreach.common.core.controller.SysUserController.adjustAgentIdentity(String), PUT(String), 1(Integer), admin(String), ADMIN(String), /api/system/user/345/agent-identity(String), 127.0.0.1(String), null, [345,{"targetIdentity":"agent_level_2"}](String), {"code":500,"msg":"调整代理身份失败：上级用户身份不足，无法执行该调整","data":null,"timestamp":1762406264520,"error":true,"success":false}(String), 0(Integer), null, 2025-11-06T13:17:43.399989(LocalDateTime), 1121(Long)
2025-11-06 13:17:44 [pool-3-thread-5] DEBUG c.d.c.c.m.S.insertOperLog - <==    Updates: 1
2025-11-06 13:17:48 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /system/user/list
2025-11-06 13:17:48 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 13:17:48 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 13:17:48 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 13:17:48 [http-nio-8080-exec-4] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 13:17:48 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 13:17:48 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 13:17:49 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 13:17:49 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:49 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 13:17:49 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 13:17:49 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 13:17:49 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 13:17:50 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 13:17:50 [http-nio-8080-exec-4] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 13:17:50 [http-nio-8080-exec-4] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 13:17:50 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 13:17:50 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 13:17:50 [http-nio-8080-exec-4] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 13:17:50 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured POST /system/user/list
2025-11-06 13:17:50 [http-nio-8080-exec-4] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/system/user/list from 127.0.0.1
2025-11-06 13:17:50 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserList - ==>  Preparing: SELECT DISTINCT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_name, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur_filter ON u.user_id = ur_filter.user_id LEFT JOIN sys_role r_filter ON ur_filter.role_id = r_filter.role_id AND r_filter.del_flag = '0' WHERE u.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY u.create_time DESC
2025-11-06 13:17:50 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserList - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 13:17:50 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserList - <==      Total: 49
2025-11-06 13:17:50 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:50 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 381(Long)
2025-11-06 13:17:50 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:50 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:50 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 380(Long)
2025-11-06 13:17:50 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:50 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:50 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 379(Long)
2025-11-06 13:17:51 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:51 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:51 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 378(Long)
2025-11-06 13:17:51 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:51 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:51 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 377(Long)
2025-11-06 13:17:51 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:51 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:51 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 376(Long)
2025-11-06 13:17:51 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:51 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:51 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 375(Long)
2025-11-06 13:17:51 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:51 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:51 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 374(Long)
2025-11-06 13:17:52 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:52 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:52 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 373(Long)
2025-11-06 13:17:52 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:52 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:52 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 372(Long)
2025-11-06 13:17:52 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:52 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:52 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 371(Long)
2025-11-06 13:17:52 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:52 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:52 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 370(Long)
2025-11-06 13:17:52 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:52 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:52 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 369(Long)
2025-11-06 13:17:53 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:53 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:53 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 357(Long)
2025-11-06 13:17:53 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:53 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:53 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 356(Long)
2025-11-06 13:17:53 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:53 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:53 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 355(Long)
2025-11-06 13:17:53 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:53 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:53 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 354(Long)
2025-11-06 13:17:54 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:54 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:54 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 353(Long)
2025-11-06 13:17:54 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:54 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:54 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 352(Long)
2025-11-06 13:17:54 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:54 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:54 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 351(Long)
2025-11-06 13:17:54 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:54 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:54 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 349(Long)
2025-11-06 13:17:54 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:54 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:54 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 348(Long)
2025-11-06 13:17:55 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:55 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:55 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 347(Long)
2025-11-06 13:17:55 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:55 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:55 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 345(Long)
2025-11-06 13:17:55 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:55 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:55 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 344(Long)
2025-11-06 13:17:55 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:55 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:55 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 343(Long)
2025-11-06 13:17:55 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:55 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:55 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 342(Long)
2025-11-06 13:17:55 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:55 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:55 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 340(Long)
2025-11-06 13:17:56 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:56 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:56 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 339(Long)
2025-11-06 13:17:56 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:56 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:56 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 338(Long)
2025-11-06 13:17:56 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:56 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:56 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 337(Long)
2025-11-06 13:17:56 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:56 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:56 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 336(Long)
2025-11-06 13:17:56 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:56 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:56 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 335(Long)
2025-11-06 13:17:56 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:56 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:56 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 334(Long)
2025-11-06 13:17:57 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:57 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:57 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 333(Long)
2025-11-06 13:17:57 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:57 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:57 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 332(Long)
2025-11-06 13:17:57 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:57 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:57 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 331(Long)
2025-11-06 13:17:57 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:57 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:57 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 330(Long)
2025-11-06 13:17:57 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:57 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:57 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 329(Long)
2025-11-06 13:17:57 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:57 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:57 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 328(Long)
2025-11-06 13:17:58 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:58 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:58 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 327(Long)
2025-11-06 13:17:58 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:58 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:58 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 326(Long)
2025-11-06 13:17:58 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:58 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:58 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 325(Long)
2025-11-06 13:17:58 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:58 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:58 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 324(Long)
2025-11-06 13:17:59 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:59 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:59 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 323(Long)
2025-11-06 13:17:59 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:59 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:59 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 322(Long)
2025-11-06 13:17:59 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:17:59 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:17:59 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 321(Long)
2025-11-06 13:18:00 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:18:00 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:18:00 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 320(Long)
2025-11-06 13:18:00 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:18:00 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:18:00 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 1(Long)
2025-11-06 13:18:00 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:18:00 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:18:00 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 379(Long), 1(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 354(Long), 337(Long), 342(Long), 344(Long), 332(Long), 334(Long), 320(Long), 329(Long), 333(Long), 321(Long)
2025-11-06 13:18:00 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 17
2025-11-06 13:18:00 [http-nio-8080-exec-4] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/system/user/list from 127.0.0.1 - 状态: 200 - 耗时: 10720ms
2025-11-06 13:18:00 [http-nio-8080-exec-4] WARN  c.d.c.i.PerformanceInterceptor - 检测到慢请求: POST /api/system/user/list from 127.0.0.1 - 耗时: 10720ms - 超过阈值: 3000ms
2025-11-06 13:18:38 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /system/user/list
2025-11-06 13:18:38 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 13:18:38 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 13:18:38 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 13:18:38 [http-nio-8080-exec-2] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 13:18:38 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 13:18:38 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 13:18:38 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 13:18:38 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:18:38 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 13:18:38 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 13:18:38 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 13:18:38 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 13:18:39 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 13:18:39 [http-nio-8080-exec-2] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 13:18:39 [http-nio-8080-exec-2] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 13:18:39 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 13:18:39 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 13:18:39 [http-nio-8080-exec-2] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 13:18:39 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /system/user/list
2025-11-06 13:18:39 [http-nio-8080-exec-2] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/system/user/list from 127.0.0.1
2025-11-06 13:18:39 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserList - ==>  Preparing: SELECT DISTINCT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_name, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur_filter ON u.user_id = ur_filter.user_id LEFT JOIN sys_role r_filter ON ur_filter.role_id = r_filter.role_id AND r_filter.del_flag = '0' WHERE u.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY u.create_time DESC
2025-11-06 13:18:39 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserList - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 13:18:39 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserList - <==      Total: 49
2025-11-06 13:18:39 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:18:39 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 381(Long)
2025-11-06 13:18:39 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:18:39 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:18:39 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 380(Long)
2025-11-06 13:18:40 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:18:40 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:18:40 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 379(Long)
2025-11-06 13:18:40 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:18:40 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:18:40 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 378(Long)
2025-11-06 13:18:40 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:18:40 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:18:40 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 377(Long)
2025-11-06 13:18:40 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:18:40 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:18:40 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 376(Long)
2025-11-06 13:18:40 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:18:40 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:18:40 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 375(Long)
2025-11-06 13:18:40 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:18:40 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:18:40 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 374(Long)
2025-11-06 13:18:41 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:18:41 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:18:41 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 373(Long)
2025-11-06 13:18:41 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:18:41 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:18:41 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 372(Long)
2025-11-06 13:18:41 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:18:41 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:18:41 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 371(Long)
2025-11-06 13:18:41 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:18:41 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:18:41 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 370(Long)
2025-11-06 13:18:41 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:18:41 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:18:41 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 369(Long)
2025-11-06 13:18:41 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:18:41 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:18:41 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 357(Long)
2025-11-06 13:18:42 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:18:42 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:18:42 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 356(Long)
2025-11-06 13:18:42 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:18:42 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:18:42 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 355(Long)
2025-11-06 13:18:42 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:18:42 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:18:42 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 354(Long)
2025-11-06 13:18:42 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:18:42 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:18:42 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 353(Long)
2025-11-06 13:18:43 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:18:43 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:18:43 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 352(Long)
2025-11-06 13:18:43 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:18:43 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:18:43 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 351(Long)
2025-11-06 13:18:43 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:18:43 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:18:43 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 349(Long)
2025-11-06 13:18:43 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:18:43 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:18:43 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 348(Long)
2025-11-06 13:18:44 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:18:44 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:18:44 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 347(Long)
2025-11-06 13:18:44 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:18:44 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:18:44 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 345(Long)
2025-11-06 13:18:44 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:18:44 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:18:44 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 344(Long)
2025-11-06 13:18:44 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:18:44 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:18:44 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 343(Long)
2025-11-06 13:18:45 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:18:45 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:18:45 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 342(Long)
2025-11-06 13:18:45 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:18:45 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:18:45 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 340(Long)
2025-11-06 13:18:45 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:18:45 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:18:45 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 339(Long)
2025-11-06 13:18:45 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:18:45 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:18:45 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 338(Long)
2025-11-06 13:18:46 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:18:46 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:18:46 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 337(Long)
2025-11-06 13:18:46 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:18:46 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:18:46 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 336(Long)
2025-11-06 13:18:46 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:18:46 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:18:46 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 335(Long)
2025-11-06 13:18:46 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:18:46 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:18:46 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 334(Long)
2025-11-06 13:18:46 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:18:46 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:18:46 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 333(Long)
2025-11-06 13:18:46 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:18:46 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:18:46 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 332(Long)
2025-11-06 13:18:46 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:18:46 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:18:46 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 331(Long)
2025-11-06 13:18:47 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:18:47 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:18:47 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 330(Long)
2025-11-06 13:18:47 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:18:47 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:18:47 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 329(Long)
2025-11-06 13:18:47 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:18:47 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:18:47 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 328(Long)
2025-11-06 13:18:47 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:18:47 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:18:47 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 327(Long)
2025-11-06 13:18:47 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:18:47 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:18:47 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 326(Long)
2025-11-06 13:18:47 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:18:47 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:18:47 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 325(Long)
2025-11-06 13:18:48 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:18:48 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:18:48 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 324(Long)
2025-11-06 13:18:48 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:18:48 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:18:48 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 323(Long)
2025-11-06 13:18:48 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:18:48 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:18:48 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 322(Long)
2025-11-06 13:18:48 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:18:48 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:18:48 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 321(Long)
2025-11-06 13:18:49 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:18:49 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:18:49 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 320(Long)
2025-11-06 13:18:49 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:18:49 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:18:49 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 1(Long)
2025-11-06 13:18:49 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:18:49 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:18:49 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 379(Long), 1(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 354(Long), 337(Long), 342(Long), 344(Long), 332(Long), 334(Long), 320(Long), 329(Long), 333(Long), 321(Long)
2025-11-06 13:18:49 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 17
2025-11-06 13:18:49 [http-nio-8080-exec-2] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/system/user/list from 127.0.0.1 - 状态: 200 - 耗时: 10616ms
2025-11-06 13:18:49 [http-nio-8080-exec-2] WARN  c.d.c.i.PerformanceInterceptor - 检测到慢请求: POST /api/system/user/list from 127.0.0.1 - 耗时: 10616ms - 超过阈值: 3000ms
2025-11-06 13:19:01 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /system/user/list
2025-11-06 13:19:01 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 13:19:01 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 13:19:01 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 13:19:01 [http-nio-8080-exec-6] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 13:19:01 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 13:19:01 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 13:19:02 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 13:19:02 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:02 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 13:19:02 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 13:19:02 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 13:19:02 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 13:19:03 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 13:19:03 [http-nio-8080-exec-6] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 13:19:03 [http-nio-8080-exec-6] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 13:19:03 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 13:19:03 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 13:19:03 [http-nio-8080-exec-6] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 13:19:03 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /system/user/list
2025-11-06 13:19:03 [http-nio-8080-exec-6] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/system/user/list from 127.0.0.1
2025-11-06 13:19:03 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserList - ==>  Preparing: SELECT DISTINCT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_name, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur_filter ON u.user_id = ur_filter.user_id LEFT JOIN sys_role r_filter ON ur_filter.role_id = r_filter.role_id AND r_filter.del_flag = '0' WHERE u.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY u.create_time DESC
2025-11-06 13:19:03 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserList - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 13:19:04 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserList - <==      Total: 49
2025-11-06 13:19:04 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:04 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 381(Long)
2025-11-06 13:19:04 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:04 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:04 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 380(Long)
2025-11-06 13:19:04 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:04 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:04 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 379(Long)
2025-11-06 13:19:04 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:04 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:04 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 378(Long)
2025-11-06 13:19:05 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:05 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:05 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 377(Long)
2025-11-06 13:19:05 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:05 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:05 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 376(Long)
2025-11-06 13:19:05 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:05 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:05 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 375(Long)
2025-11-06 13:19:05 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:05 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:05 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 374(Long)
2025-11-06 13:19:06 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:06 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:06 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 373(Long)
2025-11-06 13:19:06 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:06 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:06 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 372(Long)
2025-11-06 13:19:06 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:06 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:06 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 371(Long)
2025-11-06 13:19:06 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:06 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:06 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 370(Long)
2025-11-06 13:19:07 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:07 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:07 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 369(Long)
2025-11-06 13:19:07 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:07 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:07 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 357(Long)
2025-11-06 13:19:07 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:07 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:07 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 356(Long)
2025-11-06 13:19:07 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:07 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:07 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 355(Long)
2025-11-06 13:19:08 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:08 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:08 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 354(Long)
2025-11-06 13:19:08 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:08 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:08 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 353(Long)
2025-11-06 13:19:08 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:08 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:08 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 352(Long)
2025-11-06 13:19:08 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:08 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:08 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 351(Long)
2025-11-06 13:19:08 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:08 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:08 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 349(Long)
2025-11-06 13:19:09 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:09 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:09 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 348(Long)
2025-11-06 13:19:09 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:09 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:09 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 347(Long)
2025-11-06 13:19:09 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:09 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:09 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 345(Long)
2025-11-06 13:19:09 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:09 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:09 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 344(Long)
2025-11-06 13:19:10 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:10 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:10 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 343(Long)
2025-11-06 13:19:10 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:10 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:10 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 342(Long)
2025-11-06 13:19:11 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:11 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:11 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 340(Long)
2025-11-06 13:19:11 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:11 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:11 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 339(Long)
2025-11-06 13:19:11 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:11 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:11 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 338(Long)
2025-11-06 13:19:12 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:12 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:12 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 337(Long)
2025-11-06 13:19:12 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:12 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:12 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 336(Long)
2025-11-06 13:19:12 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:12 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:12 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 335(Long)
2025-11-06 13:19:12 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:12 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:12 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 334(Long)
2025-11-06 13:19:13 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:13 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:13 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 333(Long)
2025-11-06 13:19:13 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:13 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:13 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 332(Long)
2025-11-06 13:19:13 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:13 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:13 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 331(Long)
2025-11-06 13:19:13 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:13 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:13 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 330(Long)
2025-11-06 13:19:14 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:14 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:14 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 329(Long)
2025-11-06 13:19:14 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:14 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:14 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 328(Long)
2025-11-06 13:19:14 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:14 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:14 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 327(Long)
2025-11-06 13:19:14 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:14 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:14 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 326(Long)
2025-11-06 13:19:15 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:15 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:15 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 325(Long)
2025-11-06 13:19:15 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:15 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:15 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 324(Long)
2025-11-06 13:19:15 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:15 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:15 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 323(Long)
2025-11-06 13:19:15 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:15 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:15 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 322(Long)
2025-11-06 13:19:15 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:15 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:15 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 321(Long)
2025-11-06 13:19:15 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:15 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:15 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 320(Long)
2025-11-06 13:19:16 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:16 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:16 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 1(Long)
2025-11-06 13:19:16 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:16 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:19:16 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 379(Long), 1(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 354(Long), 337(Long), 342(Long), 344(Long), 332(Long), 334(Long), 320(Long), 329(Long), 333(Long), 321(Long)
2025-11-06 13:19:16 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 17
2025-11-06 13:19:16 [http-nio-8080-exec-6] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/system/user/list from 127.0.0.1 - 状态: 200 - 耗时: 13675ms
2025-11-06 13:19:16 [http-nio-8080-exec-6] WARN  c.d.c.i.PerformanceInterceptor - 检测到慢请求: POST /api/system/user/list from 127.0.0.1 - 耗时: 13675ms - 超过阈值: 3000ms
2025-11-06 13:19:26 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing POST /system/user/list
2025-11-06 13:19:26 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 13:19:26 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 13:19:26 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 13:19:26 [http-nio-8080-exec-10] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 13:19:26 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 13:19:26 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 13:19:26 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 13:19:26 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:26 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 13:19:27 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 13:19:27 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 13:19:27 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 13:19:27 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 13:19:27 [http-nio-8080-exec-10] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 13:19:27 [http-nio-8080-exec-10] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 13:19:27 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 13:19:27 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 13:19:27 [http-nio-8080-exec-10] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 13:19:27 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured POST /system/user/list
2025-11-06 13:19:27 [http-nio-8080-exec-10] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/system/user/list from 127.0.0.1
2025-11-06 13:19:27 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserList - ==>  Preparing: SELECT DISTINCT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_name, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur_filter ON u.user_id = ur_filter.user_id LEFT JOIN sys_role r_filter ON ur_filter.role_id = r_filter.role_id AND r_filter.del_flag = '0' WHERE u.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY u.create_time DESC
2025-11-06 13:19:27 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserList - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 13:19:27 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserList - <==      Total: 49
2025-11-06 13:19:27 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:27 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 381(Long)
2025-11-06 13:19:28 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:28 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:28 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 380(Long)
2025-11-06 13:19:28 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:28 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:28 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 379(Long)
2025-11-06 13:19:28 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:28 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:28 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 378(Long)
2025-11-06 13:19:28 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:28 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:28 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 377(Long)
2025-11-06 13:19:28 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:28 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:28 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 376(Long)
2025-11-06 13:19:28 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:28 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:28 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 375(Long)
2025-11-06 13:19:29 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:29 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:29 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 374(Long)
2025-11-06 13:19:29 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:29 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:29 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 373(Long)
2025-11-06 13:19:29 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:29 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:29 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 372(Long)
2025-11-06 13:19:29 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:29 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:29 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 371(Long)
2025-11-06 13:19:30 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:30 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:30 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 370(Long)
2025-11-06 13:19:30 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:30 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:30 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 369(Long)
2025-11-06 13:19:30 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:30 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:30 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 357(Long)
2025-11-06 13:19:30 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:30 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:30 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 356(Long)
2025-11-06 13:19:30 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:30 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:30 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 355(Long)
2025-11-06 13:19:30 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:30 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:30 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 354(Long)
2025-11-06 13:19:31 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:31 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:31 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 353(Long)
2025-11-06 13:19:31 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:31 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:31 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 352(Long)
2025-11-06 13:19:31 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:31 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:31 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 351(Long)
2025-11-06 13:19:31 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:31 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:31 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 349(Long)
2025-11-06 13:19:31 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:31 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:31 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 348(Long)
2025-11-06 13:19:32 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:32 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:32 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 347(Long)
2025-11-06 13:19:32 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:32 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:32 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 345(Long)
2025-11-06 13:19:32 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:32 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:32 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 344(Long)
2025-11-06 13:19:33 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:33 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:33 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 343(Long)
2025-11-06 13:19:33 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:33 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:33 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 342(Long)
2025-11-06 13:19:33 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:33 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:33 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 340(Long)
2025-11-06 13:19:33 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:33 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:33 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 339(Long)
2025-11-06 13:19:33 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:33 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:33 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 338(Long)
2025-11-06 13:19:33 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:33 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:33 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 337(Long)
2025-11-06 13:19:33 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:33 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:33 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 336(Long)
2025-11-06 13:19:34 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:34 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:34 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 335(Long)
2025-11-06 13:19:34 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:34 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:34 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 334(Long)
2025-11-06 13:19:34 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:34 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:34 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 333(Long)
2025-11-06 13:19:34 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:34 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:34 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 332(Long)
2025-11-06 13:19:34 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:34 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:34 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 331(Long)
2025-11-06 13:19:34 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:34 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:34 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 330(Long)
2025-11-06 13:19:35 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:35 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:35 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 329(Long)
2025-11-06 13:19:35 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:35 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:35 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 328(Long)
2025-11-06 13:19:35 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:35 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:35 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 327(Long)
2025-11-06 13:19:35 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:35 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:35 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 326(Long)
2025-11-06 13:19:36 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:36 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:36 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 325(Long)
2025-11-06 13:19:36 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:36 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:36 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 324(Long)
2025-11-06 13:19:36 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:36 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:36 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 323(Long)
2025-11-06 13:19:36 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:36 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:36 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 322(Long)
2025-11-06 13:19:36 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:36 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:36 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 321(Long)
2025-11-06 13:19:37 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:37 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:37 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 320(Long)
2025-11-06 13:19:37 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:37 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:37 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 1(Long)
2025-11-06 13:19:37 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:37 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:19:37 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 379(Long), 1(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 354(Long), 337(Long), 342(Long), 344(Long), 332(Long), 334(Long), 320(Long), 329(Long), 333(Long), 321(Long)
2025-11-06 13:19:37 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 17
2025-11-06 13:19:37 [http-nio-8080-exec-10] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/system/user/list from 127.0.0.1 - 状态: 200 - 耗时: 10629ms
2025-11-06 13:19:37 [http-nio-8080-exec-10] WARN  c.d.c.i.PerformanceInterceptor - 检测到慢请求: POST /api/system/user/list from 127.0.0.1 - 耗时: 10629ms - 超过阈值: 3000ms
2025-11-06 13:19:50 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /system/user/322/agent-identity
2025-11-06 13:19:50 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /system/user/322/agent-identity
2025-11-06 13:19:50 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 13:19:50 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 13:19:50 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 13:19:50 [http-nio-8080-exec-9] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 13:19:50 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 13:19:50 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 13:19:51 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 13:19:51 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:51 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 13:19:51 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 13:19:51 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 13:19:51 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 13:19:51 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 13:19:51 [http-nio-8080-exec-9] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 13:19:51 [http-nio-8080-exec-9] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 13:19:51 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 13:19:51 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 13:19:51 [http-nio-8080-exec-9] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 13:19:51 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /system/user/322/agent-identity
2025-11-06 13:19:51 [http-nio-8080-exec-9] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: PUT /api/system/user/322/agent-identity from 127.0.0.1
2025-11-06 13:19:51 [http-nio-8080-exec-9] INFO  c.deepreach.common.aspect.LogAspect - LogAspect doBefore 被触发: 调整代理身份 - adjustAgentIdentity
2025-11-06 13:19:51 [http-nio-8080-exec-9] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志前置处理完成: 调整代理身份
2025-11-06 13:19:51 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserWithDept - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.user_id = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 13:19:51 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserWithDept - ==> Parameters: 322(Long)
2025-11-06 13:19:52 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserWithDept - <==      Total: 1
2025-11-06 13:19:52 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:52 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 322(Long)
2025-11-06 13:19:52 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:52 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserWithDept - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.user_id = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 13:19:52 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserWithDept - ==> Parameters: 1(Long)
2025-11-06 13:19:53 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserWithDept - <==      Total: 1
2025-11-06 13:19:53 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:19:53 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 1(Long)
2025-11-06 13:19:53 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:19:53 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleByKey - ==>  Preparing: SELECT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.menu_check_strictly, r.dept_check_strictly, r.status, r.del_flag, r.create_by, r.create_time, r.update_by, r.update_time, r.remark FROM sys_role r WHERE role_key = ?
2025-11-06 13:19:53 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleByKey - ==> Parameters: agent_level_2(String)
2025-11-06 13:19:53 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleByKey - <==      Total: 1
2025-11-06 13:19:53 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.deleteUserRoles - ==>  Preparing: DELETE FROM sys_user_role WHERE user_id = ?
2025-11-06 13:19:53 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.deleteUserRoles - ==> Parameters: 322(Long)
2025-11-06 13:19:54 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.deleteUserRoles - <==    Updates: 1
2025-11-06 13:19:54 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.assignUserRoles - ==>  Preparing: INSERT INTO sys_user_role (user_id, role_id) VALUES (?, ?)
2025-11-06 13:19:54 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.assignUserRoles - ==> Parameters: 322(Long), 11(Long)
2025-11-06 13:19:54 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.assignUserRoles - <==    Updates: 1
2025-11-06 13:19:54 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectAllUserHierarchyRelations - ==>  Preparing: SELECT u.user_id AS userId, u.parent_user_id AS parentUserId FROM sys_user u WHERE u.status = '0'
2025-11-06 13:19:54 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectAllUserHierarchyRelations - ==> Parameters: 
2025-11-06 13:19:54 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectAllUserHierarchyRelations - <==      Total: 49
2025-11-06 13:19:54 [http-nio-8080-exec-9] INFO  c.d.c.c.s.impl.SysUserServiceImpl - 用户层级树缓存刷新成功：记录总数=49, 根节点数量=1
2025-11-06 13:19:54 [http-nio-8080-exec-9] INFO  c.d.c.c.s.impl.SysUserServiceImpl - 调整代理身份成功：userId=322, from=AGENT_LEVEL_3, to=AGENT_LEVEL_2
2025-11-06 13:19:54 [http-nio-8080-exec-9] INFO  c.deepreach.common.aspect.LogAspect - 保存操作日志: 调整代理身份 - admin - /api/system/user/322/agent-identity - 成功
2025-11-06 13:19:54 [http-nio-8080-exec-9] INFO  c.deepreach.common.aspect.LogAspect - 操作日志对象详情: operId=null, title=调整代理身份, operName=admin, operUrl=/api/system/user/322/agent-identity, status=0
2025-11-06 13:19:54 [http-nio-8080-exec-9] INFO  c.deepreach.common.aspect.LogAspect - 准备异步保存操作日志到数据库...
2025-11-06 13:19:54 [http-nio-8080-exec-9] INFO  c.deepreach.common.aspect.LogAspect - 操作日志异步保存任务已提交
2025-11-06 13:19:54 [http-nio-8080-exec-9] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志返回处理完成: 调整代理身份
2025-11-06 13:19:54 [pool-3-thread-1] DEBUG c.d.c.c.m.S.insertOperLog - ==>  Preparing: INSERT INTO sys_oper_log ( title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2025-11-06 13:19:54 [http-nio-8080-exec-9] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: PUT /api/system/user/322/agent-identity from 127.0.0.1 - 状态: 200 - 耗时: 3449ms
2025-11-06 13:19:54 [http-nio-8080-exec-9] WARN  c.d.c.i.PerformanceInterceptor - 检测到慢请求: PUT /api/system/user/322/agent-identity from 127.0.0.1 - 耗时: 3449ms - 超过阈值: 3000ms
2025-11-06 13:19:54 [pool-3-thread-1] DEBUG c.d.c.c.m.S.insertOperLog - ==> Parameters: 调整代理身份(String), 2(Integer), com.deepreach.common.core.controller.SysUserController.adjustAgentIdentity(String), PUT(String), 1(Integer), admin(String), ADMIN(String), /api/system/user/322/agent-identity(String), 127.0.0.1(String), null, [322,{"targetIdentity":"agent_level_2"}](String), {"code":200,"msg":"调整代理身份成功","data":null,"timestamp":1762406394797,"error":false,"success":true}(String), 0(Integer), null, 2025-11-06T13:19:51.357803(LocalDateTime), 3442(Long)
2025-11-06 13:19:55 [pool-3-thread-1] DEBUG c.d.c.c.m.S.insertOperLog - <==    Updates: 1
2025-11-06 13:20:02 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /system/user/322/agent-identity
2025-11-06 13:20:02 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 13:20:02 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 13:20:02 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 13:20:02 [http-nio-8080-exec-7] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 13:20:02 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 13:20:02 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 13:20:02 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 13:20:02 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:20:02 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 13:20:02 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 13:20:02 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 13:20:02 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 13:20:03 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 13:20:03 [http-nio-8080-exec-7] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 13:20:03 [http-nio-8080-exec-7] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 13:20:03 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 13:20:03 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 13:20:03 [http-nio-8080-exec-7] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 13:20:03 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /system/user/322/agent-identity
2025-11-06 13:20:03 [http-nio-8080-exec-7] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: PUT /api/system/user/322/agent-identity from 127.0.0.1
2025-11-06 13:20:03 [http-nio-8080-exec-7] INFO  c.deepreach.common.aspect.LogAspect - LogAspect doBefore 被触发: 调整代理身份 - adjustAgentIdentity
2025-11-06 13:20:03 [http-nio-8080-exec-7] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志前置处理完成: 调整代理身份
2025-11-06 13:20:03 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithDept - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.user_id = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 13:20:03 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithDept - ==> Parameters: 322(Long)
2025-11-06 13:20:03 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithDept - <==      Total: 1
2025-11-06 13:20:03 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:20:03 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 322(Long)
2025-11-06 13:20:03 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:20:03 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithDept - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.user_id = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 13:20:03 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithDept - ==> Parameters: 1(Long)
2025-11-06 13:20:04 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithDept - <==      Total: 1
2025-11-06 13:20:04 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:20:04 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 1(Long)
2025-11-06 13:20:04 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:20:04 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleByKey - ==>  Preparing: SELECT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.menu_check_strictly, r.dept_check_strictly, r.status, r.del_flag, r.create_by, r.create_time, r.update_by, r.update_time, r.remark FROM sys_role r WHERE role_key = ?
2025-11-06 13:20:04 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleByKey - ==> Parameters: agent_level_1(String)
2025-11-06 13:20:04 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleByKey - <==      Total: 1
2025-11-06 13:20:04 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.deleteUserRoles - ==>  Preparing: DELETE FROM sys_user_role WHERE user_id = ?
2025-11-06 13:20:04 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.deleteUserRoles - ==> Parameters: 322(Long)
2025-11-06 13:20:04 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.deleteUserRoles - <==    Updates: 1
2025-11-06 13:20:04 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.assignUserRoles - ==>  Preparing: INSERT INTO sys_user_role (user_id, role_id) VALUES (?, ?)
2025-11-06 13:20:04 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.assignUserRoles - ==> Parameters: 322(Long), 10(Long)
2025-11-06 13:20:05 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.assignUserRoles - <==    Updates: 1
2025-11-06 13:20:05 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectAllUserHierarchyRelations - ==>  Preparing: SELECT u.user_id AS userId, u.parent_user_id AS parentUserId FROM sys_user u WHERE u.status = '0'
2025-11-06 13:20:05 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectAllUserHierarchyRelations - ==> Parameters: 
2025-11-06 13:20:05 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectAllUserHierarchyRelations - <==      Total: 49
2025-11-06 13:20:05 [http-nio-8080-exec-7] INFO  c.d.c.c.s.impl.SysUserServiceImpl - 用户层级树缓存刷新成功：记录总数=49, 根节点数量=1
2025-11-06 13:20:05 [http-nio-8080-exec-7] INFO  c.d.c.c.s.impl.SysUserServiceImpl - 调整代理身份成功：userId=322, from=AGENT_LEVEL_2, to=AGENT_LEVEL_1
2025-11-06 13:20:05 [http-nio-8080-exec-7] INFO  c.deepreach.common.aspect.LogAspect - 保存操作日志: 调整代理身份 - admin - /api/system/user/322/agent-identity - 成功
2025-11-06 13:20:05 [http-nio-8080-exec-7] INFO  c.deepreach.common.aspect.LogAspect - 操作日志对象详情: operId=null, title=调整代理身份, operName=admin, operUrl=/api/system/user/322/agent-identity, status=0
2025-11-06 13:20:05 [http-nio-8080-exec-7] INFO  c.deepreach.common.aspect.LogAspect - 准备异步保存操作日志到数据库...
2025-11-06 13:20:05 [http-nio-8080-exec-7] INFO  c.deepreach.common.aspect.LogAspect - 操作日志异步保存任务已提交
2025-11-06 13:20:05 [http-nio-8080-exec-7] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志返回处理完成: 调整代理身份
2025-11-06 13:20:05 [pool-3-thread-2] DEBUG c.d.c.c.m.S.insertOperLog - ==>  Preparing: INSERT INTO sys_oper_log ( title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2025-11-06 13:20:05 [http-nio-8080-exec-7] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: PUT /api/system/user/322/agent-identity from 127.0.0.1 - 状态: 200 - 耗时: 2875ms
2025-11-06 13:20:05 [pool-3-thread-2] DEBUG c.d.c.c.m.S.insertOperLog - ==> Parameters: 调整代理身份(String), 2(Integer), com.deepreach.common.core.controller.SysUserController.adjustAgentIdentity(String), PUT(String), 1(Integer), admin(String), ADMIN(String), /api/system/user/322/agent-identity(String), 127.0.0.1(String), null, [322,{"targetIdentity":"agent_level_1"}](String), {"code":200,"msg":"调整代理身份成功","data":null,"timestamp":1762406405899,"error":false,"success":true}(String), 0(Integer), null, 2025-11-06T13:20:03.029604(LocalDateTime), 2870(Long)
2025-11-06 13:20:06 [pool-3-thread-2] DEBUG c.d.c.c.m.S.insertOperLog - <==    Updates: 1
2025-11-06 13:21:34 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /dr/bill/recharge
2025-11-06 13:21:34 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /dr/bill/recharge
2025-11-06 13:21:34 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 13:21:34 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 13:21:34 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 13:21:34 [http-nio-8080-exec-6] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 13:21:34 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 13:21:34 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 13:21:34 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 13:21:34 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:21:34 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 13:21:34 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 13:21:34 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 13:21:34 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 13:21:34 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 13:21:34 [http-nio-8080-exec-6] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 13:21:34 [http-nio-8080-exec-6] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 13:21:34 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 13:21:34 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 13:21:34 [http-nio-8080-exec-6] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 13:21:34 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /dr/bill/recharge
2025-11-06 13:21:34 [http-nio-8080-exec-6] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/dr/bill/recharge from 127.0.0.1
2025-11-06 13:21:34 [http-nio-8080-exec-6] DEBUG c.d.w.m.D.selectRecordPage_COUNT - ==>  Preparing: SELECT count(0) FROM dr_billing_record br LEFT JOIN sys_user u ON br.user_id = u.user_id LEFT JOIN (SELECT trigger_billing_id, sum(CASE WHEN hierarchy_level = 1 THEN commission_amount ELSE 0 END) AS level1_commission, sum(CASE WHEN hierarchy_level = 2 THEN commission_amount ELSE 0 END) AS level2_commission, sum(CASE WHEN hierarchy_level = 3 THEN commission_amount ELSE 0 END) AS level3_commission FROM dr_agent_commission_record WHERE business_type = 'RECHARGE_COMMISSION' GROUP BY trigger_billing_id) rc ON rc.trigger_billing_id = br.bill_id WHERE br.bill_type = ? AND br.business_type = ?
2025-11-06 13:21:34 [http-nio-8080-exec-6] DEBUG c.d.w.m.D.selectRecordPage_COUNT - ==> Parameters: 1(Integer), RECHARGE(String)
2025-11-06 13:21:34 [http-nio-8080-exec-6] DEBUG c.d.w.m.D.selectRecordPage_COUNT - <==      Total: 1
2025-11-06 13:21:34 [http-nio-8080-exec-6] DEBUG c.d.w.m.D.selectRecordPage - ==>  Preparing: select br.bill_id, br.bill_no, br.user_id, br.operator_id, br.bill_type, br.billing_type, br.business_type, br.business_id, br.dr_amount, br.balance_before, br.balance_after, br.description, br.extra_data, br.consumer, br.remark, br.status, br.create_by, br.create_time, br.update_by, br.update_time, u.username, COALESCE(rc.level1_commission, 0) AS level1_commission, COALESCE(rc.level2_commission, 0) AS level2_commission, COALESCE(rc.level3_commission, 0) AS level3_commission from dr_billing_record br left join sys_user u on br.user_id = u.user_id left join ( select trigger_billing_id, sum(case when hierarchy_level = 1 then commission_amount else 0 end) as level1_commission, sum(case when hierarchy_level = 2 then commission_amount else 0 end) as level2_commission, sum(case when hierarchy_level = 3 then commission_amount else 0 end) as level3_commission from dr_agent_commission_record where business_type = 'RECHARGE_COMMISSION' group by trigger_billing_id ) rc on rc.trigger_billing_id = br.bill_id WHERE br.bill_type = ? and br.business_type = ? order by br.create_time desc LIMIT ?
2025-11-06 13:21:34 [http-nio-8080-exec-6] DEBUG c.d.w.m.D.selectRecordPage - ==> Parameters: 1(Integer), RECHARGE(String), 10(Integer)
2025-11-06 13:21:35 [http-nio-8080-exec-6] DEBUG c.d.w.m.D.selectRecordPage - <==      Total: 10
2025-11-06 13:21:35 [http-nio-8080-exec-6] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/dr/bill/recharge from 127.0.0.1 - 状态: 200 - 耗时: 414ms
2025-11-06 13:21:37 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /agent/commission/settlement/admin/list
2025-11-06 13:21:37 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing POST /agent/commission/settlement/admin/list
2025-11-06 13:21:37 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 13:21:37 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 13:21:37 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 13:21:37 [http-nio-8080-exec-10] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 13:21:37 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 13:21:37 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 13:21:37 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 13:21:37 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:21:37 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 13:21:38 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 13:21:38 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 13:21:38 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 13:21:38 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 13:21:38 [http-nio-8080-exec-10] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 13:21:38 [http-nio-8080-exec-10] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 13:21:38 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 13:21:38 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 13:21:38 [http-nio-8080-exec-10] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 13:21:38 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured POST /agent/commission/settlement/admin/list
2025-11-06 13:21:38 [http-nio-8080-exec-10] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/agent/commission/settlement/admin/list from 127.0.0.1
2025-11-06 13:21:38 [http-nio-8080-exec-10] DEBUG c.d.w.m.A.searchAdminSettlements - ==>  Preparing: select s.settlement_id, s.agent_user_id, u.username as agent_username, roles.agent_role_keys, s.request_amount, s.approved_amount, s.status, s.approval_user_id, s.approval_time, s.remark, s.extra_data, s.create_by, s.create_time, s.update_by, s.update_time from dr_agent_commission_settlement s left join sys_user u on s.agent_user_id = u.user_id left join ( select ur.user_id, group_concat(distinct r.role_key order by r.role_key) as agent_role_keys from sys_user_role ur join sys_role r on ur.role_id = r.role_id and r.del_flag = '0' group by ur.user_id ) roles on roles.user_id = s.agent_user_id order by s.create_time desc
2025-11-06 13:21:38 [http-nio-8080-exec-10] DEBUG c.d.w.m.A.searchAdminSettlements - ==> Parameters: 
2025-11-06 13:21:39 [http-nio-8080-exec-10] DEBUG c.d.w.m.A.searchAdminSettlements - <==      Total: 4
2025-11-06 13:21:39 [http-nio-8080-exec-10] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/agent/commission/settlement/admin/list from 127.0.0.1 - 状态: 200 - 耗时: 666ms
2025-11-06 13:21:42 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /dr/price/config/list?pageNum=1&pageSize=10
2025-11-06 13:21:42 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /dr/price/config/list?pageNum=1&pageSize=10
2025-11-06 13:21:42 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 13:21:42 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 13:21:42 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 13:21:42 [http-nio-8080-exec-5] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 13:21:42 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 13:21:42 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 13:21:42 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 13:21:42 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:21:42 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 13:21:42 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 13:21:42 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 13:21:42 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 13:21:43 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 13:21:43 [http-nio-8080-exec-5] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 13:21:43 [http-nio-8080-exec-5] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 13:21:43 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 13:21:43 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 13:21:43 [http-nio-8080-exec-5] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 13:21:43 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /dr/price/config/list?pageNum=1&pageSize=10
2025-11-06 13:21:43 [http-nio-8080-exec-5] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/dr/price/config/list from 127.0.0.1
2025-11-06 13:21:43 [http-nio-8080-exec-5] DEBUG c.d.w.m.D.selectDrPriceConfigPage_COUNT - ==>  Preparing: SELECT count(0) FROM dr_price_config
2025-11-06 13:21:43 [http-nio-8080-exec-5] DEBUG c.d.w.m.D.selectDrPriceConfigPage_COUNT - ==> Parameters: 
2025-11-06 13:21:43 [http-nio-8080-exec-5] DEBUG c.d.w.m.D.selectDrPriceConfigPage_COUNT - <==      Total: 1
2025-11-06 13:21:43 [http-nio-8080-exec-5] DEBUG c.d.w.m.D.selectDrPriceConfigPage - ==>  Preparing: select price_id, business_type, business_name, price_unit, dr_price, billing_type, status, create_time, update_time, create_by, update_by, remark from dr_price_config order by create_time desc LIMIT ?
2025-11-06 13:21:43 [http-nio-8080-exec-5] DEBUG c.d.w.m.D.selectDrPriceConfigPage - ==> Parameters: 10(Integer)
2025-11-06 13:21:43 [http-nio-8080-exec-5] DEBUG c.d.w.m.D.selectDrPriceConfigPage - <==      Total: 10
2025-11-06 13:21:43 [http-nio-8080-exec-5] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/dr/price/config/list from 127.0.0.1 - 状态: 200 - 耗时: 708ms
2025-11-06 13:26:58 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /agent/commission/settlement/admin/list
2025-11-06 13:26:58 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 13:26:58 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 13:26:58 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 13:26:58 [http-nio-8080-exec-4] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 13:26:59 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 13:26:59 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 13:26:59 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 13:26:59 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:26:59 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 13:26:59 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 13:26:59 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 13:26:59 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 13:26:59 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 13:26:59 [http-nio-8080-exec-4] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 13:26:59 [http-nio-8080-exec-4] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 13:26:59 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 13:26:59 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 13:26:59 [http-nio-8080-exec-4] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 13:26:59 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured POST /agent/commission/settlement/admin/list
2025-11-06 13:26:59 [http-nio-8080-exec-4] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/agent/commission/settlement/admin/list from 127.0.0.1
2025-11-06 13:26:59 [http-nio-8080-exec-4] DEBUG c.d.w.m.A.searchAdminSettlements - ==>  Preparing: select s.settlement_id, s.agent_user_id, u.username as agent_username, roles.agent_role_keys, s.request_amount, s.approved_amount, s.status, s.approval_user_id, s.approval_time, s.remark, s.extra_data, s.create_by, s.create_time, s.update_by, s.update_time from dr_agent_commission_settlement s left join sys_user u on s.agent_user_id = u.user_id left join ( select ur.user_id, group_concat(distinct r.role_key order by r.role_key) as agent_role_keys from sys_user_role ur join sys_role r on ur.role_id = r.role_id and r.del_flag = '0' group by ur.user_id ) roles on roles.user_id = s.agent_user_id order by s.create_time desc
2025-11-06 13:26:59 [http-nio-8080-exec-4] DEBUG c.d.w.m.A.searchAdminSettlements - ==> Parameters: 
2025-11-06 13:26:59 [http-nio-8080-exec-4] DEBUG c.d.w.m.A.searchAdminSettlements - <==      Total: 4
2025-11-06 13:26:59 [http-nio-8080-exec-4] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/agent/commission/settlement/admin/list from 127.0.0.1 - 状态: 200 - 耗时: 180ms
2025-11-06 13:27:00 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /dr/bill/recharge
2025-11-06 13:27:00 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 13:27:00 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 13:27:00 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 13:27:00 [http-nio-8080-exec-7] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 13:27:00 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 13:27:00 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 13:27:00 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 13:27:00 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:00 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 13:27:00 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 13:27:00 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 13:27:00 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 13:27:00 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 13:27:00 [http-nio-8080-exec-7] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 13:27:00 [http-nio-8080-exec-7] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 13:27:00 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 13:27:00 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 13:27:00 [http-nio-8080-exec-7] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 13:27:00 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured POST /dr/bill/recharge
2025-11-06 13:27:00 [http-nio-8080-exec-7] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/dr/bill/recharge from 127.0.0.1
2025-11-06 13:27:01 [http-nio-8080-exec-7] DEBUG c.d.w.m.D.selectRecordPage_COUNT - ==>  Preparing: SELECT count(0) FROM dr_billing_record br LEFT JOIN sys_user u ON br.user_id = u.user_id LEFT JOIN (SELECT trigger_billing_id, sum(CASE WHEN hierarchy_level = 1 THEN commission_amount ELSE 0 END) AS level1_commission, sum(CASE WHEN hierarchy_level = 2 THEN commission_amount ELSE 0 END) AS level2_commission, sum(CASE WHEN hierarchy_level = 3 THEN commission_amount ELSE 0 END) AS level3_commission FROM dr_agent_commission_record WHERE business_type = 'RECHARGE_COMMISSION' GROUP BY trigger_billing_id) rc ON rc.trigger_billing_id = br.bill_id WHERE br.bill_type = ? AND br.business_type = ?
2025-11-06 13:27:01 [http-nio-8080-exec-7] DEBUG c.d.w.m.D.selectRecordPage_COUNT - ==> Parameters: 1(Integer), RECHARGE(String)
2025-11-06 13:27:01 [http-nio-8080-exec-7] DEBUG c.d.w.m.D.selectRecordPage_COUNT - <==      Total: 1
2025-11-06 13:27:01 [http-nio-8080-exec-7] DEBUG c.d.w.m.D.selectRecordPage - ==>  Preparing: select br.bill_id, br.bill_no, br.user_id, br.operator_id, br.bill_type, br.billing_type, br.business_type, br.business_id, br.dr_amount, br.balance_before, br.balance_after, br.description, br.extra_data, br.consumer, br.remark, br.status, br.create_by, br.create_time, br.update_by, br.update_time, u.username, COALESCE(rc.level1_commission, 0) AS level1_commission, COALESCE(rc.level2_commission, 0) AS level2_commission, COALESCE(rc.level3_commission, 0) AS level3_commission from dr_billing_record br left join sys_user u on br.user_id = u.user_id left join ( select trigger_billing_id, sum(case when hierarchy_level = 1 then commission_amount else 0 end) as level1_commission, sum(case when hierarchy_level = 2 then commission_amount else 0 end) as level2_commission, sum(case when hierarchy_level = 3 then commission_amount else 0 end) as level3_commission from dr_agent_commission_record where business_type = 'RECHARGE_COMMISSION' group by trigger_billing_id ) rc on rc.trigger_billing_id = br.bill_id WHERE br.bill_type = ? and br.business_type = ? order by br.create_time desc LIMIT ?
2025-11-06 13:27:01 [http-nio-8080-exec-7] DEBUG c.d.w.m.D.selectRecordPage - ==> Parameters: 1(Integer), RECHARGE(String), 10(Integer)
2025-11-06 13:27:02 [http-nio-8080-exec-7] DEBUG c.d.w.m.D.selectRecordPage - <==      Total: 10
2025-11-06 13:27:02 [http-nio-8080-exec-7] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/dr/bill/recharge from 127.0.0.1 - 状态: 200 - 耗时: 1324ms
2025-11-06 13:27:04 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing POST /system/user/list
2025-11-06 13:27:04 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 13:27:04 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 13:27:04 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 13:27:04 [http-nio-8080-exec-8] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 13:27:04 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 13:27:04 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 13:27:04 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 13:27:04 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:04 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 13:27:04 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 13:27:04 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 13:27:04 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 13:27:05 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 13:27:05 [http-nio-8080-exec-8] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 13:27:05 [http-nio-8080-exec-8] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 13:27:05 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 13:27:05 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 13:27:05 [http-nio-8080-exec-8] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 13:27:05 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured POST /system/user/list
2025-11-06 13:27:05 [http-nio-8080-exec-8] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/system/user/list from 127.0.0.1
2025-11-06 13:27:05 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserList - ==>  Preparing: SELECT DISTINCT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_name, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur_filter ON u.user_id = ur_filter.user_id LEFT JOIN sys_role r_filter ON ur_filter.role_id = r_filter.role_id AND r_filter.del_flag = '0' WHERE u.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY u.create_time DESC
2025-11-06 13:27:05 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserList - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 13:27:05 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserList - <==      Total: 49
2025-11-06 13:27:05 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:05 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 381(Long)
2025-11-06 13:27:05 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:27:05 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:05 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 380(Long)
2025-11-06 13:27:06 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:27:06 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:06 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 379(Long)
2025-11-06 13:27:06 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:27:06 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:06 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 378(Long)
2025-11-06 13:27:06 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:27:06 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:06 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 377(Long)
2025-11-06 13:27:06 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:27:06 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:06 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 376(Long)
2025-11-06 13:27:07 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:27:07 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:07 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 375(Long)
2025-11-06 13:27:07 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:27:07 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:07 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 374(Long)
2025-11-06 13:27:07 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:27:07 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:07 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 373(Long)
2025-11-06 13:27:07 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:27:07 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:07 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 372(Long)
2025-11-06 13:27:08 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:27:08 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:08 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 371(Long)
2025-11-06 13:27:08 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:27:08 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:08 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 370(Long)
2025-11-06 13:27:08 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:27:08 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:08 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 369(Long)
2025-11-06 13:27:08 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:27:08 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:08 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 357(Long)
2025-11-06 13:27:08 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:27:08 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:08 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 356(Long)
2025-11-06 13:27:08 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:27:08 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:08 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 355(Long)
2025-11-06 13:27:09 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:27:09 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:09 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 354(Long)
2025-11-06 13:27:09 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:27:09 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:09 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 353(Long)
2025-11-06 13:27:09 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:27:09 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:09 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 352(Long)
2025-11-06 13:27:09 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:27:09 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:09 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 351(Long)
2025-11-06 13:27:09 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:27:09 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:09 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 349(Long)
2025-11-06 13:27:09 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:27:09 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:09 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 348(Long)
2025-11-06 13:27:10 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:27:10 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:10 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 347(Long)
2025-11-06 13:27:10 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:27:10 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:10 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 345(Long)
2025-11-06 13:27:10 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:27:10 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:10 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 344(Long)
2025-11-06 13:27:10 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:27:10 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:10 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 343(Long)
2025-11-06 13:27:11 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:27:11 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:11 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 342(Long)
2025-11-06 13:27:11 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:27:11 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:11 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 340(Long)
2025-11-06 13:27:11 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:27:11 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:11 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 339(Long)
2025-11-06 13:27:11 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:27:11 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:11 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 338(Long)
2025-11-06 13:27:12 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:27:12 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:12 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 337(Long)
2025-11-06 13:27:12 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:27:12 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:12 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 336(Long)
2025-11-06 13:27:12 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:27:12 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:12 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 335(Long)
2025-11-06 13:27:12 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:27:12 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:12 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 334(Long)
2025-11-06 13:27:12 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:27:12 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:12 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 333(Long)
2025-11-06 13:27:12 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:27:12 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:12 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 332(Long)
2025-11-06 13:27:12 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:27:12 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:12 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 331(Long)
2025-11-06 13:27:13 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:27:13 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:13 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 330(Long)
2025-11-06 13:27:13 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:27:13 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:13 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 329(Long)
2025-11-06 13:27:14 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:27:14 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:14 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 328(Long)
2025-11-06 13:27:14 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:27:14 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:14 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 327(Long)
2025-11-06 13:27:14 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:27:14 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:14 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 326(Long)
2025-11-06 13:27:14 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:27:14 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:14 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 325(Long)
2025-11-06 13:27:15 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:27:15 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:15 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 324(Long)
2025-11-06 13:27:15 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:27:15 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:15 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 323(Long)
2025-11-06 13:27:15 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:27:15 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:15 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 322(Long)
2025-11-06 13:27:15 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:27:15 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:15 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 321(Long)
2025-11-06 13:27:15 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:27:15 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:15 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 320(Long)
2025-11-06 13:27:15 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:27:15 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:15 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 1(Long)
2025-11-06 13:27:15 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:27:15 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:27:15 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 379(Long), 1(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 354(Long), 337(Long), 342(Long), 344(Long), 332(Long), 334(Long), 320(Long), 329(Long), 333(Long), 321(Long)
2025-11-06 13:27:16 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 17
2025-11-06 13:27:16 [http-nio-8080-exec-8] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/system/user/list from 127.0.0.1 - 状态: 200 - 耗时: 11020ms
2025-11-06 13:27:16 [http-nio-8080-exec-8] WARN  c.d.c.i.PerformanceInterceptor - 检测到慢请求: POST /api/system/user/list from 127.0.0.1 - 耗时: 11020ms - 超过阈值: 3000ms
2025-11-06 13:27:33 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/adminAgentPerformanceStatistics
2025-11-06 13:27:33 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/adminMerchantsPerformanceStatistics
2025-11-06 13:27:33 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/adminMerchantsAssetStatistics
2025-11-06 13:27:33 [http-nio-8080-exec-1] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 13:27:33 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 13:27:33 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 13:27:33 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 13:27:33 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 13:27:33 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 13:27:33 [http-nio-8080-exec-1] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 13:27:33 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 13:27:33 [http-nio-8080-exec-1] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 13:27:33 [http-nio-8080-exec-1] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 13:27:33 [http-nio-8080-exec-3] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 13:27:33 [http-nio-8080-exec-10] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 13:27:33 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 13:27:33 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 13:27:33 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 13:27:33 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 13:27:33 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 13:27:33 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:33 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 13:27:33 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 13:27:33 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 13:27:33 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 13:27:33 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 13:27:33 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 13:27:33 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:33 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 13:27:33 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 13:27:33 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 13:27:33 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:33 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 13:27:34 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 13:27:34 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 13:27:34 [http-nio-8080-exec-3] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 13:27:34 [http-nio-8080-exec-3] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 13:27:34 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 13:27:34 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 13:27:34 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 13:27:34 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 13:27:34 [http-nio-8080-exec-3] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 13:27:34 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/adminMerchantsAssetStatistics
2025-11-06 13:27:34 [http-nio-8080-exec-3] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/adminMerchantsAssetStatistics from 127.0.0.1
2025-11-06 13:27:34 [http-nio-8080-exec-3] INFO  c.deepreach.common.aspect.LogAspect - LogAspect doBefore 被触发: 统计管理 - getAdminMerchantsAssetStatistics
2025-11-06 13:27:34 [http-nio-8080-exec-3] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志前置处理完成: 统计管理
2025-11-06 13:27:34 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:27:34 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 13:27:34 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 13:27:34 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 13:27:34 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 13:27:34 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 13:27:34 [http-nio-8080-exec-1] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 13:27:34 [http-nio-8080-exec-1] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 13:27:34 [http-nio-8080-exec-1] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 13:27:34 [http-nio-8080-exec-1] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 13:27:34 [http-nio-8080-exec-1] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 13:27:34 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/adminAgentPerformanceStatistics
2025-11-06 13:27:34 [http-nio-8080-exec-1] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/adminAgentPerformanceStatistics from 127.0.0.1
2025-11-06 13:27:34 [http-nio-8080-exec-1] INFO  c.deepreach.common.aspect.LogAspect - LogAspect doBefore 被触发: 统计管理 - getAdminAgentPerformanceStatistics
2025-11-06 13:27:34 [http-nio-8080-exec-1] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志前置处理完成: 统计管理
2025-11-06 13:27:34 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:27:34 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 13:27:34 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 49
2025-11-06 13:27:34 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.sumTotalRechargeByUserIds - ==>  Preparing: SELECT b.user_id AS userId, COALESCE(b.total_recharge, 0) AS totalRecharge FROM user_dr_balance b WHERE b.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:27:34 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.sumTotalRechargeByUserIds - ==> Parameters: 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 330(Long), 331(Long), 335(Long), 336(Long), 337(Long), 339(Long), 342(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long)
2025-11-06 13:27:34 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 49
2025-11-06 13:27:34 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.sumTotalRechargeByUserIds - <==      Total: 13
2025-11-06 13:27:34 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.sumTotalRechargeByUserIds - ==>  Preparing: SELECT b.user_id AS userId, COALESCE(b.total_recharge, 0) AS totalRecharge FROM user_dr_balance b WHERE b.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:27:34 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.sumTotalRechargeByUserIds - ==> Parameters: 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 330(Long), 331(Long), 335(Long), 336(Long), 337(Long), 339(Long), 342(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 340(Long), 343(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 353(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 380(Long), 381(Long)
2025-11-06 13:27:34 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.A.selectCommissionByUserIds - ==>  Preparing: SELECT agent_user_id AS userId, COALESCE(total_commission, 0) AS totalCommission, COALESCE(settled_commission, 0) AS settledCommission FROM dr_agent_commission_account WHERE agent_user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:27:34 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.A.selectCommissionByUserIds - ==> Parameters: 320(Long), 322(Long), 332(Long), 354(Long), 356(Long), 321(Long), 333(Long), 344(Long), 355(Long), 357(Long), 329(Long), 334(Long), 338(Long), 345(Long)
2025-11-06 13:27:34 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.sumTotalRechargeByUserIds - <==      Total: 13
2025-11-06 13:27:34 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.A.selectCommissionByUserIds - ==>  Preparing: SELECT agent_user_id AS userId, COALESCE(total_commission, 0) AS totalCommission, COALESCE(settled_commission, 0) AS settledCommission FROM dr_agent_commission_account WHERE agent_user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:27:34 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.A.selectCommissionByUserIds - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 13:27:34 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 13:27:34 [http-nio-8080-exec-10] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 13:27:34 [http-nio-8080-exec-10] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 13:27:34 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 13:27:34 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 13:27:34 [http-nio-8080-exec-10] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 13:27:34 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/adminMerchantsPerformanceStatistics
2025-11-06 13:27:34 [http-nio-8080-exec-10] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/adminMerchantsPerformanceStatistics from 127.0.0.1
2025-11-06 13:27:34 [http-nio-8080-exec-10] INFO  c.deepreach.common.aspect.LogAspect - LogAspect doBefore 被触发: 统计管理 - getAdminMerchantsPerformanceStatistics
2025-11-06 13:27:34 [http-nio-8080-exec-10] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志前置处理完成: 统计管理
2025-11-06 13:27:34 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:27:34 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 13:27:34 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.A.selectCommissionByUserIds - <==      Total: 6
2025-11-06 13:27:34 [http-nio-8080-exec-1] INFO  c.deepreach.common.aspect.LogAspect - 保存操作日志: 统计管理 - admin - /api/statistics/adminAgentPerformanceStatistics - 成功
2025-11-06 13:27:34 [http-nio-8080-exec-1] INFO  c.deepreach.common.aspect.LogAspect - 操作日志对象详情: operId=null, title=统计管理, operName=admin, operUrl=/api/statistics/adminAgentPerformanceStatistics, status=0
2025-11-06 13:27:34 [http-nio-8080-exec-1] INFO  c.deepreach.common.aspect.LogAspect - 准备异步保存操作日志到数据库...
2025-11-06 13:27:34 [http-nio-8080-exec-1] INFO  c.deepreach.common.aspect.LogAspect - 操作日志异步保存任务已提交
2025-11-06 13:27:34 [http-nio-8080-exec-1] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志返回处理完成: 统计管理
2025-11-06 13:27:34 [pool-3-thread-3] DEBUG c.d.c.c.m.S.insertOperLog - ==>  Preparing: INSERT INTO sys_oper_log ( title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2025-11-06 13:27:34 [pool-3-thread-3] DEBUG c.d.c.c.m.S.insertOperLog - ==> Parameters: 统计管理(String), 0(Integer), com.deepreach.common.core.controller.StatisticsController.getAdminAgentPerformanceStatistics(String), GET(String), 1(Integer), admin(String), ADMIN(String), /api/statistics/adminAgentPerformanceStatistics(String), 127.0.0.1(String), null, (String), {"code":200,"msg":"操作成功","data":{"generalAgent":{"identity":"agent_level_1","identityDisplay":"总代","agentCount":5,"totalRecharge":132000.00,"totalCommission":33200.00},"level1Agent":{"identity":"agent_level_2","identityDisplay":"一级代理","agentCount":5,"totalRecharge":33000.00,"totalCommission":3300.00},"level2Agent":{"identity":"agent_level_3","identityDisplay":"二级代理","agentCount":4,"totalRecharge":33000.00,"totalCommission":3300.00},"total":{"identity":"total","identityDisplay":"合计","agentCount":14,"totalRecharge":198000.00,"totalCommission":39800.00}},"timestamp":1762406854769,"error":false,"success":true}(String), 0(Integer), null, 2025-11-06T13:27:34.263220(LocalDateTime), 506(Long)
2025-11-06 13:27:34 [http-nio-8080-exec-1] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/adminAgentPerformanceStatistics from 127.0.0.1 - 状态: 200 - 耗时: 510ms
2025-11-06 13:27:34 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 49
2025-11-06 13:27:34 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.sumTotalRechargeByUserIds - ==>  Preparing: SELECT b.user_id AS userId, COALESCE(b.total_recharge, 0) AS totalRecharge FROM user_dr_balance b WHERE b.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:27:34 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.sumTotalRechargeByUserIds - ==> Parameters: 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 330(Long), 331(Long), 335(Long), 336(Long), 337(Long), 339(Long), 342(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long)
2025-11-06 13:27:34 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.A.selectCommissionByUserIds - <==      Total: 6
2025-11-06 13:27:34 [http-nio-8080-exec-3] INFO  c.deepreach.common.aspect.LogAspect - 保存操作日志: 统计管理 - admin - /api/statistics/adminMerchantsAssetStatistics - 成功
2025-11-06 13:27:34 [http-nio-8080-exec-3] INFO  c.deepreach.common.aspect.LogAspect - 操作日志对象详情: operId=null, title=统计管理, operName=admin, operUrl=/api/statistics/adminMerchantsAssetStatistics, status=0
2025-11-06 13:27:34 [http-nio-8080-exec-3] INFO  c.deepreach.common.aspect.LogAspect - 准备异步保存操作日志到数据库...
2025-11-06 13:27:34 [http-nio-8080-exec-3] INFO  c.deepreach.common.aspect.LogAspect - 操作日志异步保存任务已提交
2025-11-06 13:27:34 [http-nio-8080-exec-3] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志返回处理完成: 统计管理
2025-11-06 13:27:34 [pool-3-thread-4] DEBUG c.d.c.c.m.S.insertOperLog - ==>  Preparing: INSERT INTO sys_oper_log ( title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2025-11-06 13:27:34 [http-nio-8080-exec-3] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/adminMerchantsAssetStatistics from 127.0.0.1 - 状态: 200 - 耗时: 857ms
2025-11-06 13:27:34 [pool-3-thread-4] DEBUG c.d.c.c.m.S.insertOperLog - ==> Parameters: 统计管理(String), 0(Integer), com.deepreach.common.core.controller.StatisticsController.getAdminMerchantsAssetStatistics(String), GET(String), 1(Integer), admin(String), ADMIN(String), /api/statistics/adminMerchantsAssetStatistics(String), 127.0.0.1(String), null, (String), {"code":200,"msg":"操作成功","data":{"totalRecharge":151000.00,"settledCommission":800.00,"netValue":150200.00},"timestamp":1762406854947,"error":false,"success":true}(String), 0(Integer), null, 2025-11-06T13:27:34.096389(LocalDateTime), 852(Long)
2025-11-06 13:27:35 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.sumTotalRechargeByUserIds - <==      Total: 13
2025-11-06 13:27:35 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.countAiCharactersByType - ==>  Preparing: SELECT COALESCE(c.type, 'unknown') AS type, COUNT(*) AS count FROM ai_character c WHERE c.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) GROUP BY COALESCE(c.type, 'unknown')
2025-11-06 13:27:35 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.countAiCharactersByType - ==> Parameters: 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 330(Long), 331(Long), 335(Long), 336(Long), 337(Long), 339(Long), 342(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 340(Long), 343(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 353(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 380(Long), 381(Long)
2025-11-06 13:27:35 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.countAiCharactersByType - <==      Total: 1
2025-11-06 13:27:35 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectAllPlatforms - ==>  Preparing: SELECT platform_id AS platformId, COALESCE(platform_name, 'UNKNOWN_PLATFORM') AS platformName, COALESCE(platform_type, 'unknown') AS platformType FROM platform WHERE status = '0' ORDER BY platform_id
2025-11-06 13:27:35 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectAllPlatforms - ==> Parameters: 
2025-11-06 13:27:35 [pool-3-thread-4] DEBUG c.d.c.c.m.S.insertOperLog - <==    Updates: 1
2025-11-06 13:27:35 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectAllPlatforms - <==      Total: 8
2025-11-06 13:27:35 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.countInstancesByType - ==>  Preparing: SELECT i.instance_type AS instanceType, COUNT(*) AS count FROM ai_instance i WHERE i.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) GROUP BY i.instance_type
2025-11-06 13:27:35 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.countInstancesByType - ==> Parameters: 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 330(Long), 331(Long), 335(Long), 336(Long), 337(Long), 339(Long), 342(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 340(Long), 343(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 353(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 380(Long), 381(Long)
2025-11-06 13:27:35 [pool-3-thread-3] DEBUG c.d.c.c.m.S.insertOperLog - <==    Updates: 1
2025-11-06 13:27:35 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.countInstancesByType - <==      Total: 2
2025-11-06 13:27:35 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.countInstancesByPlatform - ==>  Preparing: SELECT COALESCE(i.platform_id, 0) AS platformId, COALESCE(p.platform_name, 'UNKNOWN_PLATFORM') AS platformName, COUNT(*) AS count FROM ai_instance i LEFT JOIN platform p ON i.platform_id = p.platform_id WHERE i.instance_type = ? AND i.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) GROUP BY COALESCE(i.platform_id, 0), COALESCE(p.platform_name, 'UNKNOWN_PLATFORM')
2025-11-06 13:27:35 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.countInstancesByPlatform - ==> Parameters: 0(String), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 330(Long), 331(Long), 335(Long), 336(Long), 337(Long), 339(Long), 342(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 340(Long), 343(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 353(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 380(Long), 381(Long)
2025-11-06 13:27:35 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.countInstancesByPlatform - <==      Total: 2
2025-11-06 13:27:35 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.countInstancesByPlatform - ==>  Preparing: SELECT COALESCE(i.platform_id, 0) AS platformId, COALESCE(p.platform_name, 'UNKNOWN_PLATFORM') AS platformName, COUNT(*) AS count FROM ai_instance i LEFT JOIN platform p ON i.platform_id = p.platform_id WHERE i.instance_type = ? AND i.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) GROUP BY COALESCE(i.platform_id, 0), COALESCE(p.platform_name, 'UNKNOWN_PLATFORM')
2025-11-06 13:27:35 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.countInstancesByPlatform - ==> Parameters: 1(String), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 330(Long), 331(Long), 335(Long), 336(Long), 337(Long), 339(Long), 342(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 340(Long), 343(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 353(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 380(Long), 381(Long)
2025-11-06 13:27:35 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.countInstancesByPlatform - <==      Total: 3
2025-11-06 13:27:35 [http-nio-8080-exec-10] INFO  c.deepreach.common.aspect.LogAspect - 保存操作日志: 统计管理 - admin - /api/statistics/adminMerchantsPerformanceStatistics - 成功
2025-11-06 13:27:35 [http-nio-8080-exec-10] INFO  c.deepreach.common.aspect.LogAspect - 操作日志对象详情: operId=null, title=统计管理, operName=admin, operUrl=/api/statistics/adminMerchantsPerformanceStatistics, status=0
2025-11-06 13:27:35 [http-nio-8080-exec-10] INFO  c.deepreach.common.aspect.LogAspect - 准备异步保存操作日志到数据库...
2025-11-06 13:27:35 [http-nio-8080-exec-10] INFO  c.deepreach.common.aspect.LogAspect - 操作日志异步保存任务已提交
2025-11-06 13:27:35 [http-nio-8080-exec-10] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志返回处理完成: 统计管理
2025-11-06 13:27:35 [pool-3-thread-5] DEBUG c.d.c.c.m.S.insertOperLog - ==>  Preparing: INSERT INTO sys_oper_log ( title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2025-11-06 13:27:35 [pool-3-thread-5] DEBUG c.d.c.c.m.S.insertOperLog - ==> Parameters: 统计管理(String), 0(Integer), com.deepreach.common.core.controller.StatisticsController.getAdminMerchantsPerformanceStatistics(String), GET(String), 1(Integer), admin(String), ADMIN(String), /api/statistics/adminMerchantsPerformanceStatistics(String), 127.0.0.1(String), null, (String), {"code":200,"msg":"操作成功","data":{"merchantOverview":{"merchantCount":19,"employeeCount":15,"totalPerformance":151000.00},"aiCharacterOverview":{"totalCharacters":9,"socialAiCount":9,"customerServiceAiCount":0},"marketingInstanceOverview":{"instanceCount":13,"platformBreakdown":{"WhatsApp":7,"Telegram":6}},"prospectingInstanceOverview":{"instanceCount":7,"platformBreakdown":{"SMS":3,"Facebook":3,"Instagram":0,"TikTok":1,"X":0,"GoogleVoice":0}}},"timestamp":1762406855870,"error":false,"success":true}(String), 0(Integer), null, 2025-11-06T13:27:34.675511(LocalDateTime), 1195(Long)
2025-11-06 13:27:35 [http-nio-8080-exec-10] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/adminMerchantsPerformanceStatistics from 127.0.0.1 - 状态: 200 - 耗时: 1198ms
2025-11-06 13:27:36 [pool-3-thread-5] DEBUG c.d.c.c.m.S.insertOperLog - <==    Updates: 1
2025-11-06 13:27:50 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /system/user/list
2025-11-06 13:27:50 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 13:27:50 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 13:27:50 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 13:27:50 [http-nio-8080-exec-7] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 13:27:50 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 13:27:50 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 13:27:51 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 13:27:51 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:51 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 13:27:51 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 13:27:51 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 13:27:51 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 13:27:51 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 13:27:51 [http-nio-8080-exec-7] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 13:27:51 [http-nio-8080-exec-7] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 13:27:51 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 13:27:51 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 13:27:51 [http-nio-8080-exec-7] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 13:27:51 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured POST /system/user/list
2025-11-06 13:27:51 [http-nio-8080-exec-7] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/system/user/list from 127.0.0.1
2025-11-06 13:27:51 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserList - ==>  Preparing: SELECT DISTINCT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_name, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur_filter ON u.user_id = ur_filter.user_id LEFT JOIN sys_role r_filter ON ur_filter.role_id = r_filter.role_id AND r_filter.del_flag = '0' WHERE u.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY u.create_time DESC
2025-11-06 13:27:51 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserList - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 13:27:52 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserList - <==      Total: 49
2025-11-06 13:27:52 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:52 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 381(Long)
2025-11-06 13:27:52 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:27:52 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:52 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 380(Long)
2025-11-06 13:27:52 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:27:52 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:52 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 379(Long)
2025-11-06 13:27:53 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:27:53 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:53 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 378(Long)
2025-11-06 13:27:53 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:27:53 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:53 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 377(Long)
2025-11-06 13:27:53 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:27:53 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:53 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 376(Long)
2025-11-06 13:27:53 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:27:53 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:53 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 375(Long)
2025-11-06 13:27:54 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:27:54 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:54 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 374(Long)
2025-11-06 13:27:54 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:27:54 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:54 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 373(Long)
2025-11-06 13:27:54 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:27:54 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:54 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 372(Long)
2025-11-06 13:27:54 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:27:54 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:54 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 371(Long)
2025-11-06 13:27:55 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:27:55 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:55 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 370(Long)
2025-11-06 13:27:55 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:27:55 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:55 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 369(Long)
2025-11-06 13:27:55 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:27:55 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:55 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 357(Long)
2025-11-06 13:27:55 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:27:55 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:55 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 356(Long)
2025-11-06 13:27:56 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:27:56 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:56 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 355(Long)
2025-11-06 13:27:57 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:27:57 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:57 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 354(Long)
2025-11-06 13:27:57 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:27:57 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:57 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 353(Long)
2025-11-06 13:27:57 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:27:57 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:57 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 352(Long)
2025-11-06 13:27:57 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:27:57 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:57 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 351(Long)
2025-11-06 13:27:58 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:27:58 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:58 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 349(Long)
2025-11-06 13:27:58 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:27:58 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:58 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 348(Long)
2025-11-06 13:27:58 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:27:58 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:58 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 347(Long)
2025-11-06 13:27:59 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:27:59 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:59 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 345(Long)
2025-11-06 13:27:59 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:27:59 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:59 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 344(Long)
2025-11-06 13:27:59 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:27:59 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:59 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 343(Long)
2025-11-06 13:27:59 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:27:59 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:59 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 342(Long)
2025-11-06 13:27:59 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:27:59 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:59 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 340(Long)
2025-11-06 13:27:59 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:27:59 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:27:59 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 339(Long)
2025-11-06 13:28:00 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:28:00 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:28:00 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 338(Long)
2025-11-06 13:28:00 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:28:00 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:28:00 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 337(Long)
2025-11-06 13:28:00 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:28:00 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:28:00 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 336(Long)
2025-11-06 13:28:00 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:28:00 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:28:00 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 335(Long)
2025-11-06 13:28:00 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:28:00 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:28:00 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 334(Long)
2025-11-06 13:28:00 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:28:00 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:28:00 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 333(Long)
2025-11-06 13:28:01 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:28:01 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:28:01 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 332(Long)
2025-11-06 13:28:01 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:28:01 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:28:01 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 331(Long)
2025-11-06 13:28:01 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:28:01 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:28:01 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 330(Long)
2025-11-06 13:28:01 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:28:01 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:28:01 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 329(Long)
2025-11-06 13:28:02 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:28:02 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:28:02 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 328(Long)
2025-11-06 13:28:02 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:28:02 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:28:02 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 327(Long)
2025-11-06 13:28:02 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:28:02 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:28:02 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 326(Long)
2025-11-06 13:28:02 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:28:02 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:28:02 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 325(Long)
2025-11-06 13:28:02 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:28:02 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:28:02 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 324(Long)
2025-11-06 13:28:02 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:28:02 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:28:02 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 323(Long)
2025-11-06 13:28:03 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:28:03 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:28:03 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 322(Long)
2025-11-06 13:28:03 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:28:03 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:28:03 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 321(Long)
2025-11-06 13:28:03 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:28:03 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:28:03 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 320(Long)
2025-11-06 13:28:03 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:28:03 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:28:03 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 1(Long)
2025-11-06 13:28:03 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:28:03 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:28:03 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 379(Long), 1(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 354(Long), 337(Long), 342(Long), 344(Long), 332(Long), 334(Long), 320(Long), 329(Long), 333(Long), 321(Long)
2025-11-06 13:28:03 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 17
2025-11-06 13:28:03 [http-nio-8080-exec-7] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/system/user/list from 127.0.0.1 - 状态: 200 - 耗时: 12475ms
2025-11-06 13:28:03 [http-nio-8080-exec-7] WARN  c.d.c.i.PerformanceInterceptor - 检测到慢请求: POST /api/system/user/list from 127.0.0.1 - 耗时: 12475ms - 超过阈值: 3000ms
2025-11-06 13:28:23 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing POST /dr/bill/recharge
2025-11-06 13:28:23 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 13:28:23 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 13:28:23 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 13:28:23 [http-nio-8080-exec-8] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 13:28:23 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 13:28:23 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 13:28:24 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 13:28:24 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:28:24 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 13:28:24 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 13:28:24 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 13:28:24 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 13:28:24 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 13:28:24 [http-nio-8080-exec-8] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 13:28:24 [http-nio-8080-exec-8] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 13:28:24 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 13:28:24 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 13:28:24 [http-nio-8080-exec-8] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 13:28:24 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured POST /dr/bill/recharge
2025-11-06 13:28:24 [http-nio-8080-exec-8] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/dr/bill/recharge from 127.0.0.1
2025-11-06 13:28:24 [http-nio-8080-exec-8] DEBUG c.d.w.m.D.selectRecordPage_COUNT - ==>  Preparing: SELECT count(0) FROM dr_billing_record br LEFT JOIN sys_user u ON br.user_id = u.user_id LEFT JOIN (SELECT trigger_billing_id, sum(CASE WHEN hierarchy_level = 1 THEN commission_amount ELSE 0 END) AS level1_commission, sum(CASE WHEN hierarchy_level = 2 THEN commission_amount ELSE 0 END) AS level2_commission, sum(CASE WHEN hierarchy_level = 3 THEN commission_amount ELSE 0 END) AS level3_commission FROM dr_agent_commission_record WHERE business_type = 'RECHARGE_COMMISSION' GROUP BY trigger_billing_id) rc ON rc.trigger_billing_id = br.bill_id WHERE br.bill_type = ? AND br.business_type = ?
2025-11-06 13:28:24 [http-nio-8080-exec-8] DEBUG c.d.w.m.D.selectRecordPage_COUNT - ==> Parameters: 1(Integer), RECHARGE(String)
2025-11-06 13:28:24 [http-nio-8080-exec-8] DEBUG c.d.w.m.D.selectRecordPage_COUNT - <==      Total: 1
2025-11-06 13:28:24 [http-nio-8080-exec-8] DEBUG c.d.w.m.D.selectRecordPage - ==>  Preparing: select br.bill_id, br.bill_no, br.user_id, br.operator_id, br.bill_type, br.billing_type, br.business_type, br.business_id, br.dr_amount, br.balance_before, br.balance_after, br.description, br.extra_data, br.consumer, br.remark, br.status, br.create_by, br.create_time, br.update_by, br.update_time, u.username, COALESCE(rc.level1_commission, 0) AS level1_commission, COALESCE(rc.level2_commission, 0) AS level2_commission, COALESCE(rc.level3_commission, 0) AS level3_commission from dr_billing_record br left join sys_user u on br.user_id = u.user_id left join ( select trigger_billing_id, sum(case when hierarchy_level = 1 then commission_amount else 0 end) as level1_commission, sum(case when hierarchy_level = 2 then commission_amount else 0 end) as level2_commission, sum(case when hierarchy_level = 3 then commission_amount else 0 end) as level3_commission from dr_agent_commission_record where business_type = 'RECHARGE_COMMISSION' group by trigger_billing_id ) rc on rc.trigger_billing_id = br.bill_id WHERE br.bill_type = ? and br.business_type = ? order by br.create_time desc LIMIT ?
2025-11-06 13:28:24 [http-nio-8080-exec-8] DEBUG c.d.w.m.D.selectRecordPage - ==> Parameters: 1(Integer), RECHARGE(String), 10(Integer)
2025-11-06 13:28:25 [http-nio-8080-exec-8] DEBUG c.d.w.m.D.selectRecordPage - <==      Total: 10
2025-11-06 13:28:25 [http-nio-8080-exec-8] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/dr/bill/recharge from 127.0.0.1 - 状态: 200 - 耗时: 697ms
2025-11-06 13:28:26 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /agent/commission/settlement/admin/list
2025-11-06 13:28:26 [http-nio-8080-exec-1] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 13:28:26 [http-nio-8080-exec-1] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 13:28:26 [http-nio-8080-exec-1] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 13:28:26 [http-nio-8080-exec-1] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 13:28:26 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 13:28:26 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 13:28:27 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 13:28:27 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:28:27 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 13:28:27 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 13:28:27 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 13:28:27 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 13:28:27 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 13:28:27 [http-nio-8080-exec-1] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 13:28:27 [http-nio-8080-exec-1] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 13:28:27 [http-nio-8080-exec-1] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 13:28:27 [http-nio-8080-exec-1] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 13:28:27 [http-nio-8080-exec-1] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 13:28:27 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /agent/commission/settlement/admin/list
2025-11-06 13:28:27 [http-nio-8080-exec-1] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/agent/commission/settlement/admin/list from 127.0.0.1
2025-11-06 13:28:27 [http-nio-8080-exec-1] DEBUG c.d.w.m.A.searchAdminSettlements - ==>  Preparing: select s.settlement_id, s.agent_user_id, u.username as agent_username, roles.agent_role_keys, s.request_amount, s.approved_amount, s.status, s.approval_user_id, s.approval_time, s.remark, s.extra_data, s.create_by, s.create_time, s.update_by, s.update_time from dr_agent_commission_settlement s left join sys_user u on s.agent_user_id = u.user_id left join ( select ur.user_id, group_concat(distinct r.role_key order by r.role_key) as agent_role_keys from sys_user_role ur join sys_role r on ur.role_id = r.role_id and r.del_flag = '0' group by ur.user_id ) roles on roles.user_id = s.agent_user_id order by s.create_time desc
2025-11-06 13:28:27 [http-nio-8080-exec-1] DEBUG c.d.w.m.A.searchAdminSettlements - ==> Parameters: 
2025-11-06 13:28:27 [http-nio-8080-exec-1] DEBUG c.d.w.m.A.searchAdminSettlements - <==      Total: 4
2025-11-06 13:28:27 [http-nio-8080-exec-1] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/agent/commission/settlement/admin/list from 127.0.0.1 - 状态: 200 - 耗时: 177ms
2025-11-06 13:28:29 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /dr/price/config/list?pageNum=1&pageSize=10
2025-11-06 13:28:29 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 13:28:29 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 13:28:29 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 13:28:29 [http-nio-8080-exec-3] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 13:28:29 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 13:28:29 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 13:28:29 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 13:28:29 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:28:29 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 13:28:30 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 13:28:30 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 13:28:30 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 13:28:30 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 13:28:30 [http-nio-8080-exec-3] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 13:28:30 [http-nio-8080-exec-3] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 13:28:30 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 13:28:30 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 13:28:30 [http-nio-8080-exec-3] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 13:28:30 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /dr/price/config/list?pageNum=1&pageSize=10
2025-11-06 13:28:30 [http-nio-8080-exec-3] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/dr/price/config/list from 127.0.0.1
2025-11-06 13:28:30 [http-nio-8080-exec-3] DEBUG c.d.w.m.D.selectDrPriceConfigPage_COUNT - ==>  Preparing: SELECT count(0) FROM dr_price_config
2025-11-06 13:28:30 [http-nio-8080-exec-3] DEBUG c.d.w.m.D.selectDrPriceConfigPage_COUNT - ==> Parameters: 
2025-11-06 13:28:30 [http-nio-8080-exec-3] DEBUG c.d.w.m.D.selectDrPriceConfigPage_COUNT - <==      Total: 1
2025-11-06 13:28:30 [http-nio-8080-exec-3] DEBUG c.d.w.m.D.selectDrPriceConfigPage - ==>  Preparing: select price_id, business_type, business_name, price_unit, dr_price, billing_type, status, create_time, update_time, create_by, update_by, remark from dr_price_config order by create_time desc LIMIT ?
2025-11-06 13:28:30 [http-nio-8080-exec-3] DEBUG c.d.w.m.D.selectDrPriceConfigPage - ==> Parameters: 10(Integer)
2025-11-06 13:28:30 [http-nio-8080-exec-3] DEBUG c.d.w.m.D.selectDrPriceConfigPage - <==      Total: 10
2025-11-06 13:28:30 [http-nio-8080-exec-3] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/dr/price/config/list from 127.0.0.1 - 状态: 200 - 耗时: 350ms
2025-11-06 13:28:33 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/adminMerchantsPerformanceStatistics
2025-11-06 13:28:33 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/adminAgentPerformanceStatistics
2025-11-06 13:28:33 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/adminMerchantsAssetStatistics
2025-11-06 13:28:33 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 13:28:33 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 13:28:33 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 13:28:33 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 13:28:33 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 13:28:33 [http-nio-8080-exec-9] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 13:28:33 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 13:28:33 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 13:28:33 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 13:28:33 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 13:28:33 [http-nio-8080-exec-5] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 13:28:33 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 13:28:33 [http-nio-8080-exec-10] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 13:28:33 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 13:28:33 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 13:28:33 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 13:28:33 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 13:28:33 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 13:28:33 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 13:28:33 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 13:28:33 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:28:33 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:28:33 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 13:28:33 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 13:28:33 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 13:28:33 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:28:33 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 13:28:33 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 13:28:33 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 13:28:33 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 13:28:33 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 13:28:33 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 13:28:33 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 13:28:34 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 13:28:34 [http-nio-8080-exec-10] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 13:28:34 [http-nio-8080-exec-10] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 13:28:34 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 13:28:34 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 13:28:34 [http-nio-8080-exec-10] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 13:28:34 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/adminMerchantsAssetStatistics
2025-11-06 13:28:34 [http-nio-8080-exec-10] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/adminMerchantsAssetStatistics from 127.0.0.1
2025-11-06 13:28:34 [http-nio-8080-exec-10] INFO  c.deepreach.common.aspect.LogAspect - LogAspect doBefore 被触发: 统计管理 - getAdminMerchantsAssetStatistics
2025-11-06 13:28:34 [http-nio-8080-exec-10] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志前置处理完成: 统计管理
2025-11-06 13:28:34 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:28:34 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 13:28:34 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 13:28:34 [http-nio-8080-exec-9] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 13:28:34 [http-nio-8080-exec-9] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 13:28:34 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 13:28:34 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 13:28:34 [http-nio-8080-exec-9] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 13:28:34 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/adminAgentPerformanceStatistics
2025-11-06 13:28:34 [http-nio-8080-exec-9] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/adminAgentPerformanceStatistics from 127.0.0.1
2025-11-06 13:28:34 [http-nio-8080-exec-9] INFO  c.deepreach.common.aspect.LogAspect - LogAspect doBefore 被触发: 统计管理 - getAdminAgentPerformanceStatistics
2025-11-06 13:28:34 [http-nio-8080-exec-9] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志前置处理完成: 统计管理
2025-11-06 13:28:34 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:28:34 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 13:28:34 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 49
2025-11-06 13:28:34 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.sumTotalRechargeByUserIds - ==>  Preparing: SELECT b.user_id AS userId, COALESCE(b.total_recharge, 0) AS totalRecharge FROM user_dr_balance b WHERE b.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:28:34 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.sumTotalRechargeByUserIds - ==> Parameters: 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 330(Long), 331(Long), 335(Long), 336(Long), 337(Long), 339(Long), 342(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long)
2025-11-06 13:28:34 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 49
2025-11-06 13:28:34 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.sumTotalRechargeByUserIds - ==>  Preparing: SELECT b.user_id AS userId, COALESCE(b.total_recharge, 0) AS totalRecharge FROM user_dr_balance b WHERE b.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:28:34 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.sumTotalRechargeByUserIds - ==> Parameters: 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 330(Long), 331(Long), 335(Long), 336(Long), 337(Long), 339(Long), 342(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 340(Long), 343(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 353(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 380(Long), 381(Long)
2025-11-06 13:28:34 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.sumTotalRechargeByUserIds - <==      Total: 13
2025-11-06 13:28:34 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.A.selectCommissionByUserIds - ==>  Preparing: SELECT agent_user_id AS userId, COALESCE(total_commission, 0) AS totalCommission, COALESCE(settled_commission, 0) AS settledCommission FROM dr_agent_commission_account WHERE agent_user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:28:34 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.A.selectCommissionByUserIds - ==> Parameters: 320(Long), 322(Long), 332(Long), 354(Long), 356(Long), 321(Long), 333(Long), 344(Long), 355(Long), 357(Long), 329(Long), 334(Long), 338(Long), 345(Long)
2025-11-06 13:28:34 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.sumTotalRechargeByUserIds - <==      Total: 13
2025-11-06 13:28:34 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.A.selectCommissionByUserIds - ==>  Preparing: SELECT agent_user_id AS userId, COALESCE(total_commission, 0) AS totalCommission, COALESCE(settled_commission, 0) AS settledCommission FROM dr_agent_commission_account WHERE agent_user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:28:34 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.A.selectCommissionByUserIds - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 13:28:34 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.A.selectCommissionByUserIds - <==      Total: 6
2025-11-06 13:28:34 [http-nio-8080-exec-9] INFO  c.deepreach.common.aspect.LogAspect - 保存操作日志: 统计管理 - admin - /api/statistics/adminAgentPerformanceStatistics - 成功
2025-11-06 13:28:34 [http-nio-8080-exec-9] INFO  c.deepreach.common.aspect.LogAspect - 操作日志对象详情: operId=null, title=统计管理, operName=admin, operUrl=/api/statistics/adminAgentPerformanceStatistics, status=0
2025-11-06 13:28:34 [http-nio-8080-exec-9] INFO  c.deepreach.common.aspect.LogAspect - 准备异步保存操作日志到数据库...
2025-11-06 13:28:34 [http-nio-8080-exec-9] INFO  c.deepreach.common.aspect.LogAspect - 操作日志异步保存任务已提交
2025-11-06 13:28:34 [http-nio-8080-exec-9] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志返回处理完成: 统计管理
2025-11-06 13:28:34 [pool-3-thread-1] DEBUG c.d.c.c.m.S.insertOperLog - ==>  Preparing: INSERT INTO sys_oper_log ( title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2025-11-06 13:28:34 [pool-3-thread-1] DEBUG c.d.c.c.m.S.insertOperLog - ==> Parameters: 统计管理(String), 0(Integer), com.deepreach.common.core.controller.StatisticsController.getAdminAgentPerformanceStatistics(String), GET(String), 1(Integer), admin(String), ADMIN(String), /api/statistics/adminAgentPerformanceStatistics(String), 127.0.0.1(String), null, (String), {"code":200,"msg":"操作成功","data":{"generalAgent":{"identity":"agent_level_1","identityDisplay":"总代","agentCount":5,"totalRecharge":132000.00,"totalCommission":33200.00},"level1Agent":{"identity":"agent_level_2","identityDisplay":"一级代理","agentCount":5,"totalRecharge":33000.00,"totalCommission":3300.00},"level2Agent":{"identity":"agent_level_3","identityDisplay":"二级代理","agentCount":4,"totalRecharge":33000.00,"totalCommission":3300.00},"total":{"identity":"total","identityDisplay":"合计","agentCount":14,"totalRecharge":198000.00,"totalCommission":39800.00}},"timestamp":1762406914652,"error":false,"success":true}(String), 0(Integer), null, 2025-11-06T13:28:34.119069(LocalDateTime), 533(Long)
2025-11-06 13:28:34 [http-nio-8080-exec-9] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/adminAgentPerformanceStatistics from 127.0.0.1 - 状态: 200 - 耗时: 538ms
2025-11-06 13:28:34 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.A.selectCommissionByUserIds - <==      Total: 6
2025-11-06 13:28:34 [http-nio-8080-exec-10] INFO  c.deepreach.common.aspect.LogAspect - 保存操作日志: 统计管理 - admin - /api/statistics/adminMerchantsAssetStatistics - 成功
2025-11-06 13:28:34 [http-nio-8080-exec-10] INFO  c.deepreach.common.aspect.LogAspect - 操作日志对象详情: operId=null, title=统计管理, operName=admin, operUrl=/api/statistics/adminMerchantsAssetStatistics, status=0
2025-11-06 13:28:34 [http-nio-8080-exec-10] INFO  c.deepreach.common.aspect.LogAspect - 准备异步保存操作日志到数据库...
2025-11-06 13:28:34 [http-nio-8080-exec-10] INFO  c.deepreach.common.aspect.LogAspect - 操作日志异步保存任务已提交
2025-11-06 13:28:34 [http-nio-8080-exec-10] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志返回处理完成: 统计管理
2025-11-06 13:28:34 [pool-3-thread-2] DEBUG c.d.c.c.m.S.insertOperLog - ==>  Preparing: INSERT INTO sys_oper_log ( title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2025-11-06 13:28:34 [pool-3-thread-2] DEBUG c.d.c.c.m.S.insertOperLog - ==> Parameters: 统计管理(String), 0(Integer), com.deepreach.common.core.controller.StatisticsController.getAdminMerchantsAssetStatistics(String), GET(String), 1(Integer), admin(String), ADMIN(String), /api/statistics/adminMerchantsAssetStatistics(String), 127.0.0.1(String), null, (String), {"code":200,"msg":"操作成功","data":{"totalRecharge":151000.00,"settledCommission":800.00,"netValue":150200.00},"timestamp":1762406914939,"error":false,"success":true}(String), 0(Integer), null, 2025-11-06T13:28:34.093822(LocalDateTime), 847(Long)
2025-11-06 13:28:34 [http-nio-8080-exec-10] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/adminMerchantsAssetStatistics from 127.0.0.1 - 状态: 200 - 耗时: 853ms
2025-11-06 13:28:34 [pool-3-thread-1] DEBUG c.d.c.c.m.S.insertOperLog - <==    Updates: 1
2025-11-06 13:28:35 [pool-3-thread-2] DEBUG c.d.c.c.m.S.insertOperLog - <==    Updates: 1
2025-11-06 13:28:36 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 13:28:36 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 13:28:36 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 13:28:37 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 13:28:37 [http-nio-8080-exec-5] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 13:28:37 [http-nio-8080-exec-5] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 13:28:37 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 13:28:37 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 13:28:37 [http-nio-8080-exec-5] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 13:28:37 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/adminMerchantsPerformanceStatistics
2025-11-06 13:28:37 [http-nio-8080-exec-5] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/adminMerchantsPerformanceStatistics from 127.0.0.1
2025-11-06 13:28:37 [http-nio-8080-exec-5] INFO  c.deepreach.common.aspect.LogAspect - LogAspect doBefore 被触发: 统计管理 - getAdminMerchantsPerformanceStatistics
2025-11-06 13:28:37 [http-nio-8080-exec-5] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志前置处理完成: 统计管理
2025-11-06 13:28:37 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:28:37 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 13:28:37 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 49
2025-11-06 13:28:37 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.sumTotalRechargeByUserIds - ==>  Preparing: SELECT b.user_id AS userId, COALESCE(b.total_recharge, 0) AS totalRecharge FROM user_dr_balance b WHERE b.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:28:37 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.sumTotalRechargeByUserIds - ==> Parameters: 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 330(Long), 331(Long), 335(Long), 336(Long), 337(Long), 339(Long), 342(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long)
2025-11-06 13:28:37 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.sumTotalRechargeByUserIds - <==      Total: 13
2025-11-06 13:28:37 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.countAiCharactersByType - ==>  Preparing: SELECT COALESCE(c.type, 'unknown') AS type, COUNT(*) AS count FROM ai_character c WHERE c.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) GROUP BY COALESCE(c.type, 'unknown')
2025-11-06 13:28:37 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.countAiCharactersByType - ==> Parameters: 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 330(Long), 331(Long), 335(Long), 336(Long), 337(Long), 339(Long), 342(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 340(Long), 343(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 353(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 380(Long), 381(Long)
2025-11-06 13:28:38 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.countAiCharactersByType - <==      Total: 1
2025-11-06 13:28:38 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectAllPlatforms - ==>  Preparing: SELECT platform_id AS platformId, COALESCE(platform_name, 'UNKNOWN_PLATFORM') AS platformName, COALESCE(platform_type, 'unknown') AS platformType FROM platform WHERE status = '0' ORDER BY platform_id
2025-11-06 13:28:38 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectAllPlatforms - ==> Parameters: 
2025-11-06 13:28:38 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectAllPlatforms - <==      Total: 8
2025-11-06 13:28:38 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.countInstancesByType - ==>  Preparing: SELECT i.instance_type AS instanceType, COUNT(*) AS count FROM ai_instance i WHERE i.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) GROUP BY i.instance_type
2025-11-06 13:28:38 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.countInstancesByType - ==> Parameters: 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 330(Long), 331(Long), 335(Long), 336(Long), 337(Long), 339(Long), 342(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 340(Long), 343(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 353(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 380(Long), 381(Long)
2025-11-06 13:28:38 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.countInstancesByType - <==      Total: 2
2025-11-06 13:28:38 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.countInstancesByPlatform - ==>  Preparing: SELECT COALESCE(i.platform_id, 0) AS platformId, COALESCE(p.platform_name, 'UNKNOWN_PLATFORM') AS platformName, COUNT(*) AS count FROM ai_instance i LEFT JOIN platform p ON i.platform_id = p.platform_id WHERE i.instance_type = ? AND i.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) GROUP BY COALESCE(i.platform_id, 0), COALESCE(p.platform_name, 'UNKNOWN_PLATFORM')
2025-11-06 13:28:38 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.countInstancesByPlatform - ==> Parameters: 0(String), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 330(Long), 331(Long), 335(Long), 336(Long), 337(Long), 339(Long), 342(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 340(Long), 343(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 353(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 380(Long), 381(Long)
2025-11-06 13:28:38 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.countInstancesByPlatform - <==      Total: 2
2025-11-06 13:28:38 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.countInstancesByPlatform - ==>  Preparing: SELECT COALESCE(i.platform_id, 0) AS platformId, COALESCE(p.platform_name, 'UNKNOWN_PLATFORM') AS platformName, COUNT(*) AS count FROM ai_instance i LEFT JOIN platform p ON i.platform_id = p.platform_id WHERE i.instance_type = ? AND i.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) GROUP BY COALESCE(i.platform_id, 0), COALESCE(p.platform_name, 'UNKNOWN_PLATFORM')
2025-11-06 13:28:38 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.countInstancesByPlatform - ==> Parameters: 1(String), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 330(Long), 331(Long), 335(Long), 336(Long), 337(Long), 339(Long), 342(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 340(Long), 343(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 353(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 380(Long), 381(Long)
2025-11-06 13:28:38 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.countInstancesByPlatform - <==      Total: 3
2025-11-06 13:28:38 [http-nio-8080-exec-5] INFO  c.deepreach.common.aspect.LogAspect - 保存操作日志: 统计管理 - admin - /api/statistics/adminMerchantsPerformanceStatistics - 成功
2025-11-06 13:28:38 [http-nio-8080-exec-5] INFO  c.deepreach.common.aspect.LogAspect - 操作日志对象详情: operId=null, title=统计管理, operName=admin, operUrl=/api/statistics/adminMerchantsPerformanceStatistics, status=0
2025-11-06 13:28:38 [http-nio-8080-exec-5] INFO  c.deepreach.common.aspect.LogAspect - 准备异步保存操作日志到数据库...
2025-11-06 13:28:38 [http-nio-8080-exec-5] INFO  c.deepreach.common.aspect.LogAspect - 操作日志异步保存任务已提交
2025-11-06 13:28:38 [http-nio-8080-exec-5] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志返回处理完成: 统计管理
2025-11-06 13:28:38 [pool-3-thread-4] DEBUG c.d.c.c.m.S.insertOperLog - ==>  Preparing: INSERT INTO sys_oper_log ( title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2025-11-06 13:28:38 [pool-3-thread-4] DEBUG c.d.c.c.m.S.insertOperLog - ==> Parameters: 统计管理(String), 0(Integer), com.deepreach.common.core.controller.StatisticsController.getAdminMerchantsPerformanceStatistics(String), GET(String), 1(Integer), admin(String), ADMIN(String), /api/statistics/adminMerchantsPerformanceStatistics(String), 127.0.0.1(String), null, (String), {"code":200,"msg":"操作成功","data":{"merchantOverview":{"merchantCount":19,"employeeCount":15,"totalPerformance":151000.00},"aiCharacterOverview":{"totalCharacters":9,"socialAiCount":9,"customerServiceAiCount":0},"marketingInstanceOverview":{"instanceCount":13,"platformBreakdown":{"WhatsApp":7,"Telegram":6}},"prospectingInstanceOverview":{"instanceCount":7,"platformBreakdown":{"SMS":3,"Facebook":3,"Instagram":0,"TikTok":1,"X":0,"GoogleVoice":0}}},"timestamp":1762406918690,"error":false,"success":true}(String), 0(Integer), null, 2025-11-06T13:28:37.440297(LocalDateTime), 1250(Long)
2025-11-06 13:28:38 [http-nio-8080-exec-5] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/adminMerchantsPerformanceStatistics from 127.0.0.1 - 状态: 200 - 耗时: 1254ms
2025-11-06 13:28:39 [pool-3-thread-4] DEBUG c.d.c.c.m.S.insertOperLog - <==    Updates: 1
2025-11-06 13:29:16 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing POST /system/user/list
2025-11-06 13:29:16 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 13:29:16 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 13:29:16 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 13:29:16 [http-nio-8080-exec-8] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 13:29:16 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 13:29:16 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 13:29:17 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 13:29:17 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:29:17 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 13:29:17 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 13:29:17 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 13:29:17 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 13:29:17 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 13:29:17 [http-nio-8080-exec-8] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 13:29:17 [http-nio-8080-exec-8] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 13:29:17 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 13:29:17 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 13:29:17 [http-nio-8080-exec-8] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 13:29:17 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured POST /system/user/list
2025-11-06 13:29:17 [http-nio-8080-exec-8] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/system/user/list from 127.0.0.1
2025-11-06 13:29:17 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserList - ==>  Preparing: SELECT DISTINCT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_name, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur_filter ON u.user_id = ur_filter.user_id LEFT JOIN sys_role r_filter ON ur_filter.role_id = r_filter.role_id AND r_filter.del_flag = '0' WHERE u.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY u.create_time DESC
2025-11-06 13:29:17 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserList - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 13:29:18 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserList - <==      Total: 49
2025-11-06 13:29:18 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:29:18 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 381(Long)
2025-11-06 13:29:18 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:29:18 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:29:18 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 380(Long)
2025-11-06 13:29:18 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:29:19 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:29:19 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 379(Long)
2025-11-06 13:29:19 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:29:19 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:29:19 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 378(Long)
2025-11-06 13:29:19 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:29:19 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:29:19 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 377(Long)
2025-11-06 13:29:19 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /dr/bill/recharge
2025-11-06 13:29:19 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 13:29:19 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 13:29:19 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 13:29:19 [http-nio-8080-exec-6] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 13:29:19 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 13:29:19 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 13:29:19 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:29:19 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:29:19 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 376(Long)
2025-11-06 13:29:19 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 13:29:19 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:29:19 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 13:29:19 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:29:19 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:29:19 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 375(Long)
2025-11-06 13:29:19 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 13:29:19 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 13:29:19 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 13:29:19 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:29:19 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:29:19 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 374(Long)
2025-11-06 13:29:19 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 13:29:19 [http-nio-8080-exec-6] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 13:29:19 [http-nio-8080-exec-6] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 13:29:19 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 13:29:19 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 13:29:19 [http-nio-8080-exec-6] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 13:29:19 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /dr/bill/recharge
2025-11-06 13:29:19 [http-nio-8080-exec-6] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/dr/bill/recharge from 127.0.0.1
2025-11-06 13:29:19 [http-nio-8080-exec-6] DEBUG c.d.w.m.D.selectRecordPage_COUNT - ==>  Preparing: SELECT count(0) FROM dr_billing_record br LEFT JOIN sys_user u ON br.user_id = u.user_id LEFT JOIN (SELECT trigger_billing_id, sum(CASE WHEN hierarchy_level = 1 THEN commission_amount ELSE 0 END) AS level1_commission, sum(CASE WHEN hierarchy_level = 2 THEN commission_amount ELSE 0 END) AS level2_commission, sum(CASE WHEN hierarchy_level = 3 THEN commission_amount ELSE 0 END) AS level3_commission FROM dr_agent_commission_record WHERE business_type = 'RECHARGE_COMMISSION' GROUP BY trigger_billing_id) rc ON rc.trigger_billing_id = br.bill_id WHERE br.bill_type = ? AND br.business_type = ?
2025-11-06 13:29:19 [http-nio-8080-exec-6] DEBUG c.d.w.m.D.selectRecordPage_COUNT - ==> Parameters: 1(Integer), RECHARGE(String)
2025-11-06 13:29:19 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:29:19 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:29:19 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 373(Long)
2025-11-06 13:29:20 [http-nio-8080-exec-6] DEBUG c.d.w.m.D.selectRecordPage_COUNT - <==      Total: 1
2025-11-06 13:29:20 [http-nio-8080-exec-6] DEBUG c.d.w.m.D.selectRecordPage - ==>  Preparing: select br.bill_id, br.bill_no, br.user_id, br.operator_id, br.bill_type, br.billing_type, br.business_type, br.business_id, br.dr_amount, br.balance_before, br.balance_after, br.description, br.extra_data, br.consumer, br.remark, br.status, br.create_by, br.create_time, br.update_by, br.update_time, u.username, COALESCE(rc.level1_commission, 0) AS level1_commission, COALESCE(rc.level2_commission, 0) AS level2_commission, COALESCE(rc.level3_commission, 0) AS level3_commission from dr_billing_record br left join sys_user u on br.user_id = u.user_id left join ( select trigger_billing_id, sum(case when hierarchy_level = 1 then commission_amount else 0 end) as level1_commission, sum(case when hierarchy_level = 2 then commission_amount else 0 end) as level2_commission, sum(case when hierarchy_level = 3 then commission_amount else 0 end) as level3_commission from dr_agent_commission_record where business_type = 'RECHARGE_COMMISSION' group by trigger_billing_id ) rc on rc.trigger_billing_id = br.bill_id WHERE br.bill_type = ? and br.business_type = ? order by br.create_time desc LIMIT ?
2025-11-06 13:29:20 [http-nio-8080-exec-6] DEBUG c.d.w.m.D.selectRecordPage - ==> Parameters: 1(Integer), RECHARGE(String), 10(Integer)
2025-11-06 13:29:20 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:29:20 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:29:20 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 372(Long)
2025-11-06 13:29:20 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:29:20 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:29:20 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 371(Long)
2025-11-06 13:29:20 [http-nio-8080-exec-6] DEBUG c.d.w.m.D.selectRecordPage - <==      Total: 10
2025-11-06 13:29:20 [http-nio-8080-exec-6] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/dr/bill/recharge from 127.0.0.1 - 状态: 200 - 耗时: 496ms
2025-11-06 13:29:20 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:29:20 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:29:20 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 370(Long)
2025-11-06 13:29:20 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:29:20 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:29:20 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 369(Long)
2025-11-06 13:29:20 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:29:20 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:29:20 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 357(Long)
2025-11-06 13:29:20 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:29:20 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:29:20 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 356(Long)
2025-11-06 13:29:21 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:29:21 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:29:21 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 355(Long)
2025-11-06 13:29:21 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:29:21 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:29:21 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 354(Long)
2025-11-06 13:29:21 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:29:21 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:29:21 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 353(Long)
2025-11-06 13:29:21 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:29:21 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:29:21 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 352(Long)
2025-11-06 13:29:21 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:29:21 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:29:21 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 351(Long)
2025-11-06 13:29:22 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /agent/commission/settlement/admin/list
2025-11-06 13:29:22 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 13:29:22 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 13:29:22 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 13:29:22 [http-nio-8080-exec-3] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 13:29:22 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 13:29:22 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 13:29:22 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:29:22 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:29:22 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 349(Long)
2025-11-06 13:29:22 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 13:29:22 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:29:22 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 13:29:23 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 13:29:23 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 13:29:23 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 13:29:23 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:29:23 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:29:23 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 348(Long)
2025-11-06 13:29:23 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 13:29:23 [http-nio-8080-exec-3] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 13:29:23 [http-nio-8080-exec-3] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 13:29:23 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 13:29:23 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 13:29:23 [http-nio-8080-exec-3] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 13:29:23 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /agent/commission/settlement/admin/list
2025-11-06 13:29:23 [http-nio-8080-exec-3] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/agent/commission/settlement/admin/list from 127.0.0.1
2025-11-06 13:29:23 [http-nio-8080-exec-3] DEBUG c.d.w.m.A.searchAdminSettlements - ==>  Preparing: select s.settlement_id, s.agent_user_id, u.username as agent_username, roles.agent_role_keys, s.request_amount, s.approved_amount, s.status, s.approval_user_id, s.approval_time, s.remark, s.extra_data, s.create_by, s.create_time, s.update_by, s.update_time from dr_agent_commission_settlement s left join sys_user u on s.agent_user_id = u.user_id left join ( select ur.user_id, group_concat(distinct r.role_key order by r.role_key) as agent_role_keys from sys_user_role ur join sys_role r on ur.role_id = r.role_id and r.del_flag = '0' group by ur.user_id ) roles on roles.user_id = s.agent_user_id order by s.create_time desc
2025-11-06 13:29:23 [http-nio-8080-exec-3] DEBUG c.d.w.m.A.searchAdminSettlements - ==> Parameters: 
2025-11-06 13:29:23 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:29:23 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:29:23 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 347(Long)
2025-11-06 13:29:23 [http-nio-8080-exec-3] DEBUG c.d.w.m.A.searchAdminSettlements - <==      Total: 4
2025-11-06 13:29:23 [http-nio-8080-exec-3] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/agent/commission/settlement/admin/list from 127.0.0.1 - 状态: 200 - 耗时: 167ms
2025-11-06 13:29:24 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:29:24 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:29:24 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 345(Long)
2025-11-06 13:29:24 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:29:24 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:29:24 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 344(Long)
2025-11-06 13:29:24 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:29:24 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:29:24 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 343(Long)
2025-11-06 13:29:25 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:29:25 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:29:25 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 342(Long)
2025-11-06 13:29:25 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:29:25 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:29:25 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 340(Long)
2025-11-06 13:29:25 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /dr/price/config/list?pageNum=1&pageSize=10
2025-11-06 13:29:25 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 13:29:25 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 13:29:25 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 13:29:25 [http-nio-8080-exec-9] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 13:29:25 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 13:29:25 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 13:29:25 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:29:25 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 13:29:25 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:29:25 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:29:25 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 339(Long)
2025-11-06 13:29:25 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 13:29:25 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:29:25 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 13:29:25 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 13:29:25 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:29:25 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 338(Long)
2025-11-06 13:29:25 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 13:29:25 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 13:29:25 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:29:25 [http-nio-8080-exec-9] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 13:29:25 [http-nio-8080-exec-9] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 13:29:25 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 13:29:25 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:29:25 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 337(Long)
2025-11-06 13:29:25 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 13:29:25 [http-nio-8080-exec-9] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 13:29:25 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /dr/price/config/list?pageNum=1&pageSize=10
2025-11-06 13:29:25 [http-nio-8080-exec-9] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/dr/price/config/list from 127.0.0.1
2025-11-06 13:29:25 [http-nio-8080-exec-9] DEBUG c.d.w.m.D.selectDrPriceConfigPage_COUNT - ==>  Preparing: SELECT count(0) FROM dr_price_config
2025-11-06 13:29:25 [http-nio-8080-exec-9] DEBUG c.d.w.m.D.selectDrPriceConfigPage_COUNT - ==> Parameters: 
2025-11-06 13:29:25 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:29:25 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:29:25 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 336(Long)
2025-11-06 13:29:25 [http-nio-8080-exec-9] DEBUG c.d.w.m.D.selectDrPriceConfigPage_COUNT - <==      Total: 1
2025-11-06 13:29:25 [http-nio-8080-exec-9] DEBUG c.d.w.m.D.selectDrPriceConfigPage - ==>  Preparing: select price_id, business_type, business_name, price_unit, dr_price, billing_type, status, create_time, update_time, create_by, update_by, remark from dr_price_config order by create_time desc LIMIT ?
2025-11-06 13:29:25 [http-nio-8080-exec-9] DEBUG c.d.w.m.D.selectDrPriceConfigPage - ==> Parameters: 10(Integer)
2025-11-06 13:29:26 [http-nio-8080-exec-9] DEBUG c.d.w.m.D.selectDrPriceConfigPage - <==      Total: 10
2025-11-06 13:29:26 [http-nio-8080-exec-9] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/dr/price/config/list from 127.0.0.1 - 状态: 200 - 耗时: 323ms
2025-11-06 13:29:26 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:29:26 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:29:26 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 335(Long)
2025-11-06 13:29:26 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:29:26 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:29:26 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 334(Long)
2025-11-06 13:29:26 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:29:26 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:29:26 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 333(Long)
2025-11-06 13:29:26 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:29:26 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:29:26 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 332(Long)
2025-11-06 13:29:27 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:29:27 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:29:27 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 331(Long)
2025-11-06 13:29:27 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:29:27 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:29:27 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 330(Long)
2025-11-06 13:29:27 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:29:27 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:29:27 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 329(Long)
2025-11-06 13:29:27 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:29:27 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:29:27 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 328(Long)
2025-11-06 13:29:27 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:29:27 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:29:27 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 327(Long)
2025-11-06 13:29:27 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:29:27 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:29:27 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 326(Long)
2025-11-06 13:29:28 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:29:28 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:29:28 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 325(Long)
2025-11-06 13:29:28 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/adminMerchantsAssetStatistics
2025-11-06 13:29:28 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/adminAgentPerformanceStatistics
2025-11-06 13:29:28 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/adminMerchantsPerformanceStatistics
2025-11-06 13:29:28 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 13:29:28 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 13:29:28 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 13:29:28 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 13:29:28 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 13:29:28 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 13:29:28 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 13:29:28 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 13:29:28 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 13:29:28 [http-nio-8080-exec-10] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 13:29:28 [http-nio-8080-exec-4] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 13:29:28 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 13:29:28 [http-nio-8080-exec-7] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 13:29:28 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 13:29:28 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 13:29:28 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 13:29:28 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:29:28 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:29:28 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 324(Long)
2025-11-06 13:29:28 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 13:29:28 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 13:29:28 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 13:29:28 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:29:28 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 13:29:28 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 13:29:28 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:29:28 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 13:29:28 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 13:29:28 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:29:28 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 13:29:28 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 13:29:28 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 13:29:28 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 13:29:28 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 13:29:28 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 13:29:28 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 13:29:28 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 13:29:28 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 13:29:28 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 13:29:28 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 13:29:28 [http-nio-8080-exec-10] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 13:29:28 [http-nio-8080-exec-10] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 13:29:28 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 13:29:28 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 13:29:28 [http-nio-8080-exec-10] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 13:29:28 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/adminAgentPerformanceStatistics
2025-11-06 13:29:28 [http-nio-8080-exec-10] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/adminAgentPerformanceStatistics from 127.0.0.1
2025-11-06 13:29:28 [http-nio-8080-exec-10] INFO  c.deepreach.common.aspect.LogAspect - LogAspect doBefore 被触发: 统计管理 - getAdminAgentPerformanceStatistics
2025-11-06 13:29:28 [http-nio-8080-exec-10] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志前置处理完成: 统计管理
2025-11-06 13:29:28 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:29:28 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 13:29:28 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 13:29:28 [http-nio-8080-exec-4] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 13:29:28 [http-nio-8080-exec-4] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 13:29:28 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 13:29:28 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 13:29:28 [http-nio-8080-exec-4] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 13:29:28 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/adminMerchantsAssetStatistics
2025-11-06 13:29:28 [http-nio-8080-exec-4] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/adminMerchantsAssetStatistics from 127.0.0.1
2025-11-06 13:29:28 [http-nio-8080-exec-4] INFO  c.deepreach.common.aspect.LogAspect - LogAspect doBefore 被触发: 统计管理 - getAdminMerchantsAssetStatistics
2025-11-06 13:29:28 [http-nio-8080-exec-4] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志前置处理完成: 统计管理
2025-11-06 13:29:28 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:29:28 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 13:29:28 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:29:28 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:29:28 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 323(Long)
2025-11-06 13:29:28 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 13:29:28 [http-nio-8080-exec-7] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 13:29:28 [http-nio-8080-exec-7] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 13:29:28 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 13:29:28 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 13:29:28 [http-nio-8080-exec-7] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 13:29:28 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/adminMerchantsPerformanceStatistics
2025-11-06 13:29:28 [http-nio-8080-exec-7] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/adminMerchantsPerformanceStatistics from 127.0.0.1
2025-11-06 13:29:28 [http-nio-8080-exec-7] INFO  c.deepreach.common.aspect.LogAspect - LogAspect doBefore 被触发: 统计管理 - getAdminMerchantsPerformanceStatistics
2025-11-06 13:29:28 [http-nio-8080-exec-7] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志前置处理完成: 统计管理
2025-11-06 13:29:28 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 49
2025-11-06 13:29:28 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:29:28 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.sumTotalRechargeByUserIds - ==>  Preparing: SELECT b.user_id AS userId, COALESCE(b.total_recharge, 0) AS totalRecharge FROM user_dr_balance b WHERE b.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:29:28 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.sumTotalRechargeByUserIds - ==> Parameters: 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 330(Long), 331(Long), 335(Long), 336(Long), 337(Long), 339(Long), 342(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 340(Long), 343(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 353(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 380(Long), 381(Long)
2025-11-06 13:29:28 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 13:29:28 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 49
2025-11-06 13:29:28 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.sumTotalRechargeByUserIds - ==>  Preparing: SELECT b.user_id AS userId, COALESCE(b.total_recharge, 0) AS totalRecharge FROM user_dr_balance b WHERE b.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:29:28 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.sumTotalRechargeByUserIds - ==> Parameters: 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 330(Long), 331(Long), 335(Long), 336(Long), 337(Long), 339(Long), 342(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long)
2025-11-06 13:29:28 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:29:28 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:29:28 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 322(Long)
2025-11-06 13:29:29 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.sumTotalRechargeByUserIds - <==      Total: 13
2025-11-06 13:29:29 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.A.selectCommissionByUserIds - ==>  Preparing: SELECT agent_user_id AS userId, COALESCE(total_commission, 0) AS totalCommission, COALESCE(settled_commission, 0) AS settledCommission FROM dr_agent_commission_account WHERE agent_user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:29:29 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.A.selectCommissionByUserIds - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 13:29:29 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 49
2025-11-06 13:29:29 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.sumTotalRechargeByUserIds - ==>  Preparing: SELECT b.user_id AS userId, COALESCE(b.total_recharge, 0) AS totalRecharge FROM user_dr_balance b WHERE b.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:29:29 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.sumTotalRechargeByUserIds - ==> Parameters: 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 330(Long), 331(Long), 335(Long), 336(Long), 337(Long), 339(Long), 342(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long)
2025-11-06 13:29:29 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:29:29 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:29:29 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 321(Long)
2025-11-06 13:29:29 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.A.selectCommissionByUserIds - <==      Total: 6
2025-11-06 13:29:29 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.sumTotalRechargeByUserIds - <==      Total: 13
2025-11-06 13:29:29 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.countAiCharactersByType - ==>  Preparing: SELECT COALESCE(c.type, 'unknown') AS type, COUNT(*) AS count FROM ai_character c WHERE c.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) GROUP BY COALESCE(c.type, 'unknown')
2025-11-06 13:29:29 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.countAiCharactersByType - ==> Parameters: 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 330(Long), 331(Long), 335(Long), 336(Long), 337(Long), 339(Long), 342(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 340(Long), 343(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 353(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 380(Long), 381(Long)
2025-11-06 13:29:29 [http-nio-8080-exec-10] INFO  c.deepreach.common.aspect.LogAspect - 保存操作日志: 统计管理 - admin - /api/statistics/adminAgentPerformanceStatistics - 成功
2025-11-06 13:29:29 [http-nio-8080-exec-10] INFO  c.deepreach.common.aspect.LogAspect - 操作日志对象详情: operId=null, title=统计管理, operName=admin, operUrl=/api/statistics/adminAgentPerformanceStatistics, status=0
2025-11-06 13:29:29 [http-nio-8080-exec-10] INFO  c.deepreach.common.aspect.LogAspect - 准备异步保存操作日志到数据库...
2025-11-06 13:29:29 [http-nio-8080-exec-10] INFO  c.deepreach.common.aspect.LogAspect - 操作日志异步保存任务已提交
2025-11-06 13:29:29 [http-nio-8080-exec-10] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志返回处理完成: 统计管理
2025-11-06 13:29:29 [pool-3-thread-3] DEBUG c.d.c.c.m.S.insertOperLog - ==>  Preparing: INSERT INTO sys_oper_log ( title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2025-11-06 13:29:29 [http-nio-8080-exec-10] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/adminAgentPerformanceStatistics from 127.0.0.1 - 状态: 200 - 耗时: 485ms
2025-11-06 13:29:29 [pool-3-thread-3] DEBUG c.d.c.c.m.S.insertOperLog - ==> Parameters: 统计管理(String), 0(Integer), com.deepreach.common.core.controller.StatisticsController.getAdminAgentPerformanceStatistics(String), GET(String), 1(Integer), admin(String), ADMIN(String), /api/statistics/adminAgentPerformanceStatistics(String), 127.0.0.1(String), null, (String), {"code":200,"msg":"操作成功","data":{"generalAgent":{"identity":"agent_level_1","identityDisplay":"总代","agentCount":5,"totalRecharge":132000.00,"totalCommission":33200.00},"level1Agent":{"identity":"agent_level_2","identityDisplay":"一级代理","agentCount":5,"totalRecharge":33000.00,"totalCommission":3300.00},"level2Agent":{"identity":"agent_level_3","identityDisplay":"二级代理","agentCount":4,"totalRecharge":33000.00,"totalCommission":3300.00},"total":{"identity":"total","identityDisplay":"合计","agentCount":14,"totalRecharge":198000.00,"totalCommission":39800.00}},"timestamp":1762406969256,"error":false,"success":true}(String), 0(Integer), null, 2025-11-06T13:29:28.773047(LocalDateTime), 483(Long)
2025-11-06 13:29:29 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:29:29 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:29:29 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 320(Long)
2025-11-06 13:29:29 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.countAiCharactersByType - <==      Total: 1
2025-11-06 13:29:29 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectAllPlatforms - ==>  Preparing: SELECT platform_id AS platformId, COALESCE(platform_name, 'UNKNOWN_PLATFORM') AS platformName, COALESCE(platform_type, 'unknown') AS platformType FROM platform WHERE status = '0' ORDER BY platform_id
2025-11-06 13:29:29 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectAllPlatforms - ==> Parameters: 
2025-11-06 13:29:29 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:29:29 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 13:29:29 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 1(Long)
2025-11-06 13:29:29 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.sumTotalRechargeByUserIds - <==      Total: 13
2025-11-06 13:29:29 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.A.selectCommissionByUserIds - ==>  Preparing: SELECT agent_user_id AS userId, COALESCE(total_commission, 0) AS totalCommission, COALESCE(settled_commission, 0) AS settledCommission FROM dr_agent_commission_account WHERE agent_user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:29:29 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.A.selectCommissionByUserIds - ==> Parameters: 320(Long), 322(Long), 332(Long), 354(Long), 356(Long), 321(Long), 333(Long), 344(Long), 355(Long), 357(Long), 329(Long), 334(Long), 338(Long), 345(Long)
2025-11-06 13:29:29 [pool-3-thread-3] DEBUG c.d.c.c.m.S.insertOperLog - <==    Updates: 1
2025-11-06 13:29:29 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectAllPlatforms - <==      Total: 8
2025-11-06 13:29:29 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.countInstancesByType - ==>  Preparing: SELECT i.instance_type AS instanceType, COUNT(*) AS count FROM ai_instance i WHERE i.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) GROUP BY i.instance_type
2025-11-06 13:29:29 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.countInstancesByType - ==> Parameters: 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 330(Long), 331(Long), 335(Long), 336(Long), 337(Long), 339(Long), 342(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 340(Long), 343(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 353(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 380(Long), 381(Long)
2025-11-06 13:29:29 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 13:29:29 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 13:29:29 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 379(Long), 1(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 354(Long), 337(Long), 342(Long), 344(Long), 332(Long), 334(Long), 320(Long), 329(Long), 333(Long), 321(Long)
2025-11-06 13:29:29 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.A.selectCommissionByUserIds - <==      Total: 6
2025-11-06 13:29:29 [http-nio-8080-exec-4] INFO  c.deepreach.common.aspect.LogAspect - 保存操作日志: 统计管理 - admin - /api/statistics/adminMerchantsAssetStatistics - 成功
2025-11-06 13:29:29 [http-nio-8080-exec-4] INFO  c.deepreach.common.aspect.LogAspect - 操作日志对象详情: operId=null, title=统计管理, operName=admin, operUrl=/api/statistics/adminMerchantsAssetStatistics, status=0
2025-11-06 13:29:29 [http-nio-8080-exec-4] INFO  c.deepreach.common.aspect.LogAspect - 准备异步保存操作日志到数据库...
2025-11-06 13:29:29 [http-nio-8080-exec-4] INFO  c.deepreach.common.aspect.LogAspect - 操作日志异步保存任务已提交
2025-11-06 13:29:29 [http-nio-8080-exec-4] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志返回处理完成: 统计管理
2025-11-06 13:29:29 [pool-3-thread-5] DEBUG c.d.c.c.m.S.insertOperLog - ==>  Preparing: INSERT INTO sys_oper_log ( title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2025-11-06 13:29:29 [pool-3-thread-5] DEBUG c.d.c.c.m.S.insertOperLog - ==> Parameters: 统计管理(String), 0(Integer), com.deepreach.common.core.controller.StatisticsController.getAdminMerchantsAssetStatistics(String), GET(String), 1(Integer), admin(String), ADMIN(String), /api/statistics/adminMerchantsAssetStatistics(String), 127.0.0.1(String), null, (String), {"code":200,"msg":"操作成功","data":{"totalRecharge":151000.00,"settledCommission":800.00,"netValue":150200.00},"timestamp":1762406969682,"error":false,"success":true}(String), 0(Integer), null, 2025-11-06T13:29:28.803481(LocalDateTime), 878(Long)
2025-11-06 13:29:29 [http-nio-8080-exec-4] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/adminMerchantsAssetStatistics from 127.0.0.1 - 状态: 200 - 耗时: 879ms
2025-11-06 13:29:29 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.countInstancesByType - <==      Total: 2
2025-11-06 13:29:29 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.countInstancesByPlatform - ==>  Preparing: SELECT COALESCE(i.platform_id, 0) AS platformId, COALESCE(p.platform_name, 'UNKNOWN_PLATFORM') AS platformName, COUNT(*) AS count FROM ai_instance i LEFT JOIN platform p ON i.platform_id = p.platform_id WHERE i.instance_type = ? AND i.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) GROUP BY COALESCE(i.platform_id, 0), COALESCE(p.platform_name, 'UNKNOWN_PLATFORM')
2025-11-06 13:29:29 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.countInstancesByPlatform - ==> Parameters: 0(String), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 330(Long), 331(Long), 335(Long), 336(Long), 337(Long), 339(Long), 342(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 340(Long), 343(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 353(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 380(Long), 381(Long)
2025-11-06 13:29:29 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 17
2025-11-06 13:29:29 [http-nio-8080-exec-8] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/system/user/list from 127.0.0.1 - 状态: 200 - 耗时: 11910ms
2025-11-06 13:29:29 [http-nio-8080-exec-8] WARN  c.d.c.i.PerformanceInterceptor - 检测到慢请求: POST /api/system/user/list from 127.0.0.1 - 耗时: 11910ms - 超过阈值: 3000ms
2025-11-06 13:29:29 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.countInstancesByPlatform - <==      Total: 2
2025-11-06 13:29:29 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.countInstancesByPlatform - ==>  Preparing: SELECT COALESCE(i.platform_id, 0) AS platformId, COALESCE(p.platform_name, 'UNKNOWN_PLATFORM') AS platformName, COUNT(*) AS count FROM ai_instance i LEFT JOIN platform p ON i.platform_id = p.platform_id WHERE i.instance_type = ? AND i.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) GROUP BY COALESCE(i.platform_id, 0), COALESCE(p.platform_name, 'UNKNOWN_PLATFORM')
2025-11-06 13:29:29 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.countInstancesByPlatform - ==> Parameters: 1(String), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 330(Long), 331(Long), 335(Long), 336(Long), 337(Long), 339(Long), 342(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 340(Long), 343(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 353(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 380(Long), 381(Long)
2025-11-06 13:29:30 [pool-3-thread-5] DEBUG c.d.c.c.m.S.insertOperLog - <==    Updates: 1
2025-11-06 13:29:30 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.countInstancesByPlatform - <==      Total: 3
2025-11-06 13:29:30 [http-nio-8080-exec-7] INFO  c.deepreach.common.aspect.LogAspect - 保存操作日志: 统计管理 - admin - /api/statistics/adminMerchantsPerformanceStatistics - 成功
2025-11-06 13:29:30 [http-nio-8080-exec-7] INFO  c.deepreach.common.aspect.LogAspect - 操作日志对象详情: operId=null, title=统计管理, operName=admin, operUrl=/api/statistics/adminMerchantsPerformanceStatistics, status=0
2025-11-06 13:29:30 [http-nio-8080-exec-7] INFO  c.deepreach.common.aspect.LogAspect - 准备异步保存操作日志到数据库...
2025-11-06 13:29:30 [http-nio-8080-exec-7] INFO  c.deepreach.common.aspect.LogAspect - 操作日志异步保存任务已提交
2025-11-06 13:29:30 [http-nio-8080-exec-7] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志返回处理完成: 统计管理
2025-11-06 13:29:30 [pool-3-thread-1] DEBUG c.d.c.c.m.S.insertOperLog - ==>  Preparing: INSERT INTO sys_oper_log ( title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2025-11-06 13:29:30 [http-nio-8080-exec-7] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/adminMerchantsPerformanceStatistics from 127.0.0.1 - 状态: 200 - 耗时: 1112ms
2025-11-06 13:29:30 [pool-3-thread-1] DEBUG c.d.c.c.m.S.insertOperLog - ==> Parameters: 统计管理(String), 0(Integer), com.deepreach.common.core.controller.StatisticsController.getAdminMerchantsPerformanceStatistics(String), GET(String), 1(Integer), admin(String), ADMIN(String), /api/statistics/adminMerchantsPerformanceStatistics(String), 127.0.0.1(String), null, (String), {"code":200,"msg":"操作成功","data":{"merchantOverview":{"merchantCount":19,"employeeCount":15,"totalPerformance":151000.00},"aiCharacterOverview":{"totalCharacters":9,"socialAiCount":9,"customerServiceAiCount":0},"marketingInstanceOverview":{"instanceCount":13,"platformBreakdown":{"WhatsApp":7,"Telegram":6}},"prospectingInstanceOverview":{"instanceCount":7,"platformBreakdown":{"SMS":3,"Facebook":3,"Instagram":0,"TikTok":1,"X":0,"GoogleVoice":0}}},"timestamp":1762406970040,"error":false,"success":true}(String), 0(Integer), null, 2025-11-06T13:29:28.931851(LocalDateTime), 1109(Long)
2025-11-06 13:29:30 [pool-3-thread-1] DEBUG c.d.c.c.m.S.insertOperLog - <==    Updates: 1
2025-11-06 13:57:23 [SpringApplicationShutdownHook] INFO  c.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2025-11-06 13:57:23 [SpringApplicationShutdownHook] INFO  c.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
2025-11-06 13:57:26 [main] INFO  c.deepreach.web.DeepReachApplication - Starting DeepReachApplication using Java 17.0.12 with PID 91576 (/Users/gak1/Documents/GitHub/deepreach-Server-side-rebuild/deepreach-web/target/classes started by gak1 in /Users/gak1/Documents/GitHub/deepreach-Server-side-rebuild)
2025-11-06 13:57:26 [main] DEBUG c.deepreach.web.DeepReachApplication - Running with Spring Boot v3.2.0, Spring v6.1.1
2025-11-06 13:57:26 [main] INFO  c.deepreach.web.DeepReachApplication - The following 1 profile is active: "dev"
2025-11-06 13:57:27 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-06 13:57:27 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-06 13:57:27 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Redis repository interfaces.
2025-11-06 13:57:27 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-06 13:57:27 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-06 13:57:27 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.16]
2025-11-06 13:57:27 [main] INFO  o.a.c.c.C.[.[localhost].[/api] - Initializing Spring embedded WebApplicationContext
2025-11-06 13:57:27 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 848 ms
2025-11-06 13:57:28 [main] DEBUG c.d.c.s.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-06 13:57:28 [main] ERROR i.n.r.d.DnsServerAddressStreamProviders - Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
2025-11-06 13:57:28 [main] INFO  c.d.w.s.impl.FileStorageServiceImpl - 文件上传目录: /Users/gak1/Documents/GitHub/deepreach-Server-side-rebuild/uploads
2025-11-06 13:57:28 [main] INFO  c.deepreach.web.config.WebMvcConfig - 静态资源映射配置：/uploads/** -> file:/Users/gak1/Documents/GitHub/deepreach-Server-side-rebuild/uploads
2025-11-06 13:57:28 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@2d114d27, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@28fef9a2, org.springframework.security.web.context.SecurityContextHolderFilter@4700963e, org.springframework.security.web.header.HeaderWriterFilter@870a9f2, org.springframework.web.filter.CorsFilter@7dfab58d, org.springframework.security.web.authentication.logout.LogoutFilter@5e83298e, com.deepreach.common.security.JwtAuthenticationFilter@58ebee9, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3b17759c, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@11cdf948, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@29d29657, org.springframework.security.web.session.SessionManagementFilter@7fc5a558, org.springframework.security.web.access.ExceptionTranslationFilter@3f6a9ba0, org.springframework.security.web.access.intercept.AuthorizationFilter@7dbd70fd]
2025-11-06 13:57:29 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/api'
2025-11-06 13:57:29 [main] INFO  c.deepreach.web.DeepReachApplication - Started DeepReachApplication in 2.439 seconds (process running for 2.729)
2025-11-06 13:57:29 [main] INFO  c.d.web.config.DataSourceHealthCheck - 开始检查数据源配置...
2025-11-06 13:57:41 [main] INFO  c.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2025-11-06 13:57:41 [main] INFO  c.d.web.config.DataSourceHealthCheck - 主数据源连接成功: PRIMARY_OK
2025-11-06 13:57:43 [main] INFO  c.d.web.config.DataSourceHealthCheck - 云电脑数据源连接成功: CLOUD_COMPUTER_OK
2025-11-06 13:57:45 [main] INFO  c.d.web.config.DataSourceHealthCheck - 云电脑数据库中admin用户记录数: 1
2025-11-06 13:57:45 [main] INFO  c.d.web.config.DataSourceHealthCheck - 数据源检查完成
2025-11-06 13:57:45 [main] INFO  c.d.w.i.UserHierarchyCacheInitializer - 开始构建用户层级树缓存...
2025-11-06 13:57:45 [main] DEBUG c.d.c.c.m.S.selectAllUserHierarchyRelations - ==>  Preparing: SELECT u.user_id AS userId, u.parent_user_id AS parentUserId FROM sys_user u WHERE u.status = '0'
2025-11-06 13:57:45 [main] DEBUG c.d.c.c.m.S.selectAllUserHierarchyRelations - ==> Parameters: 
2025-11-06 13:57:45 [main] DEBUG c.d.c.c.m.S.selectAllUserHierarchyRelations - <==      Total: 49
2025-11-06 13:57:46 [main] INFO  c.d.c.c.s.impl.SysUserServiceImpl - 用户层级树缓存刷新成功：记录总数=49, 根节点数量=1
2025-11-06 13:57:46 [main] INFO  c.d.w.i.UserHierarchyCacheInitializer - 用户层级树缓存构建完成
2025-11-06 14:06:05 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[.[localhost].[/api] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-06 14:06:05 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-06 14:06:05 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 8 ms
2025-11-06 14:06:05 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /system/user/list
2025-11-06 14:06:05 [http-nio-8080-exec-1] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 14:06:05 [http-nio-8080-exec-1] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 14:06:05 [http-nio-8080-exec-1] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 14:06:05 [http-nio-8080-exec-1] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 14:06:05 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 14:06:05 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 14:06:05 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 14:06:05 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:06:05 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 14:06:05 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 14:06:05 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 14:06:05 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 14:06:06 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 14:06:06 [http-nio-8080-exec-1] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 14:06:06 [http-nio-8080-exec-1] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 14:06:06 [http-nio-8080-exec-1] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 14:06:06 [http-nio-8080-exec-1] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 14:06:06 [http-nio-8080-exec-1] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 14:06:06 [http-nio-8080-exec-1] WARN  o.s.w.s.h.HandlerMappingIntrospector - Cache miss for REQUEST dispatch to '/api/system/user/list' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2025-11-06 14:06:06 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /system/user/list
2025-11-06 14:06:06 [http-nio-8080-exec-1] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/system/user/list from 127.0.0.1
2025-11-06 14:06:06 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectUserList - ==>  Preparing: SELECT DISTINCT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_name, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur_filter ON u.user_id = ur_filter.user_id LEFT JOIN sys_role r_filter ON ur_filter.role_id = r_filter.role_id AND r_filter.del_flag = '0' WHERE u.parent_user_id = ? ORDER BY u.create_time DESC
2025-11-06 14:06:06 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectUserList - ==> Parameters: 1(Long)
2025-11-06 14:06:06 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectUserList - <==      Total: 19
2025-11-06 14:06:06 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:06:06 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 379(Long)
2025-11-06 14:06:06 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:06:06 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:06:06 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 373(Long)
2025-11-06 14:06:06 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:06:06 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:06:06 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 372(Long)
2025-11-06 14:06:06 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:06:06 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:06:06 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 371(Long)
2025-11-06 14:06:06 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:06:06 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:06:06 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 370(Long)
2025-11-06 14:06:07 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:06:07 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:06:07 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 369(Long)
2025-11-06 14:06:07 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:06:07 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:06:07 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 356(Long)
2025-11-06 14:06:07 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:06:07 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:06:07 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 354(Long)
2025-11-06 14:06:07 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:06:07 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:06:07 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 343(Long)
2025-11-06 14:06:07 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:06:07 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:06:07 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 332(Long)
2025-11-06 14:06:08 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:06:08 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:06:08 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 328(Long)
2025-11-06 14:06:08 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:06:08 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:06:08 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 327(Long)
2025-11-06 14:06:08 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:06:08 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:06:08 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 326(Long)
2025-11-06 14:06:08 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:06:08 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:06:08 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 325(Long)
2025-11-06 14:06:09 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:06:09 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:06:09 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 324(Long)
2025-11-06 14:06:09 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:06:09 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:06:09 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 323(Long)
2025-11-06 14:06:09 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:06:09 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:06:09 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 322(Long)
2025-11-06 14:06:09 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:06:09 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:06:09 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 321(Long)
2025-11-06 14:06:09 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:06:09 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:06:09 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 320(Long)
2025-11-06 14:06:10 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:06:10 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? )
2025-11-06 14:06:10 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 1(Long)
2025-11-06 14:06:10 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 1
2025-11-06 14:06:10 [http-nio-8080-exec-1] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/system/user/list from 127.0.0.1 - 状态: 200 - 耗时: 4202ms
2025-11-06 14:06:10 [http-nio-8080-exec-1] WARN  c.d.c.i.PerformanceInterceptor - 检测到慢请求: POST /api/system/user/list from 127.0.0.1 - 耗时: 4202ms - 超过阈值: 3000ms
2025-11-06 14:06:30 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /system/user/list
2025-11-06 14:06:30 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 14:06:30 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 14:06:30 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 14:06:30 [http-nio-8080-exec-3] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 14:06:30 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 14:06:30 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 14:06:31 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 14:06:31 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:06:31 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 14:06:31 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 14:06:31 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 14:06:31 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 14:06:31 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 14:06:31 [http-nio-8080-exec-3] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 14:06:31 [http-nio-8080-exec-3] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 14:06:31 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 14:06:31 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 14:06:31 [http-nio-8080-exec-3] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 14:06:31 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /system/user/list
2025-11-06 14:06:31 [http-nio-8080-exec-3] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/system/user/list from 127.0.0.1
2025-11-06 14:06:31 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserList - ==>  Preparing: SELECT DISTINCT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_name, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur_filter ON u.user_id = ur_filter.user_id LEFT JOIN sys_role r_filter ON ur_filter.role_id = r_filter.role_id AND r_filter.del_flag = '0' WHERE u.parent_user_id = ? ORDER BY u.create_time DESC
2025-11-06 14:06:31 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserList - ==> Parameters: 1(Long)
2025-11-06 14:06:31 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserList - <==      Total: 19
2025-11-06 14:06:31 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:06:31 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 379(Long)
2025-11-06 14:06:31 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:06:31 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:06:31 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 373(Long)
2025-11-06 14:06:32 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:06:32 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:06:32 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 372(Long)
2025-11-06 14:06:32 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:06:32 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:06:32 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 371(Long)
2025-11-06 14:06:32 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:06:32 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:06:32 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 370(Long)
2025-11-06 14:06:32 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:06:32 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:06:32 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 369(Long)
2025-11-06 14:06:34 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:06:34 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:06:34 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 356(Long)
2025-11-06 14:06:34 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:06:34 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:06:34 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 354(Long)
2025-11-06 14:06:34 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:06:34 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:06:34 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 343(Long)
2025-11-06 14:06:34 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:06:34 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:06:34 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 332(Long)
2025-11-06 14:06:34 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:06:34 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:06:34 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 328(Long)
2025-11-06 14:06:35 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:06:35 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:06:35 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 327(Long)
2025-11-06 14:06:35 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:06:35 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:06:35 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 326(Long)
2025-11-06 14:06:35 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:06:35 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:06:35 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 325(Long)
2025-11-06 14:06:35 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:06:35 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:06:35 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 324(Long)
2025-11-06 14:06:35 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:06:35 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:06:35 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 323(Long)
2025-11-06 14:06:35 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:06:35 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:06:35 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 322(Long)
2025-11-06 14:06:36 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:06:36 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:06:36 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 321(Long)
2025-11-06 14:06:36 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:06:36 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:06:36 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 320(Long)
2025-11-06 14:06:36 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:06:36 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? )
2025-11-06 14:06:36 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 1(Long)
2025-11-06 14:06:36 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 1
2025-11-06 14:06:36 [http-nio-8080-exec-3] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/system/user/list from 127.0.0.1 - 状态: 200 - 耗时: 5185ms
2025-11-06 14:06:36 [http-nio-8080-exec-3] WARN  c.d.c.i.PerformanceInterceptor - 检测到慢请求: POST /api/system/user/list from 127.0.0.1 - 耗时: 5185ms - 超过阈值: 3000ms
2025-11-06 14:06:51 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /system/user/list
2025-11-06 14:06:51 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 14:06:51 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 14:06:51 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 14:06:51 [http-nio-8080-exec-5] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 14:06:51 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 14:06:51 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 14:06:51 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 14:06:51 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:06:51 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 14:06:52 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 14:06:52 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 14:06:52 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 14:06:52 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 14:06:52 [http-nio-8080-exec-5] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 14:06:52 [http-nio-8080-exec-5] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 14:06:52 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 14:06:52 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 14:06:52 [http-nio-8080-exec-5] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 14:06:52 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /system/user/list
2025-11-06 14:06:52 [http-nio-8080-exec-5] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/system/user/list from 127.0.0.1
2025-11-06 14:06:52 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserList - ==>  Preparing: SELECT DISTINCT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_name, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur_filter ON u.user_id = ur_filter.user_id LEFT JOIN sys_role r_filter ON ur_filter.role_id = r_filter.role_id AND r_filter.del_flag = '0' WHERE u.parent_user_id = ? ORDER BY u.create_time DESC
2025-11-06 14:06:52 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserList - ==> Parameters: 1(Long)
2025-11-06 14:06:52 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserList - <==      Total: 19
2025-11-06 14:06:52 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:06:52 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 379(Long)
2025-11-06 14:06:52 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:06:52 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:06:52 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 373(Long)
2025-11-06 14:06:52 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:06:52 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:06:52 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 372(Long)
2025-11-06 14:06:52 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:06:52 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:06:52 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 371(Long)
2025-11-06 14:06:53 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:06:53 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:06:53 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 370(Long)
2025-11-06 14:06:53 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:06:53 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:06:53 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 369(Long)
2025-11-06 14:06:53 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:06:53 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:06:53 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 356(Long)
2025-11-06 14:06:55 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:06:55 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:06:55 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 354(Long)
2025-11-06 14:06:55 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:06:55 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:06:55 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 343(Long)
2025-11-06 14:06:56 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:06:56 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:06:56 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 332(Long)
2025-11-06 14:06:56 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:06:56 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:06:56 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 328(Long)
2025-11-06 14:06:56 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:06:56 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:06:56 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 327(Long)
2025-11-06 14:06:56 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:06:56 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:06:56 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 326(Long)
2025-11-06 14:06:56 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:06:56 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:06:56 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 325(Long)
2025-11-06 14:06:57 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:06:57 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:06:57 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 324(Long)
2025-11-06 14:06:58 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:06:58 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:06:58 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 323(Long)
2025-11-06 14:06:58 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:06:58 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:06:58 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 322(Long)
2025-11-06 14:06:58 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:06:58 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:06:58 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 321(Long)
2025-11-06 14:07:00 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:07:00 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:07:00 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 320(Long)
2025-11-06 14:07:00 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:07:00 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? )
2025-11-06 14:07:00 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 1(Long)
2025-11-06 14:07:01 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 1
2025-11-06 14:07:01 [http-nio-8080-exec-5] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/system/user/list from 127.0.0.1 - 状态: 200 - 耗时: 9113ms
2025-11-06 14:07:01 [http-nio-8080-exec-5] WARN  c.d.c.i.PerformanceInterceptor - 检测到慢请求: POST /api/system/user/list from 127.0.0.1 - 耗时: 9113ms - 超过阈值: 3000ms
2025-11-06 14:09:19 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /system/user/list
2025-11-06 14:09:19 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing POST /system/user/list
2025-11-06 14:09:19 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 14:09:19 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 14:09:19 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 14:09:19 [http-nio-8080-exec-8] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 14:09:19 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 14:09:19 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 14:09:19 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 14:09:19 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:09:19 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 14:09:20 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 14:09:20 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 14:09:20 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 14:09:20 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 14:09:20 [http-nio-8080-exec-8] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 14:09:20 [http-nio-8080-exec-8] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 14:09:20 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 14:09:20 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 14:09:20 [http-nio-8080-exec-8] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 14:09:20 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured POST /system/user/list
2025-11-06 14:09:20 [http-nio-8080-exec-8] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/system/user/list from 127.0.0.1
2025-11-06 14:09:20 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserList - ==>  Preparing: SELECT DISTINCT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_name, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur_filter ON u.user_id = ur_filter.user_id LEFT JOIN sys_role r_filter ON ur_filter.role_id = r_filter.role_id AND r_filter.del_flag = '0' WHERE u.parent_user_id = ? ORDER BY u.create_time DESC
2025-11-06 14:09:20 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserList - ==> Parameters: 1(Long)
2025-11-06 14:09:20 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserList - <==      Total: 19
2025-11-06 14:09:20 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:09:20 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 379(Long)
2025-11-06 14:09:20 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:09:20 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:09:20 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 373(Long)
2025-11-06 14:09:21 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:09:21 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:09:21 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 372(Long)
2025-11-06 14:09:21 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:09:21 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:09:21 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 371(Long)
2025-11-06 14:09:21 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:09:21 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:09:21 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 370(Long)
2025-11-06 14:09:21 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:09:21 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:09:21 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 369(Long)
2025-11-06 14:09:22 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:09:22 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:09:22 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 356(Long)
2025-11-06 14:09:22 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:09:22 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:09:22 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 354(Long)
2025-11-06 14:09:22 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:09:22 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:09:22 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 343(Long)
2025-11-06 14:09:22 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:09:22 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:09:22 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 332(Long)
2025-11-06 14:09:22 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:09:22 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:09:22 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 328(Long)
2025-11-06 14:09:22 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:09:22 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:09:22 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 327(Long)
2025-11-06 14:09:23 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:09:23 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:09:23 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 326(Long)
2025-11-06 14:09:24 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:09:24 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:09:24 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 325(Long)
2025-11-06 14:09:24 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:09:24 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:09:24 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 324(Long)
2025-11-06 14:09:24 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:09:24 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:09:24 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 323(Long)
2025-11-06 14:09:24 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:09:24 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:09:24 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 322(Long)
2025-11-06 14:09:25 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:09:25 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:09:25 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 321(Long)
2025-11-06 14:09:25 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:09:25 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:09:25 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 320(Long)
2025-11-06 14:09:25 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:09:25 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? )
2025-11-06 14:09:25 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 1(Long)
2025-11-06 14:09:25 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 1
2025-11-06 14:09:25 [http-nio-8080-exec-8] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/system/user/list from 127.0.0.1 - 状态: 200 - 耗时: 5296ms
2025-11-06 14:09:25 [http-nio-8080-exec-8] WARN  c.d.c.i.PerformanceInterceptor - 检测到慢请求: POST /api/system/user/list from 127.0.0.1 - 耗时: 5296ms - 超过阈值: 3000ms
2025-11-06 14:09:37 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing POST /system/user/list
2025-11-06 14:09:37 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 14:09:37 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 14:09:37 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 14:09:37 [http-nio-8080-exec-10] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 14:09:37 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 14:09:37 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 14:09:38 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 14:09:38 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:09:38 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 14:09:38 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 14:09:38 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 14:09:38 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 14:09:39 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 14:09:39 [http-nio-8080-exec-10] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 14:09:39 [http-nio-8080-exec-10] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 14:09:39 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 14:09:39 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 14:09:39 [http-nio-8080-exec-10] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 14:09:39 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured POST /system/user/list
2025-11-06 14:09:39 [http-nio-8080-exec-10] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/system/user/list from 127.0.0.1
2025-11-06 14:09:39 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserList - ==>  Preparing: SELECT DISTINCT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_name, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur_filter ON u.user_id = ur_filter.user_id LEFT JOIN sys_role r_filter ON ur_filter.role_id = r_filter.role_id AND r_filter.del_flag = '0' WHERE u.parent_user_id = ? ORDER BY u.create_time DESC
2025-11-06 14:09:39 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserList - ==> Parameters: 1(Long)
2025-11-06 14:09:39 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserList - <==      Total: 19
2025-11-06 14:09:39 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:09:39 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 379(Long)
2025-11-06 14:09:39 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:09:39 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:09:39 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 373(Long)
2025-11-06 14:09:39 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:09:39 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:09:39 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 372(Long)
2025-11-06 14:09:39 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:09:39 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:09:39 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 371(Long)
2025-11-06 14:09:40 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:09:40 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:09:40 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 370(Long)
2025-11-06 14:09:40 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:09:40 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:09:40 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 369(Long)
2025-11-06 14:09:40 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:09:40 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:09:40 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 356(Long)
2025-11-06 14:09:40 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:09:40 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:09:40 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 354(Long)
2025-11-06 14:09:40 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:09:40 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:09:40 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 343(Long)
2025-11-06 14:09:41 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:09:41 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:09:41 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 332(Long)
2025-11-06 14:09:41 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:09:41 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:09:41 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 328(Long)
2025-11-06 14:09:41 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:09:41 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:09:41 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 327(Long)
2025-11-06 14:09:42 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:09:42 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:09:42 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 326(Long)
2025-11-06 14:09:42 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:09:42 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:09:42 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 325(Long)
2025-11-06 14:09:42 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:09:42 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:09:42 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 324(Long)
2025-11-06 14:09:42 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:09:42 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:09:42 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 323(Long)
2025-11-06 14:09:42 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:09:42 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:09:42 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 322(Long)
2025-11-06 14:09:42 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:09:42 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:09:42 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 321(Long)
2025-11-06 14:09:43 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:09:43 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:09:43 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 320(Long)
2025-11-06 14:09:43 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:09:43 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? )
2025-11-06 14:09:43 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 1(Long)
2025-11-06 14:09:43 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 1
2025-11-06 14:09:43 [http-nio-8080-exec-10] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/system/user/list from 127.0.0.1 - 状态: 200 - 耗时: 4844ms
2025-11-06 14:09:43 [http-nio-8080-exec-10] WARN  c.d.c.i.PerformanceInterceptor - 检测到慢请求: POST /api/system/user/list from 127.0.0.1 - 耗时: 4844ms - 超过阈值: 3000ms
2025-11-06 14:10:01 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /system/user/list
2025-11-06 14:10:01 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 14:10:01 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 14:10:01 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 14:10:01 [http-nio-8080-exec-2] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 14:10:01 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 14:10:01 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 14:10:01 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 14:10:01 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:10:01 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 14:10:01 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 14:10:01 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 14:10:01 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 14:10:01 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 14:10:01 [http-nio-8080-exec-2] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 14:10:01 [http-nio-8080-exec-2] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 14:10:01 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 14:10:01 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 14:10:01 [http-nio-8080-exec-2] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 14:10:01 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /system/user/list
2025-11-06 14:10:01 [http-nio-8080-exec-2] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/system/user/list from 127.0.0.1
2025-11-06 14:10:01 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserList - ==>  Preparing: SELECT DISTINCT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_name, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur_filter ON u.user_id = ur_filter.user_id LEFT JOIN sys_role r_filter ON ur_filter.role_id = r_filter.role_id AND r_filter.del_flag = '0' WHERE u.parent_user_id = ? ORDER BY u.create_time DESC
2025-11-06 14:10:01 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserList - ==> Parameters: 1(Long)
2025-11-06 14:10:02 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserList - <==      Total: 19
2025-11-06 14:10:02 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:10:02 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 379(Long)
2025-11-06 14:10:02 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:10:02 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:10:02 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 373(Long)
2025-11-06 14:10:02 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:10:02 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:10:02 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 372(Long)
2025-11-06 14:10:02 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:10:02 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:10:02 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 371(Long)
2025-11-06 14:10:03 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:10:03 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:10:03 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 370(Long)
2025-11-06 14:10:03 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:10:03 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:10:03 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 369(Long)
2025-11-06 14:10:03 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:10:03 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:10:03 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 356(Long)
2025-11-06 14:10:03 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:10:03 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:10:03 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 354(Long)
2025-11-06 14:10:04 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:10:04 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:10:04 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 343(Long)
2025-11-06 14:10:04 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:10:04 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:10:04 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 332(Long)
2025-11-06 14:10:04 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:10:04 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:10:04 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 328(Long)
2025-11-06 14:10:04 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:10:04 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:10:04 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 327(Long)
2025-11-06 14:10:04 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:10:04 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:10:04 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 326(Long)
2025-11-06 14:10:04 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:10:04 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:10:04 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 325(Long)
2025-11-06 14:10:05 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:10:05 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:10:05 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 324(Long)
2025-11-06 14:10:05 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:10:05 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:10:05 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 323(Long)
2025-11-06 14:10:05 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:10:05 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:10:05 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 322(Long)
2025-11-06 14:10:05 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:10:05 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:10:05 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 321(Long)
2025-11-06 14:10:06 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:10:06 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:10:06 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 320(Long)
2025-11-06 14:10:06 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:10:06 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? )
2025-11-06 14:10:06 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 1(Long)
2025-11-06 14:10:06 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 1
2025-11-06 14:10:06 [http-nio-8080-exec-2] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/system/user/list from 127.0.0.1 - 状态: 200 - 耗时: 4903ms
2025-11-06 14:10:06 [http-nio-8080-exec-2] WARN  c.d.c.i.PerformanceInterceptor - 检测到慢请求: POST /api/system/user/list from 127.0.0.1 - 耗时: 4903ms - 超过阈值: 3000ms
2025-11-06 14:10:19 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /system/user/list
2025-11-06 14:10:19 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 14:10:19 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 14:10:19 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 14:10:19 [http-nio-8080-exec-4] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 14:10:19 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 14:10:19 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 14:10:19 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 14:10:19 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:10:19 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 14:10:19 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 14:10:19 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 14:10:19 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 14:10:19 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 14:10:19 [http-nio-8080-exec-4] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 14:10:19 [http-nio-8080-exec-4] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 14:10:19 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 14:10:19 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 14:10:19 [http-nio-8080-exec-4] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 14:10:19 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured POST /system/user/list
2025-11-06 14:10:19 [http-nio-8080-exec-4] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/system/user/list from 127.0.0.1
2025-11-06 14:10:19 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserList - ==>  Preparing: SELECT DISTINCT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_name, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur_filter ON u.user_id = ur_filter.user_id LEFT JOIN sys_role r_filter ON ur_filter.role_id = r_filter.role_id AND r_filter.del_flag = '0' WHERE u.parent_user_id = ? ORDER BY u.create_time DESC
2025-11-06 14:10:19 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserList - ==> Parameters: 1(Long)
2025-11-06 14:10:20 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserList - <==      Total: 19
2025-11-06 14:10:20 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:10:20 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 379(Long)
2025-11-06 14:10:20 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:10:20 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:10:20 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 373(Long)
2025-11-06 14:10:20 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:10:20 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:10:20 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 372(Long)
2025-11-06 14:10:20 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:10:20 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:10:20 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 371(Long)
2025-11-06 14:10:20 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:10:20 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:10:20 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 370(Long)
2025-11-06 14:10:20 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:10:20 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:10:20 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 369(Long)
2025-11-06 14:10:20 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:10:20 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:10:20 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 356(Long)
2025-11-06 14:10:21 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:10:21 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:10:21 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 354(Long)
2025-11-06 14:10:21 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:10:21 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:10:21 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 343(Long)
2025-11-06 14:10:21 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:10:21 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:10:21 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 332(Long)
2025-11-06 14:10:21 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:10:21 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:10:21 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 328(Long)
2025-11-06 14:10:21 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:10:21 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:10:21 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 327(Long)
2025-11-06 14:10:21 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:10:21 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:10:21 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 326(Long)
2025-11-06 14:10:22 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:10:22 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:10:22 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 325(Long)
2025-11-06 14:10:22 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:10:22 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:10:22 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 324(Long)
2025-11-06 14:10:22 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:10:22 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:10:22 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 323(Long)
2025-11-06 14:10:22 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:10:22 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:10:22 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 322(Long)
2025-11-06 14:10:22 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:10:22 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:10:22 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 321(Long)
2025-11-06 14:10:22 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:10:22 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:10:22 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 320(Long)
2025-11-06 14:10:22 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:10:22 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? )
2025-11-06 14:10:22 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 1(Long)
2025-11-06 14:10:23 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 1
2025-11-06 14:10:23 [http-nio-8080-exec-4] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/system/user/list from 127.0.0.1 - 状态: 200 - 耗时: 3406ms
2025-11-06 14:10:23 [http-nio-8080-exec-4] WARN  c.d.c.i.PerformanceInterceptor - 检测到慢请求: POST /api/system/user/list from 127.0.0.1 - 耗时: 3406ms - 超过阈值: 3000ms
2025-11-06 14:13:33 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /system/user/list
2025-11-06 14:13:33 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 14:13:33 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 14:13:33 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 14:13:33 [http-nio-8080-exec-6] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 14:13:33 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 14:13:33 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 14:13:34 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 14:13:34 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:34 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 14:13:34 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 14:13:34 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 14:13:34 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 14:13:34 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 14:13:34 [http-nio-8080-exec-6] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 14:13:34 [http-nio-8080-exec-6] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 14:13:34 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 14:13:34 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 14:13:34 [http-nio-8080-exec-6] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 14:13:34 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /system/user/list
2025-11-06 14:13:34 [http-nio-8080-exec-6] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/system/user/list from 127.0.0.1
2025-11-06 14:13:34 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserList - ==>  Preparing: SELECT DISTINCT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_name, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur_filter ON u.user_id = ur_filter.user_id LEFT JOIN sys_role r_filter ON ur_filter.role_id = r_filter.role_id AND r_filter.del_flag = '0' WHERE u.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY u.create_time DESC
2025-11-06 14:13:34 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserList - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 14:13:35 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserList - <==      Total: 49
2025-11-06 14:13:35 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:35 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 381(Long)
2025-11-06 14:13:35 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:35 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:35 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 380(Long)
2025-11-06 14:13:35 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:35 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:35 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 379(Long)
2025-11-06 14:13:36 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:36 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:36 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 378(Long)
2025-11-06 14:13:36 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:36 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:36 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 377(Long)
2025-11-06 14:13:36 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:36 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:36 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 376(Long)
2025-11-06 14:13:36 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:36 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:36 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 375(Long)
2025-11-06 14:13:37 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:37 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:37 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 374(Long)
2025-11-06 14:13:37 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:37 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:37 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 373(Long)
2025-11-06 14:13:38 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:38 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:38 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 372(Long)
2025-11-06 14:13:39 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:39 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:39 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 371(Long)
2025-11-06 14:13:40 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:40 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:40 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 370(Long)
2025-11-06 14:13:40 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:40 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:40 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 369(Long)
2025-11-06 14:13:40 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:40 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:40 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 357(Long)
2025-11-06 14:13:40 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:40 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:40 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 356(Long)
2025-11-06 14:13:40 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:40 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:40 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 355(Long)
2025-11-06 14:13:40 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:40 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:40 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 354(Long)
2025-11-06 14:13:41 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:41 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:41 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 353(Long)
2025-11-06 14:13:41 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:41 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:41 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 352(Long)
2025-11-06 14:13:41 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:41 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:41 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 351(Long)
2025-11-06 14:13:41 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:41 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:41 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 349(Long)
2025-11-06 14:13:41 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:41 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:41 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 348(Long)
2025-11-06 14:13:41 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:41 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:41 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 347(Long)
2025-11-06 14:13:41 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:41 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:41 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 345(Long)
2025-11-06 14:13:42 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:42 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:42 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 344(Long)
2025-11-06 14:13:42 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:42 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:42 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 343(Long)
2025-11-06 14:13:42 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:42 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:42 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 342(Long)
2025-11-06 14:13:42 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:42 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:42 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 340(Long)
2025-11-06 14:13:43 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:43 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:43 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 339(Long)
2025-11-06 14:13:43 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:43 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:43 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 338(Long)
2025-11-06 14:13:43 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:43 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:43 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 337(Long)
2025-11-06 14:13:43 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:43 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:43 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 336(Long)
2025-11-06 14:13:43 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:43 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:43 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 335(Long)
2025-11-06 14:13:44 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /system/user/list
2025-11-06 14:13:44 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 14:13:44 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 14:13:44 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 14:13:44 [http-nio-8080-exec-7] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 14:13:44 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:44 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:44 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 334(Long)
2025-11-06 14:13:44 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:44 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 14:13:44 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 14:13:44 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:44 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 333(Long)
2025-11-06 14:13:44 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:44 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:44 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 332(Long)
2025-11-06 14:13:44 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:44 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:44 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 331(Long)
2025-11-06 14:13:44 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:44 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:44 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 330(Long)
2025-11-06 14:13:44 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:44 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:44 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 329(Long)
2025-11-06 14:13:45 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 14:13:45 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:45 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 14:13:45 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 14:13:45 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 14:13:45 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 14:13:45 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 14:13:45 [http-nio-8080-exec-7] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 14:13:45 [http-nio-8080-exec-7] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 14:13:45 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 14:13:45 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 14:13:45 [http-nio-8080-exec-7] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 14:13:45 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured POST /system/user/list
2025-11-06 14:13:45 [http-nio-8080-exec-7] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/system/user/list from 127.0.0.1
2025-11-06 14:13:45 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserList - ==>  Preparing: SELECT DISTINCT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_name, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur_filter ON u.user_id = ur_filter.user_id LEFT JOIN sys_role r_filter ON ur_filter.role_id = r_filter.role_id AND r_filter.del_flag = '0' WHERE u.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY u.create_time DESC
2025-11-06 14:13:45 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserList - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 14:13:45 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:45 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:45 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 328(Long)
2025-11-06 14:13:45 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:45 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:45 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 327(Long)
2025-11-06 14:13:45 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserList - <==      Total: 49
2025-11-06 14:13:45 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:45 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 381(Long)
2025-11-06 14:13:45 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:45 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:45 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 326(Long)
2025-11-06 14:13:45 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:45 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:45 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 380(Long)
2025-11-06 14:13:45 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:45 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:45 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 379(Long)
2025-11-06 14:13:46 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:46 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:46 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 378(Long)
2025-11-06 14:13:46 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:46 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:46 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 377(Long)
2025-11-06 14:13:46 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:46 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:46 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 325(Long)
2025-11-06 14:13:46 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:46 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:46 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 376(Long)
2025-11-06 14:13:46 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:46 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:46 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 324(Long)
2025-11-06 14:13:46 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:46 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:46 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 375(Long)
2025-11-06 14:13:46 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:46 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:46 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 323(Long)
2025-11-06 14:13:46 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:46 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:46 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 374(Long)
2025-11-06 14:13:46 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:46 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:46 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 322(Long)
2025-11-06 14:13:46 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:46 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:46 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 373(Long)
2025-11-06 14:13:46 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:46 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:46 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 321(Long)
2025-11-06 14:13:47 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:47 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:47 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 320(Long)
2025-11-06 14:13:47 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:47 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:47 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 1(Long)
2025-11-06 14:13:47 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:47 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:47 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 372(Long)
2025-11-06 14:13:47 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:47 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:47 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 371(Long)
2025-11-06 14:13:47 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:47 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:47 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 370(Long)
2025-11-06 14:13:47 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:47 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 14:13:47 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 379(Long), 1(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 354(Long), 337(Long), 342(Long), 344(Long), 332(Long), 334(Long), 320(Long), 329(Long), 333(Long), 321(Long)
2025-11-06 14:13:47 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 17
2025-11-06 14:13:47 [http-nio-8080-exec-6] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/system/user/list from 127.0.0.1 - 状态: 200 - 耗时: 13613ms
2025-11-06 14:13:47 [http-nio-8080-exec-6] WARN  c.d.c.i.PerformanceInterceptor - 检测到慢请求: POST /api/system/user/list from 127.0.0.1 - 耗时: 13613ms - 超过阈值: 3000ms
2025-11-06 14:13:47 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:47 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:47 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 369(Long)
2025-11-06 14:13:49 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:49 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:49 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 357(Long)
2025-11-06 14:13:49 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:49 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:49 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 356(Long)
2025-11-06 14:13:50 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:50 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:50 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 355(Long)
2025-11-06 14:13:50 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:50 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:50 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 354(Long)
2025-11-06 14:13:50 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:50 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:50 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 353(Long)
2025-11-06 14:13:50 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:50 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:50 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 352(Long)
2025-11-06 14:13:50 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:50 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:50 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 351(Long)
2025-11-06 14:13:50 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:50 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:50 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 349(Long)
2025-11-06 14:13:51 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:51 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:51 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 348(Long)
2025-11-06 14:13:51 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:51 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:51 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 347(Long)
2025-11-06 14:13:51 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:51 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:51 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 345(Long)
2025-11-06 14:13:51 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:51 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:51 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 344(Long)
2025-11-06 14:13:51 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:51 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:51 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 343(Long)
2025-11-06 14:13:51 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:51 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:51 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 342(Long)
2025-11-06 14:13:52 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:52 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:52 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 340(Long)
2025-11-06 14:13:52 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:52 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:52 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 339(Long)
2025-11-06 14:13:52 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:52 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:52 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 338(Long)
2025-11-06 14:13:52 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:52 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:52 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 337(Long)
2025-11-06 14:13:54 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:54 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:54 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 336(Long)
2025-11-06 14:13:54 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:54 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:54 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 335(Long)
2025-11-06 14:13:55 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:55 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:55 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 334(Long)
2025-11-06 14:13:55 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:55 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:55 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 333(Long)
2025-11-06 14:13:55 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:55 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:55 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 332(Long)
2025-11-06 14:13:56 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:56 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:56 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 331(Long)
2025-11-06 14:13:56 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:56 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:56 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 330(Long)
2025-11-06 14:13:56 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:56 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:56 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 329(Long)
2025-11-06 14:13:56 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:56 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:56 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 328(Long)
2025-11-06 14:13:56 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:56 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:56 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 327(Long)
2025-11-06 14:13:56 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:56 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:56 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 326(Long)
2025-11-06 14:13:57 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:57 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:57 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 325(Long)
2025-11-06 14:13:57 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:57 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:57 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 324(Long)
2025-11-06 14:13:57 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:57 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:57 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 323(Long)
2025-11-06 14:13:57 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:57 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:57 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 322(Long)
2025-11-06 14:13:57 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:57 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:57 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 321(Long)
2025-11-06 14:13:57 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:57 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:57 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 320(Long)
2025-11-06 14:13:58 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:13:58 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:13:58 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 1(Long)
2025-11-06 14:14:00 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:14:00 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 14:14:00 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 379(Long), 1(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 354(Long), 337(Long), 342(Long), 344(Long), 332(Long), 334(Long), 320(Long), 329(Long), 333(Long), 321(Long)
2025-11-06 14:14:00 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 17
2025-11-06 14:14:00 [http-nio-8080-exec-7] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/system/user/list from 127.0.0.1 - 状态: 200 - 耗时: 14840ms
2025-11-06 14:14:00 [http-nio-8080-exec-7] WARN  c.d.c.i.PerformanceInterceptor - 检测到慢请求: POST /api/system/user/list from 127.0.0.1 - 耗时: 14840ms - 超过阈值: 3000ms
2025-11-06 14:16:32 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing POST /system/user/list
2025-11-06 14:16:32 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 14:16:32 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 14:16:32 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 14:16:32 [http-nio-8080-exec-10] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 14:16:32 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 14:16:32 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 14:16:32 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 14:16:32 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:16:32 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 14:16:32 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 14:16:32 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 14:16:32 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 14:16:33 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 14:16:33 [http-nio-8080-exec-10] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 14:16:33 [http-nio-8080-exec-10] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 14:16:33 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 14:16:33 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 14:16:33 [http-nio-8080-exec-10] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 14:16:33 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured POST /system/user/list
2025-11-06 14:16:33 [http-nio-8080-exec-10] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/system/user/list from 127.0.0.1
2025-11-06 14:16:33 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserList - ==>  Preparing: SELECT DISTINCT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_name, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur_filter ON u.user_id = ur_filter.user_id LEFT JOIN sys_role r_filter ON ur_filter.role_id = r_filter.role_id AND r_filter.del_flag = '0' WHERE u.parent_user_id = ? ORDER BY u.create_time DESC
2025-11-06 14:16:33 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserList - ==> Parameters: 1(Long)
2025-11-06 14:16:33 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserList - <==      Total: 19
2025-11-06 14:16:33 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:16:33 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 379(Long)
2025-11-06 14:16:33 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:16:33 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:16:33 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 373(Long)
2025-11-06 14:16:33 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:16:33 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:16:33 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 372(Long)
2025-11-06 14:16:33 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:16:33 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:16:33 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 371(Long)
2025-11-06 14:16:33 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:16:33 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:16:33 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 370(Long)
2025-11-06 14:16:34 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:16:34 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:16:34 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 369(Long)
2025-11-06 14:16:34 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:16:34 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:16:34 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 356(Long)
2025-11-06 14:16:34 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:16:34 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:16:34 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 354(Long)
2025-11-06 14:16:35 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:16:35 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:16:35 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 343(Long)
2025-11-06 14:16:35 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:16:35 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:16:35 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 332(Long)
2025-11-06 14:16:35 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:16:35 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:16:35 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 328(Long)
2025-11-06 14:16:35 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:16:35 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:16:35 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 327(Long)
2025-11-06 14:16:35 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:16:35 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:16:35 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 326(Long)
2025-11-06 14:16:35 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:16:35 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:16:35 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 325(Long)
2025-11-06 14:16:35 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:16:35 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:16:35 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 324(Long)
2025-11-06 14:16:36 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:16:36 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:16:36 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 323(Long)
2025-11-06 14:16:36 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:16:36 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:16:36 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 322(Long)
2025-11-06 14:16:36 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:16:36 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:16:36 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 321(Long)
2025-11-06 14:16:36 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:16:36 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:16:36 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 320(Long)
2025-11-06 14:16:37 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:16:37 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? )
2025-11-06 14:16:37 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 1(Long)
2025-11-06 14:16:37 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 1
2025-11-06 14:16:37 [http-nio-8080-exec-10] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/system/user/list from 127.0.0.1 - 状态: 200 - 耗时: 4104ms
2025-11-06 14:16:37 [http-nio-8080-exec-10] WARN  c.d.c.i.PerformanceInterceptor - 检测到慢请求: POST /api/system/user/list from 127.0.0.1 - 耗时: 4104ms - 超过阈值: 3000ms
2025-11-06 14:16:37 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /system/user/list
2025-11-06 14:16:37 [http-nio-8080-exec-1] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 14:16:37 [http-nio-8080-exec-1] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 14:16:37 [http-nio-8080-exec-1] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 14:16:37 [http-nio-8080-exec-1] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 14:16:37 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 14:16:37 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 14:16:37 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 14:16:37 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:16:37 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 14:16:37 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 14:16:37 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 14:16:37 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 14:16:37 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 14:16:37 [http-nio-8080-exec-1] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 14:16:37 [http-nio-8080-exec-1] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 14:16:37 [http-nio-8080-exec-1] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 14:16:37 [http-nio-8080-exec-1] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 14:16:37 [http-nio-8080-exec-1] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 14:16:37 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /system/user/list
2025-11-06 14:16:37 [http-nio-8080-exec-1] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/system/user/list from 127.0.0.1
2025-11-06 14:16:37 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectUserList - ==>  Preparing: SELECT DISTINCT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_name, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur_filter ON u.user_id = ur_filter.user_id LEFT JOIN sys_role r_filter ON ur_filter.role_id = r_filter.role_id AND r_filter.del_flag = '0' WHERE u.parent_user_id = ? ORDER BY u.create_time DESC
2025-11-06 14:16:37 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectUserList - ==> Parameters: 1(Long)
2025-11-06 14:16:38 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectUserList - <==      Total: 19
2025-11-06 14:16:38 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:16:38 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 379(Long)
2025-11-06 14:16:38 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:16:38 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:16:38 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 373(Long)
2025-11-06 14:16:38 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:16:38 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:16:38 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 372(Long)
2025-11-06 14:16:38 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:16:38 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:16:38 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 371(Long)
2025-11-06 14:16:38 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:16:38 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:16:38 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 370(Long)
2025-11-06 14:16:39 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:16:39 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:16:39 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 369(Long)
2025-11-06 14:16:39 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:16:39 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:16:39 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 356(Long)
2025-11-06 14:16:39 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:16:39 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:16:39 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 354(Long)
2025-11-06 14:16:39 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:16:39 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:16:39 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 343(Long)
2025-11-06 14:16:39 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:16:39 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:16:39 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 332(Long)
2025-11-06 14:16:39 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:16:39 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:16:39 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 328(Long)
2025-11-06 14:16:40 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:16:40 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:16:40 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 327(Long)
2025-11-06 14:16:40 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:16:40 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:16:40 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 326(Long)
2025-11-06 14:16:40 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:16:40 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:16:40 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 325(Long)
2025-11-06 14:16:40 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:16:40 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:16:40 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 324(Long)
2025-11-06 14:16:40 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:16:40 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:16:40 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 323(Long)
2025-11-06 14:16:40 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:16:40 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:16:40 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 322(Long)
2025-11-06 14:16:41 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:16:41 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:16:41 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 321(Long)
2025-11-06 14:16:41 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:16:41 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:16:41 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 320(Long)
2025-11-06 14:16:42 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:16:42 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? )
2025-11-06 14:16:42 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 1(Long)
2025-11-06 14:16:42 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 1
2025-11-06 14:16:42 [http-nio-8080-exec-1] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/system/user/list from 127.0.0.1 - 状态: 200 - 耗时: 4249ms
2025-11-06 14:16:42 [http-nio-8080-exec-1] WARN  c.d.c.i.PerformanceInterceptor - 检测到慢请求: POST /api/system/user/list from 127.0.0.1 - 耗时: 4249ms - 超过阈值: 3000ms
2025-11-06 14:16:53 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /system/user/list
2025-11-06 14:16:53 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 14:16:53 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 14:16:53 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 14:16:53 [http-nio-8080-exec-3] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 14:16:53 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 14:16:53 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 14:16:54 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 14:16:54 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:16:54 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 14:16:54 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 14:16:54 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 14:16:54 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 14:16:54 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 14:16:54 [http-nio-8080-exec-3] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 14:16:54 [http-nio-8080-exec-3] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 14:16:54 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 14:16:54 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 14:16:54 [http-nio-8080-exec-3] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 14:16:54 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /system/user/list
2025-11-06 14:16:54 [http-nio-8080-exec-3] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/system/user/list from 127.0.0.1
2025-11-06 14:16:54 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserList - ==>  Preparing: SELECT DISTINCT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_name, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur_filter ON u.user_id = ur_filter.user_id LEFT JOIN sys_role r_filter ON ur_filter.role_id = r_filter.role_id AND r_filter.del_flag = '0' WHERE u.parent_user_id = ? ORDER BY u.create_time DESC
2025-11-06 14:16:54 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserList - ==> Parameters: 1(Long)
2025-11-06 14:16:54 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserList - <==      Total: 19
2025-11-06 14:16:54 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:16:54 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 379(Long)
2025-11-06 14:16:55 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:16:55 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:16:55 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 373(Long)
2025-11-06 14:16:55 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:16:55 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:16:55 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 372(Long)
2025-11-06 14:16:55 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:16:55 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:16:55 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 371(Long)
2025-11-06 14:16:55 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:16:55 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:16:55 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 370(Long)
2025-11-06 14:16:55 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:16:55 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:16:55 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 369(Long)
2025-11-06 14:16:55 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:16:55 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:16:55 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 356(Long)
2025-11-06 14:16:56 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:16:56 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:16:56 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 354(Long)
2025-11-06 14:16:56 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:16:56 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:16:56 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 343(Long)
2025-11-06 14:16:56 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:16:56 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:16:56 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 332(Long)
2025-11-06 14:16:56 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:16:56 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:16:56 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 328(Long)
2025-11-06 14:16:56 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:16:56 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:16:56 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 327(Long)
2025-11-06 14:16:56 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:16:56 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:16:56 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 326(Long)
2025-11-06 14:16:56 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:16:56 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:16:57 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 325(Long)
2025-11-06 14:16:57 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:16:57 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:16:57 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 324(Long)
2025-11-06 14:16:57 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:16:57 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:16:57 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 323(Long)
2025-11-06 14:16:57 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:16:57 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:16:57 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 322(Long)
2025-11-06 14:16:59 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:16:59 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:16:59 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 321(Long)
2025-11-06 14:16:59 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:16:59 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:16:59 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 320(Long)
2025-11-06 14:16:59 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:16:59 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? )
2025-11-06 14:16:59 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 1(Long)
2025-11-06 14:16:59 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 1
2025-11-06 14:16:59 [http-nio-8080-exec-3] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/system/user/list from 127.0.0.1 - 状态: 200 - 耗时: 5061ms
2025-11-06 14:16:59 [http-nio-8080-exec-3] WARN  c.d.c.i.PerformanceInterceptor - 检测到慢请求: POST /api/system/user/list from 127.0.0.1 - 耗时: 5061ms - 超过阈值: 3000ms
2025-11-06 14:17:02 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /system/user/list
2025-11-06 14:17:02 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 14:17:02 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 14:17:02 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 14:17:02 [http-nio-8080-exec-5] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 14:17:02 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 14:17:02 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 14:17:02 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 14:17:02 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:17:02 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 14:17:03 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 14:17:03 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 14:17:03 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 14:17:04 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 14:17:04 [http-nio-8080-exec-5] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 14:17:04 [http-nio-8080-exec-5] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 14:17:04 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 14:17:04 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 14:17:04 [http-nio-8080-exec-5] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 14:17:04 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /system/user/list
2025-11-06 14:17:04 [http-nio-8080-exec-5] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/system/user/list from 127.0.0.1
2025-11-06 14:17:04 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserList - ==>  Preparing: SELECT DISTINCT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_name, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur_filter ON u.user_id = ur_filter.user_id LEFT JOIN sys_role r_filter ON ur_filter.role_id = r_filter.role_id AND r_filter.del_flag = '0' WHERE u.parent_user_id = ? ORDER BY u.create_time DESC
2025-11-06 14:17:04 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserList - ==> Parameters: 1(Long)
2025-11-06 14:17:05 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserList - <==      Total: 19
2025-11-06 14:17:05 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:17:05 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 379(Long)
2025-11-06 14:17:05 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:17:05 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:17:05 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 373(Long)
2025-11-06 14:17:06 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:17:06 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:17:06 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 372(Long)
2025-11-06 14:17:06 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:17:06 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:17:06 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 371(Long)
2025-11-06 14:17:06 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:17:06 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:17:06 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 370(Long)
2025-11-06 14:17:06 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:17:06 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:17:06 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 369(Long)
2025-11-06 14:17:06 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:17:06 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:17:06 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 356(Long)
2025-11-06 14:17:06 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:17:06 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:17:06 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 354(Long)
2025-11-06 14:17:07 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:17:07 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:17:07 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 343(Long)
2025-11-06 14:17:07 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:17:07 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:17:07 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 332(Long)
2025-11-06 14:17:07 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:17:07 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:17:07 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 328(Long)
2025-11-06 14:17:08 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:17:08 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:17:08 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 327(Long)
2025-11-06 14:17:11 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:17:11 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:17:11 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 326(Long)
2025-11-06 14:17:11 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:17:11 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:17:11 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 325(Long)
2025-11-06 14:17:11 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:17:11 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:17:11 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 324(Long)
2025-11-06 14:17:11 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:17:11 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:17:11 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 323(Long)
2025-11-06 14:17:11 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:17:11 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:17:11 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 322(Long)
2025-11-06 14:17:11 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:17:11 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:17:11 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 321(Long)
2025-11-06 14:17:12 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:17:12 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:17:12 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 320(Long)
2025-11-06 14:17:12 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:17:12 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? )
2025-11-06 14:17:12 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 1(Long)
2025-11-06 14:17:12 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 1
2025-11-06 14:17:12 [http-nio-8080-exec-5] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/system/user/list from 127.0.0.1 - 状态: 200 - 耗时: 7515ms
2025-11-06 14:17:12 [http-nio-8080-exec-5] WARN  c.d.c.i.PerformanceInterceptor - 检测到慢请求: POST /api/system/user/list from 127.0.0.1 - 耗时: 7515ms - 超过阈值: 3000ms
2025-11-06 14:17:58 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing POST /system/user/list
2025-11-06 14:17:58 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 14:17:58 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 14:17:58 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 14:17:58 [http-nio-8080-exec-8] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 14:17:58 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 14:17:58 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 14:17:58 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 14:17:58 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:17:58 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 14:17:59 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 14:17:59 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 14:17:59 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 14:17:59 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 14:17:59 [http-nio-8080-exec-8] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 14:17:59 [http-nio-8080-exec-8] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 14:17:59 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 14:17:59 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 14:17:59 [http-nio-8080-exec-8] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 14:17:59 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured POST /system/user/list
2025-11-06 14:17:59 [http-nio-8080-exec-8] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/system/user/list from 127.0.0.1
2025-11-06 14:17:59 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserList - ==>  Preparing: SELECT DISTINCT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_name, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur_filter ON u.user_id = ur_filter.user_id LEFT JOIN sys_role r_filter ON ur_filter.role_id = r_filter.role_id AND r_filter.del_flag = '0' WHERE u.user_id = ? AND u.user_id = ? AND u.parent_user_id = ? ORDER BY u.create_time DESC
2025-11-06 14:17:59 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserList - ==> Parameters: 379(Long), 379(Long), 1(Long)
2025-11-06 14:17:59 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserList - <==      Total: 1
2025-11-06 14:17:59 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:17:59 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 379(Long)
2025-11-06 14:17:59 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:17:59 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? )
2025-11-06 14:17:59 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 1(Long)
2025-11-06 14:17:59 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 1
2025-11-06 14:17:59 [http-nio-8080-exec-8] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/system/user/list from 127.0.0.1 - 状态: 200 - 耗时: 464ms
2025-11-06 14:18:08 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing POST /system/user/list
2025-11-06 14:18:08 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 14:18:08 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 14:18:08 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 14:18:08 [http-nio-8080-exec-9] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 14:18:08 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 14:18:08 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 14:18:09 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 14:18:09 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:18:09 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 14:18:09 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 14:18:09 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 14:18:09 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 14:18:09 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 14:18:09 [http-nio-8080-exec-9] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 14:18:09 [http-nio-8080-exec-9] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 14:18:09 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 14:18:09 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 14:18:09 [http-nio-8080-exec-9] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 14:18:09 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured POST /system/user/list
2025-11-06 14:18:09 [http-nio-8080-exec-9] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/system/user/list from 127.0.0.1
2025-11-06 14:18:09 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserList - ==>  Preparing: SELECT DISTINCT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_name, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur_filter ON u.user_id = ur_filter.user_id LEFT JOIN sys_role r_filter ON ur_filter.role_id = r_filter.role_id AND r_filter.del_flag = '0' WHERE u.parent_user_id = ? ORDER BY u.create_time DESC
2025-11-06 14:18:09 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserList - ==> Parameters: 1(Long)
2025-11-06 14:18:10 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserList - <==      Total: 19
2025-11-06 14:18:10 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:18:10 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 379(Long)
2025-11-06 14:18:10 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:18:10 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:18:10 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 373(Long)
2025-11-06 14:18:10 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:18:10 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:18:10 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 372(Long)
2025-11-06 14:18:10 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:18:10 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:18:10 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 371(Long)
2025-11-06 14:18:11 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:18:11 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:18:11 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 370(Long)
2025-11-06 14:18:11 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:18:11 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:18:11 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 369(Long)
2025-11-06 14:18:11 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:18:11 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:18:11 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 356(Long)
2025-11-06 14:18:11 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:18:11 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:18:11 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 354(Long)
2025-11-06 14:18:11 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:18:11 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:18:11 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 343(Long)
2025-11-06 14:18:11 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:18:11 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:18:11 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 332(Long)
2025-11-06 14:18:11 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:18:11 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:18:11 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 328(Long)
2025-11-06 14:18:12 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:18:12 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:18:12 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 327(Long)
2025-11-06 14:18:12 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:18:12 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:18:12 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 326(Long)
2025-11-06 14:18:12 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:18:12 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:18:12 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 325(Long)
2025-11-06 14:18:12 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:18:12 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:18:12 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 324(Long)
2025-11-06 14:18:12 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:18:12 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:18:12 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 323(Long)
2025-11-06 14:18:13 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:18:13 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:18:13 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 322(Long)
2025-11-06 14:18:13 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:18:13 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:18:13 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 321(Long)
2025-11-06 14:18:14 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:18:14 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:18:14 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 320(Long)
2025-11-06 14:18:14 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:18:14 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? )
2025-11-06 14:18:14 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 1(Long)
2025-11-06 14:18:15 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 1
2025-11-06 14:18:15 [http-nio-8080-exec-9] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/system/user/list from 127.0.0.1 - 状态: 200 - 耗时: 5347ms
2025-11-06 14:18:15 [http-nio-8080-exec-9] WARN  c.d.c.i.PerformanceInterceptor - 检测到慢请求: POST /api/system/user/list from 127.0.0.1 - 耗时: 5347ms - 超过阈值: 3000ms
2025-11-06 14:28:01 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /agent/commission/1/records
2025-11-06 14:28:01 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /agent/commission/1/records
2025-11-06 14:28:01 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 14:28:02 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 14:28:02 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 14:28:02 [http-nio-8080-exec-2] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 14:28:02 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 14:28:02 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 14:28:02 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 14:28:02 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:28:02 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 14:28:02 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 14:28:02 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 14:28:02 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 14:28:02 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 14:28:02 [http-nio-8080-exec-2] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 14:28:02 [http-nio-8080-exec-2] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 14:28:02 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 14:28:02 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 14:28:02 [http-nio-8080-exec-2] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 14:28:02 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /agent/commission/1/records
2025-11-06 14:28:02 [http-nio-8080-exec-2] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/agent/commission/1/records from 127.0.0.1
2025-11-06 14:28:02 [http-nio-8080-exec-2] DEBUG c.d.w.m.A.selectRecordsByAgent - ==>  Preparing: select r.record_id, r.agent_user_id, r.agent_dept_id, r.buyer_user_id, buyer.username as buyerUsername, r.trigger_billing_id, br.bill_no, r.trigger_amount, r.commission_amount, r.commission_rate, r.hierarchy_level, r.business_type, r.status, r.description, r.create_time from dr_agent_commission_record r left join sys_user buyer on r.buyer_user_id = buyer.user_id left join dr_billing_record br on r.trigger_billing_id = br.bill_id where r.agent_user_id = ? and r.direction = '+' and r.business_type = 'RECHARGE_COMMISSION' order by r.create_time desc
2025-11-06 14:28:02 [http-nio-8080-exec-2] DEBUG c.d.w.m.A.selectRecordsByAgent - ==> Parameters: 1(Long)
2025-11-06 14:28:03 [http-nio-8080-exec-2] DEBUG c.d.w.m.A.selectRecordsByAgent - <==      Total: 0
2025-11-06 14:28:03 [http-nio-8080-exec-2] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/agent/commission/1/records from 127.0.0.1 - 状态: 200 - 耗时: 429ms
2025-11-06 14:28:03 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /agent/commission/settlement/admin/list
2025-11-06 14:28:03 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /agent/commission/settlement/admin/list
2025-11-06 14:28:03 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 14:28:03 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 14:28:03 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 14:28:03 [http-nio-8080-exec-4] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 14:28:03 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 14:28:03 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 14:28:04 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /system/user/list
2025-11-06 14:28:04 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 14:28:04 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 14:28:04 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 14:28:04 [http-nio-8080-exec-5] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 14:28:04 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 14:28:04 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:28:04 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 14:28:04 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 14:28:04 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 14:28:04 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 14:28:04 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 14:28:04 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 14:28:04 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 14:28:04 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:28:04 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 14:28:04 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 14:28:04 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 14:28:04 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 14:28:04 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 14:28:04 [http-nio-8080-exec-5] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 14:28:04 [http-nio-8080-exec-5] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 14:28:04 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 14:28:04 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 14:28:04 [http-nio-8080-exec-5] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 14:28:04 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /system/user/list
2025-11-06 14:28:04 [http-nio-8080-exec-5] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/system/user/list from 127.0.0.1
2025-11-06 14:28:04 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserList - ==>  Preparing: SELECT DISTINCT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_name, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur_filter ON u.user_id = ur_filter.user_id LEFT JOIN sys_role r_filter ON ur_filter.role_id = r_filter.role_id AND r_filter.del_flag = '0' WHERE u.parent_user_id = ? ORDER BY u.create_time DESC
2025-11-06 14:28:04 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserList - ==> Parameters: 1(Long)
2025-11-06 14:28:05 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserList - <==      Total: 19
2025-11-06 14:28:05 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:28:05 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 379(Long)
2025-11-06 14:28:05 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:28:05 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:28:05 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 373(Long)
2025-11-06 14:28:05 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 14:28:05 [http-nio-8080-exec-4] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 14:28:05 [http-nio-8080-exec-4] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 14:28:05 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 14:28:05 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 14:28:05 [http-nio-8080-exec-4] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 14:28:05 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured POST /agent/commission/settlement/admin/list
2025-11-06 14:28:05 [http-nio-8080-exec-4] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/agent/commission/settlement/admin/list from 127.0.0.1
2025-11-06 14:28:05 [http-nio-8080-exec-4] DEBUG c.d.w.m.A.searchAdminSettlements - ==>  Preparing: select s.settlement_id, s.agent_user_id, u.username as agent_username, roles.agent_role_keys, s.request_amount, s.approved_amount, s.status, s.approval_user_id, s.approval_time, s.remark, s.extra_data, s.create_by, s.create_time, s.update_by, s.update_time from dr_agent_commission_settlement s left join sys_user u on s.agent_user_id = u.user_id left join ( select ur.user_id, group_concat(distinct r.role_key order by r.role_key) as agent_role_keys from sys_user_role ur join sys_role r on ur.role_id = r.role_id and r.del_flag = '0' group by ur.user_id ) roles on roles.user_id = s.agent_user_id order by s.create_time desc
2025-11-06 14:28:05 [http-nio-8080-exec-4] DEBUG c.d.w.m.A.searchAdminSettlements - ==> Parameters: 
2025-11-06 14:28:05 [http-nio-8080-exec-4] DEBUG c.d.w.m.A.searchAdminSettlements - <==      Total: 4
2025-11-06 14:28:05 [http-nio-8080-exec-4] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/agent/commission/settlement/admin/list from 127.0.0.1 - 状态: 200 - 耗时: 184ms
2025-11-06 14:28:05 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:28:05 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:28:05 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 372(Long)
2025-11-06 14:28:06 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:28:06 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:28:06 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 371(Long)
2025-11-06 14:28:06 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:28:06 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:28:06 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 370(Long)
2025-11-06 14:28:06 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:28:06 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:28:06 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 369(Long)
2025-11-06 14:28:07 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:28:07 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:28:07 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 356(Long)
2025-11-06 14:28:07 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:28:07 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:28:07 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 354(Long)
2025-11-06 14:28:07 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:28:07 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:28:07 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 343(Long)
2025-11-06 14:28:07 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:28:07 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:28:07 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 332(Long)
2025-11-06 14:28:07 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:28:07 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:28:07 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 328(Long)
2025-11-06 14:28:08 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:28:08 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:28:08 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 327(Long)
2025-11-06 14:28:09 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:28:09 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:28:09 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 326(Long)
2025-11-06 14:28:10 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:28:10 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:28:10 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 325(Long)
2025-11-06 14:28:10 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:28:10 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:28:10 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 324(Long)
2025-11-06 14:28:10 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:28:10 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:28:10 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 323(Long)
2025-11-06 14:28:10 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:28:10 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:28:10 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 322(Long)
2025-11-06 14:28:10 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:28:10 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:28:10 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 321(Long)
2025-11-06 14:28:10 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:28:10 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:28:10 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 320(Long)
2025-11-06 14:28:10 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:28:10 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? )
2025-11-06 14:28:10 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 1(Long)
2025-11-06 14:28:11 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 1
2025-11-06 14:28:11 [http-nio-8080-exec-5] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/system/user/list from 127.0.0.1 - 状态: 200 - 耗时: 6755ms
2025-11-06 14:28:11 [http-nio-8080-exec-5] WARN  c.d.c.i.PerformanceInterceptor - 检测到慢请求: POST /api/system/user/list from 127.0.0.1 - 耗时: 6755ms - 超过阈值: 3000ms
2025-11-06 14:30:06 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /agent/commission/1/records
2025-11-06 14:30:06 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 14:30:06 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 14:30:06 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 14:30:06 [http-nio-8080-exec-7] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 14:30:06 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 14:30:06 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 14:30:06 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 14:30:06 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:30:06 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 14:30:06 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 14:30:06 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 14:30:06 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 14:30:06 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 14:30:06 [http-nio-8080-exec-7] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 14:30:06 [http-nio-8080-exec-7] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 14:30:06 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 14:30:06 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 14:30:06 [http-nio-8080-exec-7] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 14:30:06 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured POST /agent/commission/1/records
2025-11-06 14:30:06 [http-nio-8080-exec-7] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/agent/commission/1/records from 127.0.0.1
2025-11-06 14:30:06 [http-nio-8080-exec-7] DEBUG c.d.w.m.A.selectRecordsByAgent - ==>  Preparing: select r.record_id, r.agent_user_id, r.agent_dept_id, r.buyer_user_id, buyer.username as buyerUsername, r.trigger_billing_id, br.bill_no, r.trigger_amount, r.commission_amount, r.commission_rate, r.hierarchy_level, r.business_type, r.status, r.description, r.create_time from dr_agent_commission_record r left join sys_user buyer on r.buyer_user_id = buyer.user_id left join dr_billing_record br on r.trigger_billing_id = br.bill_id where r.agent_user_id = ? and r.direction = '+' and r.business_type = 'RECHARGE_COMMISSION' order by r.create_time desc
2025-11-06 14:30:06 [http-nio-8080-exec-7] DEBUG c.d.w.m.A.selectRecordsByAgent - ==> Parameters: 1(Long)
2025-11-06 14:30:06 [http-nio-8080-exec-7] DEBUG c.d.w.m.A.selectRecordsByAgent - <==      Total: 0
2025-11-06 14:30:06 [http-nio-8080-exec-7] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/agent/commission/1/records from 127.0.0.1 - 状态: 200 - 耗时: 166ms
2025-11-06 14:30:13 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing POST /agent/commission/1/records
2025-11-06 14:30:13 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 14:30:13 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 14:30:13 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 14:30:13 [http-nio-8080-exec-10] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 14:30:13 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 14:30:13 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 14:30:13 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 14:30:13 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:30:13 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 14:30:13 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 14:30:13 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 14:30:13 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 14:30:13 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 14:30:13 [http-nio-8080-exec-10] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 14:30:13 [http-nio-8080-exec-10] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 14:30:13 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 14:30:13 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 14:30:13 [http-nio-8080-exec-10] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 14:30:13 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured POST /agent/commission/1/records
2025-11-06 14:30:13 [http-nio-8080-exec-10] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/agent/commission/1/records from 127.0.0.1
2025-11-06 14:30:13 [http-nio-8080-exec-10] DEBUG c.d.w.m.A.selectRecordsByAgent - ==>  Preparing: select r.record_id, r.agent_user_id, r.agent_dept_id, r.buyer_user_id, buyer.username as buyerUsername, r.trigger_billing_id, br.bill_no, r.trigger_amount, r.commission_amount, r.commission_rate, r.hierarchy_level, r.business_type, r.status, r.description, r.create_time from dr_agent_commission_record r left join sys_user buyer on r.buyer_user_id = buyer.user_id left join dr_billing_record br on r.trigger_billing_id = br.bill_id where r.agent_user_id = ? and r.direction = '+' and r.business_type = 'RECHARGE_COMMISSION' order by r.create_time desc
2025-11-06 14:30:13 [http-nio-8080-exec-10] DEBUG c.d.w.m.A.selectRecordsByAgent - ==> Parameters: 1(Long)
2025-11-06 14:30:13 [http-nio-8080-exec-10] DEBUG c.d.w.m.A.selectRecordsByAgent - <==      Total: 0
2025-11-06 14:30:13 [http-nio-8080-exec-10] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/agent/commission/1/records from 127.0.0.1 - 状态: 200 - 耗时: 157ms
2025-11-06 14:30:21 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /agent/commission/1/records
2025-11-06 14:30:21 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 14:30:21 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 14:30:21 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 14:30:21 [http-nio-8080-exec-2] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 14:30:21 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 14:30:21 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 14:30:21 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 14:30:21 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:30:21 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 14:30:21 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 14:30:21 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 14:30:21 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 14:30:22 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 14:30:22 [http-nio-8080-exec-2] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 14:30:22 [http-nio-8080-exec-2] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 14:30:22 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 14:30:22 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 14:30:22 [http-nio-8080-exec-2] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 14:30:22 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /agent/commission/1/records
2025-11-06 14:30:22 [http-nio-8080-exec-2] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/agent/commission/1/records from 127.0.0.1
2025-11-06 14:30:22 [http-nio-8080-exec-2] DEBUG c.d.w.m.A.selectRecordsByAgent - ==>  Preparing: select r.record_id, r.agent_user_id, r.agent_dept_id, r.buyer_user_id, buyer.username as buyerUsername, r.trigger_billing_id, br.bill_no, r.trigger_amount, r.commission_amount, r.commission_rate, r.hierarchy_level, r.business_type, r.status, r.description, r.create_time from dr_agent_commission_record r left join sys_user buyer on r.buyer_user_id = buyer.user_id left join dr_billing_record br on r.trigger_billing_id = br.bill_id where r.agent_user_id = ? and r.direction = '+' and r.business_type = 'RECHARGE_COMMISSION' order by r.create_time desc
2025-11-06 14:30:22 [http-nio-8080-exec-2] DEBUG c.d.w.m.A.selectRecordsByAgent - ==> Parameters: 1(Long)
2025-11-06 14:30:22 [http-nio-8080-exec-2] DEBUG c.d.w.m.A.selectRecordsByAgent - <==      Total: 0
2025-11-06 14:30:22 [http-nio-8080-exec-2] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/agent/commission/1/records from 127.0.0.1 - 状态: 200 - 耗时: 154ms
2025-11-06 14:30:24 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /agent/commission/1/records
2025-11-06 14:30:24 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 14:30:24 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 14:30:24 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 14:30:24 [http-nio-8080-exec-3] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 14:30:24 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 14:30:24 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 14:30:24 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 14:30:24 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:30:24 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 14:30:24 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 14:30:24 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 14:30:24 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 14:30:25 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 14:30:25 [http-nio-8080-exec-3] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 14:30:25 [http-nio-8080-exec-3] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 14:30:25 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 14:30:25 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 14:30:25 [http-nio-8080-exec-3] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 14:30:25 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /agent/commission/1/records
2025-11-06 14:30:25 [http-nio-8080-exec-3] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/agent/commission/1/records from 127.0.0.1
2025-11-06 14:30:25 [http-nio-8080-exec-3] DEBUG c.d.w.m.A.selectRecordsByAgent - ==>  Preparing: select r.record_id, r.agent_user_id, r.agent_dept_id, r.buyer_user_id, buyer.username as buyerUsername, r.trigger_billing_id, br.bill_no, r.trigger_amount, r.commission_amount, r.commission_rate, r.hierarchy_level, r.business_type, r.status, r.description, r.create_time from dr_agent_commission_record r left join sys_user buyer on r.buyer_user_id = buyer.user_id left join dr_billing_record br on r.trigger_billing_id = br.bill_id where r.agent_user_id = ? and r.direction = '+' and r.business_type = 'RECHARGE_COMMISSION' order by r.create_time desc
2025-11-06 14:30:25 [http-nio-8080-exec-3] DEBUG c.d.w.m.A.selectRecordsByAgent - ==> Parameters: 1(Long)
2025-11-06 14:30:25 [http-nio-8080-exec-3] DEBUG c.d.w.m.A.selectRecordsByAgent - <==      Total: 0
2025-11-06 14:30:25 [http-nio-8080-exec-3] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/agent/commission/1/records from 127.0.0.1 - 状态: 200 - 耗时: 153ms
2025-11-06 14:35:07 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /system/user/list
2025-11-06 14:35:07 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 14:35:07 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 14:35:07 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 14:35:07 [http-nio-8080-exec-6] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 14:35:07 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 14:35:07 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 14:35:07 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 14:35:07 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:07 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 14:35:07 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 14:35:07 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 14:35:07 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 14:35:07 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 14:35:07 [http-nio-8080-exec-6] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 14:35:07 [http-nio-8080-exec-6] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 14:35:07 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 14:35:07 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 14:35:07 [http-nio-8080-exec-6] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 14:35:07 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /system/user/list
2025-11-06 14:35:07 [http-nio-8080-exec-6] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/system/user/list from 127.0.0.1
2025-11-06 14:35:07 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserList - ==>  Preparing: SELECT DISTINCT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_name, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur_filter ON u.user_id = ur_filter.user_id LEFT JOIN sys_role r_filter ON ur_filter.role_id = r_filter.role_id AND r_filter.del_flag = '0' WHERE u.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY u.create_time DESC
2025-11-06 14:35:07 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserList - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 14:35:08 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserList - <==      Total: 49
2025-11-06 14:35:08 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:08 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 381(Long)
2025-11-06 14:35:08 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:08 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:08 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 380(Long)
2025-11-06 14:35:08 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:08 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:08 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 379(Long)
2025-11-06 14:35:08 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:08 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:08 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 378(Long)
2025-11-06 14:35:08 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:08 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:08 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 377(Long)
2025-11-06 14:35:09 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:09 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:09 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 376(Long)
2025-11-06 14:35:09 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:09 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:09 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 375(Long)
2025-11-06 14:35:09 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:09 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:09 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 374(Long)
2025-11-06 14:35:09 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:09 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:09 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 373(Long)
2025-11-06 14:35:09 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:09 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:09 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 372(Long)
2025-11-06 14:35:09 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:09 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:09 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 371(Long)
2025-11-06 14:35:10 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:10 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:10 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 370(Long)
2025-11-06 14:35:10 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:10 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:10 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 369(Long)
2025-11-06 14:35:10 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:10 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:10 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 357(Long)
2025-11-06 14:35:10 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:10 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:10 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 356(Long)
2025-11-06 14:35:10 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:10 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:10 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 355(Long)
2025-11-06 14:35:10 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:10 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:10 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 354(Long)
2025-11-06 14:35:10 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:10 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:10 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 353(Long)
2025-11-06 14:35:11 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:11 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:11 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 352(Long)
2025-11-06 14:35:11 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:11 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:11 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 351(Long)
2025-11-06 14:35:11 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /system/user/list
2025-11-06 14:35:11 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 14:35:11 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 14:35:11 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 14:35:11 [http-nio-8080-exec-5] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 14:35:11 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 14:35:11 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 14:35:11 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:11 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:11 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 349(Long)
2025-11-06 14:35:11 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:11 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:11 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 348(Long)
2025-11-06 14:35:11 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:11 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:11 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 347(Long)
2025-11-06 14:35:12 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 14:35:12 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:12 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 14:35:12 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:12 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:12 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 345(Long)
2025-11-06 14:35:12 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 14:35:12 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 14:35:12 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 14:35:12 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:12 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:12 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 344(Long)
2025-11-06 14:35:12 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 14:35:12 [http-nio-8080-exec-5] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 14:35:12 [http-nio-8080-exec-5] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 14:35:12 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 14:35:12 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 14:35:12 [http-nio-8080-exec-5] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 14:35:12 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /system/user/list
2025-11-06 14:35:12 [http-nio-8080-exec-5] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/system/user/list from 127.0.0.1
2025-11-06 14:35:12 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserList - ==>  Preparing: SELECT DISTINCT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_name, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur_filter ON u.user_id = ur_filter.user_id LEFT JOIN sys_role r_filter ON ur_filter.role_id = r_filter.role_id AND r_filter.del_flag = '0' WHERE u.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY u.create_time DESC
2025-11-06 14:35:12 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserList - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 14:35:12 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:12 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:12 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 343(Long)
2025-11-06 14:35:12 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:12 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:12 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 342(Long)
2025-11-06 14:35:12 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:12 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:12 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 340(Long)
2025-11-06 14:35:12 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserList - <==      Total: 49
2025-11-06 14:35:12 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:12 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 381(Long)
2025-11-06 14:35:12 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:12 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:12 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 339(Long)
2025-11-06 14:35:12 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:12 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:12 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 380(Long)
2025-11-06 14:35:13 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:13 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:13 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 338(Long)
2025-11-06 14:35:13 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:13 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:13 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 379(Long)
2025-11-06 14:35:13 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:13 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:13 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 337(Long)
2025-11-06 14:35:13 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:13 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:13 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 378(Long)
2025-11-06 14:35:13 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:13 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:13 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 336(Long)
2025-11-06 14:35:13 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:13 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:13 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 335(Long)
2025-11-06 14:35:14 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:14 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:14 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 334(Long)
2025-11-06 14:35:14 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:14 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:14 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 333(Long)
2025-11-06 14:35:14 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:14 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:14 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 332(Long)
2025-11-06 14:35:14 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:14 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:14 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 331(Long)
2025-11-06 14:35:14 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:14 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:14 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 330(Long)
2025-11-06 14:35:14 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:14 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:14 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 329(Long)
2025-11-06 14:35:14 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:14 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:14 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 328(Long)
2025-11-06 14:35:15 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:15 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:15 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:15 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:15 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 327(Long)
2025-11-06 14:35:15 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 377(Long)
2025-11-06 14:35:15 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:15 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:15 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:15 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:15 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 376(Long)
2025-11-06 14:35:15 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 326(Long)
2025-11-06 14:35:15 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:15 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:15 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:15 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 375(Long)
2025-11-06 14:35:15 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:15 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 325(Long)
2025-11-06 14:35:15 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:15 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:15 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:15 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:15 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 374(Long)
2025-11-06 14:35:15 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 324(Long)
2025-11-06 14:35:15 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:15 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:15 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:15 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 323(Long)
2025-11-06 14:35:15 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:15 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 373(Long)
2025-11-06 14:35:16 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:16 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:16 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:16 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 372(Long)
2025-11-06 14:35:16 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:16 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 322(Long)
2025-11-06 14:35:16 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:16 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:16 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:16 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 321(Long)
2025-11-06 14:35:16 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:16 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 371(Long)
2025-11-06 14:35:16 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:16 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:16 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:16 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:16 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 370(Long)
2025-11-06 14:35:16 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 320(Long)
2025-11-06 14:35:16 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:16 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:16 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:16 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:16 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 1(Long)
2025-11-06 14:35:16 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 369(Long)
2025-11-06 14:35:16 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:16 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:16 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:16 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 357(Long)
2025-11-06 14:35:16 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 14:35:16 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 379(Long), 1(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 354(Long), 337(Long), 342(Long), 344(Long), 332(Long), 334(Long), 320(Long), 329(Long), 333(Long), 321(Long)
2025-11-06 14:35:16 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:16 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 17
2025-11-06 14:35:16 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:16 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 356(Long)
2025-11-06 14:35:16 [http-nio-8080-exec-6] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/system/user/list from 127.0.0.1 - 状态: 200 - 耗时: 8888ms
2025-11-06 14:35:16 [http-nio-8080-exec-6] WARN  c.d.c.i.PerformanceInterceptor - 检测到慢请求: POST /api/system/user/list from 127.0.0.1 - 耗时: 8888ms - 超过阈值: 3000ms
2025-11-06 14:35:16 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:16 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:16 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 355(Long)
2025-11-06 14:35:17 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:17 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:17 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 354(Long)
2025-11-06 14:35:17 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:17 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:17 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 353(Long)
2025-11-06 14:35:17 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:17 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:17 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 352(Long)
2025-11-06 14:35:17 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:17 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:17 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 351(Long)
2025-11-06 14:35:17 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:17 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:17 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 349(Long)
2025-11-06 14:35:17 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:17 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:17 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 348(Long)
2025-11-06 14:35:17 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:17 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:17 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 347(Long)
2025-11-06 14:35:18 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:18 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:18 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 345(Long)
2025-11-06 14:35:18 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:18 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:18 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 344(Long)
2025-11-06 14:35:18 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:18 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:18 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 343(Long)
2025-11-06 14:35:18 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:18 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:18 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 342(Long)
2025-11-06 14:35:18 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:18 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:18 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 340(Long)
2025-11-06 14:35:19 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:19 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:19 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 339(Long)
2025-11-06 14:35:19 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:19 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:19 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 338(Long)
2025-11-06 14:35:19 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:19 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:19 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 337(Long)
2025-11-06 14:35:19 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:19 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:19 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 336(Long)
2025-11-06 14:35:19 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:19 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:19 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 335(Long)
2025-11-06 14:35:19 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:19 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:19 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 334(Long)
2025-11-06 14:35:20 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:20 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:20 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 333(Long)
2025-11-06 14:35:20 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:20 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:20 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 332(Long)
2025-11-06 14:35:20 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:20 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:20 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 331(Long)
2025-11-06 14:35:20 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:20 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:20 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 330(Long)
2025-11-06 14:35:20 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:20 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:20 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 329(Long)
2025-11-06 14:35:20 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:20 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:20 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 328(Long)
2025-11-06 14:35:20 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:20 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:20 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 327(Long)
2025-11-06 14:35:21 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:21 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:21 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 326(Long)
2025-11-06 14:35:21 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:21 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:21 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 325(Long)
2025-11-06 14:35:21 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:21 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:21 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 324(Long)
2025-11-06 14:35:21 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:21 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:21 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 323(Long)
2025-11-06 14:35:21 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:21 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:21 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 322(Long)
2025-11-06 14:35:21 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:21 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:21 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 321(Long)
2025-11-06 14:35:22 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:22 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:22 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 320(Long)
2025-11-06 14:35:22 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:22 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:22 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 1(Long)
2025-11-06 14:35:22 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:22 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 14:35:22 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 379(Long), 1(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 354(Long), 337(Long), 342(Long), 344(Long), 332(Long), 334(Long), 320(Long), 329(Long), 333(Long), 321(Long)
2025-11-06 14:35:22 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 17
2025-11-06 14:35:22 [http-nio-8080-exec-5] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/system/user/list from 127.0.0.1 - 状态: 200 - 耗时: 10161ms
2025-11-06 14:35:22 [http-nio-8080-exec-5] WARN  c.d.c.i.PerformanceInterceptor - 检测到慢请求: POST /api/system/user/list from 127.0.0.1 - 耗时: 10161ms - 超过阈值: 3000ms
2025-11-06 14:35:54 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /system/user/357/agent-identity
2025-11-06 14:35:54 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /system/user/357/agent-identity
2025-11-06 14:35:54 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 14:35:54 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 14:35:54 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 14:35:54 [http-nio-8080-exec-10] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 14:35:54 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 14:35:54 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 14:35:54 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 14:35:54 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:54 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 14:35:54 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 14:35:54 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 14:35:54 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 14:35:54 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 14:35:54 [http-nio-8080-exec-10] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 14:35:54 [http-nio-8080-exec-10] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 14:35:54 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 14:35:54 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 14:35:54 [http-nio-8080-exec-10] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 14:35:54 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /system/user/357/agent-identity
2025-11-06 14:35:54 [http-nio-8080-exec-10] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: PUT /api/system/user/357/agent-identity from 127.0.0.1
2025-11-06 14:35:54 [http-nio-8080-exec-10] INFO  c.deepreach.common.aspect.LogAspect - LogAspect doBefore 被触发: 调整代理身份 - adjustAgentIdentity
2025-11-06 14:35:54 [http-nio-8080-exec-10] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志前置处理完成: 调整代理身份
2025-11-06 14:35:55 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserWithDept - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.user_id = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 14:35:55 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserWithDept - ==> Parameters: 357(Long)
2025-11-06 14:35:55 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserWithDept - <==      Total: 1
2025-11-06 14:35:55 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:55 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 357(Long)
2025-11-06 14:35:55 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:55 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserWithDept - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.user_id = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 14:35:55 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserWithDept - ==> Parameters: 354(Long)
2025-11-06 14:35:56 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserWithDept - <==      Total: 1
2025-11-06 14:35:56 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:35:56 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 354(Long)
2025-11-06 14:35:56 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:35:56 [http-nio-8080-exec-10] ERROR c.d.c.c.controller.SysUserController - 调整代理身份失败：userId=357, request=AgentIdentityAdjustRequest(targetIdentity=agent_level_1)
java.lang.RuntimeException: 上级用户身份不足，无法执行该调整
	at com.deepreach.common.core.service.impl.SysUserServiceImpl.adjustAgentIdentity(SysUserServiceImpl.java:917)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.deepreach.common.core.service.impl.SysUserServiceImpl$$SpringCGLIB$$0.adjustAgentIdentity(<generated>)
	at com.deepreach.common.core.controller.SysUserController.adjustAgentIdentity(SysUserController.java:820)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:64)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:58)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.deepreach.common.core.controller.SysUserController$$SpringCGLIB$$0.adjustAgentIdentity(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPut(FrameworkServlet.java:925)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:593)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.deepreach.common.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:136)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-11-06 14:35:56 [http-nio-8080-exec-10] INFO  c.deepreach.common.aspect.LogAspect - 保存操作日志: 调整代理身份 - admin - /api/system/user/357/agent-identity - 成功
2025-11-06 14:35:56 [http-nio-8080-exec-10] INFO  c.deepreach.common.aspect.LogAspect - 操作日志对象详情: operId=null, title=调整代理身份, operName=admin, operUrl=/api/system/user/357/agent-identity, status=0
2025-11-06 14:35:56 [http-nio-8080-exec-10] INFO  c.deepreach.common.aspect.LogAspect - 准备异步保存操作日志到数据库...
2025-11-06 14:35:56 [http-nio-8080-exec-10] INFO  c.deepreach.common.aspect.LogAspect - 操作日志异步保存任务已提交
2025-11-06 14:35:56 [http-nio-8080-exec-10] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志返回处理完成: 调整代理身份
2025-11-06 14:35:56 [http-nio-8080-exec-10] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: PUT /api/system/user/357/agent-identity from 127.0.0.1 - 状态: 200 - 耗时: 1631ms
2025-11-06 14:35:56 [pool-3-thread-1] DEBUG c.d.c.c.m.S.insertOperLog - ==>  Preparing: INSERT INTO sys_oper_log ( title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2025-11-06 14:35:56 [pool-3-thread-1] DEBUG c.d.c.c.m.S.insertOperLog - ==> Parameters: 调整代理身份(String), 2(Integer), com.deepreach.common.core.controller.SysUserController.adjustAgentIdentity(String), PUT(String), 1(Integer), admin(String), ADMIN(String), /api/system/user/357/agent-identity(String), 127.0.0.1(String), null, [357,{"targetIdentity":"agent_level_1"}](String), {"code":500,"msg":"调整代理身份失败：上级用户身份不足，无法执行该调整","data":null,"timestamp":1762410956575,"error":true,"success":false}(String), 0(Integer), null, 2025-11-06T14:35:54.988203(LocalDateTime), 1593(Long)
2025-11-06 14:35:56 [pool-3-thread-1] DEBUG c.d.c.c.m.S.insertOperLog - <==    Updates: 1
2025-11-06 14:36:01 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /system/user/list
2025-11-06 14:36:01 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 14:36:01 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 14:36:01 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 14:36:01 [http-nio-8080-exec-2] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 14:36:01 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 14:36:01 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 14:36:01 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 14:36:01 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:36:01 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 14:36:01 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 14:36:01 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 14:36:01 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 14:36:02 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 14:36:02 [http-nio-8080-exec-2] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 14:36:02 [http-nio-8080-exec-2] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 14:36:02 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 14:36:02 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 14:36:02 [http-nio-8080-exec-2] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 14:36:02 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /system/user/list
2025-11-06 14:36:02 [http-nio-8080-exec-2] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/system/user/list from 127.0.0.1
2025-11-06 14:36:02 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserList - ==>  Preparing: SELECT DISTINCT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_name, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur_filter ON u.user_id = ur_filter.user_id LEFT JOIN sys_role r_filter ON ur_filter.role_id = r_filter.role_id AND r_filter.del_flag = '0' WHERE u.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY u.create_time DESC
2025-11-06 14:36:02 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserList - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 14:36:02 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserList - <==      Total: 49
2025-11-06 14:36:02 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:36:02 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 381(Long)
2025-11-06 14:36:02 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:36:02 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:36:02 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 380(Long)
2025-11-06 14:36:03 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:36:03 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:36:03 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 379(Long)
2025-11-06 14:36:04 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:36:04 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:36:04 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 378(Long)
2025-11-06 14:36:04 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:36:04 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:36:04 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 377(Long)
2025-11-06 14:36:04 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:36:04 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:36:04 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 376(Long)
2025-11-06 14:36:04 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:36:04 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:36:04 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 375(Long)
2025-11-06 14:36:04 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:36:04 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:36:04 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 374(Long)
2025-11-06 14:36:04 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:36:04 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:36:04 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 373(Long)
2025-11-06 14:36:05 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:36:05 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:36:05 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 372(Long)
2025-11-06 14:36:05 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:36:05 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:36:05 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 371(Long)
2025-11-06 14:36:05 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:36:05 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:36:05 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 370(Long)
2025-11-06 14:36:05 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:36:05 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:36:05 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 369(Long)
2025-11-06 14:36:05 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:36:05 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:36:05 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 357(Long)
2025-11-06 14:36:06 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:36:06 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:36:06 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 356(Long)
2025-11-06 14:36:06 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:36:06 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:36:06 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 355(Long)
2025-11-06 14:36:06 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:36:06 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:36:06 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 354(Long)
2025-11-06 14:36:06 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:36:06 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:36:06 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 353(Long)
2025-11-06 14:36:06 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:36:06 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:36:06 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 352(Long)
2025-11-06 14:36:06 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:36:06 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:36:06 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 351(Long)
2025-11-06 14:36:07 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:36:07 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:36:07 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 349(Long)
2025-11-06 14:36:07 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:36:07 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:36:07 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 348(Long)
2025-11-06 14:36:07 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:36:07 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:36:07 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 347(Long)
2025-11-06 14:36:07 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:36:07 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:36:07 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 345(Long)
2025-11-06 14:36:07 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:36:07 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:36:07 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 344(Long)
2025-11-06 14:36:07 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:36:07 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:36:07 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 343(Long)
2025-11-06 14:36:07 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:36:07 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:36:07 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 342(Long)
2025-11-06 14:36:08 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:36:08 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:36:08 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 340(Long)
2025-11-06 14:36:08 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:36:08 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:36:08 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 339(Long)
2025-11-06 14:36:08 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:36:08 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:36:08 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 338(Long)
2025-11-06 14:36:08 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:36:08 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:36:08 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 337(Long)
2025-11-06 14:36:08 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:36:08 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:36:08 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 336(Long)
2025-11-06 14:36:08 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:36:08 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:36:08 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 335(Long)
2025-11-06 14:36:08 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:36:08 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:36:08 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 334(Long)
2025-11-06 14:36:09 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:36:09 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:36:09 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 333(Long)
2025-11-06 14:36:09 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:36:09 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:36:09 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 332(Long)
2025-11-06 14:36:09 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:36:09 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:36:09 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 331(Long)
2025-11-06 14:36:09 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:36:09 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:36:09 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 330(Long)
2025-11-06 14:36:09 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:36:09 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:36:09 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 329(Long)
2025-11-06 14:36:09 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:36:09 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:36:09 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 328(Long)
2025-11-06 14:36:10 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:36:10 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:36:10 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 327(Long)
2025-11-06 14:36:10 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:36:10 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:36:10 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 326(Long)
2025-11-06 14:36:10 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:36:10 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:36:10 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 325(Long)
2025-11-06 14:36:10 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:36:10 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:36:10 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 324(Long)
2025-11-06 14:36:10 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:36:10 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:36:10 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 323(Long)
2025-11-06 14:36:10 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:36:10 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:36:10 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 322(Long)
2025-11-06 14:36:10 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:36:10 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:36:10 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 321(Long)
2025-11-06 14:36:11 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:36:11 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:36:11 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 320(Long)
2025-11-06 14:36:11 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:36:11 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:36:11 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 1(Long)
2025-11-06 14:36:11 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:36:11 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 14:36:11 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 379(Long), 1(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 354(Long), 337(Long), 342(Long), 344(Long), 332(Long), 334(Long), 320(Long), 329(Long), 333(Long), 321(Long)
2025-11-06 14:36:11 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 17
2025-11-06 14:36:11 [http-nio-8080-exec-2] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/system/user/list from 127.0.0.1 - 状态: 200 - 耗时: 9781ms
2025-11-06 14:36:11 [http-nio-8080-exec-2] WARN  c.d.c.i.PerformanceInterceptor - 检测到慢请求: POST /api/system/user/list from 127.0.0.1 - 耗时: 9781ms - 超过阈值: 3000ms
2025-11-06 14:37:03 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /system/user/list
2025-11-06 14:37:03 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 14:37:03 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 14:37:03 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 14:37:03 [http-nio-8080-exec-4] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 14:37:03 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 14:37:03 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 14:37:03 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 14:37:03 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:03 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 14:37:04 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 14:37:04 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 14:37:04 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 14:37:04 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 14:37:04 [http-nio-8080-exec-4] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 14:37:04 [http-nio-8080-exec-4] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 14:37:04 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 14:37:04 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 14:37:04 [http-nio-8080-exec-4] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 14:37:04 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured POST /system/user/list
2025-11-06 14:37:04 [http-nio-8080-exec-4] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/system/user/list from 127.0.0.1
2025-11-06 14:37:04 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserList - ==>  Preparing: SELECT DISTINCT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_name, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur_filter ON u.user_id = ur_filter.user_id LEFT JOIN sys_role r_filter ON ur_filter.role_id = r_filter.role_id AND r_filter.del_flag = '0' WHERE u.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY u.create_time DESC
2025-11-06 14:37:04 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserList - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 14:37:04 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserList - <==      Total: 49
2025-11-06 14:37:04 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:04 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 381(Long)
2025-11-06 14:37:04 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:04 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:04 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 380(Long)
2025-11-06 14:37:05 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:05 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:05 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 379(Long)
2025-11-06 14:37:05 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:05 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:05 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 378(Long)
2025-11-06 14:37:05 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:05 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:05 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 377(Long)
2025-11-06 14:37:05 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:05 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:05 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 376(Long)
2025-11-06 14:37:05 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:05 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:05 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 375(Long)
2025-11-06 14:37:05 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:05 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:05 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 374(Long)
2025-11-06 14:37:05 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:05 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:05 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 373(Long)
2025-11-06 14:37:06 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:06 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:06 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 372(Long)
2025-11-06 14:37:06 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:06 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:06 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 371(Long)
2025-11-06 14:37:06 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:06 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:06 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 370(Long)
2025-11-06 14:37:06 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:06 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:06 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 369(Long)
2025-11-06 14:37:07 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:07 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:07 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 357(Long)
2025-11-06 14:37:07 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:07 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:07 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 356(Long)
2025-11-06 14:37:07 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:07 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:07 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 355(Long)
2025-11-06 14:37:07 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:07 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:07 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 354(Long)
2025-11-06 14:37:07 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:07 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:07 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 353(Long)
2025-11-06 14:37:07 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:07 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:07 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 352(Long)
2025-11-06 14:37:07 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:07 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:07 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 351(Long)
2025-11-06 14:37:08 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:08 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:08 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 349(Long)
2025-11-06 14:37:08 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:08 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:08 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 348(Long)
2025-11-06 14:37:08 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:08 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:08 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 347(Long)
2025-11-06 14:37:08 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:08 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:08 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 345(Long)
2025-11-06 14:37:08 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:08 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:08 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 344(Long)
2025-11-06 14:37:08 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:08 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:08 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 343(Long)
2025-11-06 14:37:08 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:08 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:08 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 342(Long)
2025-11-06 14:37:09 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:09 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:09 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 340(Long)
2025-11-06 14:37:09 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:09 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:09 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 339(Long)
2025-11-06 14:37:09 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:09 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:09 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 338(Long)
2025-11-06 14:37:09 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:09 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:09 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 337(Long)
2025-11-06 14:37:10 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:10 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:10 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 336(Long)
2025-11-06 14:37:10 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:10 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:10 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 335(Long)
2025-11-06 14:37:10 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:10 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:10 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 334(Long)
2025-11-06 14:37:10 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:10 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:10 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 333(Long)
2025-11-06 14:37:10 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:10 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:10 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 332(Long)
2025-11-06 14:37:10 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:10 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:10 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 331(Long)
2025-11-06 14:37:10 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:10 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:10 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 330(Long)
2025-11-06 14:37:11 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:11 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:11 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 329(Long)
2025-11-06 14:37:11 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:11 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:11 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 328(Long)
2025-11-06 14:37:11 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:11 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:11 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 327(Long)
2025-11-06 14:37:11 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:11 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:11 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 326(Long)
2025-11-06 14:37:11 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:11 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:11 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 325(Long)
2025-11-06 14:37:11 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:11 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:11 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 324(Long)
2025-11-06 14:37:12 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:12 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:12 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 323(Long)
2025-11-06 14:37:12 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:12 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:12 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 322(Long)
2025-11-06 14:37:12 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:12 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:12 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 321(Long)
2025-11-06 14:37:12 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:12 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:12 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 320(Long)
2025-11-06 14:37:12 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:12 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:12 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 1(Long)
2025-11-06 14:37:12 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:12 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 14:37:12 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 379(Long), 1(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 354(Long), 337(Long), 342(Long), 344(Long), 332(Long), 334(Long), 320(Long), 329(Long), 333(Long), 321(Long)
2025-11-06 14:37:12 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 17
2025-11-06 14:37:12 [http-nio-8080-exec-4] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/system/user/list from 127.0.0.1 - 状态: 200 - 耗时: 8676ms
2025-11-06 14:37:12 [http-nio-8080-exec-4] WARN  c.d.c.i.PerformanceInterceptor - 检测到慢请求: POST /api/system/user/list from 127.0.0.1 - 耗时: 8676ms - 超过阈值: 3000ms
2025-11-06 14:37:43 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing POST /system/user/list
2025-11-06 14:37:43 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 14:37:43 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 14:37:43 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 14:37:43 [http-nio-8080-exec-8] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 14:37:43 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 14:37:43 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 14:37:43 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 14:37:43 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:43 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 14:37:43 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 14:37:43 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 14:37:43 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 14:37:44 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 14:37:44 [http-nio-8080-exec-8] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 14:37:44 [http-nio-8080-exec-8] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 14:37:44 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 14:37:44 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 14:37:44 [http-nio-8080-exec-8] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 14:37:44 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured POST /system/user/list
2025-11-06 14:37:44 [http-nio-8080-exec-8] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/system/user/list from 127.0.0.1
2025-11-06 14:37:44 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserList - ==>  Preparing: SELECT DISTINCT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_name, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur_filter ON u.user_id = ur_filter.user_id LEFT JOIN sys_role r_filter ON ur_filter.role_id = r_filter.role_id AND r_filter.del_flag = '0' WHERE u.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY u.create_time DESC
2025-11-06 14:37:44 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserList - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 14:37:44 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserList - <==      Total: 49
2025-11-06 14:37:44 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:44 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 381(Long)
2025-11-06 14:37:44 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:44 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:44 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 380(Long)
2025-11-06 14:37:44 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:44 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:44 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 379(Long)
2025-11-06 14:37:44 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:44 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:44 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 378(Long)
2025-11-06 14:37:45 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:45 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:45 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 377(Long)
2025-11-06 14:37:45 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:45 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:45 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 376(Long)
2025-11-06 14:37:45 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:45 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:45 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 375(Long)
2025-11-06 14:37:45 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:45 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:45 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 374(Long)
2025-11-06 14:37:45 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:45 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:45 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 373(Long)
2025-11-06 14:37:45 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:45 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:45 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 372(Long)
2025-11-06 14:37:45 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:45 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:45 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 371(Long)
2025-11-06 14:37:46 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:46 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:46 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 370(Long)
2025-11-06 14:37:46 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:46 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:46 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 369(Long)
2025-11-06 14:37:46 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:46 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:46 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 357(Long)
2025-11-06 14:37:46 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:46 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:46 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 356(Long)
2025-11-06 14:37:46 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:46 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:46 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 355(Long)
2025-11-06 14:37:46 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:46 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:46 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 354(Long)
2025-11-06 14:37:47 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:47 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:47 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 353(Long)
2025-11-06 14:37:47 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:47 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:47 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 352(Long)
2025-11-06 14:37:47 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:47 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:47 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 351(Long)
2025-11-06 14:37:47 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:47 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:47 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 349(Long)
2025-11-06 14:37:47 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:47 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:47 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 348(Long)
2025-11-06 14:37:48 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:48 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:48 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 347(Long)
2025-11-06 14:37:48 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:48 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:48 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 345(Long)
2025-11-06 14:37:48 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:48 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:48 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 344(Long)
2025-11-06 14:37:48 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:48 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:48 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 343(Long)
2025-11-06 14:37:48 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:48 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:48 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 342(Long)
2025-11-06 14:37:48 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:48 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:48 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 340(Long)
2025-11-06 14:37:48 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:48 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:48 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 339(Long)
2025-11-06 14:37:49 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:49 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:49 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 338(Long)
2025-11-06 14:37:49 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:49 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:49 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 337(Long)
2025-11-06 14:37:49 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:49 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:49 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 336(Long)
2025-11-06 14:37:49 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:49 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:49 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 335(Long)
2025-11-06 14:37:49 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:49 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:49 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 334(Long)
2025-11-06 14:37:49 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:49 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:49 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 333(Long)
2025-11-06 14:37:50 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:50 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:50 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 332(Long)
2025-11-06 14:37:50 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:50 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:50 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 331(Long)
2025-11-06 14:37:50 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:50 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:50 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 330(Long)
2025-11-06 14:37:50 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:50 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:50 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 329(Long)
2025-11-06 14:37:50 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:50 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:50 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 328(Long)
2025-11-06 14:37:50 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:50 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:50 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 327(Long)
2025-11-06 14:37:50 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:50 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:50 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 326(Long)
2025-11-06 14:37:51 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:51 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:51 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 325(Long)
2025-11-06 14:37:51 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:51 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:51 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 324(Long)
2025-11-06 14:37:51 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:51 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:51 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 323(Long)
2025-11-06 14:37:51 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:51 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:51 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 322(Long)
2025-11-06 14:37:51 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:51 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:51 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 321(Long)
2025-11-06 14:37:51 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:51 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:51 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 320(Long)
2025-11-06 14:37:52 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:52 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:37:52 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 1(Long)
2025-11-06 14:37:52 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:37:52 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 14:37:52 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 379(Long), 1(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 354(Long), 337(Long), 342(Long), 344(Long), 332(Long), 334(Long), 320(Long), 329(Long), 333(Long), 321(Long)
2025-11-06 14:37:52 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 17
2025-11-06 14:37:52 [http-nio-8080-exec-8] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/system/user/list from 127.0.0.1 - 状态: 200 - 耗时: 8681ms
2025-11-06 14:37:52 [http-nio-8080-exec-8] WARN  c.d.c.i.PerformanceInterceptor - 检测到慢请求: POST /api/system/user/list from 127.0.0.1 - 耗时: 8681ms - 超过阈值: 3000ms
2025-11-06 14:38:19 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /system/user/list
2025-11-06 14:38:19 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 14:38:19 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 14:38:19 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 14:38:19 [http-nio-8080-exec-7] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 14:38:19 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 14:38:19 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 14:38:19 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 14:38:19 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:19 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 14:38:19 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 14:38:19 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 14:38:19 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 14:38:20 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 14:38:20 [http-nio-8080-exec-7] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 14:38:20 [http-nio-8080-exec-7] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 14:38:20 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 14:38:20 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 14:38:20 [http-nio-8080-exec-7] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 14:38:20 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured POST /system/user/list
2025-11-06 14:38:20 [http-nio-8080-exec-7] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/system/user/list from 127.0.0.1
2025-11-06 14:38:20 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserList - ==>  Preparing: SELECT DISTINCT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_name, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur_filter ON u.user_id = ur_filter.user_id LEFT JOIN sys_role r_filter ON ur_filter.role_id = r_filter.role_id AND r_filter.del_flag = '0' WHERE u.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY u.create_time DESC
2025-11-06 14:38:20 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserList - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 14:38:20 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserList - <==      Total: 49
2025-11-06 14:38:20 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:20 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 381(Long)
2025-11-06 14:38:20 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:20 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:20 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 380(Long)
2025-11-06 14:38:21 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:21 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:21 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 379(Long)
2025-11-06 14:38:21 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:21 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:21 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 378(Long)
2025-11-06 14:38:21 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:21 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:21 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 377(Long)
2025-11-06 14:38:21 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:21 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:21 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 376(Long)
2025-11-06 14:38:21 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:21 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:21 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 375(Long)
2025-11-06 14:38:21 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:21 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:21 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 374(Long)
2025-11-06 14:38:22 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:22 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:22 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 373(Long)
2025-11-06 14:38:22 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:22 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:22 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 372(Long)
2025-11-06 14:38:22 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:22 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:22 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 371(Long)
2025-11-06 14:38:22 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:22 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:22 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 370(Long)
2025-11-06 14:38:22 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:22 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:22 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 369(Long)
2025-11-06 14:38:22 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:22 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:22 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 357(Long)
2025-11-06 14:38:22 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:22 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:22 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 356(Long)
2025-11-06 14:38:23 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:23 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:23 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 355(Long)
2025-11-06 14:38:23 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:23 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:23 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 354(Long)
2025-11-06 14:38:23 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:23 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:23 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 353(Long)
2025-11-06 14:38:23 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:23 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:23 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 352(Long)
2025-11-06 14:38:23 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:23 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:23 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 351(Long)
2025-11-06 14:38:23 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:23 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:23 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 349(Long)
2025-11-06 14:38:24 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:24 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:24 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 348(Long)
2025-11-06 14:38:24 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:24 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:24 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 347(Long)
2025-11-06 14:38:24 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:24 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:24 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 345(Long)
2025-11-06 14:38:24 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:24 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:24 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 344(Long)
2025-11-06 14:38:24 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:24 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:24 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 343(Long)
2025-11-06 14:38:25 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:25 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:25 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 342(Long)
2025-11-06 14:38:25 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:25 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:25 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 340(Long)
2025-11-06 14:38:25 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:25 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:25 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 339(Long)
2025-11-06 14:38:25 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:25 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:25 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 338(Long)
2025-11-06 14:38:25 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:25 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:25 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 337(Long)
2025-11-06 14:38:25 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:25 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:25 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 336(Long)
2025-11-06 14:38:26 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:26 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:26 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 335(Long)
2025-11-06 14:38:26 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:26 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:26 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 334(Long)
2025-11-06 14:38:26 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:26 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:26 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 333(Long)
2025-11-06 14:38:26 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:26 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:26 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 332(Long)
2025-11-06 14:38:26 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:26 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:26 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 331(Long)
2025-11-06 14:38:26 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:26 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:26 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 330(Long)
2025-11-06 14:38:27 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:27 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:27 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 329(Long)
2025-11-06 14:38:27 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:27 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:27 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 328(Long)
2025-11-06 14:38:28 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:28 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:28 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 327(Long)
2025-11-06 14:38:28 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:28 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:28 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 326(Long)
2025-11-06 14:38:28 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:28 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:28 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 325(Long)
2025-11-06 14:38:28 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:28 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:28 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 324(Long)
2025-11-06 14:38:28 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:28 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:28 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 323(Long)
2025-11-06 14:38:28 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:28 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:28 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 322(Long)
2025-11-06 14:38:29 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:29 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:29 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 321(Long)
2025-11-06 14:38:29 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:29 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:29 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 320(Long)
2025-11-06 14:38:29 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:29 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:29 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 1(Long)
2025-11-06 14:38:29 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:29 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 14:38:29 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 379(Long), 1(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 354(Long), 337(Long), 342(Long), 344(Long), 332(Long), 334(Long), 320(Long), 329(Long), 333(Long), 321(Long)
2025-11-06 14:38:29 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 17
2025-11-06 14:38:29 [http-nio-8080-exec-7] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/system/user/list from 127.0.0.1 - 状态: 200 - 耗时: 9595ms
2025-11-06 14:38:29 [http-nio-8080-exec-7] WARN  c.d.c.i.PerformanceInterceptor - 检测到慢请求: POST /api/system/user/list from 127.0.0.1 - 耗时: 9595ms - 超过阈值: 3000ms
2025-11-06 14:38:36 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /statistics/adminMerchantsPerformanceStatistics
2025-11-06 14:38:36 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /statistics/adminMerchantsAssetStatistics
2025-11-06 14:38:36 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /statistics/adminAgentPerformanceStatistics
2025-11-06 14:38:36 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/adminAgentPerformanceStatistics
2025-11-06 14:38:36 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/adminMerchantsPerformanceStatistics
2025-11-06 14:38:36 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 14:38:36 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 14:38:36 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/adminMerchantsAssetStatistics
2025-11-06 14:38:36 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 14:38:36 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 14:38:36 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 14:38:36 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 14:38:36 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 14:38:36 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 14:38:36 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 14:38:36 [http-nio-8080-exec-4] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 14:38:36 [http-nio-8080-exec-6] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 14:38:36 [http-nio-8080-exec-3] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 14:38:36 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 14:38:36 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 14:38:36 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 14:38:36 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 14:38:36 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 14:38:36 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:36 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 14:38:36 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 14:38:36 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 14:38:36 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:36 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 14:38:36 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 14:38:36 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 14:38:36 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 14:38:36 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 14:38:36 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 14:38:36 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 14:38:36 [http-nio-8080-exec-6] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 14:38:36 [http-nio-8080-exec-6] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 14:38:36 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 14:38:36 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 14:38:36 [http-nio-8080-exec-6] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 14:38:36 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/adminMerchantsAssetStatistics
2025-11-06 14:38:36 [http-nio-8080-exec-6] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/adminMerchantsAssetStatistics from 127.0.0.1
2025-11-06 14:38:36 [http-nio-8080-exec-6] INFO  c.deepreach.common.aspect.LogAspect - LogAspect doBefore 被触发: 统计管理 - getAdminMerchantsAssetStatistics
2025-11-06 14:38:36 [http-nio-8080-exec-6] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志前置处理完成: 统计管理
2025-11-06 14:38:36 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 14:38:36 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 14:38:36 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 14:38:36 [http-nio-8080-exec-4] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 14:38:36 [http-nio-8080-exec-4] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 14:38:36 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 14:38:36 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 14:38:36 [http-nio-8080-exec-4] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 14:38:36 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/adminAgentPerformanceStatistics
2025-11-06 14:38:36 [http-nio-8080-exec-4] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/adminAgentPerformanceStatistics from 127.0.0.1
2025-11-06 14:38:36 [http-nio-8080-exec-4] INFO  c.deepreach.common.aspect.LogAspect - LogAspect doBefore 被触发: 统计管理 - getAdminAgentPerformanceStatistics
2025-11-06 14:38:36 [http-nio-8080-exec-4] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志前置处理完成: 统计管理
2025-11-06 14:38:36 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 14:38:36 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 14:38:37 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 49
2025-11-06 14:38:37 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.sumTotalRechargeByUserIds - ==>  Preparing: SELECT b.user_id AS userId, COALESCE(b.total_recharge, 0) AS totalRecharge FROM user_dr_balance b WHERE b.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 14:38:37 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.sumTotalRechargeByUserIds - ==> Parameters: 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 330(Long), 331(Long), 335(Long), 336(Long), 337(Long), 339(Long), 342(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long)
2025-11-06 14:38:37 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 49
2025-11-06 14:38:37 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.sumTotalRechargeByUserIds - ==>  Preparing: SELECT b.user_id AS userId, COALESCE(b.total_recharge, 0) AS totalRecharge FROM user_dr_balance b WHERE b.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 14:38:37 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.sumTotalRechargeByUserIds - ==> Parameters: 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 330(Long), 331(Long), 335(Long), 336(Long), 337(Long), 339(Long), 342(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 340(Long), 343(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 353(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 380(Long), 381(Long)
2025-11-06 14:38:37 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.sumTotalRechargeByUserIds - <==      Total: 13
2025-11-06 14:38:37 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.A.selectCommissionByUserIds - ==>  Preparing: SELECT agent_user_id AS userId, COALESCE(total_commission, 0) AS totalCommission, COALESCE(settled_commission, 0) AS settledCommission FROM dr_agent_commission_account WHERE agent_user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 14:38:37 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.A.selectCommissionByUserIds - ==> Parameters: 320(Long), 322(Long), 332(Long), 354(Long), 356(Long), 321(Long), 333(Long), 344(Long), 355(Long), 357(Long), 329(Long), 334(Long), 338(Long), 345(Long)
2025-11-06 14:38:37 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.sumTotalRechargeByUserIds - <==      Total: 13
2025-11-06 14:38:37 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.A.selectCommissionByUserIds - ==>  Preparing: SELECT agent_user_id AS userId, COALESCE(total_commission, 0) AS totalCommission, COALESCE(settled_commission, 0) AS settledCommission FROM dr_agent_commission_account WHERE agent_user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 14:38:37 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.A.selectCommissionByUserIds - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 14:38:37 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.A.selectCommissionByUserIds - <==      Total: 6
2025-11-06 14:38:37 [http-nio-8080-exec-6] INFO  c.deepreach.common.aspect.LogAspect - 保存操作日志: 统计管理 - admin - /api/statistics/adminMerchantsAssetStatistics - 成功
2025-11-06 14:38:37 [http-nio-8080-exec-6] INFO  c.deepreach.common.aspect.LogAspect - 操作日志对象详情: operId=null, title=统计管理, operName=admin, operUrl=/api/statistics/adminMerchantsAssetStatistics, status=0
2025-11-06 14:38:37 [http-nio-8080-exec-6] INFO  c.deepreach.common.aspect.LogAspect - 准备异步保存操作日志到数据库...
2025-11-06 14:38:37 [http-nio-8080-exec-6] INFO  c.deepreach.common.aspect.LogAspect - 操作日志异步保存任务已提交
2025-11-06 14:38:37 [http-nio-8080-exec-6] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志返回处理完成: 统计管理
2025-11-06 14:38:37 [pool-3-thread-2] DEBUG c.d.c.c.m.S.insertOperLog - ==>  Preparing: INSERT INTO sys_oper_log ( title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2025-11-06 14:38:37 [http-nio-8080-exec-6] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/adminMerchantsAssetStatistics from 127.0.0.1 - 状态: 200 - 耗时: 479ms
2025-11-06 14:38:37 [pool-3-thread-2] DEBUG c.d.c.c.m.S.insertOperLog - ==> Parameters: 统计管理(String), 0(Integer), com.deepreach.common.core.controller.StatisticsController.getAdminMerchantsAssetStatistics(String), GET(String), 1(Integer), admin(String), ADMIN(String), /api/statistics/adminMerchantsAssetStatistics(String), 127.0.0.1(String), null, (String), {"code":200,"msg":"操作成功","data":{"totalRecharge":151000.00,"settledCommission":800.00,"netValue":150200.00},"timestamp":1762411117318,"error":false,"success":true}(String), 0(Integer), null, 2025-11-06T14:38:36.857238(LocalDateTime), 462(Long)
2025-11-06 14:38:37 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.A.selectCommissionByUserIds - <==      Total: 6
2025-11-06 14:38:37 [http-nio-8080-exec-4] INFO  c.deepreach.common.aspect.LogAspect - 保存操作日志: 统计管理 - admin - /api/statistics/adminAgentPerformanceStatistics - 成功
2025-11-06 14:38:37 [http-nio-8080-exec-4] INFO  c.deepreach.common.aspect.LogAspect - 操作日志对象详情: operId=null, title=统计管理, operName=admin, operUrl=/api/statistics/adminAgentPerformanceStatistics, status=0
2025-11-06 14:38:37 [http-nio-8080-exec-4] INFO  c.deepreach.common.aspect.LogAspect - 准备异步保存操作日志到数据库...
2025-11-06 14:38:37 [http-nio-8080-exec-4] INFO  c.deepreach.common.aspect.LogAspect - 操作日志异步保存任务已提交
2025-11-06 14:38:37 [http-nio-8080-exec-4] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志返回处理完成: 统计管理
2025-11-06 14:38:37 [pool-3-thread-3] DEBUG c.d.c.c.m.S.insertOperLog - ==>  Preparing: INSERT INTO sys_oper_log ( title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2025-11-06 14:38:37 [pool-3-thread-3] DEBUG c.d.c.c.m.S.insertOperLog - ==> Parameters: 统计管理(String), 0(Integer), com.deepreach.common.core.controller.StatisticsController.getAdminAgentPerformanceStatistics(String), GET(String), 1(Integer), admin(String), ADMIN(String), /api/statistics/adminAgentPerformanceStatistics(String), 127.0.0.1(String), null, (String), {"code":200,"msg":"操作成功","data":{"generalAgent":{"identity":"agent_level_1","identityDisplay":"总代","agentCount":5,"totalRecharge":132000.00,"totalCommission":33200.00},"level1Agent":{"identity":"agent_level_2","identityDisplay":"一级代理","agentCount":5,"totalRecharge":33000.00,"totalCommission":3300.00},"level2Agent":{"identity":"agent_level_3","identityDisplay":"二级代理","agentCount":4,"totalRecharge":33000.00,"totalCommission":3300.00},"total":{"identity":"total","identityDisplay":"合计","agentCount":14,"totalRecharge":198000.00,"totalCommission":39800.00}},"timestamp":1762411117501,"error":false,"success":true}(String), 0(Integer), null, 2025-11-06T14:38:36.989137(LocalDateTime), 512(Long)
2025-11-06 14:38:37 [http-nio-8080-exec-4] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/adminAgentPerformanceStatistics from 127.0.0.1 - 状态: 200 - 耗时: 520ms
2025-11-06 14:38:37 [pool-3-thread-2] DEBUG c.d.c.c.m.S.insertOperLog - <==    Updates: 1
2025-11-06 14:38:37 [pool-3-thread-3] DEBUG c.d.c.c.m.S.insertOperLog - <==    Updates: 1
2025-11-06 14:38:46 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 14:38:46 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 14:38:46 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 14:38:46 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:46 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 14:38:46 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 14:38:46 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 14:38:46 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 14:38:46 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 14:38:46 [http-nio-8080-exec-3] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 14:38:46 [http-nio-8080-exec-3] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 14:38:46 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 14:38:46 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 14:38:46 [http-nio-8080-exec-3] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 14:38:46 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/adminMerchantsPerformanceStatistics
2025-11-06 14:38:46 [http-nio-8080-exec-3] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/adminMerchantsPerformanceStatistics from 127.0.0.1
2025-11-06 14:38:46 [http-nio-8080-exec-3] INFO  c.deepreach.common.aspect.LogAspect - LogAspect doBefore 被触发: 统计管理 - getAdminMerchantsPerformanceStatistics
2025-11-06 14:38:46 [http-nio-8080-exec-3] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志前置处理完成: 统计管理
2025-11-06 14:38:46 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 14:38:46 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 14:38:47 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 49
2025-11-06 14:38:47 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.sumTotalRechargeByUserIds - ==>  Preparing: SELECT b.user_id AS userId, COALESCE(b.total_recharge, 0) AS totalRecharge FROM user_dr_balance b WHERE b.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 14:38:47 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.sumTotalRechargeByUserIds - ==> Parameters: 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 330(Long), 331(Long), 335(Long), 336(Long), 337(Long), 339(Long), 342(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long)
2025-11-06 14:38:47 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.sumTotalRechargeByUserIds - <==      Total: 13
2025-11-06 14:38:47 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.countAiCharactersByType - ==>  Preparing: SELECT COALESCE(c.type, 'unknown') AS type, COUNT(*) AS count FROM ai_character c WHERE c.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) GROUP BY COALESCE(c.type, 'unknown')
2025-11-06 14:38:47 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.countAiCharactersByType - ==> Parameters: 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 330(Long), 331(Long), 335(Long), 336(Long), 337(Long), 339(Long), 342(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 340(Long), 343(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 353(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 380(Long), 381(Long)
2025-11-06 14:38:47 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.countAiCharactersByType - <==      Total: 1
2025-11-06 14:38:47 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectAllPlatforms - ==>  Preparing: SELECT platform_id AS platformId, COALESCE(platform_name, 'UNKNOWN_PLATFORM') AS platformName, COALESCE(platform_type, 'unknown') AS platformType FROM platform WHERE status = '0' ORDER BY platform_id
2025-11-06 14:38:47 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectAllPlatforms - ==> Parameters: 
2025-11-06 14:38:47 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectAllPlatforms - <==      Total: 8
2025-11-06 14:38:47 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.countInstancesByType - ==>  Preparing: SELECT i.instance_type AS instanceType, COUNT(*) AS count FROM ai_instance i WHERE i.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) GROUP BY i.instance_type
2025-11-06 14:38:47 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.countInstancesByType - ==> Parameters: 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 330(Long), 331(Long), 335(Long), 336(Long), 337(Long), 339(Long), 342(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 340(Long), 343(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 353(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 380(Long), 381(Long)
2025-11-06 14:38:47 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.countInstancesByType - <==      Total: 2
2025-11-06 14:38:47 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.countInstancesByPlatform - ==>  Preparing: SELECT COALESCE(i.platform_id, 0) AS platformId, COALESCE(p.platform_name, 'UNKNOWN_PLATFORM') AS platformName, COUNT(*) AS count FROM ai_instance i LEFT JOIN platform p ON i.platform_id = p.platform_id WHERE i.instance_type = ? AND i.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) GROUP BY COALESCE(i.platform_id, 0), COALESCE(p.platform_name, 'UNKNOWN_PLATFORM')
2025-11-06 14:38:47 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.countInstancesByPlatform - ==> Parameters: 0(String), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 330(Long), 331(Long), 335(Long), 336(Long), 337(Long), 339(Long), 342(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 340(Long), 343(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 353(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 380(Long), 381(Long)
2025-11-06 14:38:47 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.countInstancesByPlatform - <==      Total: 2
2025-11-06 14:38:47 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.countInstancesByPlatform - ==>  Preparing: SELECT COALESCE(i.platform_id, 0) AS platformId, COALESCE(p.platform_name, 'UNKNOWN_PLATFORM') AS platformName, COUNT(*) AS count FROM ai_instance i LEFT JOIN platform p ON i.platform_id = p.platform_id WHERE i.instance_type = ? AND i.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) GROUP BY COALESCE(i.platform_id, 0), COALESCE(p.platform_name, 'UNKNOWN_PLATFORM')
2025-11-06 14:38:47 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.countInstancesByPlatform - ==> Parameters: 1(String), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 330(Long), 331(Long), 335(Long), 336(Long), 337(Long), 339(Long), 342(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 340(Long), 343(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 353(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 380(Long), 381(Long)
2025-11-06 14:38:47 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.countInstancesByPlatform - <==      Total: 3
2025-11-06 14:38:47 [http-nio-8080-exec-3] INFO  c.deepreach.common.aspect.LogAspect - 保存操作日志: 统计管理 - admin - /api/statistics/adminMerchantsPerformanceStatistics - 成功
2025-11-06 14:38:47 [http-nio-8080-exec-3] INFO  c.deepreach.common.aspect.LogAspect - 操作日志对象详情: operId=null, title=统计管理, operName=admin, operUrl=/api/statistics/adminMerchantsPerformanceStatistics, status=0
2025-11-06 14:38:47 [http-nio-8080-exec-3] INFO  c.deepreach.common.aspect.LogAspect - 准备异步保存操作日志到数据库...
2025-11-06 14:38:47 [http-nio-8080-exec-3] INFO  c.deepreach.common.aspect.LogAspect - 操作日志异步保存任务已提交
2025-11-06 14:38:47 [http-nio-8080-exec-3] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志返回处理完成: 统计管理
2025-11-06 14:38:47 [pool-3-thread-4] DEBUG c.d.c.c.m.S.insertOperLog - ==>  Preparing: INSERT INTO sys_oper_log ( title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2025-11-06 14:38:47 [http-nio-8080-exec-3] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/adminMerchantsPerformanceStatistics from 127.0.0.1 - 状态: 200 - 耗时: 1070ms
2025-11-06 14:38:47 [pool-3-thread-4] DEBUG c.d.c.c.m.S.insertOperLog - ==> Parameters: 统计管理(String), 0(Integer), com.deepreach.common.core.controller.StatisticsController.getAdminMerchantsPerformanceStatistics(String), GET(String), 1(Integer), admin(String), ADMIN(String), /api/statistics/adminMerchantsPerformanceStatistics(String), 127.0.0.1(String), null, (String), {"code":200,"msg":"操作成功","data":{"merchantOverview":{"merchantCount":19,"employeeCount":15,"totalPerformance":151000.00},"aiCharacterOverview":{"totalCharacters":10,"socialAiCount":10,"customerServiceAiCount":0},"marketingInstanceOverview":{"instanceCount":13,"platformBreakdown":{"WhatsApp":7,"Telegram":6}},"prospectingInstanceOverview":{"instanceCount":7,"platformBreakdown":{"SMS":3,"Facebook":3,"Instagram":0,"TikTok":1,"X":0,"GoogleVoice":0}}},"timestamp":1762411127915,"error":false,"success":true}(String), 0(Integer), null, 2025-11-06T14:38:46.849965(LocalDateTime), 1066(Long)
2025-11-06 14:38:48 [pool-3-thread-4] DEBUG c.d.c.c.m.S.insertOperLog - <==    Updates: 1
2025-11-06 14:38:50 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /system/user/list
2025-11-06 14:38:50 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 14:38:50 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 14:38:50 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 14:38:50 [http-nio-8080-exec-7] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 14:38:50 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 14:38:50 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 14:38:51 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 14:38:51 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:51 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 14:38:51 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 14:38:51 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 14:38:51 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 14:38:51 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 14:38:51 [http-nio-8080-exec-7] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 14:38:51 [http-nio-8080-exec-7] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 14:38:51 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 14:38:51 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 14:38:51 [http-nio-8080-exec-7] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 14:38:51 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured POST /system/user/list
2025-11-06 14:38:51 [http-nio-8080-exec-7] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/system/user/list from 127.0.0.1
2025-11-06 14:38:51 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserList - ==>  Preparing: SELECT DISTINCT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_name, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur_filter ON u.user_id = ur_filter.user_id LEFT JOIN sys_role r_filter ON ur_filter.role_id = r_filter.role_id AND r_filter.del_flag = '0' WHERE u.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY u.create_time DESC
2025-11-06 14:38:51 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserList - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 14:38:51 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserList - <==      Total: 49
2025-11-06 14:38:51 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:51 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 381(Long)
2025-11-06 14:38:52 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:52 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:52 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 380(Long)
2025-11-06 14:38:52 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:52 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:52 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 379(Long)
2025-11-06 14:38:52 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:52 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:52 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 378(Long)
2025-11-06 14:38:52 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:52 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:52 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 377(Long)
2025-11-06 14:38:52 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:52 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:52 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 376(Long)
2025-11-06 14:38:52 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:52 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:52 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 375(Long)
2025-11-06 14:38:52 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:52 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:52 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 374(Long)
2025-11-06 14:38:53 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:53 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:53 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 373(Long)
2025-11-06 14:38:53 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:53 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:53 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 372(Long)
2025-11-06 14:38:53 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:53 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:53 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 371(Long)
2025-11-06 14:38:53 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:53 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:53 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 370(Long)
2025-11-06 14:38:53 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:53 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:53 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 369(Long)
2025-11-06 14:38:53 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:53 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:53 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 357(Long)
2025-11-06 14:38:53 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:53 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:53 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 356(Long)
2025-11-06 14:38:54 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:54 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:54 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 355(Long)
2025-11-06 14:38:54 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:54 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:54 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 354(Long)
2025-11-06 14:38:54 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:54 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:54 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 353(Long)
2025-11-06 14:38:54 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:54 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:54 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 352(Long)
2025-11-06 14:38:54 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:54 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:54 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 351(Long)
2025-11-06 14:38:54 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:54 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:54 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 349(Long)
2025-11-06 14:38:55 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:55 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:55 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 348(Long)
2025-11-06 14:38:55 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:55 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:55 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 347(Long)
2025-11-06 14:38:55 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:55 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:55 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 345(Long)
2025-11-06 14:38:55 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:55 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:55 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 344(Long)
2025-11-06 14:38:56 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:56 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:56 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 343(Long)
2025-11-06 14:38:56 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:56 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:56 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 342(Long)
2025-11-06 14:38:56 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:56 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:56 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 340(Long)
2025-11-06 14:38:56 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:56 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:56 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 339(Long)
2025-11-06 14:38:56 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:56 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:56 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 338(Long)
2025-11-06 14:38:56 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:56 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:56 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 337(Long)
2025-11-06 14:38:56 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:56 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:56 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 336(Long)
2025-11-06 14:38:57 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:57 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:57 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 335(Long)
2025-11-06 14:38:57 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:57 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:57 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 334(Long)
2025-11-06 14:38:57 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:57 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:57 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 333(Long)
2025-11-06 14:38:57 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:57 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:57 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 332(Long)
2025-11-06 14:38:57 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:57 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:57 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 331(Long)
2025-11-06 14:38:57 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:57 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:57 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 330(Long)
2025-11-06 14:38:57 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:57 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:57 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 329(Long)
2025-11-06 14:38:58 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:58 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:58 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 328(Long)
2025-11-06 14:38:58 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:58 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:58 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 327(Long)
2025-11-06 14:38:58 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:58 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:58 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 326(Long)
2025-11-06 14:38:58 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:58 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:58 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 325(Long)
2025-11-06 14:38:59 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:59 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:59 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 324(Long)
2025-11-06 14:38:59 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:59 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:59 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 323(Long)
2025-11-06 14:38:59 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:59 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:59 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 322(Long)
2025-11-06 14:38:59 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:59 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:59 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 321(Long)
2025-11-06 14:38:59 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:59 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:59 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 320(Long)
2025-11-06 14:38:59 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:59 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:38:59 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 1(Long)
2025-11-06 14:38:59 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:38:59 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 14:38:59 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 379(Long), 1(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 354(Long), 337(Long), 342(Long), 344(Long), 332(Long), 334(Long), 320(Long), 329(Long), 333(Long), 321(Long)
2025-11-06 14:39:00 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 17
2025-11-06 14:39:00 [http-nio-8080-exec-7] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/system/user/list from 127.0.0.1 - 状态: 200 - 耗时: 9013ms
2025-11-06 14:39:00 [http-nio-8080-exec-7] WARN  c.d.c.i.PerformanceInterceptor - 检测到慢请求: POST /api/system/user/list from 127.0.0.1 - 耗时: 9013ms - 超过阈值: 3000ms
2025-11-06 14:39:20 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /system/user/list
2025-11-06 14:39:20 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 14:39:20 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 14:39:20 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 14:39:20 [http-nio-8080-exec-2] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 14:39:20 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 14:39:20 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 14:39:20 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 14:39:20 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:39:20 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 14:39:20 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 14:39:20 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 14:39:20 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 14:39:21 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 14:39:21 [http-nio-8080-exec-2] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 14:39:21 [http-nio-8080-exec-2] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 14:39:21 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 14:39:21 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 14:39:21 [http-nio-8080-exec-2] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 14:39:21 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /system/user/list
2025-11-06 14:39:21 [http-nio-8080-exec-2] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/system/user/list from 127.0.0.1
2025-11-06 14:39:21 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserList - ==>  Preparing: SELECT DISTINCT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_name, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur_filter ON u.user_id = ur_filter.user_id LEFT JOIN sys_role r_filter ON ur_filter.role_id = r_filter.role_id AND r_filter.del_flag = '0' WHERE u.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY u.create_time DESC
2025-11-06 14:39:21 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserList - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 14:39:22 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserList - <==      Total: 49
2025-11-06 14:39:22 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:39:22 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 381(Long)
2025-11-06 14:39:22 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:39:22 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:39:22 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 380(Long)
2025-11-06 14:39:22 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:39:22 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:39:22 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 379(Long)
2025-11-06 14:39:23 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:39:23 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:39:23 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 378(Long)
2025-11-06 14:39:23 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:39:23 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:39:23 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 377(Long)
2025-11-06 14:39:23 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:39:23 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:39:23 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 376(Long)
2025-11-06 14:39:23 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:39:23 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:39:23 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 375(Long)
2025-11-06 14:39:23 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:39:23 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:39:23 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 374(Long)
2025-11-06 14:39:23 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:39:23 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:39:23 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 373(Long)
2025-11-06 14:39:24 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:39:24 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:39:24 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 372(Long)
2025-11-06 14:39:24 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:39:24 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:39:24 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 371(Long)
2025-11-06 14:39:24 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:39:24 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:39:24 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 370(Long)
2025-11-06 14:39:24 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:39:24 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:39:24 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 369(Long)
2025-11-06 14:39:24 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:39:24 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:39:24 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 357(Long)
2025-11-06 14:39:24 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:39:24 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:39:24 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 356(Long)
2025-11-06 14:39:24 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:39:24 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:39:24 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 355(Long)
2025-11-06 14:39:25 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:39:25 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:39:25 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 354(Long)
2025-11-06 14:39:25 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:39:25 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:39:25 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 353(Long)
2025-11-06 14:39:25 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:39:25 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:39:25 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 352(Long)
2025-11-06 14:39:25 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:39:25 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:39:25 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 351(Long)
2025-11-06 14:39:25 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:39:25 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:39:25 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 349(Long)
2025-11-06 14:39:25 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:39:25 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:39:25 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 348(Long)
2025-11-06 14:39:25 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:39:25 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:39:25 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 347(Long)
2025-11-06 14:39:26 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:39:26 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:39:26 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 345(Long)
2025-11-06 14:39:26 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:39:26 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:39:26 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 344(Long)
2025-11-06 14:39:26 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:39:26 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:39:26 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 343(Long)
2025-11-06 14:39:26 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:39:26 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:39:26 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 342(Long)
2025-11-06 14:39:26 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:39:26 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:39:26 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 340(Long)
2025-11-06 14:39:26 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:39:26 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:39:26 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 339(Long)
2025-11-06 14:39:27 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:39:27 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:39:27 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 338(Long)
2025-11-06 14:39:27 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:39:27 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:39:27 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 337(Long)
2025-11-06 14:39:27 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:39:27 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:39:27 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 336(Long)
2025-11-06 14:39:27 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:39:27 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:39:27 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 335(Long)
2025-11-06 14:39:27 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:39:27 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:39:27 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 334(Long)
2025-11-06 14:39:27 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:39:27 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:39:27 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 333(Long)
2025-11-06 14:39:28 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:39:28 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:39:28 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 332(Long)
2025-11-06 14:39:28 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:39:28 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:39:28 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 331(Long)
2025-11-06 14:39:28 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:39:28 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:39:28 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 330(Long)
2025-11-06 14:39:28 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:39:28 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:39:28 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 329(Long)
2025-11-06 14:39:28 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:39:28 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:39:28 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 328(Long)
2025-11-06 14:39:28 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:39:28 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:39:28 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 327(Long)
2025-11-06 14:39:28 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:39:28 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:39:28 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 326(Long)
2025-11-06 14:39:29 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:39:29 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:39:29 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 325(Long)
2025-11-06 14:39:29 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:39:29 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:39:29 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 324(Long)
2025-11-06 14:39:29 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:39:29 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:39:29 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 323(Long)
2025-11-06 14:39:29 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:39:29 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:39:29 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 322(Long)
2025-11-06 14:39:29 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:39:29 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:39:29 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 321(Long)
2025-11-06 14:39:29 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:39:29 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:39:29 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 320(Long)
2025-11-06 14:39:30 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:39:30 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:39:30 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 1(Long)
2025-11-06 14:39:30 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:39:30 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 14:39:30 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 379(Long), 1(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 354(Long), 337(Long), 342(Long), 344(Long), 332(Long), 334(Long), 320(Long), 329(Long), 333(Long), 321(Long)
2025-11-06 14:39:30 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 17
2025-11-06 14:39:30 [http-nio-8080-exec-2] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/system/user/list from 127.0.0.1 - 状态: 200 - 耗时: 9091ms
2025-11-06 14:39:30 [http-nio-8080-exec-2] WARN  c.d.c.i.PerformanceInterceptor - 检测到慢请求: POST /api/system/user/list from 127.0.0.1 - 耗时: 9091ms - 超过阈值: 3000ms
2025-11-06 14:47:05 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /statistics/agent/commission-overview
2025-11-06 14:47:05 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/agent/commission-overview
2025-11-06 14:47:05 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 14:47:05 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 14:47:05 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 14:47:05 [http-nio-8080-exec-6] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 14:47:05 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 14:47:05 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 14:47:06 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 14:47:06 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:47:06 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 14:47:06 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 14:47:06 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 14:47:06 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 14:47:06 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 14:47:06 [http-nio-8080-exec-6] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 14:47:06 [http-nio-8080-exec-6] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 14:47:06 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 14:47:06 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 14:47:06 [http-nio-8080-exec-6] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 14:47:06 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/agent/commission-overview
2025-11-06 14:47:06 [http-nio-8080-exec-6] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/agent/commission-overview from 127.0.0.1
2025-11-06 14:47:06 [http-nio-8080-exec-6] ERROR c.d.c.e.GlobalExceptionHandler - 系统异常
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource statistics/agent/commission-overview.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:585)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.deepreach.common.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:136)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-11-06 14:47:06 [http-nio-8080-exec-6] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/agent/commission-overview from 127.0.0.1 - 状态: 500 - 耗时: 13ms
2025-11-06 14:47:42 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/agent/commission-overview
2025-11-06 14:47:42 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 14:47:42 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 14:47:42 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 14:47:42 [http-nio-8080-exec-4] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 14:47:42 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 14:47:42 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 14:47:42 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 14:47:42 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:47:42 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 14:47:42 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 14:47:42 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 14:47:42 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 14:47:42 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 14:47:42 [http-nio-8080-exec-4] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 14:47:42 [http-nio-8080-exec-4] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 14:47:42 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 14:47:42 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 14:47:42 [http-nio-8080-exec-4] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 14:47:42 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/agent/commission-overview
2025-11-06 14:47:42 [http-nio-8080-exec-4] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/agent/commission-overview from 127.0.0.1
2025-11-06 14:47:42 [http-nio-8080-exec-4] ERROR c.d.c.e.GlobalExceptionHandler - 系统异常
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource statistics/agent/commission-overview.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:585)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.deepreach.common.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:136)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-11-06 14:47:42 [http-nio-8080-exec-4] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/agent/commission-overview from 127.0.0.1 - 状态: 500 - 耗时: 15ms
2025-11-06 14:48:39 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/agent/commission-overview
2025-11-06 14:48:39 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 14:48:39 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 14:48:39 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 14:48:39 [http-nio-8080-exec-8] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 14:48:39 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 14:48:39 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 14:48:39 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 14:48:39 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:48:39 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 14:48:39 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 14:48:39 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 14:48:39 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 14:48:40 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 14:48:40 [http-nio-8080-exec-8] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 14:48:40 [http-nio-8080-exec-8] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 14:48:40 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 14:48:40 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 14:48:40 [http-nio-8080-exec-8] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 14:48:40 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/agent/commission-overview
2025-11-06 14:48:40 [http-nio-8080-exec-8] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/agent/commission-overview from 127.0.0.1
2025-11-06 14:48:40 [http-nio-8080-exec-8] ERROR c.d.c.e.GlobalExceptionHandler - 系统异常
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource statistics/agent/commission-overview.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:585)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.deepreach.common.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:136)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-11-06 14:48:40 [http-nio-8080-exec-8] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/agent/commission-overview from 127.0.0.1 - 状态: 500 - 耗时: 7ms
2025-11-06 14:49:24 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /system/user/list
2025-11-06 14:49:24 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 14:49:24 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 14:49:24 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 14:49:24 [http-nio-8080-exec-5] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 14:49:24 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 14:49:24 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 14:49:24 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 14:49:24 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:49:24 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 14:49:24 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 14:49:24 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 14:49:24 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 14:49:24 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 14:49:24 [http-nio-8080-exec-5] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 14:49:24 [http-nio-8080-exec-5] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 14:49:24 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 14:49:24 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 14:49:24 [http-nio-8080-exec-5] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 14:49:24 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /system/user/list
2025-11-06 14:49:24 [http-nio-8080-exec-5] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/system/user/list from 127.0.0.1
2025-11-06 14:49:24 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserList - ==>  Preparing: SELECT DISTINCT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_name, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur_filter ON u.user_id = ur_filter.user_id LEFT JOIN sys_role r_filter ON ur_filter.role_id = r_filter.role_id AND r_filter.del_flag = '0' WHERE u.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY u.create_time DESC
2025-11-06 14:49:24 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserList - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 14:49:24 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserList - <==      Total: 49
2025-11-06 14:49:24 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:49:24 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 381(Long)
2025-11-06 14:49:25 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:49:25 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:49:25 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 380(Long)
2025-11-06 14:49:25 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:49:25 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:49:25 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 379(Long)
2025-11-06 14:49:25 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:49:25 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:49:25 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 378(Long)
2025-11-06 14:49:25 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:49:25 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:49:25 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 377(Long)
2025-11-06 14:49:25 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:49:25 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:49:25 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 376(Long)
2025-11-06 14:49:25 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:49:25 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:49:25 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 375(Long)
2025-11-06 14:49:26 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:49:26 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:49:26 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 374(Long)
2025-11-06 14:49:26 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:49:26 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:49:26 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 373(Long)
2025-11-06 14:49:26 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:49:26 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:49:26 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 372(Long)
2025-11-06 14:49:26 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:49:26 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:49:26 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 371(Long)
2025-11-06 14:49:26 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:49:26 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:49:26 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 370(Long)
2025-11-06 14:49:27 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:49:27 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:49:27 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 369(Long)
2025-11-06 14:49:27 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:49:27 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:49:27 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 357(Long)
2025-11-06 14:49:27 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:49:27 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:49:27 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 356(Long)
2025-11-06 14:49:27 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:49:27 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:49:27 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 355(Long)
2025-11-06 14:49:27 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:49:27 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:49:27 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 354(Long)
2025-11-06 14:49:27 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:49:27 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:49:27 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 353(Long)
2025-11-06 14:49:28 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:49:28 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:49:28 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 352(Long)
2025-11-06 14:49:28 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:49:28 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:49:28 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 351(Long)
2025-11-06 14:49:28 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:49:28 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:49:28 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 349(Long)
2025-11-06 14:49:28 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:49:28 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:49:28 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 348(Long)
2025-11-06 14:49:28 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:49:28 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:49:28 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 347(Long)
2025-11-06 14:49:28 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:49:28 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:49:28 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 345(Long)
2025-11-06 14:49:29 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:49:29 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:49:29 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 344(Long)
2025-11-06 14:49:29 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:49:29 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:49:29 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 343(Long)
2025-11-06 14:49:29 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:49:29 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:49:29 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 342(Long)
2025-11-06 14:49:29 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:49:29 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:49:29 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 340(Long)
2025-11-06 14:49:29 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:49:29 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:49:29 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 339(Long)
2025-11-06 14:49:29 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:49:29 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:49:29 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 338(Long)
2025-11-06 14:49:29 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:49:29 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:49:29 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 337(Long)
2025-11-06 14:49:30 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:49:30 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:49:30 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 336(Long)
2025-11-06 14:49:30 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:49:30 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:49:30 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 335(Long)
2025-11-06 14:49:30 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:49:30 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:49:30 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 334(Long)
2025-11-06 14:49:30 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:49:30 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:49:30 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 333(Long)
2025-11-06 14:49:30 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:49:30 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:49:30 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 332(Long)
2025-11-06 14:49:30 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:49:30 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:49:30 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 331(Long)
2025-11-06 14:49:31 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:49:31 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:49:31 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 330(Long)
2025-11-06 14:49:31 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:49:31 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:49:31 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 329(Long)
2025-11-06 14:49:31 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:49:31 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:49:31 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 328(Long)
2025-11-06 14:49:31 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:49:31 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:49:31 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 327(Long)
2025-11-06 14:49:31 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:49:31 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:49:31 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 326(Long)
2025-11-06 14:49:31 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:49:31 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:49:31 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 325(Long)
2025-11-06 14:49:31 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:49:31 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:49:31 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 324(Long)
2025-11-06 14:49:32 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:49:32 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:49:32 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 323(Long)
2025-11-06 14:49:32 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:49:32 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:49:32 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 322(Long)
2025-11-06 14:49:32 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:49:32 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:49:32 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 321(Long)
2025-11-06 14:49:32 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:49:32 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:49:32 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 320(Long)
2025-11-06 14:49:32 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:49:32 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:49:32 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 1(Long)
2025-11-06 14:49:32 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:49:32 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 14:49:32 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 379(Long), 1(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 354(Long), 337(Long), 342(Long), 344(Long), 332(Long), 334(Long), 320(Long), 329(Long), 333(Long), 321(Long)
2025-11-06 14:49:32 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 17
2025-11-06 14:49:32 [http-nio-8080-exec-5] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/system/user/list from 127.0.0.1 - 状态: 200 - 耗时: 8366ms
2025-11-06 14:49:32 [http-nio-8080-exec-5] WARN  c.d.c.i.PerformanceInterceptor - 检测到慢请求: POST /api/system/user/list from 127.0.0.1 - 耗时: 8366ms - 超过阈值: 3000ms
2025-11-06 14:50:24 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/agent/commission-overview
2025-11-06 14:50:24 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 14:50:24 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 14:50:24 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 14:50:24 [http-nio-8080-exec-7] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 14:50:24 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 14:50:24 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 14:50:24 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 14:50:24 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:50:24 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 14:50:25 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 14:50:25 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 14:50:25 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 14:50:25 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 14:50:25 [http-nio-8080-exec-7] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 14:50:25 [http-nio-8080-exec-7] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 14:50:25 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 14:50:25 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 14:50:25 [http-nio-8080-exec-7] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 14:50:25 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/agent/commission-overview
2025-11-06 14:50:25 [http-nio-8080-exec-7] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/agent/commission-overview from 127.0.0.1
2025-11-06 14:50:25 [http-nio-8080-exec-7] ERROR c.d.c.e.GlobalExceptionHandler - 系统异常
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource statistics/agent/commission-overview.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:585)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.deepreach.common.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:136)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-11-06 14:50:25 [http-nio-8080-exec-7] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/agent/commission-overview from 127.0.0.1 - 状态: 500 - 耗时: 7ms
2025-11-06 14:50:33 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing POST /system/user/list
2025-11-06 14:50:33 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 14:50:33 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 14:50:33 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 14:50:33 [http-nio-8080-exec-9] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 14:50:33 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 14:50:33 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 14:50:33 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 14:50:33 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:50:33 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 14:50:33 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 14:50:33 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 14:50:33 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 14:50:33 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 14:50:33 [http-nio-8080-exec-9] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 14:50:33 [http-nio-8080-exec-9] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 14:50:33 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 14:50:33 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 14:50:33 [http-nio-8080-exec-9] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 14:50:33 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured POST /system/user/list
2025-11-06 14:50:33 [http-nio-8080-exec-9] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/system/user/list from 127.0.0.1
2025-11-06 14:50:33 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserList - ==>  Preparing: SELECT DISTINCT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_name, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur_filter ON u.user_id = ur_filter.user_id LEFT JOIN sys_role r_filter ON ur_filter.role_id = r_filter.role_id AND r_filter.del_flag = '0' WHERE u.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY u.create_time DESC
2025-11-06 14:50:33 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserList - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 14:50:34 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserList - <==      Total: 49
2025-11-06 14:50:34 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:50:34 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 381(Long)
2025-11-06 14:50:34 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:50:34 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:50:34 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 380(Long)
2025-11-06 14:50:34 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:50:34 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:50:34 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 379(Long)
2025-11-06 14:50:34 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:50:34 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:50:34 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 378(Long)
2025-11-06 14:50:34 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:50:34 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:50:34 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 377(Long)
2025-11-06 14:50:35 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:50:35 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:50:35 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 376(Long)
2025-11-06 14:50:35 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:50:35 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:50:35 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 375(Long)
2025-11-06 14:50:35 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:50:35 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:50:35 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 374(Long)
2025-11-06 14:50:35 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:50:35 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:50:35 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 373(Long)
2025-11-06 14:50:35 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:50:35 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:50:35 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 372(Long)
2025-11-06 14:50:35 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:50:35 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:50:35 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 371(Long)
2025-11-06 14:50:35 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:50:35 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:50:35 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 370(Long)
2025-11-06 14:50:36 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:50:36 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:50:36 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 369(Long)
2025-11-06 14:50:36 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:50:36 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:50:36 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 357(Long)
2025-11-06 14:50:36 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:50:36 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:50:36 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 356(Long)
2025-11-06 14:50:36 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:50:36 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:50:36 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 355(Long)
2025-11-06 14:50:37 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:50:37 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:50:37 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 354(Long)
2025-11-06 14:50:37 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:50:37 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:50:37 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 353(Long)
2025-11-06 14:50:37 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:50:37 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:50:37 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 352(Long)
2025-11-06 14:50:37 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:50:37 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:50:37 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 351(Long)
2025-11-06 14:50:37 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:50:37 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:50:37 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 349(Long)
2025-11-06 14:50:37 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:50:37 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:50:37 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 348(Long)
2025-11-06 14:50:38 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:50:38 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:50:38 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 347(Long)
2025-11-06 14:50:38 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:50:38 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:50:38 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 345(Long)
2025-11-06 14:50:38 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:50:38 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:50:38 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 344(Long)
2025-11-06 14:50:38 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:50:38 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:50:38 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 343(Long)
2025-11-06 14:50:38 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:50:38 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:50:38 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 342(Long)
2025-11-06 14:50:39 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:50:39 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:50:39 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 340(Long)
2025-11-06 14:50:39 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:50:39 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:50:39 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 339(Long)
2025-11-06 14:50:39 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:50:39 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:50:39 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 338(Long)
2025-11-06 14:50:39 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:50:39 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:50:39 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 337(Long)
2025-11-06 14:50:39 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:50:39 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:50:39 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 336(Long)
2025-11-06 14:50:40 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:50:40 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:50:40 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 335(Long)
2025-11-06 14:50:40 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:50:40 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:50:40 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 334(Long)
2025-11-06 14:50:40 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:50:40 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:50:40 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 333(Long)
2025-11-06 14:50:40 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:50:40 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:50:40 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 332(Long)
2025-11-06 14:50:40 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:50:40 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:50:40 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 331(Long)
2025-11-06 14:50:40 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:50:40 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:50:40 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 330(Long)
2025-11-06 14:50:40 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:50:40 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:50:40 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 329(Long)
2025-11-06 14:50:41 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:50:41 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:50:41 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 328(Long)
2025-11-06 14:50:41 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:50:41 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:50:41 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 327(Long)
2025-11-06 14:50:41 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:50:41 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:50:41 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 326(Long)
2025-11-06 14:50:41 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:50:41 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:50:41 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 325(Long)
2025-11-06 14:50:41 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:50:41 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:50:41 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 324(Long)
2025-11-06 14:50:41 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:50:41 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:50:41 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 323(Long)
2025-11-06 14:50:42 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:50:42 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:50:42 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 322(Long)
2025-11-06 14:50:42 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:50:42 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:50:42 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 321(Long)
2025-11-06 14:50:42 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:50:42 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:50:42 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 320(Long)
2025-11-06 14:50:42 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:50:42 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:50:42 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 1(Long)
2025-11-06 14:50:42 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:50:42 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 14:50:42 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 379(Long), 1(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 354(Long), 337(Long), 342(Long), 344(Long), 332(Long), 334(Long), 320(Long), 329(Long), 333(Long), 321(Long)
2025-11-06 14:50:42 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 17
2025-11-06 14:50:42 [http-nio-8080-exec-9] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/system/user/list from 127.0.0.1 - 状态: 200 - 耗时: 9072ms
2025-11-06 14:50:42 [http-nio-8080-exec-9] WARN  c.d.c.i.PerformanceInterceptor - 检测到慢请求: POST /api/system/user/list from 127.0.0.1 - 耗时: 9072ms - 超过阈值: 3000ms
2025-11-06 14:50:46 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/agent/commission-overview
2025-11-06 14:50:46 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 14:50:46 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 14:50:46 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 14:50:46 [http-nio-8080-exec-2] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 14:50:46 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 14:50:46 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 14:50:46 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 14:50:46 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:50:46 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 14:50:46 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 14:50:46 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 14:50:46 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 14:50:46 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 14:50:46 [http-nio-8080-exec-2] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 14:50:46 [http-nio-8080-exec-2] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 14:50:46 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 14:50:46 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 14:50:46 [http-nio-8080-exec-2] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 14:50:46 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/agent/commission-overview
2025-11-06 14:50:46 [http-nio-8080-exec-2] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/agent/commission-overview from 127.0.0.1
2025-11-06 14:50:46 [http-nio-8080-exec-2] ERROR c.d.c.e.GlobalExceptionHandler - 系统异常
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource statistics/agent/commission-overview.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:585)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.deepreach.common.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:136)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-11-06 14:50:46 [http-nio-8080-exec-2] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/agent/commission-overview from 127.0.0.1 - 状态: 500 - 耗时: 4ms
2025-11-06 14:50:57 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /system/user/list
2025-11-06 14:50:57 [http-nio-8080-exec-1] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 14:50:57 [http-nio-8080-exec-1] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 14:50:57 [http-nio-8080-exec-1] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 14:50:57 [http-nio-8080-exec-1] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 14:50:57 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 14:50:57 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 14:50:57 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 14:50:57 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:50:57 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 14:50:57 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 14:50:57 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 14:50:57 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 14:50:58 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 14:50:58 [http-nio-8080-exec-1] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 14:50:58 [http-nio-8080-exec-1] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 14:50:58 [http-nio-8080-exec-1] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 14:50:58 [http-nio-8080-exec-1] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 14:50:58 [http-nio-8080-exec-1] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 14:50:58 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /system/user/list
2025-11-06 14:50:58 [http-nio-8080-exec-1] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/system/user/list from 127.0.0.1
2025-11-06 14:50:58 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectUserList - ==>  Preparing: SELECT DISTINCT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_name, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur_filter ON u.user_id = ur_filter.user_id LEFT JOIN sys_role r_filter ON ur_filter.role_id = r_filter.role_id AND r_filter.del_flag = '0' WHERE u.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY u.create_time DESC
2025-11-06 14:50:58 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectUserList - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 14:50:58 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectUserList - <==      Total: 49
2025-11-06 14:50:58 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:50:58 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 381(Long)
2025-11-06 14:50:58 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:50:58 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:50:58 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 380(Long)
2025-11-06 14:50:58 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:50:58 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:50:58 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 379(Long)
2025-11-06 14:50:59 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:50:59 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:50:59 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 378(Long)
2025-11-06 14:50:59 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:50:59 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:50:59 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 377(Long)
2025-11-06 14:50:59 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:50:59 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:50:59 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 376(Long)
2025-11-06 14:50:59 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:50:59 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:50:59 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 375(Long)
2025-11-06 14:50:59 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:50:59 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:50:59 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 374(Long)
2025-11-06 14:50:59 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:50:59 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:50:59 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 373(Long)
2025-11-06 14:51:00 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:51:00 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:51:00 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 372(Long)
2025-11-06 14:51:00 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:51:00 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:51:00 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 371(Long)
2025-11-06 14:51:00 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:51:00 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:51:00 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 370(Long)
2025-11-06 14:51:00 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:51:00 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:51:00 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 369(Long)
2025-11-06 14:51:00 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:51:00 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:51:00 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 357(Long)
2025-11-06 14:51:01 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:51:01 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:51:01 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 356(Long)
2025-11-06 14:51:01 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:51:01 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:51:01 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 355(Long)
2025-11-06 14:51:01 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:51:01 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:51:01 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 354(Long)
2025-11-06 14:51:02 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:51:02 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:51:02 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 353(Long)
2025-11-06 14:51:02 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:51:02 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:51:02 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 352(Long)
2025-11-06 14:51:02 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:51:02 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:51:02 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 351(Long)
2025-11-06 14:51:02 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:51:02 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:51:02 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 349(Long)
2025-11-06 14:51:02 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:51:02 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:51:02 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 348(Long)
2025-11-06 14:51:02 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:51:02 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:51:02 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 347(Long)
2025-11-06 14:51:03 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:51:03 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:51:03 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 345(Long)
2025-11-06 14:51:03 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:51:03 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:51:03 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 344(Long)
2025-11-06 14:51:03 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:51:03 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:51:03 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 343(Long)
2025-11-06 14:51:03 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:51:03 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:51:03 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 342(Long)
2025-11-06 14:51:03 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:51:03 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:51:03 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 340(Long)
2025-11-06 14:51:03 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:51:03 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:51:03 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 339(Long)
2025-11-06 14:51:04 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:51:04 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:51:04 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 338(Long)
2025-11-06 14:51:04 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:51:04 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:51:04 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 337(Long)
2025-11-06 14:51:04 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:51:04 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:51:04 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 336(Long)
2025-11-06 14:51:04 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:51:04 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:51:04 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 335(Long)
2025-11-06 14:51:04 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:51:04 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:51:04 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 334(Long)
2025-11-06 14:51:04 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:51:04 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:51:04 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 333(Long)
2025-11-06 14:51:05 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:51:05 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:51:05 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 332(Long)
2025-11-06 14:51:05 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:51:05 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:51:05 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 331(Long)
2025-11-06 14:51:05 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:51:05 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:51:05 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 330(Long)
2025-11-06 14:51:05 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:51:05 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:51:05 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 329(Long)
2025-11-06 14:51:06 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:51:06 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:51:06 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 328(Long)
2025-11-06 14:51:06 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:51:06 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:51:06 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 327(Long)
2025-11-06 14:51:06 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:51:06 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:51:06 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 326(Long)
2025-11-06 14:51:06 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:51:06 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:51:06 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 325(Long)
2025-11-06 14:51:06 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:51:06 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:51:06 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 324(Long)
2025-11-06 14:51:06 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:51:06 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:51:06 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 323(Long)
2025-11-06 14:51:06 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:51:06 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:51:06 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 322(Long)
2025-11-06 14:51:07 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:51:07 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:51:07 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 321(Long)
2025-11-06 14:51:07 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:51:07 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:51:07 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 320(Long)
2025-11-06 14:51:07 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:51:07 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:51:07 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 1(Long)
2025-11-06 14:51:07 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:51:07 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 14:51:07 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 379(Long), 1(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 354(Long), 337(Long), 342(Long), 344(Long), 332(Long), 334(Long), 320(Long), 329(Long), 333(Long), 321(Long)
2025-11-06 14:51:08 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 17
2025-11-06 14:51:08 [http-nio-8080-exec-1] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/system/user/list from 127.0.0.1 - 状态: 200 - 耗时: 9922ms
2025-11-06 14:51:08 [http-nio-8080-exec-1] WARN  c.d.c.i.PerformanceInterceptor - 检测到慢请求: POST /api/system/user/list from 127.0.0.1 - 耗时: 9922ms - 超过阈值: 3000ms
2025-11-06 14:52:20 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /agent/commission/1/records
2025-11-06 14:52:20 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 14:52:20 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 14:52:20 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 14:52:20 [http-nio-8080-exec-6] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 14:52:20 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 14:52:20 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 14:52:21 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 14:52:21 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:52:21 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 14:52:21 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 14:52:21 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 14:52:21 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 14:52:21 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 14:52:21 [http-nio-8080-exec-6] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 14:52:21 [http-nio-8080-exec-6] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 14:52:21 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 14:52:21 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 14:52:21 [http-nio-8080-exec-6] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 14:52:21 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /agent/commission/1/records
2025-11-06 14:52:21 [http-nio-8080-exec-6] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/agent/commission/1/records from 127.0.0.1
2025-11-06 14:52:21 [http-nio-8080-exec-6] DEBUG c.d.w.m.A.selectRecordsByAgent - ==>  Preparing: select r.record_id, r.agent_user_id, r.agent_dept_id, r.buyer_user_id, buyer.username as buyerUsername, r.trigger_billing_id, br.bill_no, r.trigger_amount, r.commission_amount, r.commission_rate, r.hierarchy_level, r.business_type, r.status, r.description, r.create_time from dr_agent_commission_record r left join sys_user buyer on r.buyer_user_id = buyer.user_id left join dr_billing_record br on r.trigger_billing_id = br.bill_id where r.agent_user_id = ? and r.direction = '+' and r.business_type = 'RECHARGE_COMMISSION' order by r.create_time desc
2025-11-06 14:52:21 [http-nio-8080-exec-6] DEBUG c.d.w.m.A.selectRecordsByAgent - ==> Parameters: 1(Long)
2025-11-06 14:52:21 [http-nio-8080-exec-6] DEBUG c.d.w.m.A.selectRecordsByAgent - <==      Total: 0
2025-11-06 14:52:21 [http-nio-8080-exec-6] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/agent/commission/1/records from 127.0.0.1 - 状态: 200 - 耗时: 160ms
2025-11-06 14:52:24 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/agent/commission-overview
2025-11-06 14:52:24 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 14:52:24 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 14:52:24 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 14:52:24 [http-nio-8080-exec-4] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 14:52:24 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 14:52:24 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 14:52:24 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 14:52:24 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:52:24 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 14:52:24 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 14:52:24 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 14:52:24 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 14:52:24 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 14:52:24 [http-nio-8080-exec-4] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 14:52:24 [http-nio-8080-exec-4] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 14:52:24 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 14:52:24 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 14:52:24 [http-nio-8080-exec-4] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 14:52:24 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/agent/commission-overview
2025-11-06 14:52:24 [http-nio-8080-exec-4] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/agent/commission-overview from 127.0.0.1
2025-11-06 14:52:24 [http-nio-8080-exec-4] ERROR c.d.c.e.GlobalExceptionHandler - 系统异常
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource statistics/agent/commission-overview.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:585)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.deepreach.common.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:136)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-11-06 14:52:24 [http-nio-8080-exec-4] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/agent/commission-overview from 127.0.0.1 - 状态: 500 - 耗时: 13ms
2025-11-06 14:52:52 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing POST /agent/commission/1/records
2025-11-06 14:52:52 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 14:52:52 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 14:52:52 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 14:52:52 [http-nio-8080-exec-8] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 14:52:52 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 14:52:52 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 14:52:53 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 14:52:53 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:52:53 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 14:52:53 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 14:52:53 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 14:52:53 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 14:52:53 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 14:52:53 [http-nio-8080-exec-8] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 14:52:53 [http-nio-8080-exec-8] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 14:52:53 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 14:52:53 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 14:52:53 [http-nio-8080-exec-8] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 14:52:53 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured POST /agent/commission/1/records
2025-11-06 14:52:53 [http-nio-8080-exec-8] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/agent/commission/1/records from 127.0.0.1
2025-11-06 14:52:53 [http-nio-8080-exec-8] DEBUG c.d.w.m.A.selectRecordsByAgent - ==>  Preparing: select r.record_id, r.agent_user_id, r.agent_dept_id, r.buyer_user_id, buyer.username as buyerUsername, r.trigger_billing_id, br.bill_no, r.trigger_amount, r.commission_amount, r.commission_rate, r.hierarchy_level, r.business_type, r.status, r.description, r.create_time from dr_agent_commission_record r left join sys_user buyer on r.buyer_user_id = buyer.user_id left join dr_billing_record br on r.trigger_billing_id = br.bill_id where r.agent_user_id = ? and r.direction = '+' and r.business_type = 'RECHARGE_COMMISSION' order by r.create_time desc
2025-11-06 14:52:53 [http-nio-8080-exec-8] DEBUG c.d.w.m.A.selectRecordsByAgent - ==> Parameters: 1(Long)
2025-11-06 14:52:53 [http-nio-8080-exec-8] DEBUG c.d.w.m.A.selectRecordsByAgent - <==      Total: 0
2025-11-06 14:52:53 [http-nio-8080-exec-8] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/agent/commission/1/records from 127.0.0.1 - 状态: 200 - 耗时: 157ms
2025-11-06 14:53:41 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /agent/commission/settlement/admin/list
2025-11-06 14:53:41 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 14:53:41 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 14:53:41 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 14:53:41 [http-nio-8080-exec-3] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 14:53:41 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 14:53:41 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 14:53:42 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 14:53:42 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:53:42 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 14:53:42 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 14:53:42 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 14:53:42 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 14:53:42 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 14:53:42 [http-nio-8080-exec-3] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 14:53:42 [http-nio-8080-exec-3] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 14:53:42 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 14:53:42 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 14:53:42 [http-nio-8080-exec-3] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 14:53:42 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /agent/commission/settlement/admin/list
2025-11-06 14:53:42 [http-nio-8080-exec-3] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/agent/commission/settlement/admin/list from 127.0.0.1
2025-11-06 14:53:42 [http-nio-8080-exec-3] DEBUG c.d.w.m.A.searchAdminSettlements - ==>  Preparing: select s.settlement_id, s.agent_user_id, u.username as agent_username, roles.agent_role_keys, s.request_amount, s.approved_amount, s.status, s.approval_user_id, s.approval_time, s.remark, s.extra_data, s.create_by, s.create_time, s.update_by, s.update_time from dr_agent_commission_settlement s left join sys_user u on s.agent_user_id = u.user_id left join ( select ur.user_id, group_concat(distinct r.role_key order by r.role_key) as agent_role_keys from sys_user_role ur join sys_role r on ur.role_id = r.role_id and r.del_flag = '0' group by ur.user_id ) roles on roles.user_id = s.agent_user_id order by s.create_time desc
2025-11-06 14:53:42 [http-nio-8080-exec-3] DEBUG c.d.w.m.A.searchAdminSettlements - ==> Parameters: 
2025-11-06 14:53:42 [http-nio-8080-exec-3] DEBUG c.d.w.m.A.searchAdminSettlements - <==      Total: 4
2025-11-06 14:53:43 [http-nio-8080-exec-3] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/agent/commission/settlement/admin/list from 127.0.0.1 - 状态: 200 - 耗时: 170ms
2025-11-06 14:56:08 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/agent/commission-overview
2025-11-06 14:56:08 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing POST /agent/commission/settlement/admin/list
2025-11-06 14:56:08 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 14:56:08 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 14:56:08 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 14:56:08 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 14:56:08 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 14:56:08 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 14:56:08 [http-nio-8080-exec-2] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 14:56:08 [http-nio-8080-exec-9] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 14:56:08 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 14:56:08 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 14:56:08 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 14:56:08 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 14:56:09 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 14:56:09 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:56:09 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 14:56:09 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 14:56:09 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:56:09 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 14:56:09 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 14:56:09 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 14:56:09 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 14:56:09 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 14:56:09 [http-nio-8080-exec-2] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 14:56:09 [http-nio-8080-exec-2] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 14:56:09 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 14:56:09 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 14:56:09 [http-nio-8080-exec-2] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 14:56:09 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/agent/commission-overview
2025-11-06 14:56:09 [http-nio-8080-exec-2] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/agent/commission-overview from 127.0.0.1
2025-11-06 14:56:09 [http-nio-8080-exec-2] ERROR c.d.c.e.GlobalExceptionHandler - 系统异常
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource statistics/agent/commission-overview.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:585)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.deepreach.common.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:136)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-11-06 14:56:09 [http-nio-8080-exec-2] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/agent/commission-overview from 127.0.0.1 - 状态: 500 - 耗时: 6ms
2025-11-06 14:56:09 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 14:56:09 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 14:56:09 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 14:56:09 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 14:56:09 [http-nio-8080-exec-9] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 14:56:09 [http-nio-8080-exec-9] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 14:56:09 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 14:56:09 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 14:56:09 [http-nio-8080-exec-9] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 14:56:09 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured POST /agent/commission/settlement/admin/list
2025-11-06 14:56:09 [http-nio-8080-exec-9] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/agent/commission/settlement/admin/list from 127.0.0.1
2025-11-06 14:56:09 [http-nio-8080-exec-9] DEBUG c.d.w.m.A.searchAdminSettlements - ==>  Preparing: select s.settlement_id, s.agent_user_id, u.username as agent_username, roles.agent_role_keys, s.request_amount, s.approved_amount, s.status, s.approval_user_id, s.approval_time, s.remark, s.extra_data, s.create_by, s.create_time, s.update_by, s.update_time from dr_agent_commission_settlement s left join sys_user u on s.agent_user_id = u.user_id left join ( select ur.user_id, group_concat(distinct r.role_key order by r.role_key) as agent_role_keys from sys_user_role ur join sys_role r on ur.role_id = r.role_id and r.del_flag = '0' group by ur.user_id ) roles on roles.user_id = s.agent_user_id order by s.create_time desc
2025-11-06 14:56:09 [http-nio-8080-exec-9] DEBUG c.d.w.m.A.searchAdminSettlements - ==> Parameters: 
2025-11-06 14:56:09 [http-nio-8080-exec-9] DEBUG c.d.w.m.A.searchAdminSettlements - <==      Total: 4
2025-11-06 14:56:09 [http-nio-8080-exec-9] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/agent/commission/settlement/admin/list from 127.0.0.1 - 状态: 200 - 耗时: 161ms
2025-11-06 14:56:21 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing POST /agent/commission/settlement/admin/list
2025-11-06 14:56:21 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/agent/commission-overview
2025-11-06 14:56:21 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 14:56:21 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 14:56:21 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 14:56:21 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 14:56:21 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 14:56:21 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 14:56:21 [http-nio-8080-exec-6] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 14:56:21 [http-nio-8080-exec-10] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 14:56:21 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 14:56:21 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 14:56:21 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 14:56:21 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 14:56:21 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 14:56:21 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:56:21 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 14:56:21 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 14:56:21 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:56:21 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 14:56:21 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 14:56:21 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 14:56:21 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 14:56:21 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 14:56:21 [http-nio-8080-exec-6] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 14:56:21 [http-nio-8080-exec-6] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 14:56:21 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 14:56:21 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 14:56:21 [http-nio-8080-exec-6] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 14:56:21 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/agent/commission-overview
2025-11-06 14:56:21 [http-nio-8080-exec-6] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/agent/commission-overview from 127.0.0.1
2025-11-06 14:56:21 [http-nio-8080-exec-6] ERROR c.d.c.e.GlobalExceptionHandler - 系统异常
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource statistics/agent/commission-overview.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:585)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.deepreach.common.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:136)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-11-06 14:56:21 [http-nio-8080-exec-6] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/agent/commission-overview from 127.0.0.1 - 状态: 500 - 耗时: 16ms
2025-11-06 14:56:21 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 14:56:21 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 14:56:21 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 14:56:21 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 14:56:21 [http-nio-8080-exec-10] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 14:56:21 [http-nio-8080-exec-10] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 14:56:21 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 14:56:21 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 14:56:21 [http-nio-8080-exec-10] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 14:56:21 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured POST /agent/commission/settlement/admin/list
2025-11-06 14:56:21 [http-nio-8080-exec-10] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/agent/commission/settlement/admin/list from 127.0.0.1
2025-11-06 14:56:21 [http-nio-8080-exec-10] DEBUG c.d.w.m.A.searchAdminSettlements - ==>  Preparing: select s.settlement_id, s.agent_user_id, u.username as agent_username, roles.agent_role_keys, s.request_amount, s.approved_amount, s.status, s.approval_user_id, s.approval_time, s.remark, s.extra_data, s.create_by, s.create_time, s.update_by, s.update_time from dr_agent_commission_settlement s left join sys_user u on s.agent_user_id = u.user_id left join ( select ur.user_id, group_concat(distinct r.role_key order by r.role_key) as agent_role_keys from sys_user_role ur join sys_role r on ur.role_id = r.role_id and r.del_flag = '0' group by ur.user_id ) roles on roles.user_id = s.agent_user_id order by s.create_time desc
2025-11-06 14:56:21 [http-nio-8080-exec-10] DEBUG c.d.w.m.A.searchAdminSettlements - ==> Parameters: 
2025-11-06 14:56:22 [http-nio-8080-exec-10] DEBUG c.d.w.m.A.searchAdminSettlements - <==      Total: 4
2025-11-06 14:56:22 [http-nio-8080-exec-10] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/agent/commission/settlement/admin/list from 127.0.0.1 - 状态: 200 - 耗时: 487ms
2025-11-06 14:56:54 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/agent/commission-overview
2025-11-06 14:56:54 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 14:56:54 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 14:56:54 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 14:56:54 [http-nio-8080-exec-8] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 14:56:54 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 14:56:54 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 14:56:54 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 14:56:54 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:56:54 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 14:56:54 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 14:56:54 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 14:56:54 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 14:56:55 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 14:56:55 [http-nio-8080-exec-8] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 14:56:55 [http-nio-8080-exec-8] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 14:56:55 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 14:56:55 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 14:56:55 [http-nio-8080-exec-8] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 14:56:55 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/agent/commission-overview
2025-11-06 14:56:55 [http-nio-8080-exec-8] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/agent/commission-overview from 127.0.0.1
2025-11-06 14:56:55 [http-nio-8080-exec-8] ERROR c.d.c.e.GlobalExceptionHandler - 系统异常
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource statistics/agent/commission-overview.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:585)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.deepreach.common.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:136)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-11-06 14:56:55 [http-nio-8080-exec-8] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/agent/commission-overview from 127.0.0.1 - 状态: 500 - 耗时: 21ms
2025-11-06 14:56:55 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /agent/commission/1/records
2025-11-06 14:56:55 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 14:56:55 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 14:56:55 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 14:56:55 [http-nio-8080-exec-5] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 14:56:55 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 14:56:55 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 14:56:55 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 14:56:55 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:56:55 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 14:56:55 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 14:56:55 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 14:56:55 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 14:56:55 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 14:56:55 [http-nio-8080-exec-5] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 14:56:55 [http-nio-8080-exec-5] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 14:56:55 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 14:56:55 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 14:56:55 [http-nio-8080-exec-5] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 14:56:55 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /agent/commission/1/records
2025-11-06 14:56:55 [http-nio-8080-exec-5] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/agent/commission/1/records from 127.0.0.1
2025-11-06 14:56:55 [http-nio-8080-exec-5] DEBUG c.d.w.m.A.selectRecordsByAgent - ==>  Preparing: select r.record_id, r.agent_user_id, r.agent_dept_id, r.buyer_user_id, buyer.username as buyerUsername, r.trigger_billing_id, br.bill_no, r.trigger_amount, r.commission_amount, r.commission_rate, r.hierarchy_level, r.business_type, r.status, r.description, r.create_time from dr_agent_commission_record r left join sys_user buyer on r.buyer_user_id = buyer.user_id left join dr_billing_record br on r.trigger_billing_id = br.bill_id where r.agent_user_id = ? and r.direction = '+' and r.business_type = 'RECHARGE_COMMISSION' order by r.create_time desc
2025-11-06 14:56:55 [http-nio-8080-exec-5] DEBUG c.d.w.m.A.selectRecordsByAgent - ==> Parameters: 1(Long)
2025-11-06 14:56:55 [http-nio-8080-exec-5] DEBUG c.d.w.m.A.selectRecordsByAgent - <==      Total: 0
2025-11-06 14:56:55 [http-nio-8080-exec-5] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/agent/commission/1/records from 127.0.0.1 - 状态: 200 - 耗时: 161ms
2025-11-06 14:56:57 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/agent/commission-overview
2025-11-06 14:56:57 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /agent/commission/settlement/admin/list
2025-11-06 14:56:57 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 14:56:57 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 14:56:57 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 14:56:57 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 14:56:57 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 14:56:57 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 14:56:57 [http-nio-8080-exec-2] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 14:56:57 [http-nio-8080-exec-7] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 14:56:57 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 14:56:57 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 14:56:57 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 14:56:57 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 14:56:57 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 14:56:57 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:56:57 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 14:56:57 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 14:56:57 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:56:57 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 14:56:57 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 14:56:57 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 14:56:57 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 14:56:57 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 14:56:57 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 14:56:57 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 14:56:57 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 14:56:57 [http-nio-8080-exec-2] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 14:56:57 [http-nio-8080-exec-2] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 14:56:57 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 14:56:57 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 14:56:57 [http-nio-8080-exec-2] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 14:56:57 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 14:56:57 [http-nio-8080-exec-7] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 14:56:57 [http-nio-8080-exec-7] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 14:56:57 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 14:56:57 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 14:56:57 [http-nio-8080-exec-7] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 14:56:57 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/agent/commission-overview
2025-11-06 14:56:57 [http-nio-8080-exec-2] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/agent/commission-overview from 127.0.0.1
2025-11-06 14:56:57 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured POST /agent/commission/settlement/admin/list
2025-11-06 14:56:57 [http-nio-8080-exec-7] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/agent/commission/settlement/admin/list from 127.0.0.1
2025-11-06 14:56:57 [http-nio-8080-exec-7] DEBUG c.d.w.m.A.searchAdminSettlements - ==>  Preparing: select s.settlement_id, s.agent_user_id, u.username as agent_username, roles.agent_role_keys, s.request_amount, s.approved_amount, s.status, s.approval_user_id, s.approval_time, s.remark, s.extra_data, s.create_by, s.create_time, s.update_by, s.update_time from dr_agent_commission_settlement s left join sys_user u on s.agent_user_id = u.user_id left join ( select ur.user_id, group_concat(distinct r.role_key order by r.role_key) as agent_role_keys from sys_user_role ur join sys_role r on ur.role_id = r.role_id and r.del_flag = '0' group by ur.user_id ) roles on roles.user_id = s.agent_user_id order by s.create_time desc
2025-11-06 14:56:57 [http-nio-8080-exec-7] DEBUG c.d.w.m.A.searchAdminSettlements - ==> Parameters: 
2025-11-06 14:56:57 [http-nio-8080-exec-2] ERROR c.d.c.e.GlobalExceptionHandler - 系统异常
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource statistics/agent/commission-overview.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:585)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.deepreach.common.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:136)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-11-06 14:56:57 [http-nio-8080-exec-2] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/agent/commission-overview from 127.0.0.1 - 状态: 500 - 耗时: 2ms
2025-11-06 14:56:57 [http-nio-8080-exec-7] DEBUG c.d.w.m.A.searchAdminSettlements - <==      Total: 4
2025-11-06 14:56:57 [http-nio-8080-exec-7] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/agent/commission/settlement/admin/list from 127.0.0.1 - 状态: 200 - 耗时: 155ms
2025-11-06 14:57:00 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/agent/commission-overview
2025-11-06 14:57:00 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 14:57:00 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 14:57:00 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 14:57:00 [http-nio-8080-exec-9] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 14:57:00 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 14:57:00 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 14:57:00 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 14:57:00 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:57:00 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 14:57:00 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 14:57:00 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 14:57:00 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 14:57:00 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 14:57:00 [http-nio-8080-exec-9] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 14:57:00 [http-nio-8080-exec-9] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 14:57:00 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 14:57:00 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 14:57:00 [http-nio-8080-exec-9] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 14:57:00 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/agent/commission-overview
2025-11-06 14:57:00 [http-nio-8080-exec-9] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/agent/commission-overview from 127.0.0.1
2025-11-06 14:57:00 [http-nio-8080-exec-9] ERROR c.d.c.e.GlobalExceptionHandler - 系统异常
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource statistics/agent/commission-overview.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:585)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.deepreach.common.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:136)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-11-06 14:57:00 [http-nio-8080-exec-9] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/agent/commission-overview from 127.0.0.1 - 状态: 500 - 耗时: 5ms
2025-11-06 14:57:02 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/agent/commission-overview
2025-11-06 14:57:02 [http-nio-8080-exec-1] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 14:57:02 [http-nio-8080-exec-1] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 14:57:02 [http-nio-8080-exec-1] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 14:57:02 [http-nio-8080-exec-1] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 14:57:02 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 14:57:02 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 14:57:02 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 14:57:02 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:57:02 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 14:57:02 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 14:57:02 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 14:57:02 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 14:57:03 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 14:57:03 [http-nio-8080-exec-1] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 14:57:03 [http-nio-8080-exec-1] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 14:57:03 [http-nio-8080-exec-1] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 14:57:03 [http-nio-8080-exec-1] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 14:57:03 [http-nio-8080-exec-1] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 14:57:03 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/agent/commission-overview
2025-11-06 14:57:03 [http-nio-8080-exec-1] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/agent/commission-overview from 127.0.0.1
2025-11-06 14:57:03 [http-nio-8080-exec-1] ERROR c.d.c.e.GlobalExceptionHandler - 系统异常
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource statistics/agent/commission-overview.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:585)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.deepreach.common.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:136)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-11-06 14:57:03 [http-nio-8080-exec-1] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/agent/commission-overview from 127.0.0.1 - 状态: 500 - 耗时: 6ms
2025-11-06 14:57:03 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /agent/commission/1/records
2025-11-06 14:57:03 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 14:57:03 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 14:57:03 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 14:57:03 [http-nio-8080-exec-6] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 14:57:03 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 14:57:03 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 14:57:03 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 14:57:03 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:57:03 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 14:57:03 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 14:57:03 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 14:57:03 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 14:57:03 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 14:57:03 [http-nio-8080-exec-6] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 14:57:03 [http-nio-8080-exec-6] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 14:57:03 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 14:57:03 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 14:57:03 [http-nio-8080-exec-6] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 14:57:03 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /agent/commission/1/records
2025-11-06 14:57:03 [http-nio-8080-exec-6] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/agent/commission/1/records from 127.0.0.1
2025-11-06 14:57:03 [http-nio-8080-exec-6] DEBUG c.d.w.m.A.selectRecordsByAgent - ==>  Preparing: select r.record_id, r.agent_user_id, r.agent_dept_id, r.buyer_user_id, buyer.username as buyerUsername, r.trigger_billing_id, br.bill_no, r.trigger_amount, r.commission_amount, r.commission_rate, r.hierarchy_level, r.business_type, r.status, r.description, r.create_time from dr_agent_commission_record r left join sys_user buyer on r.buyer_user_id = buyer.user_id left join dr_billing_record br on r.trigger_billing_id = br.bill_id where r.agent_user_id = ? and r.direction = '+' and r.business_type = 'RECHARGE_COMMISSION' order by r.create_time desc
2025-11-06 14:57:03 [http-nio-8080-exec-6] DEBUG c.d.w.m.A.selectRecordsByAgent - ==> Parameters: 1(Long)
2025-11-06 14:57:03 [http-nio-8080-exec-6] DEBUG c.d.w.m.A.selectRecordsByAgent - <==      Total: 0
2025-11-06 14:57:03 [http-nio-8080-exec-6] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/agent/commission/1/records from 127.0.0.1 - 状态: 200 - 耗时: 172ms
2025-11-06 14:57:25 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/agent/commission-overview
2025-11-06 14:57:25 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing POST /agent/commission/settlement/admin/list
2025-11-06 14:57:25 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 14:57:25 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 14:57:25 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 14:57:25 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 14:57:25 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 14:57:25 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 14:57:25 [http-nio-8080-exec-8] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 14:57:25 [http-nio-8080-exec-4] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 14:57:25 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 14:57:25 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 14:57:25 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 14:57:25 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 14:57:25 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 14:57:25 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:57:25 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 14:57:25 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 14:57:25 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:57:25 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 14:57:25 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 14:57:25 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 14:57:25 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 14:57:25 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 14:57:25 [http-nio-8080-exec-4] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 14:57:25 [http-nio-8080-exec-4] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 14:57:25 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 14:57:25 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 14:57:25 [http-nio-8080-exec-4] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 14:57:25 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/agent/commission-overview
2025-11-06 14:57:25 [http-nio-8080-exec-4] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/agent/commission-overview from 127.0.0.1
2025-11-06 14:57:25 [http-nio-8080-exec-4] ERROR c.d.c.e.GlobalExceptionHandler - 系统异常
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource statistics/agent/commission-overview.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:585)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.deepreach.common.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:136)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-11-06 14:57:25 [http-nio-8080-exec-4] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/agent/commission-overview from 127.0.0.1 - 状态: 500 - 耗时: 11ms
2025-11-06 14:57:25 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 14:57:25 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 14:57:25 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 14:57:25 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 14:57:25 [http-nio-8080-exec-8] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 14:57:25 [http-nio-8080-exec-8] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 14:57:25 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 14:57:25 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 14:57:25 [http-nio-8080-exec-8] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 14:57:25 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured POST /agent/commission/settlement/admin/list
2025-11-06 14:57:25 [http-nio-8080-exec-8] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/agent/commission/settlement/admin/list from 127.0.0.1
2025-11-06 14:57:25 [http-nio-8080-exec-8] DEBUG c.d.w.m.A.searchAdminSettlements - ==>  Preparing: select s.settlement_id, s.agent_user_id, u.username as agent_username, roles.agent_role_keys, s.request_amount, s.approved_amount, s.status, s.approval_user_id, s.approval_time, s.remark, s.extra_data, s.create_by, s.create_time, s.update_by, s.update_time from dr_agent_commission_settlement s left join sys_user u on s.agent_user_id = u.user_id left join ( select ur.user_id, group_concat(distinct r.role_key order by r.role_key) as agent_role_keys from sys_user_role ur join sys_role r on ur.role_id = r.role_id and r.del_flag = '0' group by ur.user_id ) roles on roles.user_id = s.agent_user_id order by s.create_time desc
2025-11-06 14:57:25 [http-nio-8080-exec-8] DEBUG c.d.w.m.A.searchAdminSettlements - ==> Parameters: 
2025-11-06 14:57:26 [http-nio-8080-exec-8] DEBUG c.d.w.m.A.searchAdminSettlements - <==      Total: 4
2025-11-06 14:57:26 [http-nio-8080-exec-8] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/agent/commission/settlement/admin/list from 127.0.0.1 - 状态: 200 - 耗时: 153ms
2025-11-06 14:57:37 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/agent/commission-overview
2025-11-06 14:57:37 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 14:57:37 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 14:57:37 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 14:57:37 [http-nio-8080-exec-3] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 14:57:37 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 14:57:37 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 14:57:37 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 14:57:37 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:57:37 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 14:57:37 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 14:57:37 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 14:57:37 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 14:57:37 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 14:57:37 [http-nio-8080-exec-3] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 14:57:37 [http-nio-8080-exec-3] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 14:57:37 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 14:57:37 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 14:57:37 [http-nio-8080-exec-3] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 14:57:38 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/agent/commission-overview
2025-11-06 14:57:38 [http-nio-8080-exec-3] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/agent/commission-overview from 127.0.0.1
2025-11-06 14:57:38 [http-nio-8080-exec-3] ERROR c.d.c.e.GlobalExceptionHandler - 系统异常
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource statistics/agent/commission-overview.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:585)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.deepreach.common.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:136)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-11-06 14:57:38 [http-nio-8080-exec-3] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/agent/commission-overview from 127.0.0.1 - 状态: 500 - 耗时: 6ms
2025-11-06 14:57:38 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /agent/commission/1/records
2025-11-06 14:57:38 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 14:57:38 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 14:57:38 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 14:57:38 [http-nio-8080-exec-2] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 14:57:38 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 14:57:38 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 14:57:38 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 14:57:38 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:57:38 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 14:57:38 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 14:57:38 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 14:57:38 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 14:57:38 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 14:57:38 [http-nio-8080-exec-2] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 14:57:38 [http-nio-8080-exec-2] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 14:57:38 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 14:57:38 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 14:57:38 [http-nio-8080-exec-2] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 14:57:38 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /agent/commission/1/records
2025-11-06 14:57:38 [http-nio-8080-exec-2] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/agent/commission/1/records from 127.0.0.1
2025-11-06 14:57:38 [http-nio-8080-exec-2] DEBUG c.d.w.m.A.selectRecordsByAgent - ==>  Preparing: select r.record_id, r.agent_user_id, r.agent_dept_id, r.buyer_user_id, buyer.username as buyerUsername, r.trigger_billing_id, br.bill_no, r.trigger_amount, r.commission_amount, r.commission_rate, r.hierarchy_level, r.business_type, r.status, r.description, r.create_time from dr_agent_commission_record r left join sys_user buyer on r.buyer_user_id = buyer.user_id left join dr_billing_record br on r.trigger_billing_id = br.bill_id where r.agent_user_id = ? and r.direction = '+' and r.business_type = 'RECHARGE_COMMISSION' order by r.create_time desc
2025-11-06 14:57:38 [http-nio-8080-exec-2] DEBUG c.d.w.m.A.selectRecordsByAgent - ==> Parameters: 1(Long)
2025-11-06 14:57:38 [http-nio-8080-exec-2] DEBUG c.d.w.m.A.selectRecordsByAgent - <==      Total: 0
2025-11-06 14:57:38 [http-nio-8080-exec-2] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/agent/commission/1/records from 127.0.0.1 - 状态: 200 - 耗时: 153ms
2025-11-06 14:57:40 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing POST /agent/commission/settlement/admin/list
2025-11-06 14:57:40 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/agent/commission-overview
2025-11-06 14:57:40 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 14:57:40 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 14:57:40 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 14:57:40 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 14:57:40 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 14:57:40 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 14:57:40 [http-nio-8080-exec-9] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 14:57:40 [http-nio-8080-exec-7] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 14:57:40 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 14:57:40 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 14:57:40 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 14:57:40 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 14:57:41 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 14:57:41 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:57:41 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 14:57:41 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 14:57:41 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 14:57:41 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 14:57:41 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 14:57:41 [http-nio-8080-exec-9] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 14:57:41 [http-nio-8080-exec-9] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 14:57:41 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 14:57:41 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 14:57:41 [http-nio-8080-exec-9] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 14:57:41 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured POST /agent/commission/settlement/admin/list
2025-11-06 14:57:41 [http-nio-8080-exec-9] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/agent/commission/settlement/admin/list from 127.0.0.1
2025-11-06 14:57:41 [http-nio-8080-exec-9] DEBUG c.d.w.m.A.searchAdminSettlements - ==>  Preparing: select s.settlement_id, s.agent_user_id, u.username as agent_username, roles.agent_role_keys, s.request_amount, s.approved_amount, s.status, s.approval_user_id, s.approval_time, s.remark, s.extra_data, s.create_by, s.create_time, s.update_by, s.update_time from dr_agent_commission_settlement s left join sys_user u on s.agent_user_id = u.user_id left join ( select ur.user_id, group_concat(distinct r.role_key order by r.role_key) as agent_role_keys from sys_user_role ur join sys_role r on ur.role_id = r.role_id and r.del_flag = '0' group by ur.user_id ) roles on roles.user_id = s.agent_user_id order by s.create_time desc
2025-11-06 14:57:41 [http-nio-8080-exec-9] DEBUG c.d.w.m.A.searchAdminSettlements - ==> Parameters: 
2025-11-06 14:57:41 [http-nio-8080-exec-9] DEBUG c.d.w.m.A.searchAdminSettlements - <==      Total: 4
2025-11-06 14:57:41 [http-nio-8080-exec-9] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/agent/commission/settlement/admin/list from 127.0.0.1 - 状态: 200 - 耗时: 152ms
2025-11-06 14:57:41 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 14:57:41 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:57:41 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 14:57:42 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 14:57:42 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 14:57:42 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 14:57:42 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 14:57:42 [http-nio-8080-exec-7] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 14:57:42 [http-nio-8080-exec-7] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 14:57:42 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 14:57:42 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 14:57:42 [http-nio-8080-exec-7] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 14:57:42 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/agent/commission-overview
2025-11-06 14:57:42 [http-nio-8080-exec-7] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/agent/commission-overview from 127.0.0.1
2025-11-06 14:57:42 [http-nio-8080-exec-7] ERROR c.d.c.e.GlobalExceptionHandler - 系统异常
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource statistics/agent/commission-overview.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:585)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.deepreach.common.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:136)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-11-06 14:57:42 [http-nio-8080-exec-7] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/agent/commission-overview from 127.0.0.1 - 状态: 500 - 耗时: 5ms
2025-11-06 14:59:00 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/agent/commission-overview
2025-11-06 14:59:00 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 14:59:00 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 14:59:00 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 14:59:00 [http-nio-8080-exec-6] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 14:59:00 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 14:59:00 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 14:59:00 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 14:59:00 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:59:00 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 14:59:00 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 14:59:00 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 14:59:00 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 14:59:00 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 14:59:00 [http-nio-8080-exec-6] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 14:59:00 [http-nio-8080-exec-6] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 14:59:00 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 14:59:00 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 14:59:00 [http-nio-8080-exec-6] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 14:59:00 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/agent/commission-overview
2025-11-06 14:59:00 [http-nio-8080-exec-6] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/agent/commission-overview from 127.0.0.1
2025-11-06 14:59:00 [http-nio-8080-exec-6] ERROR c.d.c.e.GlobalExceptionHandler - 系统异常
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource statistics/agent/commission-overview.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:585)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.deepreach.common.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:136)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-11-06 14:59:00 [http-nio-8080-exec-6] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/agent/commission-overview from 127.0.0.1 - 状态: 500 - 耗时: 16ms
2025-11-06 14:59:00 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing POST /agent/commission/1/records
2025-11-06 14:59:00 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 14:59:00 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 14:59:00 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 14:59:00 [http-nio-8080-exec-10] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 14:59:00 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 14:59:00 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 14:59:00 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 14:59:00 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:59:00 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 14:59:00 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /system/user/list
2025-11-06 14:59:00 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 14:59:00 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 14:59:00 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 14:59:00 [http-nio-8080-exec-4] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 14:59:01 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 14:59:01 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 14:59:01 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 14:59:01 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 14:59:01 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 14:59:01 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 14:59:01 [http-nio-8080-exec-10] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 14:59:01 [http-nio-8080-exec-10] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 14:59:01 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 14:59:01 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 14:59:01 [http-nio-8080-exec-10] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 14:59:01 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 14:59:01 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:59:01 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 14:59:01 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured POST /agent/commission/1/records
2025-11-06 14:59:01 [http-nio-8080-exec-10] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/agent/commission/1/records from 127.0.0.1
2025-11-06 14:59:01 [http-nio-8080-exec-10] DEBUG c.d.w.m.A.selectRecordsByAgent - ==>  Preparing: select r.record_id, r.agent_user_id, r.agent_dept_id, r.buyer_user_id, buyer.username as buyerUsername, r.trigger_billing_id, br.bill_no, r.trigger_amount, r.commission_amount, r.commission_rate, r.hierarchy_level, r.business_type, r.status, r.description, r.create_time from dr_agent_commission_record r left join sys_user buyer on r.buyer_user_id = buyer.user_id left join dr_billing_record br on r.trigger_billing_id = br.bill_id where r.agent_user_id = ? and r.direction = '+' and r.business_type = 'RECHARGE_COMMISSION' order by r.create_time desc
2025-11-06 14:59:01 [http-nio-8080-exec-10] DEBUG c.d.w.m.A.selectRecordsByAgent - ==> Parameters: 1(Long)
2025-11-06 14:59:01 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 14:59:01 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 14:59:01 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 14:59:01 [http-nio-8080-exec-10] DEBUG c.d.w.m.A.selectRecordsByAgent - <==      Total: 0
2025-11-06 14:59:01 [http-nio-8080-exec-10] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/agent/commission/1/records from 127.0.0.1 - 状态: 200 - 耗时: 614ms
2025-11-06 14:59:01 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 14:59:01 [http-nio-8080-exec-4] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 14:59:01 [http-nio-8080-exec-4] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 14:59:01 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 14:59:01 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 14:59:01 [http-nio-8080-exec-4] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 14:59:01 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured POST /system/user/list
2025-11-06 14:59:01 [http-nio-8080-exec-4] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/system/user/list from 127.0.0.1
2025-11-06 14:59:01 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserList - ==>  Preparing: SELECT DISTINCT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_name, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur_filter ON u.user_id = ur_filter.user_id LEFT JOIN sys_role r_filter ON ur_filter.role_id = r_filter.role_id AND r_filter.del_flag = '0' WHERE u.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY u.create_time DESC
2025-11-06 14:59:01 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserList - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 14:59:02 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserList - <==      Total: 49
2025-11-06 14:59:02 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:59:02 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 381(Long)
2025-11-06 14:59:02 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:59:02 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:59:02 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 380(Long)
2025-11-06 14:59:02 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:59:02 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:59:02 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 379(Long)
2025-11-06 14:59:02 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/agent/commission-overview
2025-11-06 14:59:02 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 14:59:02 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 14:59:02 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 14:59:02 [http-nio-8080-exec-8] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 14:59:02 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 14:59:02 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 14:59:02 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 14:59:02 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:59:02 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 14:59:03 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 14:59:03 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 14:59:03 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 14:59:03 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:59:03 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:59:03 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 378(Long)
2025-11-06 14:59:03 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 14:59:03 [http-nio-8080-exec-8] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 14:59:03 [http-nio-8080-exec-8] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 14:59:03 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 14:59:03 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 14:59:03 [http-nio-8080-exec-8] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 14:59:03 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/agent/commission-overview
2025-11-06 14:59:03 [http-nio-8080-exec-8] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/agent/commission-overview from 127.0.0.1
2025-11-06 14:59:03 [http-nio-8080-exec-8] ERROR c.d.c.e.GlobalExceptionHandler - 系统异常
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource statistics/agent/commission-overview.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:585)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.deepreach.common.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:136)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-11-06 14:59:03 [http-nio-8080-exec-8] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/agent/commission-overview from 127.0.0.1 - 状态: 500 - 耗时: 12ms
2025-11-06 14:59:03 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:59:03 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:59:03 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 377(Long)
2025-11-06 14:59:03 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:59:03 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:59:03 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 376(Long)
2025-11-06 14:59:03 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:59:03 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:59:03 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 375(Long)
2025-11-06 14:59:03 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:59:03 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:59:03 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 374(Long)
2025-11-06 14:59:04 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:59:04 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:59:04 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 373(Long)
2025-11-06 14:59:04 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:59:04 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:59:04 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 372(Long)
2025-11-06 14:59:04 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:59:04 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:59:04 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 371(Long)
2025-11-06 14:59:04 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:59:04 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:59:04 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 370(Long)
2025-11-06 14:59:05 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:59:05 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:59:05 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 369(Long)
2025-11-06 14:59:05 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:59:05 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:59:05 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 357(Long)
2025-11-06 14:59:05 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:59:05 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:59:05 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 356(Long)
2025-11-06 14:59:05 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:59:05 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:59:05 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 355(Long)
2025-11-06 14:59:05 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:59:05 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:59:05 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 354(Long)
2025-11-06 14:59:06 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:59:06 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:59:06 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 353(Long)
2025-11-06 14:59:06 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:59:06 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:59:06 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 352(Long)
2025-11-06 14:59:06 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:59:06 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:59:06 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 351(Long)
2025-11-06 14:59:07 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:59:07 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:59:07 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 349(Long)
2025-11-06 14:59:07 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:59:07 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:59:07 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 348(Long)
2025-11-06 14:59:07 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:59:07 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:59:07 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 347(Long)
2025-11-06 14:59:07 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:59:07 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:59:07 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 345(Long)
2025-11-06 14:59:07 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:59:07 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:59:07 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 344(Long)
2025-11-06 14:59:07 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:59:07 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:59:07 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 343(Long)
2025-11-06 14:59:07 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:59:07 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:59:07 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 342(Long)
2025-11-06 14:59:08 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:59:08 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:59:08 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 340(Long)
2025-11-06 14:59:08 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:59:08 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:59:08 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 339(Long)
2025-11-06 14:59:08 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:59:08 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:59:08 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 338(Long)
2025-11-06 14:59:08 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:59:08 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:59:08 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 337(Long)
2025-11-06 14:59:08 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:59:08 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:59:08 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 336(Long)
2025-11-06 14:59:08 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:59:08 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:59:08 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 335(Long)
2025-11-06 14:59:08 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:59:08 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:59:08 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 334(Long)
2025-11-06 14:59:09 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:59:09 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:59:09 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 333(Long)
2025-11-06 14:59:09 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:59:09 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:59:09 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 332(Long)
2025-11-06 14:59:09 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:59:09 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:59:09 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 331(Long)
2025-11-06 14:59:09 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:59:09 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:59:09 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 330(Long)
2025-11-06 14:59:09 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:59:09 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:59:09 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 329(Long)
2025-11-06 14:59:09 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:59:09 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:59:09 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 328(Long)
2025-11-06 14:59:10 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:59:10 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:59:10 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 327(Long)
2025-11-06 14:59:10 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:59:10 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:59:10 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 326(Long)
2025-11-06 14:59:10 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:59:10 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:59:10 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 325(Long)
2025-11-06 14:59:10 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:59:10 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:59:10 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 324(Long)
2025-11-06 14:59:10 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:59:10 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:59:10 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 323(Long)
2025-11-06 14:59:10 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:59:10 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:59:10 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 322(Long)
2025-11-06 14:59:10 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:59:10 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:59:10 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 321(Long)
2025-11-06 14:59:11 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:59:11 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:59:11 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 320(Long)
2025-11-06 14:59:11 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:59:11 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 14:59:11 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 1(Long)
2025-11-06 14:59:11 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 14:59:11 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 14:59:11 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 379(Long), 1(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 354(Long), 337(Long), 342(Long), 344(Long), 332(Long), 334(Long), 320(Long), 329(Long), 333(Long), 321(Long)
2025-11-06 14:59:11 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 17
2025-11-06 14:59:11 [http-nio-8080-exec-4] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/system/user/list from 127.0.0.1 - 状态: 200 - 耗时: 9650ms
2025-11-06 14:59:11 [http-nio-8080-exec-4] WARN  c.d.c.i.PerformanceInterceptor - 检测到慢请求: POST /api/system/user/list from 127.0.0.1 - 耗时: 9650ms - 超过阈值: 3000ms
2025-11-06 15:00:38 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/agent/commission-overview
2025-11-06 15:00:38 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:00:38 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:00:38 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:00:38 [http-nio-8080-exec-3] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:00:38 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:00:38 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:00:38 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:00:38 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:00:38 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:00:38 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:00:38 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:00:38 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:00:38 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:00:38 [http-nio-8080-exec-3] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:00:38 [http-nio-8080-exec-3] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:00:38 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:00:38 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:00:38 [http-nio-8080-exec-3] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:00:38 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/agent/commission-overview
2025-11-06 15:00:38 [http-nio-8080-exec-3] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/agent/commission-overview from 127.0.0.1
2025-11-06 15:00:38 [http-nio-8080-exec-3] ERROR c.d.c.e.GlobalExceptionHandler - 系统异常
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource statistics/agent/commission-overview.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:585)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.deepreach.common.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:136)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-11-06 15:00:38 [http-nio-8080-exec-3] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/agent/commission-overview from 127.0.0.1 - 状态: 500 - 耗时: 11ms
2025-11-06 15:02:34 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /system/user/list
2025-11-06 15:02:34 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:02:34 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:02:34 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:02:34 [http-nio-8080-exec-2] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:02:35 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:02:35 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:02:35 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:02:35 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:02:35 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:02:35 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:02:35 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:02:35 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:02:35 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:02:35 [http-nio-8080-exec-2] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:02:35 [http-nio-8080-exec-2] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:02:35 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:02:35 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:02:35 [http-nio-8080-exec-2] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:02:35 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /system/user/list
2025-11-06 15:02:35 [http-nio-8080-exec-2] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/system/user/list from 127.0.0.1
2025-11-06 15:02:35 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserList - ==>  Preparing: SELECT DISTINCT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_name, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur_filter ON u.user_id = ur_filter.user_id LEFT JOIN sys_role r_filter ON ur_filter.role_id = r_filter.role_id AND r_filter.del_flag = '0' WHERE u.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY u.create_time DESC
2025-11-06 15:02:35 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserList - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 15:02:36 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserList - <==      Total: 49
2025-11-06 15:02:36 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:02:36 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 381(Long)
2025-11-06 15:02:36 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:02:36 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:02:36 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 380(Long)
2025-11-06 15:02:36 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:02:36 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:02:36 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 379(Long)
2025-11-06 15:02:36 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:02:36 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:02:36 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 378(Long)
2025-11-06 15:02:36 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:02:36 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:02:36 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 377(Long)
2025-11-06 15:02:37 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:02:37 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:02:37 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 376(Long)
2025-11-06 15:02:37 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:02:37 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:02:37 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 375(Long)
2025-11-06 15:02:37 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:02:37 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:02:37 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 374(Long)
2025-11-06 15:02:37 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:02:37 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:02:37 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 373(Long)
2025-11-06 15:02:37 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:02:37 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:02:37 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 372(Long)
2025-11-06 15:02:38 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:02:38 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:02:38 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 371(Long)
2025-11-06 15:02:38 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:02:38 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:02:38 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 370(Long)
2025-11-06 15:02:38 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:02:38 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:02:38 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 369(Long)
2025-11-06 15:02:38 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:02:38 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:02:38 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 357(Long)
2025-11-06 15:02:39 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:02:39 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:02:39 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 356(Long)
2025-11-06 15:02:39 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:02:39 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:02:39 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 355(Long)
2025-11-06 15:02:39 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:02:39 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:02:39 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 354(Long)
2025-11-06 15:02:39 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:02:39 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:02:39 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 353(Long)
2025-11-06 15:02:39 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:02:39 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:02:39 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 352(Long)
2025-11-06 15:02:39 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:02:39 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:02:39 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 351(Long)
2025-11-06 15:02:40 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:02:40 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:02:40 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 349(Long)
2025-11-06 15:02:40 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:02:40 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:02:40 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 348(Long)
2025-11-06 15:02:40 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:02:40 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:02:40 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 347(Long)
2025-11-06 15:02:40 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:02:40 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:02:40 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 345(Long)
2025-11-06 15:02:40 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:02:40 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:02:40 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 344(Long)
2025-11-06 15:02:40 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:02:40 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:02:40 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 343(Long)
2025-11-06 15:02:40 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:02:40 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:02:40 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 342(Long)
2025-11-06 15:02:41 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:02:41 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:02:41 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 340(Long)
2025-11-06 15:02:41 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:02:41 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:02:41 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 339(Long)
2025-11-06 15:02:41 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:02:41 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:02:41 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 338(Long)
2025-11-06 15:02:41 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:02:41 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:02:41 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 337(Long)
2025-11-06 15:02:41 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:02:41 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:02:41 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 336(Long)
2025-11-06 15:02:41 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:02:41 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:02:41 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 335(Long)
2025-11-06 15:02:41 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:02:41 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:02:41 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 334(Long)
2025-11-06 15:02:42 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:02:42 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:02:42 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 333(Long)
2025-11-06 15:02:42 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:02:42 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:02:42 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 332(Long)
2025-11-06 15:02:42 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:02:42 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:02:42 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 331(Long)
2025-11-06 15:02:42 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:02:42 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:02:42 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 330(Long)
2025-11-06 15:02:42 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:02:42 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:02:42 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 329(Long)
2025-11-06 15:02:42 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:02:42 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:02:42 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 328(Long)
2025-11-06 15:02:42 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:02:42 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:02:42 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 327(Long)
2025-11-06 15:02:43 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:02:43 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:02:43 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 326(Long)
2025-11-06 15:02:43 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:02:43 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:02:43 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 325(Long)
2025-11-06 15:02:43 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:02:43 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:02:43 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 324(Long)
2025-11-06 15:02:43 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:02:43 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:02:43 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 323(Long)
2025-11-06 15:02:43 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:02:43 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:02:43 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 322(Long)
2025-11-06 15:02:43 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:02:43 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:02:43 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 321(Long)
2025-11-06 15:02:43 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:02:43 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:02:43 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 320(Long)
2025-11-06 15:02:44 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:02:44 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:02:44 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 1(Long)
2025-11-06 15:02:44 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:02:44 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 15:02:44 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 379(Long), 1(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 354(Long), 337(Long), 342(Long), 344(Long), 332(Long), 334(Long), 320(Long), 329(Long), 333(Long), 321(Long)
2025-11-06 15:02:44 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 17
2025-11-06 15:02:44 [http-nio-8080-exec-2] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/system/user/list from 127.0.0.1 - 状态: 200 - 耗时: 8881ms
2025-11-06 15:02:44 [http-nio-8080-exec-2] WARN  c.d.c.i.PerformanceInterceptor - 检测到慢请求: POST /api/system/user/list from 127.0.0.1 - 耗时: 8881ms - 超过阈值: 3000ms
2025-11-06 15:02:56 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/agent/commission-overview
2025-11-06 15:02:56 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:02:56 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:02:56 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:02:56 [http-nio-8080-exec-7] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:02:56 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:02:56 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:02:57 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:02:57 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:02:57 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:02:57 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:02:57 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:02:57 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:02:57 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:02:57 [http-nio-8080-exec-7] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:02:57 [http-nio-8080-exec-7] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:02:57 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:02:57 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:02:57 [http-nio-8080-exec-7] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:02:57 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/agent/commission-overview
2025-11-06 15:02:57 [http-nio-8080-exec-7] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/agent/commission-overview from 127.0.0.1
2025-11-06 15:02:57 [http-nio-8080-exec-7] ERROR c.d.c.e.GlobalExceptionHandler - 系统异常
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource statistics/agent/commission-overview.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:585)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.deepreach.common.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:136)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-11-06 15:02:57 [http-nio-8080-exec-7] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/agent/commission-overview from 127.0.0.1 - 状态: 500 - 耗时: 7ms
2025-11-06 15:02:57 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /agent/commission/1/records
2025-11-06 15:02:57 [http-nio-8080-exec-1] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:02:57 [http-nio-8080-exec-1] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:02:57 [http-nio-8080-exec-1] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:02:57 [http-nio-8080-exec-1] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:02:57 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:02:57 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:02:57 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:02:57 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:02:57 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:02:57 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:02:57 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:02:57 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:02:57 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:02:57 [http-nio-8080-exec-1] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:02:57 [http-nio-8080-exec-1] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:02:57 [http-nio-8080-exec-1] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:02:57 [http-nio-8080-exec-1] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:02:57 [http-nio-8080-exec-1] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:02:57 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /agent/commission/1/records
2025-11-06 15:02:57 [http-nio-8080-exec-1] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/agent/commission/1/records from 127.0.0.1
2025-11-06 15:02:57 [http-nio-8080-exec-1] DEBUG c.d.w.m.A.selectRecordsByAgent - ==>  Preparing: select r.record_id, r.agent_user_id, r.agent_dept_id, r.buyer_user_id, buyer.username as buyerUsername, r.trigger_billing_id, br.bill_no, r.trigger_amount, r.commission_amount, r.commission_rate, r.hierarchy_level, r.business_type, r.status, r.description, r.create_time from dr_agent_commission_record r left join sys_user buyer on r.buyer_user_id = buyer.user_id left join dr_billing_record br on r.trigger_billing_id = br.bill_id where r.agent_user_id = ? and r.direction = '+' and r.business_type = 'RECHARGE_COMMISSION' order by r.create_time desc
2025-11-06 15:02:57 [http-nio-8080-exec-1] DEBUG c.d.w.m.A.selectRecordsByAgent - ==> Parameters: 1(Long)
2025-11-06 15:02:58 [http-nio-8080-exec-1] DEBUG c.d.w.m.A.selectRecordsByAgent - <==      Total: 0
2025-11-06 15:02:58 [http-nio-8080-exec-1] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/agent/commission/1/records from 127.0.0.1 - 状态: 200 - 耗时: 152ms
2025-11-06 15:03:00 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing POST /agent/commission/settlement/admin/list
2025-11-06 15:03:00 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/agent/commission-overview
2025-11-06 15:03:00 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:03:00 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:03:00 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:03:00 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:03:00 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:03:00 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:03:00 [http-nio-8080-exec-10] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:03:00 [http-nio-8080-exec-6] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:03:00 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:03:00 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:03:00 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:03:00 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:03:00 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:03:00 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:03:00 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:03:00 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:03:00 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:03:00 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:03:00 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:03:00 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:03:00 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:03:00 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:03:00 [http-nio-8080-exec-6] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:03:00 [http-nio-8080-exec-6] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:03:00 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:03:00 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:03:00 [http-nio-8080-exec-6] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:03:01 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:03:01 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/agent/commission-overview
2025-11-06 15:03:01 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:03:01 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:03:01 [http-nio-8080-exec-6] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/agent/commission-overview from 127.0.0.1
2025-11-06 15:03:01 [http-nio-8080-exec-6] ERROR c.d.c.e.GlobalExceptionHandler - 系统异常
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource statistics/agent/commission-overview.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:585)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.deepreach.common.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:136)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-11-06 15:03:01 [http-nio-8080-exec-6] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/agent/commission-overview from 127.0.0.1 - 状态: 500 - 耗时: 5ms
2025-11-06 15:03:01 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:03:01 [http-nio-8080-exec-10] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:03:01 [http-nio-8080-exec-10] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:03:01 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:03:01 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:03:01 [http-nio-8080-exec-10] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:03:01 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured POST /agent/commission/settlement/admin/list
2025-11-06 15:03:01 [http-nio-8080-exec-10] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/agent/commission/settlement/admin/list from 127.0.0.1
2025-11-06 15:03:01 [http-nio-8080-exec-10] DEBUG c.d.w.m.A.searchAdminSettlements - ==>  Preparing: select s.settlement_id, s.agent_user_id, u.username as agent_username, roles.agent_role_keys, s.request_amount, s.approved_amount, s.status, s.approval_user_id, s.approval_time, s.remark, s.extra_data, s.create_by, s.create_time, s.update_by, s.update_time from dr_agent_commission_settlement s left join sys_user u on s.agent_user_id = u.user_id left join ( select ur.user_id, group_concat(distinct r.role_key order by r.role_key) as agent_role_keys from sys_user_role ur join sys_role r on ur.role_id = r.role_id and r.del_flag = '0' group by ur.user_id ) roles on roles.user_id = s.agent_user_id order by s.create_time desc
2025-11-06 15:03:01 [http-nio-8080-exec-10] DEBUG c.d.w.m.A.searchAdminSettlements - ==> Parameters: 
2025-11-06 15:03:01 [http-nio-8080-exec-10] DEBUG c.d.w.m.A.searchAdminSettlements - <==      Total: 4
2025-11-06 15:03:01 [http-nio-8080-exec-10] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/agent/commission/settlement/admin/list from 127.0.0.1 - 状态: 200 - 耗时: 156ms
2025-11-06 15:03:10 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/agent/commission-overview
2025-11-06 15:03:10 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:03:10 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:03:10 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:03:10 [http-nio-8080-exec-4] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:03:10 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:03:10 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:03:10 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:03:10 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:03:10 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:03:10 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:03:10 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:03:10 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:03:11 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:03:11 [http-nio-8080-exec-4] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:03:11 [http-nio-8080-exec-4] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:03:11 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:03:11 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:03:11 [http-nio-8080-exec-4] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:03:11 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/agent/commission-overview
2025-11-06 15:03:11 [http-nio-8080-exec-4] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/agent/commission-overview from 127.0.0.1
2025-11-06 15:03:11 [http-nio-8080-exec-4] ERROR c.d.c.e.GlobalExceptionHandler - 系统异常
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource statistics/agent/commission-overview.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:585)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.deepreach.common.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:136)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-11-06 15:03:11 [http-nio-8080-exec-4] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/agent/commission-overview from 127.0.0.1 - 状态: 500 - 耗时: 5ms
2025-11-06 15:03:11 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /agent/commission/1/records
2025-11-06 15:03:11 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:03:11 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:03:11 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:03:11 [http-nio-8080-exec-5] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:03:11 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:03:11 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:03:11 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:03:11 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:03:11 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:03:11 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:03:11 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:03:11 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:03:11 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:03:11 [http-nio-8080-exec-5] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:03:11 [http-nio-8080-exec-5] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:03:11 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:03:11 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:03:11 [http-nio-8080-exec-5] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:03:11 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /agent/commission/1/records
2025-11-06 15:03:11 [http-nio-8080-exec-5] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/agent/commission/1/records from 127.0.0.1
2025-11-06 15:03:11 [http-nio-8080-exec-5] DEBUG c.d.w.m.A.selectRecordsByAgent - ==>  Preparing: select r.record_id, r.agent_user_id, r.agent_dept_id, r.buyer_user_id, buyer.username as buyerUsername, r.trigger_billing_id, br.bill_no, r.trigger_amount, r.commission_amount, r.commission_rate, r.hierarchy_level, r.business_type, r.status, r.description, r.create_time from dr_agent_commission_record r left join sys_user buyer on r.buyer_user_id = buyer.user_id left join dr_billing_record br on r.trigger_billing_id = br.bill_id where r.agent_user_id = ? and r.direction = '+' and r.business_type = 'RECHARGE_COMMISSION' order by r.create_time desc
2025-11-06 15:03:11 [http-nio-8080-exec-5] DEBUG c.d.w.m.A.selectRecordsByAgent - ==> Parameters: 1(Long)
2025-11-06 15:03:11 [http-nio-8080-exec-5] DEBUG c.d.w.m.A.selectRecordsByAgent - <==      Total: 0
2025-11-06 15:03:11 [http-nio-8080-exec-5] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/agent/commission/1/records from 127.0.0.1 - 状态: 200 - 耗时: 154ms
2025-11-06 15:05:30 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/agent/commission-overview
2025-11-06 15:05:30 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /agent/commission/settlement/admin/list
2025-11-06 15:05:30 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:05:30 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:05:30 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:05:30 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:05:30 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:05:30 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:05:30 [http-nio-8080-exec-9] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:05:30 [http-nio-8080-exec-2] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:05:30 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:05:30 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:05:30 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:05:30 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:05:31 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:05:31 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:05:31 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:05:31 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:05:31 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:05:31 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:05:31 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:05:31 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:05:31 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:05:31 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:05:31 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:05:31 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:05:31 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:05:31 [http-nio-8080-exec-2] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:05:31 [http-nio-8080-exec-2] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:05:31 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:05:31 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:05:31 [http-nio-8080-exec-2] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:05:31 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /agent/commission/settlement/admin/list
2025-11-06 15:05:31 [http-nio-8080-exec-2] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/agent/commission/settlement/admin/list from 127.0.0.1
2025-11-06 15:05:31 [http-nio-8080-exec-2] DEBUG c.d.w.m.A.searchAdminSettlements - ==>  Preparing: select s.settlement_id, s.agent_user_id, u.username as agent_username, roles.agent_role_keys, s.request_amount, s.approved_amount, s.status, s.approval_user_id, s.approval_time, s.remark, s.extra_data, s.create_by, s.create_time, s.update_by, s.update_time from dr_agent_commission_settlement s left join sys_user u on s.agent_user_id = u.user_id left join ( select ur.user_id, group_concat(distinct r.role_key order by r.role_key) as agent_role_keys from sys_user_role ur join sys_role r on ur.role_id = r.role_id and r.del_flag = '0' group by ur.user_id ) roles on roles.user_id = s.agent_user_id order by s.create_time desc
2025-11-06 15:05:31 [http-nio-8080-exec-2] DEBUG c.d.w.m.A.searchAdminSettlements - ==> Parameters: 
2025-11-06 15:05:31 [http-nio-8080-exec-2] DEBUG c.d.w.m.A.searchAdminSettlements - <==      Total: 4
2025-11-06 15:05:31 [http-nio-8080-exec-2] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/agent/commission/settlement/admin/list from 127.0.0.1 - 状态: 200 - 耗时: 170ms
2025-11-06 15:05:31 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:05:31 [http-nio-8080-exec-9] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:05:31 [http-nio-8080-exec-9] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:05:31 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:05:31 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:05:31 [http-nio-8080-exec-9] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:05:31 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/agent/commission-overview
2025-11-06 15:05:31 [http-nio-8080-exec-9] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/agent/commission-overview from 127.0.0.1
2025-11-06 15:05:31 [http-nio-8080-exec-9] ERROR c.d.c.e.GlobalExceptionHandler - 系统异常
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource statistics/agent/commission-overview.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:585)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.deepreach.common.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:136)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-11-06 15:05:31 [http-nio-8080-exec-9] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/agent/commission-overview from 127.0.0.1 - 状态: 500 - 耗时: 6ms
2025-11-06 15:08:21 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /agent/commission/settlement/admin/list
2025-11-06 15:08:21 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/agent/commission-overview
2025-11-06 15:08:21 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:08:21 [http-nio-8080-exec-1] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:08:21 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:08:21 [http-nio-8080-exec-1] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:08:21 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:08:21 [http-nio-8080-exec-1] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:08:21 [http-nio-8080-exec-6] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:08:21 [http-nio-8080-exec-1] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:08:21 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:08:21 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:08:21 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:08:21 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:08:22 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:08:22 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:08:22 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:08:22 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:08:22 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:08:22 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:08:22 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:08:22 [http-nio-8080-exec-1] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:08:22 [http-nio-8080-exec-1] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:08:22 [http-nio-8080-exec-1] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:08:22 [http-nio-8080-exec-1] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:08:22 [http-nio-8080-exec-1] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:08:22 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /agent/commission/settlement/admin/list
2025-11-06 15:08:22 [http-nio-8080-exec-1] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/agent/commission/settlement/admin/list from 127.0.0.1
2025-11-06 15:08:22 [http-nio-8080-exec-1] DEBUG c.d.w.m.A.searchAdminSettlements - ==>  Preparing: select s.settlement_id, s.agent_user_id, u.username as agent_username, roles.agent_role_keys, s.request_amount, s.approved_amount, s.status, s.approval_user_id, s.approval_time, s.remark, s.extra_data, s.create_by, s.create_time, s.update_by, s.update_time from dr_agent_commission_settlement s left join sys_user u on s.agent_user_id = u.user_id left join ( select ur.user_id, group_concat(distinct r.role_key order by r.role_key) as agent_role_keys from sys_user_role ur join sys_role r on ur.role_id = r.role_id and r.del_flag = '0' group by ur.user_id ) roles on roles.user_id = s.agent_user_id order by s.create_time desc
2025-11-06 15:08:22 [http-nio-8080-exec-1] DEBUG c.d.w.m.A.searchAdminSettlements - ==> Parameters: 
2025-11-06 15:08:22 [http-nio-8080-exec-1] DEBUG c.d.w.m.A.searchAdminSettlements - <==      Total: 4
2025-11-06 15:08:22 [http-nio-8080-exec-1] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/agent/commission/settlement/admin/list from 127.0.0.1 - 状态: 200 - 耗时: 193ms
2025-11-06 15:08:22 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:08:22 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:08:22 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:08:23 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:08:23 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:08:23 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:08:23 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:08:23 [http-nio-8080-exec-6] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:08:23 [http-nio-8080-exec-6] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:08:23 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:08:23 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:08:23 [http-nio-8080-exec-6] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:08:23 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/agent/commission-overview
2025-11-06 15:08:23 [http-nio-8080-exec-6] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/agent/commission-overview from 127.0.0.1
2025-11-06 15:08:23 [http-nio-8080-exec-6] ERROR c.d.c.e.GlobalExceptionHandler - 系统异常
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource statistics/agent/commission-overview.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:585)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.deepreach.common.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:136)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-11-06 15:08:23 [http-nio-8080-exec-6] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/agent/commission-overview from 127.0.0.1 - 状态: 500 - 耗时: 6ms
2025-11-06 15:08:43 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /agent/commission/settlement/admin/list
2025-11-06 15:08:43 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/agent/commission-overview
2025-11-06 15:08:43 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:08:43 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:08:43 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:08:43 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:08:43 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:08:43 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:08:43 [http-nio-8080-exec-8] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:08:43 [http-nio-8080-exec-4] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:08:43 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:08:43 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:08:43 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:08:43 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:08:43 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:08:43 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:08:43 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:08:43 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:08:43 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:08:43 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:08:43 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:08:43 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:08:43 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:08:43 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:08:43 [http-nio-8080-exec-4] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:08:43 [http-nio-8080-exec-4] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:08:43 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:08:43 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:08:43 [http-nio-8080-exec-4] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:08:43 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured POST /agent/commission/settlement/admin/list
2025-11-06 15:08:43 [http-nio-8080-exec-4] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/agent/commission/settlement/admin/list from 127.0.0.1
2025-11-06 15:08:43 [http-nio-8080-exec-4] DEBUG c.d.w.m.A.searchAdminSettlements - ==>  Preparing: select s.settlement_id, s.agent_user_id, u.username as agent_username, roles.agent_role_keys, s.request_amount, s.approved_amount, s.status, s.approval_user_id, s.approval_time, s.remark, s.extra_data, s.create_by, s.create_time, s.update_by, s.update_time from dr_agent_commission_settlement s left join sys_user u on s.agent_user_id = u.user_id left join ( select ur.user_id, group_concat(distinct r.role_key order by r.role_key) as agent_role_keys from sys_user_role ur join sys_role r on ur.role_id = r.role_id and r.del_flag = '0' group by ur.user_id ) roles on roles.user_id = s.agent_user_id order by s.create_time desc
2025-11-06 15:08:43 [http-nio-8080-exec-4] DEBUG c.d.w.m.A.searchAdminSettlements - ==> Parameters: 
2025-11-06 15:08:43 [http-nio-8080-exec-4] DEBUG c.d.w.m.A.searchAdminSettlements - <==      Total: 4
2025-11-06 15:08:43 [http-nio-8080-exec-4] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/agent/commission/settlement/admin/list from 127.0.0.1 - 状态: 200 - 耗时: 166ms
2025-11-06 15:08:43 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:08:43 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:08:43 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:08:44 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:08:44 [http-nio-8080-exec-8] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:08:44 [http-nio-8080-exec-8] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:08:44 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:08:44 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:08:44 [http-nio-8080-exec-8] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:08:44 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/agent/commission-overview
2025-11-06 15:08:44 [http-nio-8080-exec-8] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/agent/commission-overview from 127.0.0.1
2025-11-06 15:08:44 [http-nio-8080-exec-8] ERROR c.d.c.e.GlobalExceptionHandler - 系统异常
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource statistics/agent/commission-overview.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:585)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.deepreach.common.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:136)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-11-06 15:08:44 [http-nio-8080-exec-8] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/agent/commission-overview from 127.0.0.1 - 状态: 500 - 耗时: 11ms
2025-11-06 15:08:48 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/agent/commission-overview
2025-11-06 15:08:48 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /agent/commission/settlement/admin/list
2025-11-06 15:08:48 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:08:48 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:08:48 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:08:48 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:08:48 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:08:48 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:08:48 [http-nio-8080-exec-2] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:08:48 [http-nio-8080-exec-3] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:08:48 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:08:48 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:08:48 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:08:48 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:08:48 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:08:48 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:08:48 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:08:48 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:08:48 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:08:48 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:08:49 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:08:49 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:08:49 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:08:49 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:08:49 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:08:49 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:08:49 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:08:49 [http-nio-8080-exec-3] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:08:49 [http-nio-8080-exec-3] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:08:49 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:08:49 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:08:49 [http-nio-8080-exec-3] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:08:49 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /agent/commission/settlement/admin/list
2025-11-06 15:08:49 [http-nio-8080-exec-3] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/agent/commission/settlement/admin/list from 127.0.0.1
2025-11-06 15:08:49 [http-nio-8080-exec-3] DEBUG c.d.w.m.A.searchAdminSettlements - ==>  Preparing: select s.settlement_id, s.agent_user_id, u.username as agent_username, roles.agent_role_keys, s.request_amount, s.approved_amount, s.status, s.approval_user_id, s.approval_time, s.remark, s.extra_data, s.create_by, s.create_time, s.update_by, s.update_time from dr_agent_commission_settlement s left join sys_user u on s.agent_user_id = u.user_id left join ( select ur.user_id, group_concat(distinct r.role_key order by r.role_key) as agent_role_keys from sys_user_role ur join sys_role r on ur.role_id = r.role_id and r.del_flag = '0' group by ur.user_id ) roles on roles.user_id = s.agent_user_id order by s.create_time desc
2025-11-06 15:08:49 [http-nio-8080-exec-3] DEBUG c.d.w.m.A.searchAdminSettlements - ==> Parameters: 
2025-11-06 15:08:49 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:08:49 [http-nio-8080-exec-2] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:08:49 [http-nio-8080-exec-2] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:08:49 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:08:49 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:08:49 [http-nio-8080-exec-2] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:08:49 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/agent/commission-overview
2025-11-06 15:08:49 [http-nio-8080-exec-2] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/agent/commission-overview from 127.0.0.1
2025-11-06 15:08:49 [http-nio-8080-exec-2] ERROR c.d.c.e.GlobalExceptionHandler - 系统异常
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource statistics/agent/commission-overview.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:585)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.deepreach.common.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:136)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-11-06 15:08:49 [http-nio-8080-exec-2] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/agent/commission-overview from 127.0.0.1 - 状态: 500 - 耗时: 6ms
2025-11-06 15:08:49 [http-nio-8080-exec-3] DEBUG c.d.w.m.A.searchAdminSettlements - <==      Total: 4
2025-11-06 15:08:49 [http-nio-8080-exec-3] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/agent/commission/settlement/admin/list from 127.0.0.1 - 状态: 200 - 耗时: 157ms
2025-11-06 15:10:53 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/agent/commission-overview
2025-11-06 15:10:53 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:10:53 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:10:53 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:10:53 [http-nio-8080-exec-7] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:10:53 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:10:53 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:10:54 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:10:54 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:10:54 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:10:54 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:10:54 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:10:54 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:10:54 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:10:54 [http-nio-8080-exec-7] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:10:54 [http-nio-8080-exec-7] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:10:54 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:10:54 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:10:54 [http-nio-8080-exec-7] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:10:54 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/agent/commission-overview
2025-11-06 15:10:54 [http-nio-8080-exec-7] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/agent/commission-overview from 127.0.0.1
2025-11-06 15:10:54 [http-nio-8080-exec-7] ERROR c.d.c.e.GlobalExceptionHandler - 系统异常
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource statistics/agent/commission-overview.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:585)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.deepreach.common.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:136)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-11-06 15:10:54 [http-nio-8080-exec-7] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/agent/commission-overview from 127.0.0.1 - 状态: 500 - 耗时: 8ms
2025-11-06 15:10:54 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /agent/commission/1/records
2025-11-06 15:10:54 [http-nio-8080-exec-1] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:10:54 [http-nio-8080-exec-1] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:10:54 [http-nio-8080-exec-1] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:10:54 [http-nio-8080-exec-1] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:10:54 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:10:54 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:10:54 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:10:54 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:10:54 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:10:54 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:10:54 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:10:54 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:10:54 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:10:54 [http-nio-8080-exec-1] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:10:54 [http-nio-8080-exec-1] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:10:54 [http-nio-8080-exec-1] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:10:54 [http-nio-8080-exec-1] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:10:54 [http-nio-8080-exec-1] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:10:54 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /agent/commission/1/records
2025-11-06 15:10:54 [http-nio-8080-exec-1] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/agent/commission/1/records from 127.0.0.1
2025-11-06 15:10:54 [http-nio-8080-exec-1] DEBUG c.d.w.m.A.selectRecordsByAgent - ==>  Preparing: select r.record_id, r.agent_user_id, r.agent_dept_id, r.buyer_user_id, buyer.username as buyerUsername, r.trigger_billing_id, br.bill_no, r.trigger_amount, r.commission_amount, r.commission_rate, r.hierarchy_level, r.business_type, r.status, r.description, r.create_time from dr_agent_commission_record r left join sys_user buyer on r.buyer_user_id = buyer.user_id left join dr_billing_record br on r.trigger_billing_id = br.bill_id where r.agent_user_id = ? and r.direction = '+' and r.business_type = 'RECHARGE_COMMISSION' order by r.create_time desc
2025-11-06 15:10:54 [http-nio-8080-exec-1] DEBUG c.d.w.m.A.selectRecordsByAgent - ==> Parameters: 1(Long)
2025-11-06 15:10:54 [http-nio-8080-exec-1] DEBUG c.d.w.m.A.selectRecordsByAgent - <==      Total: 0
2025-11-06 15:10:54 [http-nio-8080-exec-1] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/agent/commission/1/records from 127.0.0.1 - 状态: 200 - 耗时: 152ms
2025-11-06 15:10:57 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/agent/commission-overview
2025-11-06 15:10:57 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing POST /agent/commission/settlement/admin/list
2025-11-06 15:10:57 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:10:57 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:10:57 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:10:57 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:10:57 [http-nio-8080-exec-4] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:10:57 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:10:57 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:10:57 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:10:57 [http-nio-8080-exec-10] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:10:57 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:10:57 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:10:57 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:10:57 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:10:57 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:10:57 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:10:57 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:10:57 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:10:57 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:10:57 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:10:57 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:10:57 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:10:57 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:10:57 [http-nio-8080-exec-4] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:10:57 [http-nio-8080-exec-4] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:10:57 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:10:57 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:10:57 [http-nio-8080-exec-4] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:10:57 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/agent/commission-overview
2025-11-06 15:10:57 [http-nio-8080-exec-4] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/agent/commission-overview from 127.0.0.1
2025-11-06 15:10:57 [http-nio-8080-exec-4] ERROR c.d.c.e.GlobalExceptionHandler - 系统异常
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource statistics/agent/commission-overview.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:585)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.deepreach.common.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:136)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-11-06 15:10:57 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:10:57 [http-nio-8080-exec-4] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/agent/commission-overview from 127.0.0.1 - 状态: 500 - 耗时: 7ms
2025-11-06 15:10:57 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:10:57 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:10:57 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:10:57 [http-nio-8080-exec-10] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:10:57 [http-nio-8080-exec-10] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:10:57 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:10:57 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:10:57 [http-nio-8080-exec-10] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:10:57 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured POST /agent/commission/settlement/admin/list
2025-11-06 15:10:57 [http-nio-8080-exec-10] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/agent/commission/settlement/admin/list from 127.0.0.1
2025-11-06 15:10:57 [http-nio-8080-exec-10] DEBUG c.d.w.m.A.searchAdminSettlements - ==>  Preparing: select s.settlement_id, s.agent_user_id, u.username as agent_username, roles.agent_role_keys, s.request_amount, s.approved_amount, s.status, s.approval_user_id, s.approval_time, s.remark, s.extra_data, s.create_by, s.create_time, s.update_by, s.update_time from dr_agent_commission_settlement s left join sys_user u on s.agent_user_id = u.user_id left join ( select ur.user_id, group_concat(distinct r.role_key order by r.role_key) as agent_role_keys from sys_user_role ur join sys_role r on ur.role_id = r.role_id and r.del_flag = '0' group by ur.user_id ) roles on roles.user_id = s.agent_user_id order by s.create_time desc
2025-11-06 15:10:57 [http-nio-8080-exec-10] DEBUG c.d.w.m.A.searchAdminSettlements - ==> Parameters: 
2025-11-06 15:10:57 [http-nio-8080-exec-10] DEBUG c.d.w.m.A.searchAdminSettlements - <==      Total: 4
2025-11-06 15:10:57 [http-nio-8080-exec-10] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/agent/commission/settlement/admin/list from 127.0.0.1 - 状态: 200 - 耗时: 157ms
2025-11-06 15:11:00 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /system/user/list
2025-11-06 15:11:00 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /system/user/list
2025-11-06 15:11:00 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:11:00 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:11:00 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:11:00 [http-nio-8080-exec-5] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:11:00 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:11:00 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:11:00 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:11:00 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:11:00 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:11:01 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:11:01 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:11:01 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:11:01 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:11:01 [http-nio-8080-exec-5] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:11:01 [http-nio-8080-exec-5] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:11:01 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:11:01 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:11:01 [http-nio-8080-exec-5] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:11:01 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /system/user/list
2025-11-06 15:11:01 [http-nio-8080-exec-5] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/system/user/list from 127.0.0.1
2025-11-06 15:11:01 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserList - ==>  Preparing: SELECT DISTINCT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_name, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur_filter ON u.user_id = ur_filter.user_id LEFT JOIN sys_role r_filter ON ur_filter.role_id = r_filter.role_id AND r_filter.del_flag = '0' WHERE u.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY u.create_time DESC
2025-11-06 15:11:01 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserList - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 15:11:01 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserList - <==      Total: 49
2025-11-06 15:11:01 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:11:01 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 381(Long)
2025-11-06 15:11:01 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:11:01 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:11:01 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 380(Long)
2025-11-06 15:11:01 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:11:01 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:11:01 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 379(Long)
2025-11-06 15:11:02 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:11:02 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:11:02 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 378(Long)
2025-11-06 15:11:02 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:11:02 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:11:02 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 377(Long)
2025-11-06 15:11:02 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:11:02 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:11:02 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 376(Long)
2025-11-06 15:11:02 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:11:02 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:11:02 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 375(Long)
2025-11-06 15:11:02 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:11:02 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:11:02 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 374(Long)
2025-11-06 15:11:02 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:11:02 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:11:02 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 373(Long)
2025-11-06 15:11:03 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:11:03 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:11:03 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 372(Long)
2025-11-06 15:11:03 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:11:03 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:11:03 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 371(Long)
2025-11-06 15:11:03 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:11:03 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:11:03 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 370(Long)
2025-11-06 15:11:03 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:11:03 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:11:03 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 369(Long)
2025-11-06 15:11:03 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:11:03 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:11:03 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 357(Long)
2025-11-06 15:11:03 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:11:04 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:11:04 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 356(Long)
2025-11-06 15:11:04 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:11:04 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:11:04 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 355(Long)
2025-11-06 15:11:04 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:11:04 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:11:04 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 354(Long)
2025-11-06 15:11:04 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:11:04 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:11:04 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 353(Long)
2025-11-06 15:11:04 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:11:04 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:11:04 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 352(Long)
2025-11-06 15:11:04 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:11:04 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:11:04 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 351(Long)
2025-11-06 15:11:05 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:11:05 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:11:05 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 349(Long)
2025-11-06 15:11:05 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:11:05 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:11:05 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 348(Long)
2025-11-06 15:11:05 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:11:05 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:11:05 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 347(Long)
2025-11-06 15:11:06 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:11:06 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:11:06 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 345(Long)
2025-11-06 15:11:06 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:11:06 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:11:06 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 344(Long)
2025-11-06 15:11:06 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:11:06 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:11:06 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 343(Long)
2025-11-06 15:11:06 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:11:06 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:11:06 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 342(Long)
2025-11-06 15:11:06 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:11:06 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:11:06 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 340(Long)
2025-11-06 15:11:06 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:11:06 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:11:06 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 339(Long)
2025-11-06 15:11:07 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:11:07 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:11:07 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 338(Long)
2025-11-06 15:11:07 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:11:07 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:11:07 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 337(Long)
2025-11-06 15:11:07 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:11:07 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:11:07 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 336(Long)
2025-11-06 15:11:07 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:11:07 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:11:07 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 335(Long)
2025-11-06 15:11:08 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:11:08 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:11:08 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 334(Long)
2025-11-06 15:11:08 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:11:08 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:11:08 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 333(Long)
2025-11-06 15:11:08 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:11:08 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:11:08 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 332(Long)
2025-11-06 15:11:08 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:11:08 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:11:08 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 331(Long)
2025-11-06 15:11:08 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:11:08 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:11:08 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 330(Long)
2025-11-06 15:11:09 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:11:09 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:11:09 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 329(Long)
2025-11-06 15:11:09 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:11:09 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:11:09 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 328(Long)
2025-11-06 15:11:09 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:11:09 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:11:09 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 327(Long)
2025-11-06 15:11:09 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:11:09 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:11:09 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 326(Long)
2025-11-06 15:11:10 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:11:10 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:11:10 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 325(Long)
2025-11-06 15:11:10 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:11:10 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:11:10 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 324(Long)
2025-11-06 15:11:10 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:11:10 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:11:10 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 323(Long)
2025-11-06 15:11:10 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:11:10 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:11:10 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 322(Long)
2025-11-06 15:11:10 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:11:10 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:11:10 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 321(Long)
2025-11-06 15:11:10 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:11:10 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:11:10 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 320(Long)
2025-11-06 15:11:10 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:11:10 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:11:10 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 1(Long)
2025-11-06 15:11:11 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:11:11 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 15:11:11 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 379(Long), 1(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 354(Long), 337(Long), 342(Long), 344(Long), 332(Long), 334(Long), 320(Long), 329(Long), 333(Long), 321(Long)
2025-11-06 15:11:11 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 17
2025-11-06 15:11:11 [http-nio-8080-exec-5] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/system/user/list from 127.0.0.1 - 状态: 200 - 耗时: 10066ms
2025-11-06 15:11:11 [http-nio-8080-exec-5] WARN  c.d.c.i.PerformanceInterceptor - 检测到慢请求: POST /api/system/user/list from 127.0.0.1 - 耗时: 10066ms - 超过阈值: 3000ms
2025-11-06 15:12:56 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/agent/commission-overview
2025-11-06 15:12:56 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:12:56 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:12:56 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:12:56 [http-nio-8080-exec-3] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:12:56 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:12:56 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:12:56 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:12:56 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:12:56 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:12:56 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:12:56 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:12:56 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:12:57 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:12:57 [http-nio-8080-exec-3] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:12:57 [http-nio-8080-exec-3] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:12:57 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:12:57 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:12:57 [http-nio-8080-exec-3] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:12:57 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/agent/commission-overview
2025-11-06 15:12:57 [http-nio-8080-exec-3] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/agent/commission-overview from 127.0.0.1
2025-11-06 15:12:57 [http-nio-8080-exec-3] ERROR c.d.c.e.GlobalExceptionHandler - 系统异常
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource statistics/agent/commission-overview.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:585)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.deepreach.common.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:136)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-11-06 15:12:57 [http-nio-8080-exec-3] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/agent/commission-overview from 127.0.0.1 - 状态: 500 - 耗时: 16ms
2025-11-06 15:12:57 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing POST /agent/commission/1/records
2025-11-06 15:12:57 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:12:57 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:12:57 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:12:57 [http-nio-8080-exec-9] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:12:57 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:12:57 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:12:57 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:12:57 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:12:57 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:12:57 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:12:57 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:12:57 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:12:57 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:12:57 [http-nio-8080-exec-9] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:12:57 [http-nio-8080-exec-9] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:12:57 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:12:57 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:12:57 [http-nio-8080-exec-9] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:12:57 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured POST /agent/commission/1/records
2025-11-06 15:12:57 [http-nio-8080-exec-9] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/agent/commission/1/records from 127.0.0.1
2025-11-06 15:12:57 [http-nio-8080-exec-9] DEBUG c.d.w.m.A.selectRecordsByAgent - ==>  Preparing: select r.record_id, r.agent_user_id, r.agent_dept_id, r.buyer_user_id, buyer.username as buyerUsername, r.trigger_billing_id, br.bill_no, r.trigger_amount, r.commission_amount, r.commission_rate, r.hierarchy_level, r.business_type, r.status, r.description, r.create_time from dr_agent_commission_record r left join sys_user buyer on r.buyer_user_id = buyer.user_id left join dr_billing_record br on r.trigger_billing_id = br.bill_id where r.agent_user_id = ? and r.direction = '+' and r.business_type = 'RECHARGE_COMMISSION' order by r.create_time desc
2025-11-06 15:12:57 [http-nio-8080-exec-9] DEBUG c.d.w.m.A.selectRecordsByAgent - ==> Parameters: 1(Long)
2025-11-06 15:12:57 [http-nio-8080-exec-9] DEBUG c.d.w.m.A.selectRecordsByAgent - <==      Total: 0
2025-11-06 15:12:57 [http-nio-8080-exec-9] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/agent/commission/1/records from 127.0.0.1 - 状态: 200 - 耗时: 157ms
2025-11-06 15:12:58 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/agent/commission-overview
2025-11-06 15:12:58 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /agent/commission/settlement/admin/list
2025-11-06 15:12:58 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:12:58 [http-nio-8080-exec-1] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:12:58 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:12:58 [http-nio-8080-exec-1] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:12:58 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:12:58 [http-nio-8080-exec-1] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:12:58 [http-nio-8080-exec-7] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:12:58 [http-nio-8080-exec-1] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:12:58 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:12:58 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:12:58 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:12:58 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:12:58 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:12:58 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:12:58 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:12:58 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:12:58 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:12:58 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:12:58 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:12:58 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:12:58 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:12:58 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:12:58 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:12:58 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:12:58 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:12:58 [http-nio-8080-exec-7] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:12:58 [http-nio-8080-exec-7] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:12:58 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:12:58 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:12:58 [http-nio-8080-exec-7] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:12:58 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/agent/commission-overview
2025-11-06 15:12:58 [http-nio-8080-exec-7] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/agent/commission-overview from 127.0.0.1
2025-11-06 15:12:58 [http-nio-8080-exec-7] ERROR c.d.c.e.GlobalExceptionHandler - 系统异常
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource statistics/agent/commission-overview.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:585)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.deepreach.common.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:136)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-11-06 15:12:58 [http-nio-8080-exec-7] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/agent/commission-overview from 127.0.0.1 - 状态: 500 - 耗时: 6ms
2025-11-06 15:12:58 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:12:58 [http-nio-8080-exec-1] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:12:58 [http-nio-8080-exec-1] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:12:58 [http-nio-8080-exec-1] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:12:58 [http-nio-8080-exec-1] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:12:58 [http-nio-8080-exec-1] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:12:58 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /agent/commission/settlement/admin/list
2025-11-06 15:12:58 [http-nio-8080-exec-1] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/agent/commission/settlement/admin/list from 127.0.0.1
2025-11-06 15:12:58 [http-nio-8080-exec-1] DEBUG c.d.w.m.A.searchAdminSettlements - ==>  Preparing: select s.settlement_id, s.agent_user_id, u.username as agent_username, roles.agent_role_keys, s.request_amount, s.approved_amount, s.status, s.approval_user_id, s.approval_time, s.remark, s.extra_data, s.create_by, s.create_time, s.update_by, s.update_time from dr_agent_commission_settlement s left join sys_user u on s.agent_user_id = u.user_id left join ( select ur.user_id, group_concat(distinct r.role_key order by r.role_key) as agent_role_keys from sys_user_role ur join sys_role r on ur.role_id = r.role_id and r.del_flag = '0' group by ur.user_id ) roles on roles.user_id = s.agent_user_id order by s.create_time desc
2025-11-06 15:12:58 [http-nio-8080-exec-1] DEBUG c.d.w.m.A.searchAdminSettlements - ==> Parameters: 
2025-11-06 15:12:58 [http-nio-8080-exec-1] DEBUG c.d.w.m.A.searchAdminSettlements - <==      Total: 4
2025-11-06 15:12:58 [http-nio-8080-exec-1] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/agent/commission/settlement/admin/list from 127.0.0.1 - 状态: 200 - 耗时: 155ms
2025-11-06 15:13:00 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/agent/commission-overview
2025-11-06 15:13:00 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:13:00 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:13:00 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:13:00 [http-nio-8080-exec-6] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:13:00 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:13:00 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:13:01 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:13:01 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:01 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:13:01 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:13:01 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:13:01 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:13:01 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:13:01 [http-nio-8080-exec-6] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:13:01 [http-nio-8080-exec-6] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:13:01 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:13:01 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:13:01 [http-nio-8080-exec-6] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:13:01 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/agent/commission-overview
2025-11-06 15:13:01 [http-nio-8080-exec-6] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/agent/commission-overview from 127.0.0.1
2025-11-06 15:13:01 [http-nio-8080-exec-6] ERROR c.d.c.e.GlobalExceptionHandler - 系统异常
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource statistics/agent/commission-overview.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:585)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.deepreach.common.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:136)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-11-06 15:13:01 [http-nio-8080-exec-6] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/agent/commission-overview from 127.0.0.1 - 状态: 500 - 耗时: 8ms
2025-11-06 15:13:01 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /agent/commission/1/records
2025-11-06 15:13:01 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:13:01 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:13:01 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:13:01 [http-nio-8080-exec-4] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:13:01 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:13:01 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:13:01 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:13:01 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:01 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:13:01 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:13:01 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:13:01 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:13:01 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:13:01 [http-nio-8080-exec-4] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:13:01 [http-nio-8080-exec-4] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:13:01 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:13:01 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:13:01 [http-nio-8080-exec-4] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:13:01 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured POST /agent/commission/1/records
2025-11-06 15:13:01 [http-nio-8080-exec-4] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/agent/commission/1/records from 127.0.0.1
2025-11-06 15:13:01 [http-nio-8080-exec-4] DEBUG c.d.w.m.A.selectRecordsByAgent - ==>  Preparing: select r.record_id, r.agent_user_id, r.agent_dept_id, r.buyer_user_id, buyer.username as buyerUsername, r.trigger_billing_id, br.bill_no, r.trigger_amount, r.commission_amount, r.commission_rate, r.hierarchy_level, r.business_type, r.status, r.description, r.create_time from dr_agent_commission_record r left join sys_user buyer on r.buyer_user_id = buyer.user_id left join dr_billing_record br on r.trigger_billing_id = br.bill_id where r.agent_user_id = ? and r.direction = '+' and r.business_type = 'RECHARGE_COMMISSION' order by r.create_time desc
2025-11-06 15:13:01 [http-nio-8080-exec-4] DEBUG c.d.w.m.A.selectRecordsByAgent - ==> Parameters: 1(Long)
2025-11-06 15:13:02 [http-nio-8080-exec-4] DEBUG c.d.w.m.A.selectRecordsByAgent - <==      Total: 0
2025-11-06 15:13:02 [http-nio-8080-exec-4] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/agent/commission/1/records from 127.0.0.1 - 状态: 200 - 耗时: 152ms
2025-11-06 15:13:03 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing POST /system/user/list
2025-11-06 15:13:03 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:13:03 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:13:03 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:13:03 [http-nio-8080-exec-10] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:13:03 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:13:03 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:13:03 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:13:03 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:03 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:13:03 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:13:03 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:13:03 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:13:03 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:13:03 [http-nio-8080-exec-10] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:13:03 [http-nio-8080-exec-10] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:13:03 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:13:03 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:13:03 [http-nio-8080-exec-10] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:13:03 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured POST /system/user/list
2025-11-06 15:13:03 [http-nio-8080-exec-10] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/system/user/list from 127.0.0.1
2025-11-06 15:13:03 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserList - ==>  Preparing: SELECT DISTINCT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_name, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur_filter ON u.user_id = ur_filter.user_id LEFT JOIN sys_role r_filter ON ur_filter.role_id = r_filter.role_id AND r_filter.del_flag = '0' WHERE u.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY u.create_time DESC
2025-11-06 15:13:03 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserList - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 15:13:04 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserList - <==      Total: 49
2025-11-06 15:13:04 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:04 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 381(Long)
2025-11-06 15:13:04 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:04 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:04 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 380(Long)
2025-11-06 15:13:04 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:04 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:04 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 379(Long)
2025-11-06 15:13:04 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:04 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:04 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 378(Long)
2025-11-06 15:13:04 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:04 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:04 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 377(Long)
2025-11-06 15:13:04 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:04 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:04 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 376(Long)
2025-11-06 15:13:05 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:05 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:05 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 375(Long)
2025-11-06 15:13:05 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:05 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:05 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 374(Long)
2025-11-06 15:13:05 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:05 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:05 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 373(Long)
2025-11-06 15:13:05 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/agent/commission-overview
2025-11-06 15:13:05 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:13:05 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:13:05 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:13:05 [http-nio-8080-exec-8] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:13:05 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:13:05 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:13:05 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:05 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:05 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 372(Long)
2025-11-06 15:13:05 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:13:05 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:05 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:13:06 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:06 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:06 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 371(Long)
2025-11-06 15:13:06 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:13:06 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:13:06 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:13:06 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:06 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:13:06 [http-nio-8080-exec-8] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:13:06 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:06 [http-nio-8080-exec-8] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:13:06 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:13:06 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 370(Long)
2025-11-06 15:13:06 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:13:06 [http-nio-8080-exec-8] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:13:06 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/agent/commission-overview
2025-11-06 15:13:06 [http-nio-8080-exec-8] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/agent/commission-overview from 127.0.0.1
2025-11-06 15:13:06 [http-nio-8080-exec-8] ERROR c.d.c.e.GlobalExceptionHandler - 系统异常
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource statistics/agent/commission-overview.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:585)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.deepreach.common.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:136)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-11-06 15:13:06 [http-nio-8080-exec-8] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/agent/commission-overview from 127.0.0.1 - 状态: 500 - 耗时: 2ms
2025-11-06 15:13:06 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:06 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:06 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 369(Long)
2025-11-06 15:13:06 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:06 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:06 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 357(Long)
2025-11-06 15:13:06 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:06 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:06 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 356(Long)
2025-11-06 15:13:06 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:06 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:06 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 355(Long)
2025-11-06 15:13:07 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:07 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:07 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 354(Long)
2025-11-06 15:13:07 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:07 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:07 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 353(Long)
2025-11-06 15:13:07 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:07 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:07 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 352(Long)
2025-11-06 15:13:07 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:07 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:07 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 351(Long)
2025-11-06 15:13:07 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:07 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:07 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 349(Long)
2025-11-06 15:13:07 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:07 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:07 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 348(Long)
2025-11-06 15:13:07 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:07 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:07 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 347(Long)
2025-11-06 15:13:08 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:08 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:08 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 345(Long)
2025-11-06 15:13:08 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:08 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:08 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 344(Long)
2025-11-06 15:13:08 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:08 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:08 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 343(Long)
2025-11-06 15:13:08 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:08 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:08 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 342(Long)
2025-11-06 15:13:09 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:09 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:09 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 340(Long)
2025-11-06 15:13:09 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:09 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:09 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 339(Long)
2025-11-06 15:13:09 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:09 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:09 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 338(Long)
2025-11-06 15:13:09 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:09 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:09 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 337(Long)
2025-11-06 15:13:09 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:09 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:09 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 336(Long)
2025-11-06 15:13:09 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:09 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:09 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 335(Long)
2025-11-06 15:13:09 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:09 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:09 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 334(Long)
2025-11-06 15:13:10 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:10 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:10 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 333(Long)
2025-11-06 15:13:10 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:10 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:10 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 332(Long)
2025-11-06 15:13:10 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:10 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:10 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 331(Long)
2025-11-06 15:13:10 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:10 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:10 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 330(Long)
2025-11-06 15:13:10 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:10 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:10 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 329(Long)
2025-11-06 15:13:10 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:10 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:10 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 328(Long)
2025-11-06 15:13:11 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:11 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:11 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 327(Long)
2025-11-06 15:13:11 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:11 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:11 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 326(Long)
2025-11-06 15:13:11 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:11 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:11 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 325(Long)
2025-11-06 15:13:11 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:11 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:11 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 324(Long)
2025-11-06 15:13:11 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:11 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:11 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 323(Long)
2025-11-06 15:13:12 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:12 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:12 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 322(Long)
2025-11-06 15:13:12 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:12 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:12 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 321(Long)
2025-11-06 15:13:12 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:12 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:12 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 320(Long)
2025-11-06 15:13:12 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:12 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:12 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 1(Long)
2025-11-06 15:13:12 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:12 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 15:13:12 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 379(Long), 1(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 354(Long), 337(Long), 342(Long), 344(Long), 332(Long), 334(Long), 320(Long), 329(Long), 333(Long), 321(Long)
2025-11-06 15:13:12 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 17
2025-11-06 15:13:12 [http-nio-8080-exec-10] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/system/user/list from 127.0.0.1 - 状态: 200 - 耗时: 8911ms
2025-11-06 15:13:12 [http-nio-8080-exec-10] WARN  c.d.c.i.PerformanceInterceptor - 检测到慢请求: POST /api/system/user/list from 127.0.0.1 - 耗时: 8911ms - 超过阈值: 3000ms
2025-11-06 15:13:13 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/agent/commission-overview
2025-11-06 15:13:13 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:13:13 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:13:13 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:13:13 [http-nio-8080-exec-5] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:13:13 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:13:13 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:13:14 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:13:14 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:14 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:13:14 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:13:14 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:13:14 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:13:14 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:13:14 [http-nio-8080-exec-5] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:13:14 [http-nio-8080-exec-5] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:13:14 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:13:14 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:13:14 [http-nio-8080-exec-5] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:13:14 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/agent/commission-overview
2025-11-06 15:13:14 [http-nio-8080-exec-5] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/agent/commission-overview from 127.0.0.1
2025-11-06 15:13:14 [http-nio-8080-exec-5] ERROR c.d.c.e.GlobalExceptionHandler - 系统异常
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource statistics/agent/commission-overview.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:585)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.deepreach.common.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:136)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-11-06 15:13:14 [http-nio-8080-exec-5] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/agent/commission-overview from 127.0.0.1 - 状态: 500 - 耗时: 6ms
2025-11-06 15:13:18 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /system/user/list
2025-11-06 15:13:18 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:13:18 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:13:18 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:13:18 [http-nio-8080-exec-2] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:13:18 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:13:18 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:13:18 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:13:18 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:18 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:13:18 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:13:18 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:13:18 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:13:18 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:13:18 [http-nio-8080-exec-2] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:13:18 [http-nio-8080-exec-2] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:13:18 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:13:18 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:13:18 [http-nio-8080-exec-2] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:13:18 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /system/user/list
2025-11-06 15:13:18 [http-nio-8080-exec-2] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/system/user/list from 127.0.0.1
2025-11-06 15:13:18 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserList - ==>  Preparing: SELECT DISTINCT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_name, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur_filter ON u.user_id = ur_filter.user_id LEFT JOIN sys_role r_filter ON ur_filter.role_id = r_filter.role_id AND r_filter.del_flag = '0' WHERE u.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY u.create_time DESC
2025-11-06 15:13:18 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserList - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 15:13:18 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserList - <==      Total: 49
2025-11-06 15:13:18 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:18 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 381(Long)
2025-11-06 15:13:19 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:19 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:19 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 380(Long)
2025-11-06 15:13:19 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:19 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:19 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 379(Long)
2025-11-06 15:13:19 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:19 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:19 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 378(Long)
2025-11-06 15:13:19 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:19 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:19 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 377(Long)
2025-11-06 15:13:19 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:19 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:19 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 376(Long)
2025-11-06 15:13:19 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/agent/commission-overview
2025-11-06 15:13:19 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:13:19 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:13:19 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:13:19 [http-nio-8080-exec-3] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:13:19 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:13:19 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:13:19 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:19 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:19 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 375(Long)
2025-11-06 15:13:19 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:13:19 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:19 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:13:20 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:20 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:20 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 374(Long)
2025-11-06 15:13:20 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:13:20 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:13:20 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:13:20 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:20 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:20 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 373(Long)
2025-11-06 15:13:20 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:13:20 [http-nio-8080-exec-3] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:13:20 [http-nio-8080-exec-3] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:13:20 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:13:20 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:13:20 [http-nio-8080-exec-3] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:13:20 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/agent/commission-overview
2025-11-06 15:13:20 [http-nio-8080-exec-3] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/agent/commission-overview from 127.0.0.1
2025-11-06 15:13:20 [http-nio-8080-exec-3] ERROR c.d.c.e.GlobalExceptionHandler - 系统异常
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource statistics/agent/commission-overview.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:585)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.deepreach.common.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:136)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-11-06 15:13:20 [http-nio-8080-exec-3] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/agent/commission-overview from 127.0.0.1 - 状态: 500 - 耗时: 5ms
2025-11-06 15:13:20 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:20 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:20 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 372(Long)
2025-11-06 15:13:20 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:20 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:20 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 371(Long)
2025-11-06 15:13:20 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:20 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:20 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 370(Long)
2025-11-06 15:13:20 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:20 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:20 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 369(Long)
2025-11-06 15:13:21 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:21 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:21 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 357(Long)
2025-11-06 15:13:21 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:21 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:21 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 356(Long)
2025-11-06 15:13:21 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:21 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:21 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 355(Long)
2025-11-06 15:13:22 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:22 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:22 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 354(Long)
2025-11-06 15:13:22 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:22 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:22 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 353(Long)
2025-11-06 15:13:22 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing POST /system/user/list
2025-11-06 15:13:22 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:13:22 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:13:22 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:13:22 [http-nio-8080-exec-9] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:13:22 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:13:22 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:13:22 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:22 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:13:22 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:22 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:22 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 352(Long)
2025-11-06 15:13:22 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:13:22 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:22 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:22 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 351(Long)
2025-11-06 15:13:22 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:13:22 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:13:22 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:13:22 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:22 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:22 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 349(Long)
2025-11-06 15:13:22 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:13:22 [http-nio-8080-exec-9] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:13:22 [http-nio-8080-exec-9] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:13:22 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:13:22 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:13:22 [http-nio-8080-exec-9] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:13:22 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured POST /system/user/list
2025-11-06 15:13:22 [http-nio-8080-exec-9] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/system/user/list from 127.0.0.1
2025-11-06 15:13:22 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserList - ==>  Preparing: SELECT DISTINCT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_name, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur_filter ON u.user_id = ur_filter.user_id LEFT JOIN sys_role r_filter ON ur_filter.role_id = r_filter.role_id AND r_filter.del_flag = '0' WHERE u.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY u.create_time DESC
2025-11-06 15:13:22 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserList - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 15:13:23 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:23 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:23 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 348(Long)
2025-11-06 15:13:23 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:23 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:23 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 347(Long)
2025-11-06 15:13:23 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserList - <==      Total: 49
2025-11-06 15:13:23 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:23 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 381(Long)
2025-11-06 15:13:23 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:23 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:23 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 345(Long)
2025-11-06 15:13:23 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:23 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:23 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 380(Long)
2025-11-06 15:13:23 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:23 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:23 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 344(Long)
2025-11-06 15:13:23 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:23 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:23 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 343(Long)
2025-11-06 15:13:23 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:23 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:23 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 342(Long)
2025-11-06 15:13:24 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:24 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:24 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 340(Long)
2025-11-06 15:13:24 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:24 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:24 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 379(Long)
2025-11-06 15:13:24 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:24 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:24 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 339(Long)
2025-11-06 15:13:24 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:24 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:24 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 378(Long)
2025-11-06 15:13:24 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:24 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:24 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 338(Long)
2025-11-06 15:13:24 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:24 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:24 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 377(Long)
2025-11-06 15:13:24 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:24 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:24 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 337(Long)
2025-11-06 15:13:24 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:24 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:24 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 376(Long)
2025-11-06 15:13:24 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:24 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:24 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 336(Long)
2025-11-06 15:13:24 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:24 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:24 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 375(Long)
2025-11-06 15:13:24 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:24 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:24 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 335(Long)
2025-11-06 15:13:24 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:24 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:24 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 374(Long)
2025-11-06 15:13:25 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:25 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:25 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 334(Long)
2025-11-06 15:13:25 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:25 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:25 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 373(Long)
2025-11-06 15:13:25 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:25 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:25 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 333(Long)
2025-11-06 15:13:25 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:25 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:25 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 372(Long)
2025-11-06 15:13:25 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:25 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:25 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 332(Long)
2025-11-06 15:13:25 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:25 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:25 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 371(Long)
2025-11-06 15:13:25 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:25 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:25 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 331(Long)
2025-11-06 15:13:25 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:25 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:25 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 330(Long)
2025-11-06 15:13:25 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:25 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:25 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 329(Long)
2025-11-06 15:13:25 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:25 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:25 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 370(Long)
2025-11-06 15:13:25 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:25 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:25 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 328(Long)
2025-11-06 15:13:26 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:26 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:26 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:26 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:26 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 369(Long)
2025-11-06 15:13:26 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 327(Long)
2025-11-06 15:13:26 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:26 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:26 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 326(Long)
2025-11-06 15:13:26 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:26 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:26 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 325(Long)
2025-11-06 15:13:26 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:26 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:26 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 324(Long)
2025-11-06 15:13:26 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:26 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:26 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 323(Long)
2025-11-06 15:13:26 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:26 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:26 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 357(Long)
2025-11-06 15:13:26 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:26 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:26 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 356(Long)
2025-11-06 15:13:26 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:26 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:26 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 355(Long)
2025-11-06 15:13:27 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:27 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:27 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 322(Long)
2025-11-06 15:13:27 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:27 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:27 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 354(Long)
2025-11-06 15:13:27 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:27 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:27 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 321(Long)
2025-11-06 15:13:27 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:27 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:27 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 353(Long)
2025-11-06 15:13:27 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:27 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:27 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:27 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 352(Long)
2025-11-06 15:13:27 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:27 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 320(Long)
2025-11-06 15:13:27 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:27 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:27 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 1(Long)
2025-11-06 15:13:27 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:27 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 15:13:27 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 379(Long), 1(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 354(Long), 337(Long), 342(Long), 344(Long), 332(Long), 334(Long), 320(Long), 329(Long), 333(Long), 321(Long)
2025-11-06 15:13:28 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 17
2025-11-06 15:13:28 [http-nio-8080-exec-2] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/system/user/list from 127.0.0.1 - 状态: 200 - 耗时: 9520ms
2025-11-06 15:13:28 [http-nio-8080-exec-2] WARN  c.d.c.i.PerformanceInterceptor - 检测到慢请求: POST /api/system/user/list from 127.0.0.1 - 耗时: 9520ms - 超过阈值: 3000ms
2025-11-06 15:13:28 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:28 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:28 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 351(Long)
2025-11-06 15:13:28 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:28 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:28 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 349(Long)
2025-11-06 15:13:28 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:28 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:28 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 348(Long)
2025-11-06 15:13:29 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:29 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:29 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 347(Long)
2025-11-06 15:13:29 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:29 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:29 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 345(Long)
2025-11-06 15:13:29 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:29 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:29 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 344(Long)
2025-11-06 15:13:29 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:29 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:29 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 343(Long)
2025-11-06 15:13:29 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:29 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:29 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 342(Long)
2025-11-06 15:13:30 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:30 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:30 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 340(Long)
2025-11-06 15:13:30 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:30 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:30 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 339(Long)
2025-11-06 15:13:30 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:30 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:30 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 338(Long)
2025-11-06 15:13:30 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:30 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:30 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 337(Long)
2025-11-06 15:13:30 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:30 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:30 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 336(Long)
2025-11-06 15:13:30 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:30 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:30 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 335(Long)
2025-11-06 15:13:31 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:31 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:31 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 334(Long)
2025-11-06 15:13:31 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:31 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:31 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 333(Long)
2025-11-06 15:13:31 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:31 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:31 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 332(Long)
2025-11-06 15:13:31 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:31 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:31 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 331(Long)
2025-11-06 15:13:31 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:31 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:31 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 330(Long)
2025-11-06 15:13:32 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:32 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:32 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 329(Long)
2025-11-06 15:13:32 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:32 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:32 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 328(Long)
2025-11-06 15:13:32 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:32 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:32 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 327(Long)
2025-11-06 15:13:32 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:32 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:32 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 326(Long)
2025-11-06 15:13:32 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:32 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:32 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 325(Long)
2025-11-06 15:13:33 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:33 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:33 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 324(Long)
2025-11-06 15:13:33 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:33 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:33 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 323(Long)
2025-11-06 15:13:33 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:33 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:33 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 322(Long)
2025-11-06 15:13:34 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:34 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:34 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 321(Long)
2025-11-06 15:13:34 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:34 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:34 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 320(Long)
2025-11-06 15:13:34 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:34 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:13:34 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 1(Long)
2025-11-06 15:13:34 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:13:34 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 15:13:34 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 379(Long), 1(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 354(Long), 337(Long), 342(Long), 344(Long), 332(Long), 334(Long), 320(Long), 329(Long), 333(Long), 321(Long)
2025-11-06 15:13:34 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 17
2025-11-06 15:13:34 [http-nio-8080-exec-9] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/system/user/list from 127.0.0.1 - 状态: 200 - 耗时: 12020ms
2025-11-06 15:13:34 [http-nio-8080-exec-9] WARN  c.d.c.i.PerformanceInterceptor - 检测到慢请求: POST /api/system/user/list from 127.0.0.1 - 耗时: 12020ms - 超过阈值: 3000ms
2025-11-06 15:14:07 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/agent/commission-overview
2025-11-06 15:14:07 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:14:07 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:14:07 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:14:07 [http-nio-8080-exec-6] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:14:07 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:14:07 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:14:07 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:14:07 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:14:07 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:14:07 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:14:07 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:14:07 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:14:07 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:14:07 [http-nio-8080-exec-6] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:14:07 [http-nio-8080-exec-6] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:14:07 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:14:07 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:14:07 [http-nio-8080-exec-6] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:14:07 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/agent/commission-overview
2025-11-06 15:14:07 [http-nio-8080-exec-6] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/agent/commission-overview from 127.0.0.1
2025-11-06 15:14:07 [http-nio-8080-exec-6] ERROR c.d.c.e.GlobalExceptionHandler - 系统异常
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource statistics/agent/commission-overview.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:585)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.deepreach.common.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:136)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-11-06 15:14:07 [http-nio-8080-exec-6] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/agent/commission-overview from 127.0.0.1 - 状态: 500 - 耗时: 11ms
2025-11-06 15:14:08 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /system/user/list
2025-11-06 15:14:08 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:14:08 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:14:08 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:14:08 [http-nio-8080-exec-4] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:14:08 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:14:08 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:14:08 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:14:08 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:14:08 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:14:09 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:14:09 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:14:09 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:14:09 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:14:09 [http-nio-8080-exec-4] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:14:09 [http-nio-8080-exec-4] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:14:09 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:14:09 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:14:09 [http-nio-8080-exec-4] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:14:09 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured POST /system/user/list
2025-11-06 15:14:09 [http-nio-8080-exec-4] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/system/user/list from 127.0.0.1
2025-11-06 15:14:09 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserList - ==>  Preparing: SELECT DISTINCT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_name, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur_filter ON u.user_id = ur_filter.user_id LEFT JOIN sys_role r_filter ON ur_filter.role_id = r_filter.role_id AND r_filter.del_flag = '0' WHERE u.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY u.create_time DESC
2025-11-06 15:14:09 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserList - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 15:14:09 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserList - <==      Total: 49
2025-11-06 15:14:09 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:14:09 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 381(Long)
2025-11-06 15:14:10 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:14:10 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:14:10 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 380(Long)
2025-11-06 15:14:10 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:14:10 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:14:10 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 379(Long)
2025-11-06 15:14:10 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:14:10 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:14:10 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 378(Long)
2025-11-06 15:14:10 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:14:10 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:14:10 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 377(Long)
2025-11-06 15:14:10 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:14:10 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:14:10 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 376(Long)
2025-11-06 15:14:11 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:14:11 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:14:11 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 375(Long)
2025-11-06 15:14:11 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:14:11 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:14:11 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 374(Long)
2025-11-06 15:14:11 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:14:11 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:14:11 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 373(Long)
2025-11-06 15:14:11 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:14:11 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:14:11 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 372(Long)
2025-11-06 15:14:12 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:14:12 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:14:12 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 371(Long)
2025-11-06 15:14:12 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:14:12 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:14:12 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 370(Long)
2025-11-06 15:14:12 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:14:12 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:14:12 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 369(Long)
2025-11-06 15:14:12 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:14:12 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:14:12 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 357(Long)
2025-11-06 15:14:12 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:14:12 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:14:12 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 356(Long)
2025-11-06 15:14:12 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:14:12 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:14:12 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 355(Long)
2025-11-06 15:14:13 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:14:13 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:14:13 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 354(Long)
2025-11-06 15:14:13 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:14:13 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:14:13 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 353(Long)
2025-11-06 15:14:13 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:14:13 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:14:13 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 352(Long)
2025-11-06 15:14:13 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:14:13 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:14:13 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 351(Long)
2025-11-06 15:14:13 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:14:13 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:14:13 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 349(Long)
2025-11-06 15:14:14 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:14:14 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:14:14 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 348(Long)
2025-11-06 15:14:14 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:14:14 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:14:14 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 347(Long)
2025-11-06 15:14:14 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:14:14 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:14:14 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 345(Long)
2025-11-06 15:14:14 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:14:14 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:14:14 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 344(Long)
2025-11-06 15:14:14 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:14:14 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:14:14 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 343(Long)
2025-11-06 15:14:14 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:14:14 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:14:14 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 342(Long)
2025-11-06 15:14:15 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:14:15 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:14:15 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 340(Long)
2025-11-06 15:14:15 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:14:15 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:14:15 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 339(Long)
2025-11-06 15:14:15 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:14:15 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:14:15 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 338(Long)
2025-11-06 15:14:15 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:14:15 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:14:15 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 337(Long)
2025-11-06 15:14:15 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:14:15 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:14:15 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 336(Long)
2025-11-06 15:14:16 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:14:16 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:14:16 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 335(Long)
2025-11-06 15:14:16 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:14:16 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:14:16 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 334(Long)
2025-11-06 15:14:16 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:14:16 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:14:16 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 333(Long)
2025-11-06 15:14:16 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:14:16 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:14:16 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 332(Long)
2025-11-06 15:14:16 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:14:16 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:14:16 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 331(Long)
2025-11-06 15:14:16 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:14:16 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:14:16 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 330(Long)
2025-11-06 15:14:17 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:14:17 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:14:17 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 329(Long)
2025-11-06 15:14:17 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:14:17 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:14:17 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 328(Long)
2025-11-06 15:14:17 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:14:17 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:14:17 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 327(Long)
2025-11-06 15:14:17 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:14:17 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:14:17 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 326(Long)
2025-11-06 15:14:17 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:14:17 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:14:17 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 325(Long)
2025-11-06 15:14:17 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:14:17 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:14:17 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 324(Long)
2025-11-06 15:14:18 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:14:18 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:14:18 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 323(Long)
2025-11-06 15:14:18 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:14:18 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:14:18 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 322(Long)
2025-11-06 15:14:18 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:14:18 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:14:18 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 321(Long)
2025-11-06 15:14:18 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:14:18 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:14:18 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 320(Long)
2025-11-06 15:14:18 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:14:18 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:14:18 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 1(Long)
2025-11-06 15:14:18 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:14:18 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 15:14:18 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 379(Long), 1(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 354(Long), 337(Long), 342(Long), 344(Long), 332(Long), 334(Long), 320(Long), 329(Long), 333(Long), 321(Long)
2025-11-06 15:14:18 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 17
2025-11-06 15:14:18 [http-nio-8080-exec-4] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/system/user/list from 127.0.0.1 - 状态: 200 - 耗时: 9382ms
2025-11-06 15:14:18 [http-nio-8080-exec-4] WARN  c.d.c.i.PerformanceInterceptor - 检测到慢请求: POST /api/system/user/list from 127.0.0.1 - 耗时: 9382ms - 超过阈值: 3000ms
2025-11-06 15:14:35 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/agent/commission-overview
2025-11-06 15:14:35 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:14:35 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:14:35 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:14:35 [http-nio-8080-exec-10] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:14:35 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:14:35 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:14:35 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:14:35 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:14:35 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:14:35 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:14:35 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:14:35 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:14:35 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:14:35 [http-nio-8080-exec-10] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:14:35 [http-nio-8080-exec-10] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:14:35 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:14:35 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:14:35 [http-nio-8080-exec-10] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:14:35 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/agent/commission-overview
2025-11-06 15:14:35 [http-nio-8080-exec-10] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/agent/commission-overview from 127.0.0.1
2025-11-06 15:14:35 [http-nio-8080-exec-10] ERROR c.d.c.e.GlobalExceptionHandler - 系统异常
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource statistics/agent/commission-overview.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:585)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.deepreach.common.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:136)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-11-06 15:14:35 [http-nio-8080-exec-10] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/agent/commission-overview from 127.0.0.1 - 状态: 500 - 耗时: 7ms
2025-11-06 15:16:38 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/agent/commission-overview
2025-11-06 15:16:38 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:16:38 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:16:38 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:16:38 [http-nio-8080-exec-5] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:16:38 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:16:38 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:16:38 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:16:38 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:16:38 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:16:39 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:16:39 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:16:39 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:16:39 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:16:39 [http-nio-8080-exec-5] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:16:39 [http-nio-8080-exec-5] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:16:39 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:16:39 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:16:39 [http-nio-8080-exec-5] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:16:39 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/agent/commission-overview
2025-11-06 15:16:39 [http-nio-8080-exec-5] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/agent/commission-overview from 127.0.0.1
2025-11-06 15:16:39 [http-nio-8080-exec-5] ERROR c.d.c.e.GlobalExceptionHandler - 系统异常
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource statistics/agent/commission-overview.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:585)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.deepreach.common.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:136)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-11-06 15:16:39 [http-nio-8080-exec-5] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/agent/commission-overview from 127.0.0.1 - 状态: 500 - 耗时: 11ms
2025-11-06 15:16:39 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /agent/commission/1/records
2025-11-06 15:16:39 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:16:39 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:16:39 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:16:39 [http-nio-8080-exec-3] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:16:39 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:16:39 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:16:39 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:16:39 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:16:39 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:16:39 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:16:39 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:16:39 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:16:39 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:16:39 [http-nio-8080-exec-3] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:16:39 [http-nio-8080-exec-3] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:16:39 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:16:39 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:16:39 [http-nio-8080-exec-3] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:16:39 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /agent/commission/1/records
2025-11-06 15:16:39 [http-nio-8080-exec-3] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/agent/commission/1/records from 127.0.0.1
2025-11-06 15:16:39 [http-nio-8080-exec-3] DEBUG c.d.w.m.A.selectRecordsByAgent - ==>  Preparing: select r.record_id, r.agent_user_id, r.agent_dept_id, r.buyer_user_id, buyer.username as buyerUsername, r.trigger_billing_id, br.bill_no, r.trigger_amount, r.commission_amount, r.commission_rate, r.hierarchy_level, r.business_type, r.status, r.description, r.create_time from dr_agent_commission_record r left join sys_user buyer on r.buyer_user_id = buyer.user_id left join dr_billing_record br on r.trigger_billing_id = br.bill_id where r.agent_user_id = ? and r.direction = '+' and r.business_type = 'RECHARGE_COMMISSION' order by r.create_time desc
2025-11-06 15:16:39 [http-nio-8080-exec-3] DEBUG c.d.w.m.A.selectRecordsByAgent - ==> Parameters: 1(Long)
2025-11-06 15:16:40 [http-nio-8080-exec-3] DEBUG c.d.w.m.A.selectRecordsByAgent - <==      Total: 0
2025-11-06 15:16:40 [http-nio-8080-exec-3] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/agent/commission/1/records from 127.0.0.1 - 状态: 200 - 耗时: 163ms
2025-11-06 15:16:40 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/agent/commission-overview
2025-11-06 15:16:40 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /agent/commission/settlement/admin/list
2025-11-06 15:16:40 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:16:40 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:16:40 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:16:40 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:16:40 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:16:40 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:16:40 [http-nio-8080-exec-7] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:16:40 [http-nio-8080-exec-2] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:16:40 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:16:40 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:16:40 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:16:40 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:16:40 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:16:40 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:16:40 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:16:40 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:16:40 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:16:40 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:16:40 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:16:40 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:16:40 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:16:40 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:16:40 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:16:40 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:16:40 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:16:40 [http-nio-8080-exec-2] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:16:40 [http-nio-8080-exec-2] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:16:40 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:16:40 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:16:40 [http-nio-8080-exec-2] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:16:40 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/agent/commission-overview
2025-11-06 15:16:40 [http-nio-8080-exec-2] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/agent/commission-overview from 127.0.0.1
2025-11-06 15:16:40 [http-nio-8080-exec-2] ERROR c.d.c.e.GlobalExceptionHandler - 系统异常
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource statistics/agent/commission-overview.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:585)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.deepreach.common.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:136)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-11-06 15:16:40 [http-nio-8080-exec-2] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/agent/commission-overview from 127.0.0.1 - 状态: 500 - 耗时: 5ms
2025-11-06 15:16:40 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:16:40 [http-nio-8080-exec-7] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:16:40 [http-nio-8080-exec-7] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:16:40 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:16:40 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:16:40 [http-nio-8080-exec-7] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:16:40 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured POST /agent/commission/settlement/admin/list
2025-11-06 15:16:40 [http-nio-8080-exec-7] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/agent/commission/settlement/admin/list from 127.0.0.1
2025-11-06 15:16:40 [http-nio-8080-exec-7] DEBUG c.d.w.m.A.searchAdminSettlements - ==>  Preparing: select s.settlement_id, s.agent_user_id, u.username as agent_username, roles.agent_role_keys, s.request_amount, s.approved_amount, s.status, s.approval_user_id, s.approval_time, s.remark, s.extra_data, s.create_by, s.create_time, s.update_by, s.update_time from dr_agent_commission_settlement s left join sys_user u on s.agent_user_id = u.user_id left join ( select ur.user_id, group_concat(distinct r.role_key order by r.role_key) as agent_role_keys from sys_user_role ur join sys_role r on ur.role_id = r.role_id and r.del_flag = '0' group by ur.user_id ) roles on roles.user_id = s.agent_user_id order by s.create_time desc
2025-11-06 15:16:40 [http-nio-8080-exec-7] DEBUG c.d.w.m.A.searchAdminSettlements - ==> Parameters: 
2025-11-06 15:16:40 [http-nio-8080-exec-7] DEBUG c.d.w.m.A.searchAdminSettlements - <==      Total: 4
2025-11-06 15:16:40 [http-nio-8080-exec-7] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/agent/commission/settlement/admin/list from 127.0.0.1 - 状态: 200 - 耗时: 168ms
2025-11-06 15:16:45 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/agent/commission-overview
2025-11-06 15:16:45 [http-nio-8080-exec-1] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:16:45 [http-nio-8080-exec-1] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:16:45 [http-nio-8080-exec-1] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:16:45 [http-nio-8080-exec-1] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:16:45 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:16:45 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:16:45 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:16:45 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:16:45 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:16:45 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:16:45 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:16:45 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:16:45 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:16:45 [http-nio-8080-exec-1] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:16:45 [http-nio-8080-exec-1] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:16:45 [http-nio-8080-exec-1] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:16:45 [http-nio-8080-exec-1] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:16:45 [http-nio-8080-exec-1] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:16:45 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/agent/commission-overview
2025-11-06 15:16:45 [http-nio-8080-exec-1] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/agent/commission-overview from 127.0.0.1
2025-11-06 15:16:45 [http-nio-8080-exec-1] ERROR c.d.c.e.GlobalExceptionHandler - 系统异常
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource statistics/agent/commission-overview.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:585)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.deepreach.common.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:136)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-11-06 15:16:46 [http-nio-8080-exec-1] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/agent/commission-overview from 127.0.0.1 - 状态: 500 - 耗时: 8ms
2025-11-06 15:16:46 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /agent/commission/1/records
2025-11-06 15:16:46 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:16:46 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:16:46 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:16:46 [http-nio-8080-exec-6] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:16:46 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:16:46 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:16:46 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:16:46 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:16:46 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:16:46 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:16:46 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:16:46 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:16:46 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:16:46 [http-nio-8080-exec-6] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:16:46 [http-nio-8080-exec-6] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:16:46 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:16:46 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:16:46 [http-nio-8080-exec-6] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:16:46 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /agent/commission/1/records
2025-11-06 15:16:46 [http-nio-8080-exec-6] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/agent/commission/1/records from 127.0.0.1
2025-11-06 15:16:46 [http-nio-8080-exec-6] DEBUG c.d.w.m.A.selectRecordsByAgent - ==>  Preparing: select r.record_id, r.agent_user_id, r.agent_dept_id, r.buyer_user_id, buyer.username as buyerUsername, r.trigger_billing_id, br.bill_no, r.trigger_amount, r.commission_amount, r.commission_rate, r.hierarchy_level, r.business_type, r.status, r.description, r.create_time from dr_agent_commission_record r left join sys_user buyer on r.buyer_user_id = buyer.user_id left join dr_billing_record br on r.trigger_billing_id = br.bill_id where r.agent_user_id = ? and r.direction = '+' and r.business_type = 'RECHARGE_COMMISSION' order by r.create_time desc
2025-11-06 15:16:46 [http-nio-8080-exec-6] DEBUG c.d.w.m.A.selectRecordsByAgent - ==> Parameters: 1(Long)
2025-11-06 15:16:46 [http-nio-8080-exec-6] DEBUG c.d.w.m.A.selectRecordsByAgent - <==      Total: 0
2025-11-06 15:16:46 [http-nio-8080-exec-6] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/agent/commission/1/records from 127.0.0.1 - 状态: 200 - 耗时: 149ms
2025-11-06 15:16:48 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /system/user/list
2025-11-06 15:16:48 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:16:48 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:16:48 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:16:48 [http-nio-8080-exec-4] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:16:48 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:16:48 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:16:48 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:16:48 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:16:48 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:16:48 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:16:48 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:16:48 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:16:48 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:16:48 [http-nio-8080-exec-4] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:16:48 [http-nio-8080-exec-4] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:16:48 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:16:48 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:16:48 [http-nio-8080-exec-4] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:16:48 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured POST /system/user/list
2025-11-06 15:16:48 [http-nio-8080-exec-4] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/system/user/list from 127.0.0.1
2025-11-06 15:16:48 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserList - ==>  Preparing: SELECT DISTINCT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_name, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur_filter ON u.user_id = ur_filter.user_id LEFT JOIN sys_role r_filter ON ur_filter.role_id = r_filter.role_id AND r_filter.del_flag = '0' WHERE u.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY u.create_time DESC
2025-11-06 15:16:48 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserList - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 15:16:49 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserList - <==      Total: 49
2025-11-06 15:16:49 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:16:49 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 381(Long)
2025-11-06 15:16:49 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:16:49 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:16:49 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 380(Long)
2025-11-06 15:16:49 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:16:49 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:16:49 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 379(Long)
2025-11-06 15:16:49 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:16:49 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:16:49 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 378(Long)
2025-11-06 15:16:50 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:16:50 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:16:50 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 377(Long)
2025-11-06 15:16:50 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:16:50 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:16:50 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 376(Long)
2025-11-06 15:16:50 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:16:50 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:16:50 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 375(Long)
2025-11-06 15:16:50 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:16:50 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:16:50 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 374(Long)
2025-11-06 15:16:50 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:16:50 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:16:50 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 373(Long)
2025-11-06 15:16:50 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:16:50 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:16:50 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 372(Long)
2025-11-06 15:16:51 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:16:51 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:16:51 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 371(Long)
2025-11-06 15:16:54 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:16:54 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:16:54 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 370(Long)
2025-11-06 15:16:54 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:16:54 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:16:54 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 369(Long)
2025-11-06 15:16:54 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:16:54 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:16:54 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 357(Long)
2025-11-06 15:16:54 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:16:54 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:16:54 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 356(Long)
2025-11-06 15:16:54 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:16:54 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:16:54 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 355(Long)
2025-11-06 15:16:55 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:16:55 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:16:55 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 354(Long)
2025-11-06 15:16:55 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:16:55 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:16:55 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 353(Long)
2025-11-06 15:16:55 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:16:55 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:16:55 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 352(Long)
2025-11-06 15:16:55 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:16:55 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:16:55 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 351(Long)
2025-11-06 15:16:55 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:16:55 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:16:55 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 349(Long)
2025-11-06 15:16:55 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:16:55 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:16:55 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 348(Long)
2025-11-06 15:16:56 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:16:56 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:16:56 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 347(Long)
2025-11-06 15:16:56 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:16:56 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:16:56 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 345(Long)
2025-11-06 15:16:56 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:16:56 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:16:56 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 344(Long)
2025-11-06 15:16:56 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:16:56 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:16:56 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 343(Long)
2025-11-06 15:16:56 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:16:56 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:16:56 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 342(Long)
2025-11-06 15:16:56 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:16:56 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:16:56 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 340(Long)
2025-11-06 15:16:56 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:16:56 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:16:56 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 339(Long)
2025-11-06 15:16:57 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:16:57 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:16:57 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 338(Long)
2025-11-06 15:16:57 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:16:57 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:16:57 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 337(Long)
2025-11-06 15:16:57 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:16:57 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:16:57 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 336(Long)
2025-11-06 15:16:57 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/agent/commission-overview
2025-11-06 15:16:57 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:16:57 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:16:57 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:16:57 [http-nio-8080-exec-8] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:16:57 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:16:57 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:16:57 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:16:57 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:16:57 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 335(Long)
2025-11-06 15:16:57 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:16:57 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:16:57 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:16:57 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:16:57 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:16:57 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 334(Long)
2025-11-06 15:16:57 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:16:57 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:16:57 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:16:57 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:16:57 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:16:57 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 333(Long)
2025-11-06 15:16:57 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:16:57 [http-nio-8080-exec-8] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:16:57 [http-nio-8080-exec-8] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:16:57 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:16:57 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:16:57 [http-nio-8080-exec-8] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:16:57 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:16:57 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:16:57 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 332(Long)
2025-11-06 15:16:57 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/agent/commission-overview
2025-11-06 15:16:57 [http-nio-8080-exec-8] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/agent/commission-overview from 127.0.0.1
2025-11-06 15:16:57 [http-nio-8080-exec-8] ERROR c.d.c.e.GlobalExceptionHandler - 系统异常
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource statistics/agent/commission-overview.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:585)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.deepreach.common.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:136)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-11-06 15:16:57 [http-nio-8080-exec-8] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/agent/commission-overview from 127.0.0.1 - 状态: 500 - 耗时: 4ms
2025-11-06 15:16:58 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:16:58 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:16:58 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 331(Long)
2025-11-06 15:16:58 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:16:58 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:16:58 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 330(Long)
2025-11-06 15:16:58 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:16:58 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:16:58 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 329(Long)
2025-11-06 15:16:58 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:16:58 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:16:58 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 328(Long)
2025-11-06 15:16:58 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:16:58 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:16:58 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 327(Long)
2025-11-06 15:16:58 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:16:58 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:16:58 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 326(Long)
2025-11-06 15:16:58 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:16:58 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:16:58 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 325(Long)
2025-11-06 15:16:59 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:16:59 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:16:59 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 324(Long)
2025-11-06 15:16:59 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:16:59 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:16:59 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 323(Long)
2025-11-06 15:16:59 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:16:59 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:16:59 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 322(Long)
2025-11-06 15:16:59 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:16:59 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:16:59 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 321(Long)
2025-11-06 15:16:59 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:16:59 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:16:59 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 320(Long)
2025-11-06 15:16:59 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/agent/commission-overview
2025-11-06 15:16:59 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /agent/commission/settlement/admin/list
2025-11-06 15:16:59 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:16:59 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:16:59 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:16:59 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:16:59 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:16:59 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:16:59 [http-nio-8080-exec-10] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:16:59 [http-nio-8080-exec-5] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:16:59 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:16:59 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:16:59 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:16:59 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:16:59 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 1(Long)
2025-11-06 15:16:59 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:16:59 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:16:59 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:17:00 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:17:00 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 15:17:00 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 379(Long), 1(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 354(Long), 337(Long), 342(Long), 344(Long), 332(Long), 334(Long), 320(Long), 329(Long), 333(Long), 321(Long)
2025-11-06 15:17:00 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:17:00 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:17:00 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:17:00 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 17
2025-11-06 15:17:00 [http-nio-8080-exec-4] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/system/user/list from 127.0.0.1 - 状态: 200 - 耗时: 11464ms
2025-11-06 15:17:00 [http-nio-8080-exec-4] WARN  c.d.c.i.PerformanceInterceptor - 检测到慢请求: POST /api/system/user/list from 127.0.0.1 - 耗时: 11464ms - 超过阈值: 3000ms
2025-11-06 15:17:00 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:17:00 [http-nio-8080-exec-10] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:17:00 [http-nio-8080-exec-10] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:17:00 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:17:00 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:17:00 [http-nio-8080-exec-10] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:17:00 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/agent/commission-overview
2025-11-06 15:17:00 [http-nio-8080-exec-10] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/agent/commission-overview from 127.0.0.1
2025-11-06 15:17:00 [http-nio-8080-exec-10] ERROR c.d.c.e.GlobalExceptionHandler - 系统异常
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource statistics/agent/commission-overview.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:585)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.deepreach.common.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:136)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-11-06 15:17:00 [http-nio-8080-exec-10] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/agent/commission-overview from 127.0.0.1 - 状态: 500 - 耗时: 4ms
2025-11-06 15:17:02 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/agent/commission-overview
2025-11-06 15:17:02 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:17:02 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:17:02 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:17:02 [http-nio-8080-exec-2] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:17:02 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:17:02 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:17:03 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:17:03 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:17:03 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:17:03 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:17:03 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:17:03 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:17:03 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:17:03 [http-nio-8080-exec-2] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:17:03 [http-nio-8080-exec-2] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:17:03 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:17:03 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:17:03 [http-nio-8080-exec-2] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:17:03 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/agent/commission-overview
2025-11-06 15:17:03 [http-nio-8080-exec-2] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/agent/commission-overview from 127.0.0.1
2025-11-06 15:17:03 [http-nio-8080-exec-2] ERROR c.d.c.e.GlobalExceptionHandler - 系统异常
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource statistics/agent/commission-overview.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:585)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.deepreach.common.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:136)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-11-06 15:17:03 [http-nio-8080-exec-2] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/agent/commission-overview from 127.0.0.1 - 状态: 500 - 耗时: 5ms
2025-11-06 15:17:04 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/agent/commission-overview
2025-11-06 15:17:04 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:17:04 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:17:04 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:17:04 [http-nio-8080-exec-7] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:17:04 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:17:04 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:17:04 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:17:04 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:17:04 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:17:04 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:17:04 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:17:04 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:17:04 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:17:04 [http-nio-8080-exec-7] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:17:04 [http-nio-8080-exec-7] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:17:04 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:17:04 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:17:04 [http-nio-8080-exec-7] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:17:05 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/agent/commission-overview
2025-11-06 15:17:05 [http-nio-8080-exec-7] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/agent/commission-overview from 127.0.0.1
2025-11-06 15:17:05 [http-nio-8080-exec-7] ERROR c.d.c.e.GlobalExceptionHandler - 系统异常
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource statistics/agent/commission-overview.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:585)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.deepreach.common.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:136)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-11-06 15:17:05 [http-nio-8080-exec-7] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/agent/commission-overview from 127.0.0.1 - 状态: 500 - 耗时: 5ms
2025-11-06 15:17:05 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing POST /agent/commission/1/records
2025-11-06 15:17:05 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:17:05 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:17:05 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:17:05 [http-nio-8080-exec-9] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:17:05 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:17:05 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:17:05 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:17:05 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:17:05 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:17:05 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:17:05 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:17:05 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:17:05 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:17:05 [http-nio-8080-exec-9] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:17:05 [http-nio-8080-exec-9] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:17:05 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:17:05 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:17:05 [http-nio-8080-exec-9] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:17:05 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured POST /agent/commission/1/records
2025-11-06 15:17:05 [http-nio-8080-exec-9] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/agent/commission/1/records from 127.0.0.1
2025-11-06 15:17:05 [http-nio-8080-exec-9] DEBUG c.d.w.m.A.selectRecordsByAgent - ==>  Preparing: select r.record_id, r.agent_user_id, r.agent_dept_id, r.buyer_user_id, buyer.username as buyerUsername, r.trigger_billing_id, br.bill_no, r.trigger_amount, r.commission_amount, r.commission_rate, r.hierarchy_level, r.business_type, r.status, r.description, r.create_time from dr_agent_commission_record r left join sys_user buyer on r.buyer_user_id = buyer.user_id left join dr_billing_record br on r.trigger_billing_id = br.bill_id where r.agent_user_id = ? and r.direction = '+' and r.business_type = 'RECHARGE_COMMISSION' order by r.create_time desc
2025-11-06 15:17:05 [http-nio-8080-exec-9] DEBUG c.d.w.m.A.selectRecordsByAgent - ==> Parameters: 1(Long)
2025-11-06 15:17:05 [http-nio-8080-exec-9] DEBUG c.d.w.m.A.selectRecordsByAgent - <==      Total: 0
2025-11-06 15:17:05 [http-nio-8080-exec-9] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/agent/commission/1/records from 127.0.0.1 - 状态: 200 - 耗时: 173ms
2025-11-06 15:17:06 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/agent/commission-overview
2025-11-06 15:17:06 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:17:06 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:17:06 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:17:06 [http-nio-8080-exec-6] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:17:06 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:17:06 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:17:06 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:17:06 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:17:06 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:17:07 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:17:07 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:17:07 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:17:07 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:17:07 [http-nio-8080-exec-6] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:17:07 [http-nio-8080-exec-6] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:17:07 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:17:07 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:17:07 [http-nio-8080-exec-6] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:17:07 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/agent/commission-overview
2025-11-06 15:17:07 [http-nio-8080-exec-6] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/agent/commission-overview from 127.0.0.1
2025-11-06 15:17:07 [http-nio-8080-exec-6] ERROR c.d.c.e.GlobalExceptionHandler - 系统异常
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource statistics/agent/commission-overview.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:585)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.deepreach.common.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:136)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-11-06 15:17:07 [http-nio-8080-exec-6] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/agent/commission-overview from 127.0.0.1 - 状态: 500 - 耗时: 4ms
2025-11-06 15:17:09 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:17:09 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:17:09 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:17:09 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:17:09 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:17:10 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:17:10 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:17:10 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:17:10 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:17:10 [http-nio-8080-exec-5] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:17:10 [http-nio-8080-exec-5] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:17:10 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:17:10 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:17:10 [http-nio-8080-exec-5] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:17:10 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /agent/commission/settlement/admin/list
2025-11-06 15:17:10 [http-nio-8080-exec-5] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/agent/commission/settlement/admin/list from 127.0.0.1
2025-11-06 15:17:10 [http-nio-8080-exec-5] DEBUG c.d.w.m.A.searchAdminSettlements - ==>  Preparing: select s.settlement_id, s.agent_user_id, u.username as agent_username, roles.agent_role_keys, s.request_amount, s.approved_amount, s.status, s.approval_user_id, s.approval_time, s.remark, s.extra_data, s.create_by, s.create_time, s.update_by, s.update_time from dr_agent_commission_settlement s left join sys_user u on s.agent_user_id = u.user_id left join ( select ur.user_id, group_concat(distinct r.role_key order by r.role_key) as agent_role_keys from sys_user_role ur join sys_role r on ur.role_id = r.role_id and r.del_flag = '0' group by ur.user_id ) roles on roles.user_id = s.agent_user_id order by s.create_time desc
2025-11-06 15:17:10 [http-nio-8080-exec-5] DEBUG c.d.w.m.A.searchAdminSettlements - ==> Parameters: 
2025-11-06 15:17:10 [http-nio-8080-exec-5] DEBUG c.d.w.m.A.searchAdminSettlements - <==      Total: 4
2025-11-06 15:17:10 [http-nio-8080-exec-5] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/agent/commission/settlement/admin/list from 127.0.0.1 - 状态: 200 - 耗时: 161ms
2025-11-06 15:17:44 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /system/user/list
2025-11-06 15:17:44 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:17:44 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:17:44 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:17:44 [http-nio-8080-exec-4] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:17:44 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:17:44 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:17:44 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:17:44 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:17:44 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:17:44 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:17:44 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:17:44 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:17:45 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:17:45 [http-nio-8080-exec-4] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:17:45 [http-nio-8080-exec-4] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:17:45 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:17:45 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:17:45 [http-nio-8080-exec-4] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:17:45 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured POST /system/user/list
2025-11-06 15:17:45 [http-nio-8080-exec-4] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/system/user/list from 127.0.0.1
2025-11-06 15:17:45 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserList - ==>  Preparing: SELECT DISTINCT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_name, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur_filter ON u.user_id = ur_filter.user_id LEFT JOIN sys_role r_filter ON ur_filter.role_id = r_filter.role_id AND r_filter.del_flag = '0' WHERE u.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY u.create_time DESC
2025-11-06 15:17:45 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserList - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 15:17:45 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserList - <==      Total: 49
2025-11-06 15:17:45 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:17:45 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 381(Long)
2025-11-06 15:17:45 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:17:45 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:17:45 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 380(Long)
2025-11-06 15:17:45 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:17:45 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:17:45 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 379(Long)
2025-11-06 15:17:45 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:17:45 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:17:45 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 378(Long)
2025-11-06 15:17:45 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:17:45 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:17:45 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 377(Long)
2025-11-06 15:17:46 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:17:46 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:17:46 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 376(Long)
2025-11-06 15:17:46 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:17:46 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:17:46 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 375(Long)
2025-11-06 15:17:46 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:17:46 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:17:46 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 374(Long)
2025-11-06 15:17:46 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:17:46 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:17:46 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 373(Long)
2025-11-06 15:17:46 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:17:46 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:17:46 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 372(Long)
2025-11-06 15:17:46 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:17:46 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:17:46 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 371(Long)
2025-11-06 15:17:47 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:17:47 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:17:47 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 370(Long)
2025-11-06 15:17:47 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:17:47 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:17:47 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 369(Long)
2025-11-06 15:17:47 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:17:47 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:17:47 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 357(Long)
2025-11-06 15:17:47 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:17:47 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:17:47 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 356(Long)
2025-11-06 15:17:47 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:17:47 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:17:47 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 355(Long)
2025-11-06 15:17:48 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:17:48 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:17:48 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 354(Long)
2025-11-06 15:17:48 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:17:48 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:17:48 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 353(Long)
2025-11-06 15:17:48 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/agent/commission-overview
2025-11-06 15:17:48 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:17:48 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:17:48 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:17:48 [http-nio-8080-exec-10] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:17:48 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:17:48 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:17:48 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:17:48 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:17:48 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 352(Long)
2025-11-06 15:17:48 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:17:48 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:17:48 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:17:48 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:17:48 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:17:48 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 351(Long)
2025-11-06 15:17:48 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:17:48 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:17:48 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:17:48 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:17:48 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:17:48 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 349(Long)
2025-11-06 15:17:48 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:17:48 [http-nio-8080-exec-10] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:17:48 [http-nio-8080-exec-10] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:17:48 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:17:48 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:17:48 [http-nio-8080-exec-10] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:17:48 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/agent/commission-overview
2025-11-06 15:17:48 [http-nio-8080-exec-10] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/agent/commission-overview from 127.0.0.1
2025-11-06 15:17:48 [http-nio-8080-exec-10] ERROR c.d.c.e.GlobalExceptionHandler - 系统异常
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource statistics/agent/commission-overview.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:585)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.deepreach.common.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:136)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-11-06 15:17:48 [http-nio-8080-exec-10] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/agent/commission-overview from 127.0.0.1 - 状态: 500 - 耗时: 45ms
2025-11-06 15:17:48 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:17:48 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:17:48 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 348(Long)
2025-11-06 15:17:49 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:17:49 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:17:49 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 347(Long)
2025-11-06 15:17:49 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:17:49 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:17:49 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 345(Long)
2025-11-06 15:17:49 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:17:49 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:17:49 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 344(Long)
2025-11-06 15:17:49 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:17:49 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:17:49 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 343(Long)
2025-11-06 15:17:49 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:17:49 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:17:49 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 342(Long)
2025-11-06 15:17:49 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:17:49 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:17:49 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 340(Long)
2025-11-06 15:17:49 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:17:49 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:17:49 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 339(Long)
2025-11-06 15:17:50 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:17:50 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:17:50 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 338(Long)
2025-11-06 15:17:50 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:17:50 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:17:50 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 337(Long)
2025-11-06 15:17:50 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:17:50 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:17:50 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 336(Long)
2025-11-06 15:17:50 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:17:50 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:17:50 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 335(Long)
2025-11-06 15:17:50 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:17:50 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:17:50 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 334(Long)
2025-11-06 15:17:50 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:17:50 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:17:50 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 333(Long)
2025-11-06 15:17:50 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:17:50 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:17:50 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 332(Long)
2025-11-06 15:17:51 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:17:51 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:17:51 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 331(Long)
2025-11-06 15:17:51 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:17:51 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:17:51 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 330(Long)
2025-11-06 15:17:51 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:17:51 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:17:51 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 329(Long)
2025-11-06 15:17:51 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:17:51 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:17:51 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 328(Long)
2025-11-06 15:17:51 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:17:51 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:17:51 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 327(Long)
2025-11-06 15:17:52 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:17:52 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:17:52 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 326(Long)
2025-11-06 15:17:52 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:17:52 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:17:52 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 325(Long)
2025-11-06 15:17:52 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:17:52 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:17:52 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 324(Long)
2025-11-06 15:17:52 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:17:52 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:17:52 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 323(Long)
2025-11-06 15:17:52 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:17:52 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:17:52 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 322(Long)
2025-11-06 15:17:52 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:17:52 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:17:52 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 321(Long)
2025-11-06 15:17:52 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/agent/commission-overview
2025-11-06 15:17:52 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:17:52 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:17:52 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:17:52 [http-nio-8080-exec-3] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:17:52 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:17:52 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:17:52 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:17:52 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:17:52 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 320(Long)
2025-11-06 15:17:53 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:17:53 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:17:53 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:17:53 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:17:53 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:17:53 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 1(Long)
2025-11-06 15:17:53 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:17:53 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 15:17:53 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 379(Long), 1(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 354(Long), 337(Long), 342(Long), 344(Long), 332(Long), 334(Long), 320(Long), 329(Long), 333(Long), 321(Long)
2025-11-06 15:17:53 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 17
2025-11-06 15:17:53 [http-nio-8080-exec-4] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/system/user/list from 127.0.0.1 - 状态: 200 - 耗时: 8681ms
2025-11-06 15:17:53 [http-nio-8080-exec-4] WARN  c.d.c.i.PerformanceInterceptor - 检测到慢请求: POST /api/system/user/list from 127.0.0.1 - 耗时: 8681ms - 超过阈值: 3000ms
2025-11-06 15:17:53 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:17:53 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:17:53 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:17:54 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:17:54 [http-nio-8080-exec-3] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:17:54 [http-nio-8080-exec-3] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:17:54 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:17:54 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:17:54 [http-nio-8080-exec-3] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:17:54 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/agent/commission-overview
2025-11-06 15:17:54 [http-nio-8080-exec-3] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/agent/commission-overview from 127.0.0.1
2025-11-06 15:17:54 [http-nio-8080-exec-3] ERROR c.d.c.e.GlobalExceptionHandler - 系统异常
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource statistics/agent/commission-overview.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:585)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.deepreach.common.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:136)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-11-06 15:17:54 [http-nio-8080-exec-3] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/agent/commission-overview from 127.0.0.1 - 状态: 500 - 耗时: 4ms
2025-11-06 15:18:24 [SpringApplicationShutdownHook] INFO  c.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2025-11-06 15:18:24 [SpringApplicationShutdownHook] INFO  c.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
2025-11-06 15:18:27 [main] INFO  c.deepreach.web.DeepReachApplication - Starting DeepReachApplication using Java 17.0.12 with PID 96890 (/Users/gak1/Documents/GitHub/deepreach-Server-side-rebuild/deepreach-web/target/classes started by gak1 in /Users/gak1/Documents/GitHub/deepreach-Server-side-rebuild)
2025-11-06 15:18:27 [main] DEBUG c.deepreach.web.DeepReachApplication - Running with Spring Boot v3.2.0, Spring v6.1.1
2025-11-06 15:18:27 [main] INFO  c.deepreach.web.DeepReachApplication - The following 1 profile is active: "dev"
2025-11-06 15:18:28 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-06 15:18:28 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-06 15:18:28 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Redis repository interfaces.
2025-11-06 15:18:28 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-06 15:18:28 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-06 15:18:28 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.16]
2025-11-06 15:18:28 [main] INFO  o.a.c.c.C.[.[localhost].[/api] - Initializing Spring embedded WebApplicationContext
2025-11-06 15:18:28 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 853 ms
2025-11-06 15:18:29 [main] DEBUG c.d.c.s.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-06 15:18:29 [main] ERROR i.n.r.d.DnsServerAddressStreamProviders - Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
2025-11-06 15:18:29 [main] INFO  c.d.w.s.impl.FileStorageServiceImpl - 文件上传目录: /Users/gak1/Documents/GitHub/deepreach-Server-side-rebuild/uploads
2025-11-06 15:18:29 [main] INFO  c.deepreach.web.config.WebMvcConfig - 静态资源映射配置：/uploads/** -> file:/Users/gak1/Documents/GitHub/deepreach-Server-side-rebuild/uploads
2025-11-06 15:18:29 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@799fc4c9, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@44428583, org.springframework.security.web.context.SecurityContextHolderFilter@2fe38b73, org.springframework.security.web.header.HeaderWriterFilter@3a44993c, org.springframework.web.filter.CorsFilter@265c0752, org.springframework.security.web.authentication.logout.LogoutFilter@2f3c7b24, com.deepreach.common.security.JwtAuthenticationFilter@ce2eaa7, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7aef8000, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@10d97b64, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7d4b32d1, org.springframework.security.web.session.SessionManagementFilter@11cdf948, org.springframework.security.web.access.ExceptionTranslationFilter@301f9aa0, org.springframework.security.web.access.intercept.AuthorizationFilter@7dfab58d]
2025-11-06 15:18:30 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/api'
2025-11-06 15:18:30 [main] INFO  c.deepreach.web.DeepReachApplication - Started DeepReachApplication in 2.435 seconds (process running for 2.705)
2025-11-06 15:18:30 [main] INFO  c.d.web.config.DataSourceHealthCheck - 开始检查数据源配置...
2025-11-06 15:18:39 [main] INFO  c.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2025-11-06 15:18:39 [main] INFO  c.d.web.config.DataSourceHealthCheck - 主数据源连接成功: PRIMARY_OK
2025-11-06 15:18:41 [main] INFO  c.d.web.config.DataSourceHealthCheck - 云电脑数据源连接成功: CLOUD_COMPUTER_OK
2025-11-06 15:18:44 [main] INFO  c.d.web.config.DataSourceHealthCheck - 云电脑数据库中admin用户记录数: 1
2025-11-06 15:18:44 [main] INFO  c.d.web.config.DataSourceHealthCheck - 数据源检查完成
2025-11-06 15:18:44 [main] INFO  c.d.w.i.UserHierarchyCacheInitializer - 开始构建用户层级树缓存...
2025-11-06 15:18:44 [main] DEBUG c.d.c.c.m.S.selectAllUserHierarchyRelations - ==>  Preparing: SELECT u.user_id AS userId, u.parent_user_id AS parentUserId FROM sys_user u WHERE u.status = '0'
2025-11-06 15:18:44 [main] DEBUG c.d.c.c.m.S.selectAllUserHierarchyRelations - ==> Parameters: 
2025-11-06 15:18:44 [main] DEBUG c.d.c.c.m.S.selectAllUserHierarchyRelations - <==      Total: 49
2025-11-06 15:18:44 [main] INFO  c.d.c.c.s.impl.SysUserServiceImpl - 用户层级树缓存刷新成功：记录总数=49, 根节点数量=1
2025-11-06 15:18:44 [main] INFO  c.d.w.i.UserHierarchyCacheInitializer - 用户层级树缓存构建完成
2025-11-06 15:18:51 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[.[localhost].[/api] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-06 15:18:51 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-06 15:18:51 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-11-06 15:18:51 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/agent/commission-overview
2025-11-06 15:18:51 [http-nio-8080-exec-1] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:18:51 [http-nio-8080-exec-1] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:18:51 [http-nio-8080-exec-1] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:18:51 [http-nio-8080-exec-1] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:18:51 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:18:51 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:18:51 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:18:51 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:18:51 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:18:51 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:18:51 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:18:51 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:18:51 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:18:51 [http-nio-8080-exec-1] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:18:51 [http-nio-8080-exec-1] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:18:51 [http-nio-8080-exec-1] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:18:51 [http-nio-8080-exec-1] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:18:51 [http-nio-8080-exec-1] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:18:51 [http-nio-8080-exec-1] WARN  o.s.w.s.h.HandlerMappingIntrospector - Cache miss for REQUEST dispatch to '/api/statistics/agent/commission-overview' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2025-11-06 15:18:51 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/agent/commission-overview
2025-11-06 15:18:51 [http-nio-8080-exec-1] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/agent/commission-overview from 127.0.0.1
2025-11-06 15:18:51 [http-nio-8080-exec-1] INFO  c.deepreach.common.aspect.LogAspect - LogAspect doBefore 被触发: 统计管理 - getAgentCommissionOverview
2025-11-06 15:18:51 [http-nio-8080-exec-1] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志前置处理完成: 统计管理
2025-11-06 15:18:51 [http-nio-8080-exec-1] INFO  c.deepreach.common.aspect.LogAspect - 保存操作日志: 统计管理 - admin - /api/statistics/agent/commission-overview - 成功
2025-11-06 15:18:51 [http-nio-8080-exec-1] INFO  c.deepreach.common.aspect.LogAspect - 操作日志对象详情: operId=null, title=统计管理, operName=admin, operUrl=/api/statistics/agent/commission-overview, status=0
2025-11-06 15:18:51 [http-nio-8080-exec-1] INFO  c.deepreach.common.aspect.LogAspect - 准备异步保存操作日志到数据库...
2025-11-06 15:18:51 [http-nio-8080-exec-1] INFO  c.deepreach.common.aspect.LogAspect - 操作日志异步保存任务已提交
2025-11-06 15:18:51 [http-nio-8080-exec-1] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志返回处理完成: 统计管理
2025-11-06 15:18:51 [pool-3-thread-1] DEBUG c.d.c.c.m.S.insertOperLog - ==>  Preparing: INSERT INTO sys_oper_log ( title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2025-11-06 15:18:51 [pool-3-thread-1] DEBUG c.d.c.c.m.S.insertOperLog - ==> Parameters: 统计管理(String), 0(Integer), com.deepreach.common.core.controller.StatisticsController.getAgentCommissionOverview(String), GET(String), 1(Integer), admin(String), ADMIN(String), /api/statistics/agent/commission-overview(String), 127.0.0.1(String), null, (String), {"code":500,"msg":"仅代理用户可以访问该统计","data":null,"timestamp":1762413531726,"error":true,"success":false}(String), 0(Integer), null, 2025-11-06T15:18:51.726028(LocalDateTime), 1(Long)
2025-11-06 15:18:51 [http-nio-8080-exec-1] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/agent/commission-overview from 127.0.0.1 - 状态: 200 - 耗时: 20ms
2025-11-06 15:18:52 [pool-3-thread-1] DEBUG c.d.c.c.m.S.insertOperLog - <==    Updates: 1
2025-11-06 15:19:08 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/agent/commission-overview
2025-11-06 15:19:08 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:19:08 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:19:08 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:19:08 [http-nio-8080-exec-3] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:19:08 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:19:08 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:19:08 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:19:08 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:19:08 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:19:08 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:19:08 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:19:08 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:19:08 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:19:08 [http-nio-8080-exec-3] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:19:08 [http-nio-8080-exec-3] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:19:08 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:19:08 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:19:08 [http-nio-8080-exec-3] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:19:08 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/agent/commission-overview
2025-11-06 15:19:08 [http-nio-8080-exec-3] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/agent/commission-overview from 127.0.0.1
2025-11-06 15:19:08 [http-nio-8080-exec-3] INFO  c.deepreach.common.aspect.LogAspect - LogAspect doBefore 被触发: 统计管理 - getAgentCommissionOverview
2025-11-06 15:19:08 [http-nio-8080-exec-3] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志前置处理完成: 统计管理
2025-11-06 15:19:08 [http-nio-8080-exec-3] INFO  c.deepreach.common.aspect.LogAspect - 保存操作日志: 统计管理 - admin - /api/statistics/agent/commission-overview - 成功
2025-11-06 15:19:08 [http-nio-8080-exec-3] INFO  c.deepreach.common.aspect.LogAspect - 操作日志对象详情: operId=null, title=统计管理, operName=admin, operUrl=/api/statistics/agent/commission-overview, status=0
2025-11-06 15:19:08 [http-nio-8080-exec-3] INFO  c.deepreach.common.aspect.LogAspect - 准备异步保存操作日志到数据库...
2025-11-06 15:19:08 [http-nio-8080-exec-3] INFO  c.deepreach.common.aspect.LogAspect - 操作日志异步保存任务已提交
2025-11-06 15:19:08 [http-nio-8080-exec-3] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志返回处理完成: 统计管理
2025-11-06 15:19:08 [pool-3-thread-2] DEBUG c.d.c.c.m.S.insertOperLog - ==>  Preparing: INSERT INTO sys_oper_log ( title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2025-11-06 15:19:08 [pool-3-thread-2] DEBUG c.d.c.c.m.S.insertOperLog - ==> Parameters: 统计管理(String), 0(Integer), com.deepreach.common.core.controller.StatisticsController.getAgentCommissionOverview(String), GET(String), 1(Integer), admin(String), ADMIN(String), /api/statistics/agent/commission-overview(String), 127.0.0.1(String), null, (String), {"code":500,"msg":"仅代理用户可以访问该统计","data":null,"timestamp":1762413548881,"error":true,"success":false}(String), 0(Integer), null, 2025-11-06T15:19:08.880998(LocalDateTime), 0(Long)
2025-11-06 15:19:08 [http-nio-8080-exec-3] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/agent/commission-overview from 127.0.0.1 - 状态: 200 - 耗时: 8ms
2025-11-06 15:19:09 [pool-3-thread-2] DEBUG c.d.c.c.m.S.insertOperLog - <==    Updates: 1
2025-11-06 15:23:05 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/adminMerchantsAssetStatistics
2025-11-06 15:23:05 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/adminAgentPerformanceStatistics
2025-11-06 15:23:05 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/adminMerchantsPerformanceStatistics
2025-11-06 15:23:05 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:23:05 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:23:05 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:23:05 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:23:05 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:23:05 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:23:05 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:23:05 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:23:05 [http-nio-8080-exec-7] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:23:05 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:23:05 [http-nio-8080-exec-5] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:23:05 [http-nio-8080-exec-6] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:23:06 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:23:06 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:23:06 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:23:06 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:23:06 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:23:06 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:23:06 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:23:06 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:23:06 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:23:06 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:23:06 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:23:06 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:23:06 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:23:06 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:23:06 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:23:06 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:23:06 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:23:06 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:23:06 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:23:06 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:23:06 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:23:06 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:23:06 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:23:06 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:23:06 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:23:06 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:23:06 [http-nio-8080-exec-6] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:23:06 [http-nio-8080-exec-5] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:23:06 [http-nio-8080-exec-5] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:23:06 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:23:06 [http-nio-8080-exec-6] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:23:06 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:23:06 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:23:06 [http-nio-8080-exec-7] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:23:06 [http-nio-8080-exec-7] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:23:06 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:23:06 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:23:06 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:23:06 [http-nio-8080-exec-5] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:23:06 [http-nio-8080-exec-6] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:23:06 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:23:06 [http-nio-8080-exec-7] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:23:06 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/adminAgentPerformanceStatistics
2025-11-06 15:23:06 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/adminMerchantsAssetStatistics
2025-11-06 15:23:06 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/adminMerchantsPerformanceStatistics
2025-11-06 15:23:06 [http-nio-8080-exec-7] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/adminAgentPerformanceStatistics from 127.0.0.1
2025-11-06 15:23:06 [http-nio-8080-exec-6] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/adminMerchantsPerformanceStatistics from 127.0.0.1
2025-11-06 15:23:06 [http-nio-8080-exec-5] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/adminMerchantsAssetStatistics from 127.0.0.1
2025-11-06 15:23:06 [http-nio-8080-exec-5] INFO  c.deepreach.common.aspect.LogAspect - LogAspect doBefore 被触发: 统计管理 - getAdminMerchantsAssetStatistics
2025-11-06 15:23:06 [http-nio-8080-exec-6] INFO  c.deepreach.common.aspect.LogAspect - LogAspect doBefore 被触发: 统计管理 - getAdminMerchantsPerformanceStatistics
2025-11-06 15:23:06 [http-nio-8080-exec-7] INFO  c.deepreach.common.aspect.LogAspect - LogAspect doBefore 被触发: 统计管理 - getAdminAgentPerformanceStatistics
2025-11-06 15:23:06 [http-nio-8080-exec-5] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志前置处理完成: 统计管理
2025-11-06 15:23:06 [http-nio-8080-exec-7] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志前置处理完成: 统计管理
2025-11-06 15:23:06 [http-nio-8080-exec-6] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志前置处理完成: 统计管理
2025-11-06 15:23:06 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 15:23:06 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 15:23:06 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 15:23:06 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 15:23:06 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 15:23:06 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 15:23:06 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 49
2025-11-06 15:23:06 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 49
2025-11-06 15:23:06 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 49
2025-11-06 15:23:06 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.sumTotalRechargeByUserIds - ==>  Preparing: SELECT b.user_id AS userId, COALESCE(b.total_recharge, 0) AS totalRecharge FROM user_dr_balance b WHERE b.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 15:23:06 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.sumTotalRechargeByUserIds - ==>  Preparing: SELECT b.user_id AS userId, COALESCE(b.total_recharge, 0) AS totalRecharge FROM user_dr_balance b WHERE b.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 15:23:06 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.sumTotalRechargeByUserIds - ==>  Preparing: SELECT b.user_id AS userId, COALESCE(b.total_recharge, 0) AS totalRecharge FROM user_dr_balance b WHERE b.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 15:23:06 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.sumTotalRechargeByUserIds - ==> Parameters: 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 330(Long), 331(Long), 335(Long), 336(Long), 337(Long), 339(Long), 342(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long)
2025-11-06 15:23:06 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.sumTotalRechargeByUserIds - ==> Parameters: 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 330(Long), 331(Long), 335(Long), 336(Long), 337(Long), 339(Long), 342(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 340(Long), 343(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 353(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 380(Long), 381(Long)
2025-11-06 15:23:06 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.sumTotalRechargeByUserIds - ==> Parameters: 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 330(Long), 331(Long), 335(Long), 336(Long), 337(Long), 339(Long), 342(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long)
2025-11-06 15:23:06 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.sumTotalRechargeByUserIds - <==      Total: 13
2025-11-06 15:23:06 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.sumTotalRechargeByUserIds - <==      Total: 13
2025-11-06 15:23:06 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.A.selectCommissionByUserIds - ==>  Preparing: SELECT agent_user_id AS userId, COALESCE(total_commission, 0) AS totalCommission, COALESCE(settled_commission, 0) AS settledCommission, COALESCE(available_commission, 0) AS availableCommission FROM dr_agent_commission_account WHERE agent_user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 15:23:06 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.countAiCharactersByType - ==>  Preparing: SELECT COALESCE(c.type, 'unknown') AS type, COUNT(*) AS count FROM ai_character c WHERE c.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) GROUP BY COALESCE(c.type, 'unknown')
2025-11-06 15:23:06 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.A.selectCommissionByUserIds - ==> Parameters: 320(Long), 322(Long), 332(Long), 354(Long), 356(Long), 321(Long), 333(Long), 344(Long), 355(Long), 357(Long), 329(Long), 334(Long), 338(Long), 345(Long)
2025-11-06 15:23:06 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.countAiCharactersByType - ==> Parameters: 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 330(Long), 331(Long), 335(Long), 336(Long), 337(Long), 339(Long), 342(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 340(Long), 343(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 353(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 380(Long), 381(Long)
2025-11-06 15:23:07 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.A.selectCommissionByUserIds - <==      Total: 6
2025-11-06 15:23:07 [http-nio-8080-exec-5] INFO  c.deepreach.common.aspect.LogAspect - 保存操作日志: 统计管理 - admin - /api/statistics/adminMerchantsAssetStatistics - 成功
2025-11-06 15:23:07 [http-nio-8080-exec-5] INFO  c.deepreach.common.aspect.LogAspect - 操作日志对象详情: operId=null, title=统计管理, operName=admin, operUrl=/api/statistics/adminMerchantsAssetStatistics, status=0
2025-11-06 15:23:07 [http-nio-8080-exec-5] INFO  c.deepreach.common.aspect.LogAspect - 准备异步保存操作日志到数据库...
2025-11-06 15:23:07 [http-nio-8080-exec-5] INFO  c.deepreach.common.aspect.LogAspect - 操作日志异步保存任务已提交
2025-11-06 15:23:07 [http-nio-8080-exec-5] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志返回处理完成: 统计管理
2025-11-06 15:23:07 [pool-3-thread-3] DEBUG c.d.c.c.m.S.insertOperLog - ==>  Preparing: INSERT INTO sys_oper_log ( title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2025-11-06 15:23:07 [pool-3-thread-3] DEBUG c.d.c.c.m.S.insertOperLog - ==> Parameters: 统计管理(String), 0(Integer), com.deepreach.common.core.controller.StatisticsController.getAdminMerchantsAssetStatistics(String), GET(String), 1(Integer), admin(String), ADMIN(String), /api/statistics/adminMerchantsAssetStatistics(String), 127.0.0.1(String), null, (String), {"code":200,"msg":"操作成功","data":{"totalRecharge":151000.00,"settledCommission":800.00,"netValue":150200.00},"timestamp":1762413787144,"error":false,"success":true}(String), 0(Integer), null, 2025-11-06T15:23:06.637988(LocalDateTime), 506(Long)
2025-11-06 15:23:07 [http-nio-8080-exec-5] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/adminMerchantsAssetStatistics from 127.0.0.1 - 状态: 200 - 耗时: 526ms
2025-11-06 15:23:07 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.sumTotalRechargeByUserIds - <==      Total: 13
2025-11-06 15:23:07 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.A.selectCommissionByUserIds - ==>  Preparing: SELECT agent_user_id AS userId, COALESCE(total_commission, 0) AS totalCommission, COALESCE(settled_commission, 0) AS settledCommission, COALESCE(available_commission, 0) AS availableCommission FROM dr_agent_commission_account WHERE agent_user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 15:23:07 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.A.selectCommissionByUserIds - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 15:23:07 [pool-3-thread-3] DEBUG c.d.c.c.m.S.insertOperLog - <==    Updates: 1
2025-11-06 15:23:07 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.countAiCharactersByType - <==      Total: 1
2025-11-06 15:23:07 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectAllPlatforms - ==>  Preparing: SELECT platform_id AS platformId, COALESCE(platform_name, 'UNKNOWN_PLATFORM') AS platformName, COALESCE(platform_type, 'unknown') AS platformType FROM platform WHERE status = '0' ORDER BY platform_id
2025-11-06 15:23:07 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectAllPlatforms - ==> Parameters: 
2025-11-06 15:23:07 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.A.selectCommissionByUserIds - <==      Total: 6
2025-11-06 15:23:07 [http-nio-8080-exec-7] INFO  c.deepreach.common.aspect.LogAspect - 保存操作日志: 统计管理 - admin - /api/statistics/adminAgentPerformanceStatistics - 成功
2025-11-06 15:23:07 [http-nio-8080-exec-7] INFO  c.deepreach.common.aspect.LogAspect - 操作日志对象详情: operId=null, title=统计管理, operName=admin, operUrl=/api/statistics/adminAgentPerformanceStatistics, status=0
2025-11-06 15:23:07 [http-nio-8080-exec-7] INFO  c.deepreach.common.aspect.LogAspect - 准备异步保存操作日志到数据库...
2025-11-06 15:23:07 [http-nio-8080-exec-7] INFO  c.deepreach.common.aspect.LogAspect - 操作日志异步保存任务已提交
2025-11-06 15:23:07 [http-nio-8080-exec-7] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志返回处理完成: 统计管理
2025-11-06 15:23:07 [pool-3-thread-4] DEBUG c.d.c.c.m.S.insertOperLog - ==>  Preparing: INSERT INTO sys_oper_log ( title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2025-11-06 15:23:07 [http-nio-8080-exec-7] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/adminAgentPerformanceStatistics from 127.0.0.1 - 状态: 200 - 耗时: 901ms
2025-11-06 15:23:07 [pool-3-thread-4] DEBUG c.d.c.c.m.S.insertOperLog - ==> Parameters: 统计管理(String), 0(Integer), com.deepreach.common.core.controller.StatisticsController.getAdminAgentPerformanceStatistics(String), GET(String), 1(Integer), admin(String), ADMIN(String), /api/statistics/adminAgentPerformanceStatistics(String), 127.0.0.1(String), null, (String), {"code":200,"msg":"操作成功","data":{"generalAgent":{"identity":"agent_level_1","identityDisplay":"总代","agentCount":5,"totalRecharge":132000.00,"totalCommission":33200.00},"level1Agent":{"identity":"agent_level_2","identityDisplay":"一级代理","agentCount":5,"totalRecharge":33000.00,"totalCommission":3300.00},"level2Agent":{"identity":"agent_level_3","identityDisplay":"二级代理","agentCount":4,"totalRecharge":33000.00,"totalCommission":3300.00},"total":{"identity":"total","identityDisplay":"合计","agentCount":14,"totalRecharge":198000.00,"totalCommission":39800.00}},"timestamp":1762413787534,"error":false,"success":true}(String), 0(Integer), null, 2025-11-06T15:23:06.638020(LocalDateTime), 896(Long)
2025-11-06 15:23:07 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectAllPlatforms - <==      Total: 8
2025-11-06 15:23:07 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.countInstancesByType - ==>  Preparing: SELECT i.instance_type AS instanceType, COUNT(*) AS count FROM ai_instance i WHERE i.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) GROUP BY i.instance_type
2025-11-06 15:23:07 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.countInstancesByType - ==> Parameters: 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 330(Long), 331(Long), 335(Long), 336(Long), 337(Long), 339(Long), 342(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 340(Long), 343(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 353(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 380(Long), 381(Long)
2025-11-06 15:23:07 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.countInstancesByType - <==      Total: 2
2025-11-06 15:23:07 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.countInstancesByPlatform - ==>  Preparing: SELECT COALESCE(i.platform_id, 0) AS platformId, COALESCE(p.platform_name, 'UNKNOWN_PLATFORM') AS platformName, COUNT(*) AS count FROM ai_instance i LEFT JOIN platform p ON i.platform_id = p.platform_id WHERE i.instance_type = ? AND i.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) GROUP BY COALESCE(i.platform_id, 0), COALESCE(p.platform_name, 'UNKNOWN_PLATFORM')
2025-11-06 15:23:07 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.countInstancesByPlatform - ==> Parameters: 0(String), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 330(Long), 331(Long), 335(Long), 336(Long), 337(Long), 339(Long), 342(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 340(Long), 343(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 353(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 380(Long), 381(Long)
2025-11-06 15:23:07 [pool-3-thread-4] DEBUG c.d.c.c.m.S.insertOperLog - <==    Updates: 1
2025-11-06 15:23:07 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.countInstancesByPlatform - <==      Total: 2
2025-11-06 15:23:07 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.countInstancesByPlatform - ==>  Preparing: SELECT COALESCE(i.platform_id, 0) AS platformId, COALESCE(p.platform_name, 'UNKNOWN_PLATFORM') AS platformName, COUNT(*) AS count FROM ai_instance i LEFT JOIN platform p ON i.platform_id = p.platform_id WHERE i.instance_type = ? AND i.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) GROUP BY COALESCE(i.platform_id, 0), COALESCE(p.platform_name, 'UNKNOWN_PLATFORM')
2025-11-06 15:23:07 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.countInstancesByPlatform - ==> Parameters: 1(String), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 330(Long), 331(Long), 335(Long), 336(Long), 337(Long), 339(Long), 342(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 340(Long), 343(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 353(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 380(Long), 381(Long)
2025-11-06 15:23:08 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.countInstancesByPlatform - <==      Total: 3
2025-11-06 15:23:08 [http-nio-8080-exec-6] INFO  c.deepreach.common.aspect.LogAspect - 保存操作日志: 统计管理 - admin - /api/statistics/adminMerchantsPerformanceStatistics - 成功
2025-11-06 15:23:08 [http-nio-8080-exec-6] INFO  c.deepreach.common.aspect.LogAspect - 操作日志对象详情: operId=null, title=统计管理, operName=admin, operUrl=/api/statistics/adminMerchantsPerformanceStatistics, status=0
2025-11-06 15:23:08 [http-nio-8080-exec-6] INFO  c.deepreach.common.aspect.LogAspect - 准备异步保存操作日志到数据库...
2025-11-06 15:23:08 [http-nio-8080-exec-6] INFO  c.deepreach.common.aspect.LogAspect - 操作日志异步保存任务已提交
2025-11-06 15:23:08 [http-nio-8080-exec-6] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志返回处理完成: 统计管理
2025-11-06 15:23:08 [pool-3-thread-5] DEBUG c.d.c.c.m.S.insertOperLog - ==>  Preparing: INSERT INTO sys_oper_log ( title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2025-11-06 15:23:08 [pool-3-thread-5] DEBUG c.d.c.c.m.S.insertOperLog - ==> Parameters: 统计管理(String), 0(Integer), com.deepreach.common.core.controller.StatisticsController.getAdminMerchantsPerformanceStatistics(String), GET(String), 1(Integer), admin(String), ADMIN(String), /api/statistics/adminMerchantsPerformanceStatistics(String), 127.0.0.1(String), null, (String), {"code":200,"msg":"操作成功","data":{"merchantOverview":{"merchantCount":19,"employeeCount":15,"totalPerformance":151000.00},"aiCharacterOverview":{"totalCharacters":10,"socialAiCount":10,"customerServiceAiCount":0},"marketingInstanceOverview":{"instanceCount":13,"platformBreakdown":{"WhatsApp":7,"Telegram":6}},"prospectingInstanceOverview":{"instanceCount":7,"platformBreakdown":{"SMS":3,"Facebook":3,"Instagram":0,"TikTok":1,"X":0,"GoogleVoice":0}}},"timestamp":1762413788120,"error":false,"success":true}(String), 0(Integer), null, 2025-11-06T15:23:06.637988(LocalDateTime), 1483(Long)
2025-11-06 15:23:08 [http-nio-8080-exec-6] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/adminMerchantsPerformanceStatistics from 127.0.0.1 - 状态: 200 - 耗时: 1488ms
2025-11-06 15:23:08 [pool-3-thread-5] DEBUG c.d.c.c.m.S.insertOperLog - <==    Updates: 1
2025-11-06 15:23:13 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/agent/commission-overview
2025-11-06 15:23:13 [http-nio-8080-exec-1] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:23:13 [http-nio-8080-exec-1] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:23:13 [http-nio-8080-exec-1] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:23:13 [http-nio-8080-exec-1] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:23:13 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:23:13 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:23:13 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:23:13 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:23:13 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:23:13 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:23:13 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:23:13 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:23:13 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:23:13 [http-nio-8080-exec-1] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:23:13 [http-nio-8080-exec-1] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:23:13 [http-nio-8080-exec-1] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:23:13 [http-nio-8080-exec-1] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:23:13 [http-nio-8080-exec-1] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:23:13 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/agent/commission-overview
2025-11-06 15:23:13 [http-nio-8080-exec-1] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/agent/commission-overview from 127.0.0.1
2025-11-06 15:23:13 [http-nio-8080-exec-1] INFO  c.deepreach.common.aspect.LogAspect - LogAspect doBefore 被触发: 统计管理 - getAgentCommissionOverview
2025-11-06 15:23:13 [http-nio-8080-exec-1] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志前置处理完成: 统计管理
2025-11-06 15:23:13 [http-nio-8080-exec-1] INFO  c.deepreach.common.aspect.LogAspect - 保存操作日志: 统计管理 - admin - /api/statistics/agent/commission-overview - 成功
2025-11-06 15:23:13 [http-nio-8080-exec-1] INFO  c.deepreach.common.aspect.LogAspect - 操作日志对象详情: operId=null, title=统计管理, operName=admin, operUrl=/api/statistics/agent/commission-overview, status=0
2025-11-06 15:23:13 [http-nio-8080-exec-1] INFO  c.deepreach.common.aspect.LogAspect - 准备异步保存操作日志到数据库...
2025-11-06 15:23:13 [http-nio-8080-exec-1] INFO  c.deepreach.common.aspect.LogAspect - 操作日志异步保存任务已提交
2025-11-06 15:23:13 [http-nio-8080-exec-1] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志返回处理完成: 统计管理
2025-11-06 15:23:13 [pool-3-thread-1] DEBUG c.d.c.c.m.S.insertOperLog - ==>  Preparing: INSERT INTO sys_oper_log ( title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2025-11-06 15:23:13 [http-nio-8080-exec-1] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/agent/commission-overview from 127.0.0.1 - 状态: 200 - 耗时: 7ms
2025-11-06 15:23:13 [pool-3-thread-1] DEBUG c.d.c.c.m.S.insertOperLog - ==> Parameters: 统计管理(String), 0(Integer), com.deepreach.common.core.controller.StatisticsController.getAgentCommissionOverview(String), GET(String), 1(Integer), admin(String), ADMIN(String), /api/statistics/agent/commission-overview(String), 127.0.0.1(String), null, (String), {"code":500,"msg":"仅代理用户可以访问该统计","data":null,"timestamp":1762413793921,"error":true,"success":false}(String), 0(Integer), null, 2025-11-06T15:23:13.921588(LocalDateTime), 0(Long)
2025-11-06 15:23:14 [pool-3-thread-1] DEBUG c.d.c.c.m.S.insertOperLog - <==    Updates: 1
2025-11-06 15:25:18 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/agent/commission-overview
2025-11-06 15:25:18 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:25:18 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:25:18 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:25:18 [http-nio-8080-exec-3] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:25:18 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:25:18 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:25:18 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:25:18 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:25:18 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:25:18 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:25:18 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:25:18 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:25:18 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:25:18 [http-nio-8080-exec-3] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:25:18 [http-nio-8080-exec-3] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:25:18 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:25:18 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:25:18 [http-nio-8080-exec-3] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:25:18 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/agent/commission-overview
2025-11-06 15:25:18 [http-nio-8080-exec-3] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/agent/commission-overview from 127.0.0.1
2025-11-06 15:25:18 [http-nio-8080-exec-3] INFO  c.deepreach.common.aspect.LogAspect - LogAspect doBefore 被触发: 统计管理 - getAgentCommissionOverview
2025-11-06 15:25:18 [http-nio-8080-exec-3] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志前置处理完成: 统计管理
2025-11-06 15:25:18 [http-nio-8080-exec-3] INFO  c.deepreach.common.aspect.LogAspect - 保存操作日志: 统计管理 - admin - /api/statistics/agent/commission-overview - 成功
2025-11-06 15:25:18 [http-nio-8080-exec-3] INFO  c.deepreach.common.aspect.LogAspect - 操作日志对象详情: operId=null, title=统计管理, operName=admin, operUrl=/api/statistics/agent/commission-overview, status=0
2025-11-06 15:25:18 [http-nio-8080-exec-3] INFO  c.deepreach.common.aspect.LogAspect - 准备异步保存操作日志到数据库...
2025-11-06 15:25:18 [http-nio-8080-exec-3] INFO  c.deepreach.common.aspect.LogAspect - 操作日志异步保存任务已提交
2025-11-06 15:25:18 [http-nio-8080-exec-3] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志返回处理完成: 统计管理
2025-11-06 15:25:18 [pool-3-thread-2] DEBUG c.d.c.c.m.S.insertOperLog - ==>  Preparing: INSERT INTO sys_oper_log ( title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2025-11-06 15:25:18 [pool-3-thread-2] DEBUG c.d.c.c.m.S.insertOperLog - ==> Parameters: 统计管理(String), 0(Integer), com.deepreach.common.core.controller.StatisticsController.getAgentCommissionOverview(String), GET(String), 1(Integer), admin(String), ADMIN(String), /api/statistics/agent/commission-overview(String), 127.0.0.1(String), null, (String), {"code":500,"msg":"仅代理用户可以访问该统计","data":null,"timestamp":1762413918942,"error":true,"success":false}(String), 0(Integer), null, 2025-11-06T15:25:18.941849(LocalDateTime), 1(Long)
2025-11-06 15:25:18 [http-nio-8080-exec-3] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/agent/commission-overview from 127.0.0.1 - 状态: 200 - 耗时: 6ms
2025-11-06 15:25:18 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /statistics/general-agent/1/contribution
2025-11-06 15:25:18 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/general-agent/1/contribution
2025-11-06 15:25:18 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:25:18 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:25:18 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:25:18 [http-nio-8080-exec-5] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:25:19 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:25:19 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:25:19 [pool-3-thread-2] DEBUG c.d.c.c.m.S.insertOperLog - <==    Updates: 1
2025-11-06 15:25:19 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:25:19 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:25:19 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:25:19 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:25:19 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:25:19 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:25:19 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:25:19 [http-nio-8080-exec-5] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:25:19 [http-nio-8080-exec-5] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:25:19 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:25:19 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:25:19 [http-nio-8080-exec-5] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:25:19 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/general-agent/1/contribution
2025-11-06 15:25:19 [http-nio-8080-exec-5] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/general-agent/1/contribution from 127.0.0.1
2025-11-06 15:25:19 [http-nio-8080-exec-5] ERROR c.d.c.e.GlobalExceptionHandler - 系统异常
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource statistics/general-agent/1/contribution.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:585)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.deepreach.common.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:136)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-11-06 15:25:19 [http-nio-8080-exec-5] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/general-agent/1/contribution from 127.0.0.1 - 状态: 500 - 耗时: 15ms
2025-11-06 15:25:58 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/agent/commission-overview
2025-11-06 15:25:58 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:25:58 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:25:58 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:25:58 [http-nio-8080-exec-7] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:25:58 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:25:58 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:25:59 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:25:59 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:25:59 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:25:59 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:25:59 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:25:59 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:25:59 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:25:59 [http-nio-8080-exec-7] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:25:59 [http-nio-8080-exec-7] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:25:59 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:25:59 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:25:59 [http-nio-8080-exec-7] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:25:59 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/agent/commission-overview
2025-11-06 15:25:59 [http-nio-8080-exec-7] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/agent/commission-overview from 127.0.0.1
2025-11-06 15:25:59 [http-nio-8080-exec-7] INFO  c.deepreach.common.aspect.LogAspect - LogAspect doBefore 被触发: 统计管理 - getAgentCommissionOverview
2025-11-06 15:25:59 [http-nio-8080-exec-7] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志前置处理完成: 统计管理
2025-11-06 15:25:59 [http-nio-8080-exec-7] INFO  c.deepreach.common.aspect.LogAspect - 保存操作日志: 统计管理 - admin - /api/statistics/agent/commission-overview - 成功
2025-11-06 15:25:59 [http-nio-8080-exec-7] INFO  c.deepreach.common.aspect.LogAspect - 操作日志对象详情: operId=null, title=统计管理, operName=admin, operUrl=/api/statistics/agent/commission-overview, status=0
2025-11-06 15:25:59 [http-nio-8080-exec-7] INFO  c.deepreach.common.aspect.LogAspect - 准备异步保存操作日志到数据库...
2025-11-06 15:25:59 [http-nio-8080-exec-7] INFO  c.deepreach.common.aspect.LogAspect - 操作日志异步保存任务已提交
2025-11-06 15:25:59 [http-nio-8080-exec-7] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志返回处理完成: 统计管理
2025-11-06 15:25:59 [pool-3-thread-3] DEBUG c.d.c.c.m.S.insertOperLog - ==>  Preparing: INSERT INTO sys_oper_log ( title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2025-11-06 15:25:59 [pool-3-thread-3] DEBUG c.d.c.c.m.S.insertOperLog - ==> Parameters: 统计管理(String), 0(Integer), com.deepreach.common.core.controller.StatisticsController.getAgentCommissionOverview(String), GET(String), 1(Integer), admin(String), ADMIN(String), /api/statistics/agent/commission-overview(String), 127.0.0.1(String), null, (String), {"code":500,"msg":"仅代理用户可以访问该统计","data":null,"timestamp":1762413959431,"error":true,"success":false}(String), 0(Integer), null, 2025-11-06T15:25:59.430819(LocalDateTime), 0(Long)
2025-11-06 15:25:59 [http-nio-8080-exec-7] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/agent/commission-overview from 127.0.0.1 - 状态: 200 - 耗时: 6ms
2025-11-06 15:25:59 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/general-agent/1/contribution
2025-11-06 15:25:59 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:25:59 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:25:59 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:25:59 [http-nio-8080-exec-6] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:25:59 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:25:59 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:25:59 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:25:59 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:25:59 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:25:59 [pool-3-thread-3] DEBUG c.d.c.c.m.S.insertOperLog - <==    Updates: 1
2025-11-06 15:25:59 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:25:59 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:25:59 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:25:59 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:25:59 [http-nio-8080-exec-6] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:25:59 [http-nio-8080-exec-6] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:25:59 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:25:59 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:25:59 [http-nio-8080-exec-6] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:25:59 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/general-agent/1/contribution
2025-11-06 15:25:59 [http-nio-8080-exec-6] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/general-agent/1/contribution from 127.0.0.1
2025-11-06 15:25:59 [http-nio-8080-exec-6] ERROR c.d.c.e.GlobalExceptionHandler - 系统异常
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource statistics/general-agent/1/contribution.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:585)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.deepreach.common.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:136)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-11-06 15:25:59 [http-nio-8080-exec-6] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/general-agent/1/contribution from 127.0.0.1 - 状态: 500 - 耗时: 4ms
2025-11-06 15:31:11 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/agent/commission-overview
2025-11-06 15:31:11 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:31:11 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:31:11 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:31:11 [http-nio-8080-exec-8] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:31:11 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:31:11 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:31:11 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:31:11 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:31:11 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:31:11 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:31:11 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:31:11 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:31:12 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:31:12 [http-nio-8080-exec-8] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:31:12 [http-nio-8080-exec-8] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:31:12 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:31:12 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:31:12 [http-nio-8080-exec-8] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:31:12 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/agent/commission-overview
2025-11-06 15:31:12 [http-nio-8080-exec-8] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/agent/commission-overview from 127.0.0.1
2025-11-06 15:31:12 [http-nio-8080-exec-8] INFO  c.deepreach.common.aspect.LogAspect - LogAspect doBefore 被触发: 统计管理 - getAgentCommissionOverview
2025-11-06 15:31:12 [http-nio-8080-exec-8] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志前置处理完成: 统计管理
2025-11-06 15:31:12 [http-nio-8080-exec-8] INFO  c.deepreach.common.aspect.LogAspect - 保存操作日志: 统计管理 - admin - /api/statistics/agent/commission-overview - 成功
2025-11-06 15:31:12 [http-nio-8080-exec-8] INFO  c.deepreach.common.aspect.LogAspect - 操作日志对象详情: operId=null, title=统计管理, operName=admin, operUrl=/api/statistics/agent/commission-overview, status=0
2025-11-06 15:31:12 [http-nio-8080-exec-8] INFO  c.deepreach.common.aspect.LogAspect - 准备异步保存操作日志到数据库...
2025-11-06 15:31:12 [http-nio-8080-exec-8] INFO  c.deepreach.common.aspect.LogAspect - 操作日志异步保存任务已提交
2025-11-06 15:31:12 [http-nio-8080-exec-8] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志返回处理完成: 统计管理
2025-11-06 15:31:12 [pool-3-thread-4] DEBUG c.d.c.c.m.S.insertOperLog - ==>  Preparing: INSERT INTO sys_oper_log ( title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2025-11-06 15:31:12 [pool-3-thread-4] DEBUG c.d.c.c.m.S.insertOperLog - ==> Parameters: 统计管理(String), 0(Integer), com.deepreach.common.core.controller.StatisticsController.getAgentCommissionOverview(String), GET(String), 1(Integer), admin(String), ADMIN(String), /api/statistics/agent/commission-overview(String), 127.0.0.1(String), null, (String), {"code":500,"msg":"仅代理用户可以访问该统计","data":null,"timestamp":1762414272317,"error":true,"success":false}(String), 0(Integer), null, 2025-11-06T15:31:12.316794(LocalDateTime), 0(Long)
2025-11-06 15:31:12 [http-nio-8080-exec-8] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/agent/commission-overview from 127.0.0.1 - 状态: 200 - 耗时: 9ms
2025-11-06 15:31:12 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /statistics/agent/general/subtree
2025-11-06 15:31:12 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/agent/general/subtree
2025-11-06 15:31:12 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:31:12 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:31:12 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:31:12 [http-nio-8080-exec-9] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:31:12 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:31:12 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:31:12 [pool-3-thread-4] DEBUG c.d.c.c.m.S.insertOperLog - <==    Updates: 1
2025-11-06 15:31:12 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:31:12 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:31:12 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:31:12 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:31:12 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:31:12 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:31:12 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:31:12 [http-nio-8080-exec-9] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:31:12 [http-nio-8080-exec-9] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:31:12 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:31:12 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:31:12 [http-nio-8080-exec-9] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:31:12 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/agent/general/subtree
2025-11-06 15:31:12 [http-nio-8080-exec-9] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/agent/general/subtree from 127.0.0.1
2025-11-06 15:31:12 [http-nio-8080-exec-9] INFO  c.deepreach.common.aspect.LogAspect - LogAspect doBefore 被触发: 统计管理 - getGeneralAgentSubtreeStatistics
2025-11-06 15:31:12 [http-nio-8080-exec-9] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志前置处理完成: 统计管理
2025-11-06 15:31:12 [http-nio-8080-exec-9] INFO  c.deepreach.common.aspect.LogAspect - 保存操作日志: 统计管理 - admin - /api/statistics/agent/general/subtree - 成功
2025-11-06 15:31:12 [http-nio-8080-exec-9] INFO  c.deepreach.common.aspect.LogAspect - 操作日志对象详情: operId=null, title=统计管理, operName=admin, operUrl=/api/statistics/agent/general/subtree, status=0
2025-11-06 15:31:12 [http-nio-8080-exec-9] INFO  c.deepreach.common.aspect.LogAspect - 准备异步保存操作日志到数据库...
2025-11-06 15:31:12 [http-nio-8080-exec-9] INFO  c.deepreach.common.aspect.LogAspect - 操作日志异步保存任务已提交
2025-11-06 15:31:12 [http-nio-8080-exec-9] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志返回处理完成: 统计管理
2025-11-06 15:31:12 [pool-3-thread-5] DEBUG c.d.c.c.m.S.insertOperLog - ==>  Preparing: INSERT INTO sys_oper_log ( title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2025-11-06 15:31:12 [http-nio-8080-exec-9] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/agent/general/subtree from 127.0.0.1 - 状态: 200 - 耗时: 3ms
2025-11-06 15:31:12 [pool-3-thread-5] DEBUG c.d.c.c.m.S.insertOperLog - ==> Parameters: 统计管理(String), 0(Integer), com.deepreach.common.core.controller.StatisticsController.getGeneralAgentSubtreeStatistics(String), GET(String), 1(Integer), admin(String), ADMIN(String), /api/statistics/agent/general/subtree(String), 127.0.0.1(String), null, (String), {"code":500,"msg":"仅总代可以访问该统计","data":null,"timestamp":1762414272945,"error":true,"success":false}(String), 0(Integer), null, 2025-11-06T15:31:12.945352(LocalDateTime), 0(Long)
2025-11-06 15:31:13 [pool-3-thread-5] DEBUG c.d.c.c.m.S.insertOperLog - <==    Updates: 1
2025-11-06 15:31:39 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/agent/commission-overview
2025-11-06 15:31:39 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:31:39 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:31:39 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:31:39 [http-nio-8080-exec-2] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:31:39 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:31:39 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:31:40 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:31:40 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:31:40 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:31:40 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:31:40 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:31:40 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:31:41 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:31:41 [http-nio-8080-exec-2] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:31:41 [http-nio-8080-exec-2] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:31:41 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:31:41 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:31:41 [http-nio-8080-exec-2] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:31:41 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/agent/commission-overview
2025-11-06 15:31:41 [http-nio-8080-exec-2] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/agent/commission-overview from 127.0.0.1
2025-11-06 15:31:41 [http-nio-8080-exec-2] INFO  c.deepreach.common.aspect.LogAspect - LogAspect doBefore 被触发: 统计管理 - getAgentCommissionOverview
2025-11-06 15:31:41 [http-nio-8080-exec-2] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志前置处理完成: 统计管理
2025-11-06 15:31:41 [http-nio-8080-exec-2] INFO  c.deepreach.common.aspect.LogAspect - 保存操作日志: 统计管理 - admin - /api/statistics/agent/commission-overview - 成功
2025-11-06 15:31:41 [http-nio-8080-exec-2] INFO  c.deepreach.common.aspect.LogAspect - 操作日志对象详情: operId=null, title=统计管理, operName=admin, operUrl=/api/statistics/agent/commission-overview, status=0
2025-11-06 15:31:41 [http-nio-8080-exec-2] INFO  c.deepreach.common.aspect.LogAspect - 准备异步保存操作日志到数据库...
2025-11-06 15:31:41 [http-nio-8080-exec-2] INFO  c.deepreach.common.aspect.LogAspect - 操作日志异步保存任务已提交
2025-11-06 15:31:41 [http-nio-8080-exec-2] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志返回处理完成: 统计管理
2025-11-06 15:31:41 [pool-3-thread-1] DEBUG c.d.c.c.m.S.insertOperLog - ==>  Preparing: INSERT INTO sys_oper_log ( title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2025-11-06 15:31:41 [pool-3-thread-1] DEBUG c.d.c.c.m.S.insertOperLog - ==> Parameters: 统计管理(String), 0(Integer), com.deepreach.common.core.controller.StatisticsController.getAgentCommissionOverview(String), GET(String), 1(Integer), admin(String), ADMIN(String), /api/statistics/agent/commission-overview(String), 127.0.0.1(String), null, (String), {"code":500,"msg":"仅代理用户可以访问该统计","data":null,"timestamp":1762414301011,"error":true,"success":false}(String), 0(Integer), null, 2025-11-06T15:31:41.011735(LocalDateTime), 0(Long)
2025-11-06 15:31:41 [http-nio-8080-exec-2] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/agent/commission-overview from 127.0.0.1 - 状态: 200 - 耗时: 8ms
2025-11-06 15:31:41 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/agent/general/subtree
2025-11-06 15:31:41 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:31:41 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:31:41 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:31:41 [http-nio-8080-exec-3] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:31:41 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:31:41 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:31:41 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:31:41 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:31:41 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:31:41 [pool-3-thread-1] DEBUG c.d.c.c.m.S.insertOperLog - <==    Updates: 1
2025-11-06 15:31:41 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:31:41 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:31:41 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:31:41 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:31:41 [http-nio-8080-exec-3] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:31:41 [http-nio-8080-exec-3] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:31:41 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:31:41 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:31:41 [http-nio-8080-exec-3] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:31:41 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/agent/general/subtree
2025-11-06 15:31:41 [http-nio-8080-exec-3] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/agent/general/subtree from 127.0.0.1
2025-11-06 15:31:41 [http-nio-8080-exec-3] INFO  c.deepreach.common.aspect.LogAspect - LogAspect doBefore 被触发: 统计管理 - getGeneralAgentSubtreeStatistics
2025-11-06 15:31:41 [http-nio-8080-exec-3] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志前置处理完成: 统计管理
2025-11-06 15:31:41 [http-nio-8080-exec-3] INFO  c.deepreach.common.aspect.LogAspect - 保存操作日志: 统计管理 - admin - /api/statistics/agent/general/subtree - 成功
2025-11-06 15:31:41 [http-nio-8080-exec-3] INFO  c.deepreach.common.aspect.LogAspect - 操作日志对象详情: operId=null, title=统计管理, operName=admin, operUrl=/api/statistics/agent/general/subtree, status=0
2025-11-06 15:31:41 [http-nio-8080-exec-3] INFO  c.deepreach.common.aspect.LogAspect - 准备异步保存操作日志到数据库...
2025-11-06 15:31:41 [http-nio-8080-exec-3] INFO  c.deepreach.common.aspect.LogAspect - 操作日志异步保存任务已提交
2025-11-06 15:31:41 [http-nio-8080-exec-3] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志返回处理完成: 统计管理
2025-11-06 15:31:41 [pool-3-thread-2] DEBUG c.d.c.c.m.S.insertOperLog - ==>  Preparing: INSERT INTO sys_oper_log ( title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2025-11-06 15:31:41 [pool-3-thread-2] DEBUG c.d.c.c.m.S.insertOperLog - ==> Parameters: 统计管理(String), 0(Integer), com.deepreach.common.core.controller.StatisticsController.getGeneralAgentSubtreeStatistics(String), GET(String), 1(Integer), admin(String), ADMIN(String), /api/statistics/agent/general/subtree(String), 127.0.0.1(String), null, (String), {"code":500,"msg":"仅总代可以访问该统计","data":null,"timestamp":1762414301498,"error":true,"success":false}(String), 0(Integer), null, 2025-11-06T15:31:41.498816(LocalDateTime), 0(Long)
2025-11-06 15:31:41 [http-nio-8080-exec-3] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/agent/general/subtree from 127.0.0.1 - 状态: 200 - 耗时: 2ms
2025-11-06 15:31:41 [pool-3-thread-2] DEBUG c.d.c.c.m.S.insertOperLog - <==    Updates: 1
2025-11-06 15:34:33 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/agent/commission-overview
2025-11-06 15:34:33 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:34:33 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:34:33 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:34:33 [http-nio-8080-exec-5] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:34:33 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:34:33 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:34:33 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:34:33 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:34:33 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:34:33 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:34:33 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:34:33 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:34:33 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:34:33 [http-nio-8080-exec-5] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:34:33 [http-nio-8080-exec-5] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:34:33 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:34:33 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:34:33 [http-nio-8080-exec-5] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:34:33 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/agent/commission-overview
2025-11-06 15:34:33 [http-nio-8080-exec-5] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/agent/commission-overview from 127.0.0.1
2025-11-06 15:34:33 [http-nio-8080-exec-5] INFO  c.deepreach.common.aspect.LogAspect - LogAspect doBefore 被触发: 统计管理 - getAgentCommissionOverview
2025-11-06 15:34:33 [http-nio-8080-exec-5] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志前置处理完成: 统计管理
2025-11-06 15:34:33 [http-nio-8080-exec-5] INFO  c.deepreach.common.aspect.LogAspect - 保存操作日志: 统计管理 - admin - /api/statistics/agent/commission-overview - 成功
2025-11-06 15:34:33 [http-nio-8080-exec-5] INFO  c.deepreach.common.aspect.LogAspect - 操作日志对象详情: operId=null, title=统计管理, operName=admin, operUrl=/api/statistics/agent/commission-overview, status=0
2025-11-06 15:34:33 [http-nio-8080-exec-5] INFO  c.deepreach.common.aspect.LogAspect - 准备异步保存操作日志到数据库...
2025-11-06 15:34:33 [http-nio-8080-exec-5] INFO  c.deepreach.common.aspect.LogAspect - 操作日志异步保存任务已提交
2025-11-06 15:34:33 [http-nio-8080-exec-5] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志返回处理完成: 统计管理
2025-11-06 15:34:33 [pool-3-thread-3] DEBUG c.d.c.c.m.S.insertOperLog - ==>  Preparing: INSERT INTO sys_oper_log ( title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2025-11-06 15:34:33 [pool-3-thread-3] DEBUG c.d.c.c.m.S.insertOperLog - ==> Parameters: 统计管理(String), 0(Integer), com.deepreach.common.core.controller.StatisticsController.getAgentCommissionOverview(String), GET(String), 1(Integer), admin(String), ADMIN(String), /api/statistics/agent/commission-overview(String), 127.0.0.1(String), null, (String), {"code":500,"msg":"仅代理用户可以访问该统计","data":null,"timestamp":1762414473856,"error":true,"success":false}(String), 0(Integer), null, 2025-11-06T15:34:33.855707(LocalDateTime), 0(Long)
2025-11-06 15:34:33 [http-nio-8080-exec-5] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/agent/commission-overview from 127.0.0.1 - 状态: 200 - 耗时: 4ms
2025-11-06 15:34:33 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/agent/general/subtree
2025-11-06 15:34:33 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:34:33 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:34:33 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:34:33 [http-nio-8080-exec-7] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:34:34 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:34:34 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:34:34 [pool-3-thread-3] DEBUG c.d.c.c.m.S.insertOperLog - <==    Updates: 1
2025-11-06 15:34:34 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:34:34 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:34:34 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:34:34 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:34:34 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:34:34 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:34:34 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:34:34 [http-nio-8080-exec-7] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:34:34 [http-nio-8080-exec-7] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:34:34 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:34:34 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:34:34 [http-nio-8080-exec-7] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:34:34 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/agent/general/subtree
2025-11-06 15:34:34 [http-nio-8080-exec-7] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/agent/general/subtree from 127.0.0.1
2025-11-06 15:34:34 [http-nio-8080-exec-7] INFO  c.deepreach.common.aspect.LogAspect - LogAspect doBefore 被触发: 统计管理 - getGeneralAgentSubtreeStatistics
2025-11-06 15:34:34 [http-nio-8080-exec-7] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志前置处理完成: 统计管理
2025-11-06 15:34:34 [http-nio-8080-exec-7] INFO  c.deepreach.common.aspect.LogAspect - 保存操作日志: 统计管理 - admin - /api/statistics/agent/general/subtree - 成功
2025-11-06 15:34:34 [http-nio-8080-exec-7] INFO  c.deepreach.common.aspect.LogAspect - 操作日志对象详情: operId=null, title=统计管理, operName=admin, operUrl=/api/statistics/agent/general/subtree, status=0
2025-11-06 15:34:34 [http-nio-8080-exec-7] INFO  c.deepreach.common.aspect.LogAspect - 准备异步保存操作日志到数据库...
2025-11-06 15:34:34 [http-nio-8080-exec-7] INFO  c.deepreach.common.aspect.LogAspect - 操作日志异步保存任务已提交
2025-11-06 15:34:34 [http-nio-8080-exec-7] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志返回处理完成: 统计管理
2025-11-06 15:34:34 [pool-3-thread-4] DEBUG c.d.c.c.m.S.insertOperLog - ==>  Preparing: INSERT INTO sys_oper_log ( title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2025-11-06 15:34:34 [http-nio-8080-exec-7] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/agent/general/subtree from 127.0.0.1 - 状态: 200 - 耗时: 1ms
2025-11-06 15:34:34 [pool-3-thread-4] DEBUG c.d.c.c.m.S.insertOperLog - ==> Parameters: 统计管理(String), 0(Integer), com.deepreach.common.core.controller.StatisticsController.getGeneralAgentSubtreeStatistics(String), GET(String), 1(Integer), admin(String), ADMIN(String), /api/statistics/agent/general/subtree(String), 127.0.0.1(String), null, (String), {"code":500,"msg":"仅总代可以访问该统计","data":null,"timestamp":1762414474480,"error":true,"success":false}(String), 0(Integer), null, 2025-11-06T15:34:34.480326(LocalDateTime), 0(Long)
2025-11-06 15:34:35 [pool-3-thread-4] DEBUG c.d.c.c.m.S.insertOperLog - <==    Updates: 1
2025-11-06 15:34:52 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /agent/commission/settlement/admin/list
2025-11-06 15:34:52 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/agent/commission-overview
2025-11-06 15:34:52 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:34:52 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing POST /agent/commission/settlement/admin/list
2025-11-06 15:34:52 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:34:52 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:34:52 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:34:52 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:34:52 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:34:52 [http-nio-8080-exec-9] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:34:52 [http-nio-8080-exec-10] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:34:52 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:34:52 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:34:52 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:34:52 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:34:52 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:34:52 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:34:52 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:34:52 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:34:52 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:34:52 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:34:52 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:34:52 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:34:52 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:34:52 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:34:52 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:34:52 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:34:53 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:34:53 [http-nio-8080-exec-10] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:34:53 [http-nio-8080-exec-10] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:34:53 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:34:53 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:34:53 [http-nio-8080-exec-10] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:34:53 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:34:53 [http-nio-8080-exec-9] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:34:53 [http-nio-8080-exec-9] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:34:53 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:34:53 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/agent/commission-overview
2025-11-06 15:34:53 [http-nio-8080-exec-10] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/agent/commission-overview from 127.0.0.1
2025-11-06 15:34:53 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:34:53 [http-nio-8080-exec-9] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:34:53 [http-nio-8080-exec-10] INFO  c.deepreach.common.aspect.LogAspect - LogAspect doBefore 被触发: 统计管理 - getAgentCommissionOverview
2025-11-06 15:34:53 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured POST /agent/commission/settlement/admin/list
2025-11-06 15:34:53 [http-nio-8080-exec-9] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/agent/commission/settlement/admin/list from 127.0.0.1
2025-11-06 15:34:53 [http-nio-8080-exec-10] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志前置处理完成: 统计管理
2025-11-06 15:34:53 [http-nio-8080-exec-10] INFO  c.deepreach.common.aspect.LogAspect - 保存操作日志: 统计管理 - admin - /api/statistics/agent/commission-overview - 成功
2025-11-06 15:34:53 [http-nio-8080-exec-10] INFO  c.deepreach.common.aspect.LogAspect - 操作日志对象详情: operId=null, title=统计管理, operName=admin, operUrl=/api/statistics/agent/commission-overview, status=0
2025-11-06 15:34:53 [http-nio-8080-exec-10] INFO  c.deepreach.common.aspect.LogAspect - 准备异步保存操作日志到数据库...
2025-11-06 15:34:53 [http-nio-8080-exec-10] INFO  c.deepreach.common.aspect.LogAspect - 操作日志异步保存任务已提交
2025-11-06 15:34:53 [http-nio-8080-exec-10] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志返回处理完成: 统计管理
2025-11-06 15:34:53 [pool-3-thread-5] DEBUG c.d.c.c.m.S.insertOperLog - ==>  Preparing: INSERT INTO sys_oper_log ( title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2025-11-06 15:34:53 [pool-3-thread-5] DEBUG c.d.c.c.m.S.insertOperLog - ==> Parameters: 统计管理(String), 0(Integer), com.deepreach.common.core.controller.StatisticsController.getAgentCommissionOverview(String), GET(String), 1(Integer), admin(String), ADMIN(String), /api/statistics/agent/commission-overview(String), 127.0.0.1(String), null, (String), {"code":500,"msg":"仅代理用户可以访问该统计","data":null,"timestamp":1762414493071,"error":true,"success":false}(String), 0(Integer), null, 2025-11-06T15:34:53.069474(LocalDateTime), 3(Long)
2025-11-06 15:34:53 [http-nio-8080-exec-10] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/agent/commission-overview from 127.0.0.1 - 状态: 200 - 耗时: 14ms
2025-11-06 15:34:53 [http-nio-8080-exec-9] DEBUG c.d.w.m.A.searchAdminSettlements - ==>  Preparing: select s.settlement_id, s.agent_user_id, u.username as agent_username, roles.agent_role_keys, s.request_amount, s.approved_amount, s.status, s.approval_user_id, s.approval_time, s.remark, s.extra_data, s.create_by, s.create_time, s.update_by, s.update_time from dr_agent_commission_settlement s left join sys_user u on s.agent_user_id = u.user_id left join ( select ur.user_id, group_concat(distinct r.role_key order by r.role_key) as agent_role_keys from sys_user_role ur join sys_role r on ur.role_id = r.role_id and r.del_flag = '0' group by ur.user_id ) roles on roles.user_id = s.agent_user_id order by s.create_time desc
2025-11-06 15:34:53 [http-nio-8080-exec-9] DEBUG c.d.w.m.A.searchAdminSettlements - ==> Parameters: 
2025-11-06 15:34:53 [http-nio-8080-exec-9] DEBUG c.d.w.m.A.searchAdminSettlements - <==      Total: 4
2025-11-06 15:34:53 [http-nio-8080-exec-9] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/agent/commission/settlement/admin/list from 127.0.0.1 - 状态: 200 - 耗时: 324ms
2025-11-06 15:34:53 [pool-3-thread-5] DEBUG c.d.c.c.m.S.insertOperLog - <==    Updates: 1
2025-11-06 15:34:54 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/agent/commission-overview
2025-11-06 15:34:54 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /agent/commission/settlement/admin/list
2025-11-06 15:34:54 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:34:54 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:34:54 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:34:54 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:34:54 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:34:54 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:34:54 [http-nio-8080-exec-4] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:34:54 [http-nio-8080-exec-3] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:34:54 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:34:54 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:34:54 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:34:54 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:34:54 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:34:54 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:34:54 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:34:55 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:34:55 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:34:55 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:34:55 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:34:55 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:34:55 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:34:55 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:34:55 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:34:55 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:34:55 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:34:55 [http-nio-8080-exec-3] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:34:55 [http-nio-8080-exec-3] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:34:55 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:34:55 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:34:55 [http-nio-8080-exec-3] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:34:55 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/agent/commission-overview
2025-11-06 15:34:55 [http-nio-8080-exec-3] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/agent/commission-overview from 127.0.0.1
2025-11-06 15:34:55 [http-nio-8080-exec-3] INFO  c.deepreach.common.aspect.LogAspect - LogAspect doBefore 被触发: 统计管理 - getAgentCommissionOverview
2025-11-06 15:34:55 [http-nio-8080-exec-3] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志前置处理完成: 统计管理
2025-11-06 15:34:55 [http-nio-8080-exec-3] INFO  c.deepreach.common.aspect.LogAspect - 保存操作日志: 统计管理 - admin - /api/statistics/agent/commission-overview - 成功
2025-11-06 15:34:55 [http-nio-8080-exec-3] INFO  c.deepreach.common.aspect.LogAspect - 操作日志对象详情: operId=null, title=统计管理, operName=admin, operUrl=/api/statistics/agent/commission-overview, status=0
2025-11-06 15:34:55 [http-nio-8080-exec-3] INFO  c.deepreach.common.aspect.LogAspect - 准备异步保存操作日志到数据库...
2025-11-06 15:34:55 [http-nio-8080-exec-3] INFO  c.deepreach.common.aspect.LogAspect - 操作日志异步保存任务已提交
2025-11-06 15:34:55 [http-nio-8080-exec-3] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志返回处理完成: 统计管理
2025-11-06 15:34:55 [http-nio-8080-exec-3] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/agent/commission-overview from 127.0.0.1 - 状态: 200 - 耗时: 4ms
2025-11-06 15:34:55 [pool-3-thread-1] DEBUG c.d.c.c.m.S.insertOperLog - ==>  Preparing: INSERT INTO sys_oper_log ( title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2025-11-06 15:34:55 [pool-3-thread-1] DEBUG c.d.c.c.m.S.insertOperLog - ==> Parameters: 统计管理(String), 0(Integer), com.deepreach.common.core.controller.StatisticsController.getAgentCommissionOverview(String), GET(String), 1(Integer), admin(String), ADMIN(String), /api/statistics/agent/commission-overview(String), 127.0.0.1(String), null, (String), {"code":500,"msg":"仅代理用户可以访问该统计","data":null,"timestamp":1762414495463,"error":true,"success":false}(String), 0(Integer), null, 2025-11-06T15:34:55.463486(LocalDateTime), 0(Long)
2025-11-06 15:34:55 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:34:55 [http-nio-8080-exec-4] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:34:55 [http-nio-8080-exec-4] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:34:55 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:34:55 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:34:55 [http-nio-8080-exec-4] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:34:55 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured POST /agent/commission/settlement/admin/list
2025-11-06 15:34:55 [http-nio-8080-exec-4] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/agent/commission/settlement/admin/list from 127.0.0.1
2025-11-06 15:34:55 [http-nio-8080-exec-4] DEBUG c.d.w.m.A.searchAdminSettlements - ==>  Preparing: select s.settlement_id, s.agent_user_id, u.username as agent_username, roles.agent_role_keys, s.request_amount, s.approved_amount, s.status, s.approval_user_id, s.approval_time, s.remark, s.extra_data, s.create_by, s.create_time, s.update_by, s.update_time from dr_agent_commission_settlement s left join sys_user u on s.agent_user_id = u.user_id left join ( select ur.user_id, group_concat(distinct r.role_key order by r.role_key) as agent_role_keys from sys_user_role ur join sys_role r on ur.role_id = r.role_id and r.del_flag = '0' group by ur.user_id ) roles on roles.user_id = s.agent_user_id order by s.create_time desc
2025-11-06 15:34:55 [http-nio-8080-exec-4] DEBUG c.d.w.m.A.searchAdminSettlements - ==> Parameters: 
2025-11-06 15:34:55 [http-nio-8080-exec-4] DEBUG c.d.w.m.A.searchAdminSettlements - <==      Total: 4
2025-11-06 15:34:55 [http-nio-8080-exec-4] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/agent/commission/settlement/admin/list from 127.0.0.1 - 状态: 200 - 耗时: 159ms
2025-11-06 15:34:55 [pool-3-thread-1] DEBUG c.d.c.c.m.S.insertOperLog - <==    Updates: 1
2025-11-06 15:35:02 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /system/user/list
2025-11-06 15:35:02 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:35:02 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:35:02 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:35:02 [http-nio-8080-exec-6] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:35:02 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:35:02 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:35:03 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:35:03 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:35:03 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:35:03 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:35:03 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:35:03 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:35:03 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:35:03 [http-nio-8080-exec-6] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:35:03 [http-nio-8080-exec-6] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:35:03 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:35:03 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:35:03 [http-nio-8080-exec-6] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:35:03 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /system/user/list
2025-11-06 15:35:03 [http-nio-8080-exec-6] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/system/user/list from 127.0.0.1
2025-11-06 15:35:03 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserList - ==>  Preparing: SELECT DISTINCT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_name, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur_filter ON u.user_id = ur_filter.user_id LEFT JOIN sys_role r_filter ON ur_filter.role_id = r_filter.role_id AND r_filter.del_flag = '0' WHERE u.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY u.create_time DESC
2025-11-06 15:35:03 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserList - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 15:35:04 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserList - <==      Total: 49
2025-11-06 15:35:04 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:35:04 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 381(Long)
2025-11-06 15:35:05 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:35:05 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:35:05 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 380(Long)
2025-11-06 15:35:05 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:35:05 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:35:05 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 379(Long)
2025-11-06 15:35:05 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:35:05 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:35:05 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 378(Long)
2025-11-06 15:35:05 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:35:05 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:35:05 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 377(Long)
2025-11-06 15:35:05 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:35:05 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:35:05 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 376(Long)
2025-11-06 15:35:05 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:35:05 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:35:05 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 375(Long)
2025-11-06 15:35:05 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:35:05 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:35:05 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 374(Long)
2025-11-06 15:35:06 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:35:06 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:35:06 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 373(Long)
2025-11-06 15:35:06 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:35:06 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:35:06 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 372(Long)
2025-11-06 15:35:06 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:35:06 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:35:06 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 371(Long)
2025-11-06 15:35:06 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:35:06 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:35:06 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 370(Long)
2025-11-06 15:35:07 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:35:07 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:35:07 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 369(Long)
2025-11-06 15:35:07 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:35:07 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:35:07 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 357(Long)
2025-11-06 15:35:07 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:35:07 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:35:07 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 356(Long)
2025-11-06 15:35:07 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:35:07 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:35:07 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 355(Long)
2025-11-06 15:35:08 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:35:08 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:35:08 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 354(Long)
2025-11-06 15:35:08 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:35:08 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:35:08 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 353(Long)
2025-11-06 15:35:08 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:35:08 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:35:08 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 352(Long)
2025-11-06 15:35:08 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:35:08 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:35:08 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 351(Long)
2025-11-06 15:35:08 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:35:08 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:35:08 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 349(Long)
2025-11-06 15:35:08 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:35:08 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:35:08 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 348(Long)
2025-11-06 15:35:09 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:35:09 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:35:09 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 347(Long)
2025-11-06 15:35:09 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:35:09 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:35:09 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 345(Long)
2025-11-06 15:35:09 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:35:09 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:35:09 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 344(Long)
2025-11-06 15:35:09 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:35:09 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:35:09 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 343(Long)
2025-11-06 15:35:10 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:35:10 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:35:10 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 342(Long)
2025-11-06 15:35:10 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:35:10 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:35:10 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 340(Long)
2025-11-06 15:35:10 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:35:10 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:35:10 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 339(Long)
2025-11-06 15:35:10 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:35:10 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:35:10 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 338(Long)
2025-11-06 15:35:10 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:35:10 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:35:10 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 337(Long)
2025-11-06 15:35:10 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:35:10 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:35:10 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 336(Long)
2025-11-06 15:35:11 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:35:11 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:35:11 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 335(Long)
2025-11-06 15:35:11 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:35:11 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:35:11 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 334(Long)
2025-11-06 15:35:11 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:35:11 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:35:11 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 333(Long)
2025-11-06 15:35:11 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:35:11 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:35:11 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 332(Long)
2025-11-06 15:35:11 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:35:11 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:35:11 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 331(Long)
2025-11-06 15:35:11 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:35:11 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:35:11 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 330(Long)
2025-11-06 15:35:12 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:35:12 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:35:12 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 329(Long)
2025-11-06 15:35:12 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:35:12 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:35:12 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 328(Long)
2025-11-06 15:35:12 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:35:12 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:35:12 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 327(Long)
2025-11-06 15:35:12 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:35:12 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:35:12 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 326(Long)
2025-11-06 15:35:12 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:35:12 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:35:12 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 325(Long)
2025-11-06 15:35:12 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:35:12 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:35:12 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 324(Long)
2025-11-06 15:35:12 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:35:12 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:35:12 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 323(Long)
2025-11-06 15:35:13 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:35:13 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:35:13 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 322(Long)
2025-11-06 15:35:13 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:35:13 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:35:13 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 321(Long)
2025-11-06 15:35:13 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:35:13 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:35:13 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 320(Long)
2025-11-06 15:35:14 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:35:14 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:35:14 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 1(Long)
2025-11-06 15:35:14 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:35:14 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 15:35:14 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 379(Long), 1(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 354(Long), 337(Long), 342(Long), 344(Long), 332(Long), 334(Long), 320(Long), 329(Long), 333(Long), 321(Long)
2025-11-06 15:35:14 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 17
2025-11-06 15:35:14 [http-nio-8080-exec-6] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/system/user/list from 127.0.0.1 - 状态: 200 - 耗时: 10407ms
2025-11-06 15:35:14 [http-nio-8080-exec-6] WARN  c.d.c.i.PerformanceInterceptor - 检测到慢请求: POST /api/system/user/list from 127.0.0.1 - 耗时: 10407ms - 超过阈值: 3000ms
2025-11-06 15:35:15 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/agent/commission-overview
2025-11-06 15:35:15 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:35:15 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:35:15 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:35:15 [http-nio-8080-exec-8] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:35:15 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:35:15 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:35:15 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:35:15 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:35:15 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:35:15 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:35:15 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:35:15 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:35:15 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:35:15 [http-nio-8080-exec-8] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:35:15 [http-nio-8080-exec-8] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:35:15 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:35:15 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:35:15 [http-nio-8080-exec-8] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:35:15 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/agent/commission-overview
2025-11-06 15:35:15 [http-nio-8080-exec-8] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/agent/commission-overview from 127.0.0.1
2025-11-06 15:35:15 [http-nio-8080-exec-8] INFO  c.deepreach.common.aspect.LogAspect - LogAspect doBefore 被触发: 统计管理 - getAgentCommissionOverview
2025-11-06 15:35:15 [http-nio-8080-exec-8] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志前置处理完成: 统计管理
2025-11-06 15:35:15 [http-nio-8080-exec-8] INFO  c.deepreach.common.aspect.LogAspect - 保存操作日志: 统计管理 - admin - /api/statistics/agent/commission-overview - 成功
2025-11-06 15:35:15 [http-nio-8080-exec-8] INFO  c.deepreach.common.aspect.LogAspect - 操作日志对象详情: operId=null, title=统计管理, operName=admin, operUrl=/api/statistics/agent/commission-overview, status=0
2025-11-06 15:35:15 [http-nio-8080-exec-8] INFO  c.deepreach.common.aspect.LogAspect - 准备异步保存操作日志到数据库...
2025-11-06 15:35:15 [http-nio-8080-exec-8] INFO  c.deepreach.common.aspect.LogAspect - 操作日志异步保存任务已提交
2025-11-06 15:35:15 [http-nio-8080-exec-8] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志返回处理完成: 统计管理
2025-11-06 15:35:15 [pool-3-thread-2] DEBUG c.d.c.c.m.S.insertOperLog - ==>  Preparing: INSERT INTO sys_oper_log ( title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2025-11-06 15:35:15 [pool-3-thread-2] DEBUG c.d.c.c.m.S.insertOperLog - ==> Parameters: 统计管理(String), 0(Integer), com.deepreach.common.core.controller.StatisticsController.getAgentCommissionOverview(String), GET(String), 1(Integer), admin(String), ADMIN(String), /api/statistics/agent/commission-overview(String), 127.0.0.1(String), null, (String), {"code":500,"msg":"仅代理用户可以访问该统计","data":null,"timestamp":1762414515514,"error":true,"success":false}(String), 0(Integer), null, 2025-11-06T15:35:15.514809(LocalDateTime), 0(Long)
2025-11-06 15:35:15 [http-nio-8080-exec-8] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/agent/commission-overview from 127.0.0.1 - 状态: 200 - 耗时: 7ms
2025-11-06 15:35:15 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/agent/general/subtree
2025-11-06 15:35:15 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:35:15 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:35:15 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:35:15 [http-nio-8080-exec-10] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:35:15 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:35:15 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:35:15 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:35:15 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:35:15 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:35:15 [pool-3-thread-2] DEBUG c.d.c.c.m.S.insertOperLog - <==    Updates: 1
2025-11-06 15:35:15 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:35:15 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:35:15 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:35:16 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:35:16 [http-nio-8080-exec-10] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:35:16 [http-nio-8080-exec-10] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:35:16 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:35:16 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:35:16 [http-nio-8080-exec-10] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:35:16 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/agent/general/subtree
2025-11-06 15:35:16 [http-nio-8080-exec-10] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/agent/general/subtree from 127.0.0.1
2025-11-06 15:35:16 [http-nio-8080-exec-10] INFO  c.deepreach.common.aspect.LogAspect - LogAspect doBefore 被触发: 统计管理 - getGeneralAgentSubtreeStatistics
2025-11-06 15:35:16 [http-nio-8080-exec-10] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志前置处理完成: 统计管理
2025-11-06 15:35:16 [http-nio-8080-exec-10] INFO  c.deepreach.common.aspect.LogAspect - 保存操作日志: 统计管理 - admin - /api/statistics/agent/general/subtree - 成功
2025-11-06 15:35:16 [http-nio-8080-exec-10] INFO  c.deepreach.common.aspect.LogAspect - 操作日志对象详情: operId=null, title=统计管理, operName=admin, operUrl=/api/statistics/agent/general/subtree, status=0
2025-11-06 15:35:16 [http-nio-8080-exec-10] INFO  c.deepreach.common.aspect.LogAspect - 准备异步保存操作日志到数据库...
2025-11-06 15:35:16 [http-nio-8080-exec-10] INFO  c.deepreach.common.aspect.LogAspect - 操作日志异步保存任务已提交
2025-11-06 15:35:16 [http-nio-8080-exec-10] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志返回处理完成: 统计管理
2025-11-06 15:35:16 [pool-3-thread-3] DEBUG c.d.c.c.m.S.insertOperLog - ==>  Preparing: INSERT INTO sys_oper_log ( title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2025-11-06 15:35:16 [pool-3-thread-3] DEBUG c.d.c.c.m.S.insertOperLog - ==> Parameters: 统计管理(String), 0(Integer), com.deepreach.common.core.controller.StatisticsController.getGeneralAgentSubtreeStatistics(String), GET(String), 1(Integer), admin(String), ADMIN(String), /api/statistics/agent/general/subtree(String), 127.0.0.1(String), null, (String), {"code":500,"msg":"仅总代可以访问该统计","data":null,"timestamp":1762414516019,"error":true,"success":false}(String), 0(Integer), null, 2025-11-06T15:35:16.019050(LocalDateTime), 0(Long)
2025-11-06 15:35:16 [http-nio-8080-exec-10] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/agent/general/subtree from 127.0.0.1 - 状态: 200 - 耗时: 3ms
2025-11-06 15:35:16 [pool-3-thread-3] DEBUG c.d.c.c.m.S.insertOperLog - <==    Updates: 1
2025-11-06 15:35:35 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/agent/commission-overview
2025-11-06 15:35:35 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:35:35 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:35:35 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:35:35 [http-nio-8080-exec-2] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:35:35 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:35:35 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:35:35 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:35:35 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:35:35 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:35:35 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:35:35 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:35:35 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:35:35 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:35:35 [http-nio-8080-exec-2] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:35:35 [http-nio-8080-exec-2] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:35:35 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:35:35 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:35:35 [http-nio-8080-exec-2] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:35:35 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/agent/commission-overview
2025-11-06 15:35:35 [http-nio-8080-exec-2] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/agent/commission-overview from 127.0.0.1
2025-11-06 15:35:35 [http-nio-8080-exec-2] INFO  c.deepreach.common.aspect.LogAspect - LogAspect doBefore 被触发: 统计管理 - getAgentCommissionOverview
2025-11-06 15:35:35 [http-nio-8080-exec-2] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志前置处理完成: 统计管理
2025-11-06 15:35:35 [http-nio-8080-exec-2] INFO  c.deepreach.common.aspect.LogAspect - 保存操作日志: 统计管理 - admin - /api/statistics/agent/commission-overview - 成功
2025-11-06 15:35:35 [http-nio-8080-exec-2] INFO  c.deepreach.common.aspect.LogAspect - 操作日志对象详情: operId=null, title=统计管理, operName=admin, operUrl=/api/statistics/agent/commission-overview, status=0
2025-11-06 15:35:35 [http-nio-8080-exec-2] INFO  c.deepreach.common.aspect.LogAspect - 准备异步保存操作日志到数据库...
2025-11-06 15:35:35 [http-nio-8080-exec-2] INFO  c.deepreach.common.aspect.LogAspect - 操作日志异步保存任务已提交
2025-11-06 15:35:35 [http-nio-8080-exec-2] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志返回处理完成: 统计管理
2025-11-06 15:35:35 [pool-3-thread-4] DEBUG c.d.c.c.m.S.insertOperLog - ==>  Preparing: INSERT INTO sys_oper_log ( title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2025-11-06 15:35:35 [pool-3-thread-4] DEBUG c.d.c.c.m.S.insertOperLog - ==> Parameters: 统计管理(String), 0(Integer), com.deepreach.common.core.controller.StatisticsController.getAgentCommissionOverview(String), GET(String), 1(Integer), admin(String), ADMIN(String), /api/statistics/agent/commission-overview(String), 127.0.0.1(String), null, (String), {"code":500,"msg":"仅代理用户可以访问该统计","data":null,"timestamp":1762414535591,"error":true,"success":false}(String), 0(Integer), null, 2025-11-06T15:35:35.591477(LocalDateTime), 0(Long)
2025-11-06 15:35:35 [http-nio-8080-exec-2] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/agent/commission-overview from 127.0.0.1 - 状态: 200 - 耗时: 9ms
2025-11-06 15:35:35 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /agent/commission/1/records
2025-11-06 15:35:35 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /agent/commission/1/records
2025-11-06 15:35:35 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:35:35 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:35:35 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:35:35 [http-nio-8080-exec-3] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:35:35 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:35:35 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:35:35 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:35:35 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:35:35 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:35:35 [pool-3-thread-4] DEBUG c.d.c.c.m.S.insertOperLog - <==    Updates: 1
2025-11-06 15:35:35 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:35:35 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:35:35 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:35:36 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:35:36 [http-nio-8080-exec-3] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:35:36 [http-nio-8080-exec-3] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:35:36 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:35:36 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:35:36 [http-nio-8080-exec-3] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:35:36 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /agent/commission/1/records
2025-11-06 15:35:36 [http-nio-8080-exec-3] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/agent/commission/1/records from 127.0.0.1
2025-11-06 15:35:36 [http-nio-8080-exec-3] DEBUG c.d.w.m.A.selectRecordsByAgent - ==>  Preparing: select r.record_id, r.agent_user_id, r.agent_dept_id, r.buyer_user_id, buyer.username as buyerUsername, r.trigger_billing_id, br.bill_no, r.trigger_amount, r.commission_amount, r.commission_rate, r.hierarchy_level, r.business_type, r.status, r.description, r.create_time from dr_agent_commission_record r left join sys_user buyer on r.buyer_user_id = buyer.user_id left join dr_billing_record br on r.trigger_billing_id = br.bill_id where r.agent_user_id = ? and r.direction = '+' and r.business_type = 'RECHARGE_COMMISSION' order by r.create_time desc
2025-11-06 15:35:36 [http-nio-8080-exec-3] DEBUG c.d.w.m.A.selectRecordsByAgent - ==> Parameters: 1(Long)
2025-11-06 15:35:36 [http-nio-8080-exec-3] DEBUG c.d.w.m.A.selectRecordsByAgent - <==      Total: 0
2025-11-06 15:35:36 [http-nio-8080-exec-3] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/agent/commission/1/records from 127.0.0.1 - 状态: 200 - 耗时: 166ms
2025-11-06 15:35:40 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/agent/commission-overview
2025-11-06 15:35:40 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:35:40 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:35:40 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:35:40 [http-nio-8080-exec-5] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:35:40 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:35:40 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:35:40 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:35:40 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:35:40 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:35:40 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:35:40 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:35:40 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:35:41 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:35:41 [http-nio-8080-exec-5] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:35:41 [http-nio-8080-exec-5] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:35:41 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:35:41 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:35:41 [http-nio-8080-exec-5] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:35:41 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/agent/commission-overview
2025-11-06 15:35:41 [http-nio-8080-exec-5] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/agent/commission-overview from 127.0.0.1
2025-11-06 15:35:41 [http-nio-8080-exec-5] INFO  c.deepreach.common.aspect.LogAspect - LogAspect doBefore 被触发: 统计管理 - getAgentCommissionOverview
2025-11-06 15:35:41 [http-nio-8080-exec-5] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志前置处理完成: 统计管理
2025-11-06 15:35:41 [http-nio-8080-exec-5] INFO  c.deepreach.common.aspect.LogAspect - 保存操作日志: 统计管理 - admin - /api/statistics/agent/commission-overview - 成功
2025-11-06 15:35:41 [http-nio-8080-exec-5] INFO  c.deepreach.common.aspect.LogAspect - 操作日志对象详情: operId=null, title=统计管理, operName=admin, operUrl=/api/statistics/agent/commission-overview, status=0
2025-11-06 15:35:41 [http-nio-8080-exec-5] INFO  c.deepreach.common.aspect.LogAspect - 准备异步保存操作日志到数据库...
2025-11-06 15:35:41 [http-nio-8080-exec-5] INFO  c.deepreach.common.aspect.LogAspect - 操作日志异步保存任务已提交
2025-11-06 15:35:41 [http-nio-8080-exec-5] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志返回处理完成: 统计管理
2025-11-06 15:35:41 [pool-3-thread-5] DEBUG c.d.c.c.m.S.insertOperLog - ==>  Preparing: INSERT INTO sys_oper_log ( title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2025-11-06 15:35:41 [http-nio-8080-exec-5] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/agent/commission-overview from 127.0.0.1 - 状态: 200 - 耗时: 5ms
2025-11-06 15:35:41 [pool-3-thread-5] DEBUG c.d.c.c.m.S.insertOperLog - ==> Parameters: 统计管理(String), 0(Integer), com.deepreach.common.core.controller.StatisticsController.getAgentCommissionOverview(String), GET(String), 1(Integer), admin(String), ADMIN(String), /api/statistics/agent/commission-overview(String), 127.0.0.1(String), null, (String), {"code":500,"msg":"仅代理用户可以访问该统计","data":null,"timestamp":1762414541094,"error":true,"success":false}(String), 0(Integer), null, 2025-11-06T15:35:41.094020(LocalDateTime), 1(Long)
2025-11-06 15:35:41 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /agent/commission/1/records
2025-11-06 15:35:41 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:35:41 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:35:41 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:35:41 [http-nio-8080-exec-7] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:35:41 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:35:41 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:35:41 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:35:41 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:35:41 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:35:41 [pool-3-thread-5] DEBUG c.d.c.c.m.S.insertOperLog - <==    Updates: 1
2025-11-06 15:35:41 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:35:41 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:35:41 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:35:41 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:35:41 [http-nio-8080-exec-7] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:35:41 [http-nio-8080-exec-7] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:35:41 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:35:41 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:35:41 [http-nio-8080-exec-7] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:35:41 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured POST /agent/commission/1/records
2025-11-06 15:35:41 [http-nio-8080-exec-7] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/agent/commission/1/records from 127.0.0.1
2025-11-06 15:35:41 [http-nio-8080-exec-7] DEBUG c.d.w.m.A.selectRecordsByAgent - ==>  Preparing: select r.record_id, r.agent_user_id, r.agent_dept_id, r.buyer_user_id, buyer.username as buyerUsername, r.trigger_billing_id, br.bill_no, r.trigger_amount, r.commission_amount, r.commission_rate, r.hierarchy_level, r.business_type, r.status, r.description, r.create_time from dr_agent_commission_record r left join sys_user buyer on r.buyer_user_id = buyer.user_id left join dr_billing_record br on r.trigger_billing_id = br.bill_id where r.agent_user_id = ? and r.direction = '+' and r.business_type = 'RECHARGE_COMMISSION' order by r.create_time desc
2025-11-06 15:35:41 [http-nio-8080-exec-7] DEBUG c.d.w.m.A.selectRecordsByAgent - ==> Parameters: 1(Long)
2025-11-06 15:35:41 [http-nio-8080-exec-7] DEBUG c.d.w.m.A.selectRecordsByAgent - <==      Total: 0
2025-11-06 15:35:41 [http-nio-8080-exec-7] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/agent/commission/1/records from 127.0.0.1 - 状态: 200 - 耗时: 156ms
2025-11-06 15:38:24 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing POST /system/user/list
2025-11-06 15:38:24 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:38:24 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:38:24 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:38:24 [http-nio-8080-exec-8] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:38:24 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:38:24 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:38:25 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:38:25 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:25 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:38:25 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:38:25 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:38:25 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:38:25 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:38:25 [http-nio-8080-exec-8] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:38:25 [http-nio-8080-exec-8] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:38:25 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:38:25 [http-nio-8080-exec-8] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:38:25 [http-nio-8080-exec-8] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:38:25 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured POST /system/user/list
2025-11-06 15:38:25 [http-nio-8080-exec-8] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/system/user/list from 127.0.0.1
2025-11-06 15:38:25 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserList - ==>  Preparing: SELECT DISTINCT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_name, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur_filter ON u.user_id = ur_filter.user_id LEFT JOIN sys_role r_filter ON ur_filter.role_id = r_filter.role_id AND r_filter.del_flag = '0' WHERE u.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY u.create_time DESC
2025-11-06 15:38:25 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserList - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 15:38:25 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserList - <==      Total: 49
2025-11-06 15:38:25 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:25 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 381(Long)
2025-11-06 15:38:26 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:26 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:26 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 380(Long)
2025-11-06 15:38:26 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:26 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:26 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 379(Long)
2025-11-06 15:38:26 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:26 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:26 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 378(Long)
2025-11-06 15:38:26 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:26 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:26 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 377(Long)
2025-11-06 15:38:27 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:27 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:27 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 376(Long)
2025-11-06 15:38:27 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:27 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:27 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 375(Long)
2025-11-06 15:38:27 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:27 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:27 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 374(Long)
2025-11-06 15:38:27 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:27 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:27 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 373(Long)
2025-11-06 15:38:27 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:27 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:27 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 372(Long)
2025-11-06 15:38:27 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:27 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:27 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 371(Long)
2025-11-06 15:38:27 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:27 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:27 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 370(Long)
2025-11-06 15:38:28 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:28 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:28 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 369(Long)
2025-11-06 15:38:28 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:28 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:28 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 357(Long)
2025-11-06 15:38:28 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:28 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:28 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 356(Long)
2025-11-06 15:38:28 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:28 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:28 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 355(Long)
2025-11-06 15:38:28 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:28 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:28 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 354(Long)
2025-11-06 15:38:28 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:28 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:28 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 353(Long)
2025-11-06 15:38:29 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:29 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:29 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 352(Long)
2025-11-06 15:38:29 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:29 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:29 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 351(Long)
2025-11-06 15:38:29 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:29 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:29 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 349(Long)
2025-11-06 15:38:29 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:29 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:29 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 348(Long)
2025-11-06 15:38:29 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:29 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:29 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 347(Long)
2025-11-06 15:38:29 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:29 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:29 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 345(Long)
2025-11-06 15:38:30 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:30 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:30 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 344(Long)
2025-11-06 15:38:30 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:30 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:30 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 343(Long)
2025-11-06 15:38:30 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:30 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:30 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 342(Long)
2025-11-06 15:38:30 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:30 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:30 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 340(Long)
2025-11-06 15:38:30 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:30 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:30 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 339(Long)
2025-11-06 15:38:30 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:30 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:30 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 338(Long)
2025-11-06 15:38:30 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:30 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:30 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 337(Long)
2025-11-06 15:38:31 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:31 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:31 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 336(Long)
2025-11-06 15:38:31 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing POST /system/user/list
2025-11-06 15:38:31 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:38:31 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:38:31 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:38:31 [http-nio-8080-exec-10] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:38:31 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:31 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:31 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 335(Long)
2025-11-06 15:38:31 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:38:31 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:38:31 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:31 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:31 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 334(Long)
2025-11-06 15:38:31 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:38:31 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:31 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:38:31 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:31 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:31 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 333(Long)
2025-11-06 15:38:31 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:38:31 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:38:31 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:38:31 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:31 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:31 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 332(Long)
2025-11-06 15:38:31 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:38:31 [http-nio-8080-exec-10] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:38:31 [http-nio-8080-exec-10] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:38:31 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:38:31 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:38:31 [http-nio-8080-exec-10] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:38:31 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured POST /system/user/list
2025-11-06 15:38:31 [http-nio-8080-exec-10] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: POST /api/system/user/list from 127.0.0.1
2025-11-06 15:38:31 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserList - ==>  Preparing: SELECT DISTINCT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_name, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur_filter ON u.user_id = ur_filter.user_id LEFT JOIN sys_role r_filter ON ur_filter.role_id = r_filter.role_id AND r_filter.del_flag = '0' WHERE u.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY u.create_time DESC
2025-11-06 15:38:31 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserList - ==> Parameters: 1(Long), 320(Long), 321(Long), 322(Long), 323(Long), 324(Long), 325(Long), 326(Long), 327(Long), 328(Long), 332(Long), 343(Long), 354(Long), 356(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 379(Long), 380(Long), 381(Long), 374(Long), 375(Long), 376(Long), 377(Long), 378(Long), 355(Long), 357(Long), 333(Long), 344(Long), 345(Long), 334(Long), 335(Long), 337(Long), 342(Long), 347(Long), 348(Long), 349(Long), 351(Long), 352(Long), 340(Long), 353(Long), 329(Long), 330(Long), 331(Long), 336(Long), 338(Long), 339(Long)
2025-11-06 15:38:31 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:31 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:31 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 331(Long)
2025-11-06 15:38:32 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:32 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:32 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 330(Long)
2025-11-06 15:38:32 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:32 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:32 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 329(Long)
2025-11-06 15:38:32 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:32 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:32 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 328(Long)
2025-11-06 15:38:32 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserList - <==      Total: 49
2025-11-06 15:38:32 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:32 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 381(Long)
2025-11-06 15:38:32 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:32 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:32 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 327(Long)
2025-11-06 15:38:32 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:32 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:32 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 380(Long)
2025-11-06 15:38:32 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:32 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:32 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 326(Long)
2025-11-06 15:38:32 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:32 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:32 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 379(Long)
2025-11-06 15:38:32 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:32 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:32 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 325(Long)
2025-11-06 15:38:32 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:32 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:32 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 324(Long)
2025-11-06 15:38:33 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:33 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:33 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 323(Long)
2025-11-06 15:38:33 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:33 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:33 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 322(Long)
2025-11-06 15:38:33 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:33 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:33 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 378(Long)
2025-11-06 15:38:33 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:33 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:33 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 321(Long)
2025-11-06 15:38:33 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:33 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:33 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 377(Long)
2025-11-06 15:38:33 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:33 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:33 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 320(Long)
2025-11-06 15:38:33 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:33 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:33 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 376(Long)
2025-11-06 15:38:33 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:33 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:33 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 1(Long)
2025-11-06 15:38:33 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:33 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:33 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 375(Long)
2025-11-06 15:38:33 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:33 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 15:38:33 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 379(Long), 1(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 354(Long), 337(Long), 342(Long), 344(Long), 332(Long), 334(Long), 320(Long), 329(Long), 333(Long), 321(Long)
2025-11-06 15:38:33 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:33 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:33 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 374(Long)
2025-11-06 15:38:34 [http-nio-8080-exec-8] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 17
2025-11-06 15:38:34 [http-nio-8080-exec-8] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/system/user/list from 127.0.0.1 - 状态: 200 - 耗时: 8588ms
2025-11-06 15:38:34 [http-nio-8080-exec-8] WARN  c.d.c.i.PerformanceInterceptor - 检测到慢请求: POST /api/system/user/list from 127.0.0.1 - 耗时: 8588ms - 超过阈值: 3000ms
2025-11-06 15:38:34 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:34 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:34 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 373(Long)
2025-11-06 15:38:34 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:34 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:34 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 372(Long)
2025-11-06 15:38:34 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:34 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:34 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 371(Long)
2025-11-06 15:38:34 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:34 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:34 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 370(Long)
2025-11-06 15:38:35 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:35 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:35 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 369(Long)
2025-11-06 15:38:35 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:35 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:35 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 357(Long)
2025-11-06 15:38:36 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:36 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:36 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 356(Long)
2025-11-06 15:38:36 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:36 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:36 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 355(Long)
2025-11-06 15:38:36 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:36 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:36 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 354(Long)
2025-11-06 15:38:36 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:36 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:36 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 353(Long)
2025-11-06 15:38:36 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:36 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:36 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 352(Long)
2025-11-06 15:38:36 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:36 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:36 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 351(Long)
2025-11-06 15:38:37 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:37 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:37 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 349(Long)
2025-11-06 15:38:37 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:37 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:37 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 348(Long)
2025-11-06 15:38:37 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:37 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:37 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 347(Long)
2025-11-06 15:38:37 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:37 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:37 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 345(Long)
2025-11-06 15:38:37 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:37 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:37 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 344(Long)
2025-11-06 15:38:37 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:37 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:37 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 343(Long)
2025-11-06 15:38:37 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:37 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:37 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 342(Long)
2025-11-06 15:38:38 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:38 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:38 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 340(Long)
2025-11-06 15:38:38 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:38 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:38 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 339(Long)
2025-11-06 15:38:38 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:38 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:38 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 338(Long)
2025-11-06 15:38:38 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:38 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:38 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 337(Long)
2025-11-06 15:38:39 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:39 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:39 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 336(Long)
2025-11-06 15:38:39 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:39 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:39 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 335(Long)
2025-11-06 15:38:39 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:39 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:39 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 334(Long)
2025-11-06 15:38:39 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:39 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:39 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 333(Long)
2025-11-06 15:38:39 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:39 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:39 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 332(Long)
2025-11-06 15:38:39 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:39 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:39 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 331(Long)
2025-11-06 15:38:40 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:40 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:40 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 330(Long)
2025-11-06 15:38:40 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:40 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:40 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 329(Long)
2025-11-06 15:38:40 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:40 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:40 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 328(Long)
2025-11-06 15:38:40 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:40 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:40 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 327(Long)
2025-11-06 15:38:40 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:40 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:40 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 326(Long)
2025-11-06 15:38:40 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:40 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:40 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 325(Long)
2025-11-06 15:38:41 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:41 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:41 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 324(Long)
2025-11-06 15:38:41 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:41 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:41 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 323(Long)
2025-11-06 15:38:41 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:41 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:41 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 322(Long)
2025-11-06 15:38:41 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:41 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:41 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 321(Long)
2025-11-06 15:38:41 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:41 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:41 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 320(Long)
2025-11-06 15:38:41 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:41 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==>  Preparing: SELECT DISTINCT r.role_key FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:41 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - ==> Parameters: 1(Long)
2025-11-06 15:38:42 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRoleKeysByUserId - <==      Total: 1
2025-11-06 15:38:42 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==>  Preparing: SELECT ur.user_id AS userId, r.role_key AS roleKey FROM sys_user_role ur JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' JOIN sys_user u ON ur.user_id = u.user_id AND u.status = '0' WHERE ur.user_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? )
2025-11-06 15:38:42 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserRoleMappings - ==> Parameters: 379(Long), 1(Long), 369(Long), 370(Long), 371(Long), 372(Long), 373(Long), 354(Long), 337(Long), 342(Long), 344(Long), 332(Long), 334(Long), 320(Long), 329(Long), 333(Long), 321(Long)
2025-11-06 15:38:42 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserRoleMappings - <==      Total: 17
2025-11-06 15:38:42 [http-nio-8080-exec-10] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: POST /api/system/user/list from 127.0.0.1 - 状态: 200 - 耗时: 10447ms
2025-11-06 15:38:42 [http-nio-8080-exec-10] WARN  c.d.c.i.PerformanceInterceptor - 检测到慢请求: POST /api/system/user/list from 127.0.0.1 - 耗时: 10447ms - 超过阈值: 3000ms
2025-11-06 15:38:54 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/agent/commission-overview
2025-11-06 15:38:54 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:38:54 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:38:54 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:38:54 [http-nio-8080-exec-2] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:38:54 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:38:54 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:38:54 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:38:54 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:54 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:38:54 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:38:54 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:38:54 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:38:54 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:38:54 [http-nio-8080-exec-2] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:38:54 [http-nio-8080-exec-2] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:38:54 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:38:54 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:38:54 [http-nio-8080-exec-2] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:38:54 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/agent/commission-overview
2025-11-06 15:38:54 [http-nio-8080-exec-2] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/agent/commission-overview from 127.0.0.1
2025-11-06 15:38:54 [http-nio-8080-exec-2] INFO  c.deepreach.common.aspect.LogAspect - LogAspect doBefore 被触发: 统计管理 - getAgentCommissionOverview
2025-11-06 15:38:54 [http-nio-8080-exec-2] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志前置处理完成: 统计管理
2025-11-06 15:38:54 [http-nio-8080-exec-2] INFO  c.deepreach.common.aspect.LogAspect - 保存操作日志: 统计管理 - admin - /api/statistics/agent/commission-overview - 成功
2025-11-06 15:38:54 [http-nio-8080-exec-2] INFO  c.deepreach.common.aspect.LogAspect - 操作日志对象详情: operId=null, title=统计管理, operName=admin, operUrl=/api/statistics/agent/commission-overview, status=0
2025-11-06 15:38:54 [http-nio-8080-exec-2] INFO  c.deepreach.common.aspect.LogAspect - 准备异步保存操作日志到数据库...
2025-11-06 15:38:54 [http-nio-8080-exec-2] INFO  c.deepreach.common.aspect.LogAspect - 操作日志异步保存任务已提交
2025-11-06 15:38:54 [http-nio-8080-exec-2] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志返回处理完成: 统计管理
2025-11-06 15:38:54 [pool-3-thread-1] DEBUG c.d.c.c.m.S.insertOperLog - ==>  Preparing: INSERT INTO sys_oper_log ( title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2025-11-06 15:38:54 [pool-3-thread-1] DEBUG c.d.c.c.m.S.insertOperLog - ==> Parameters: 统计管理(String), 0(Integer), com.deepreach.common.core.controller.StatisticsController.getAgentCommissionOverview(String), GET(String), 1(Integer), admin(String), ADMIN(String), /api/statistics/agent/commission-overview(String), 127.0.0.1(String), null, (String), {"code":500,"msg":"仅代理用户可以访问该统计","data":null,"timestamp":1762414734722,"error":true,"success":false}(String), 0(Integer), null, 2025-11-06T15:38:54.722241(LocalDateTime), 0(Long)
2025-11-06 15:38:54 [http-nio-8080-exec-2] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/agent/commission-overview from 127.0.0.1 - 状态: 200 - 耗时: 11ms
2025-11-06 15:38:54 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/agent/general/subtree
2025-11-06 15:38:54 [http-nio-8080-exec-1] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:38:54 [http-nio-8080-exec-1] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:38:54 [http-nio-8080-exec-1] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:38:54 [http-nio-8080-exec-1] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:38:54 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:38:54 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:38:54 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:38:54 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:38:54 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:38:55 [pool-3-thread-1] DEBUG c.d.c.c.m.S.insertOperLog - <==    Updates: 1
2025-11-06 15:38:55 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:38:55 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:38:55 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:38:55 [http-nio-8080-exec-1] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:38:55 [http-nio-8080-exec-1] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:38:55 [http-nio-8080-exec-1] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:38:55 [http-nio-8080-exec-1] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:38:55 [http-nio-8080-exec-1] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:38:55 [http-nio-8080-exec-1] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:38:55 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/agent/general/subtree
2025-11-06 15:38:55 [http-nio-8080-exec-1] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/agent/general/subtree from 127.0.0.1
2025-11-06 15:38:55 [http-nio-8080-exec-1] INFO  c.deepreach.common.aspect.LogAspect - LogAspect doBefore 被触发: 统计管理 - getGeneralAgentSubtreeStatistics
2025-11-06 15:38:55 [http-nio-8080-exec-1] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志前置处理完成: 统计管理
2025-11-06 15:38:55 [http-nio-8080-exec-1] INFO  c.deepreach.common.aspect.LogAspect - 保存操作日志: 统计管理 - admin - /api/statistics/agent/general/subtree - 成功
2025-11-06 15:38:55 [http-nio-8080-exec-1] INFO  c.deepreach.common.aspect.LogAspect - 操作日志对象详情: operId=null, title=统计管理, operName=admin, operUrl=/api/statistics/agent/general/subtree, status=0
2025-11-06 15:38:55 [http-nio-8080-exec-1] INFO  c.deepreach.common.aspect.LogAspect - 准备异步保存操作日志到数据库...
2025-11-06 15:38:55 [http-nio-8080-exec-1] INFO  c.deepreach.common.aspect.LogAspect - 操作日志异步保存任务已提交
2025-11-06 15:38:55 [http-nio-8080-exec-1] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志返回处理完成: 统计管理
2025-11-06 15:38:55 [pool-3-thread-2] DEBUG c.d.c.c.m.S.insertOperLog - ==>  Preparing: INSERT INTO sys_oper_log ( title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2025-11-06 15:38:55 [http-nio-8080-exec-1] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/agent/general/subtree from 127.0.0.1 - 状态: 200 - 耗时: 5ms
2025-11-06 15:38:55 [pool-3-thread-2] DEBUG c.d.c.c.m.S.insertOperLog - ==> Parameters: 统计管理(String), 0(Integer), com.deepreach.common.core.controller.StatisticsController.getGeneralAgentSubtreeStatistics(String), GET(String), 1(Integer), admin(String), ADMIN(String), /api/statistics/agent/general/subtree(String), 127.0.0.1(String), null, (String), {"code":500,"msg":"仅总代可以访问该统计","data":null,"timestamp":1762414735208,"error":true,"success":false}(String), 0(Integer), null, 2025-11-06T15:38:55.207979(LocalDateTime), 0(Long)
2025-11-06 15:38:55 [pool-3-thread-2] DEBUG c.d.c.c.m.S.insertOperLog - <==    Updates: 1
2025-11-06 15:38:59 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/agent/commission-overview
2025-11-06 15:38:59 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:38:59 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:38:59 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:38:59 [http-nio-8080-exec-4] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:38:59 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:38:59 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:39:00 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:39:00 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:39:00 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:39:00 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:39:00 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:39:00 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:39:00 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:39:00 [http-nio-8080-exec-4] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:39:00 [http-nio-8080-exec-4] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:39:00 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:39:00 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:39:00 [http-nio-8080-exec-4] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:39:00 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/agent/commission-overview
2025-11-06 15:39:00 [http-nio-8080-exec-4] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/agent/commission-overview from 127.0.0.1
2025-11-06 15:39:00 [http-nio-8080-exec-4] INFO  c.deepreach.common.aspect.LogAspect - LogAspect doBefore 被触发: 统计管理 - getAgentCommissionOverview
2025-11-06 15:39:00 [http-nio-8080-exec-4] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志前置处理完成: 统计管理
2025-11-06 15:39:00 [http-nio-8080-exec-4] INFO  c.deepreach.common.aspect.LogAspect - 保存操作日志: 统计管理 - admin - /api/statistics/agent/commission-overview - 成功
2025-11-06 15:39:00 [http-nio-8080-exec-4] INFO  c.deepreach.common.aspect.LogAspect - 操作日志对象详情: operId=null, title=统计管理, operName=admin, operUrl=/api/statistics/agent/commission-overview, status=0
2025-11-06 15:39:00 [http-nio-8080-exec-4] INFO  c.deepreach.common.aspect.LogAspect - 准备异步保存操作日志到数据库...
2025-11-06 15:39:00 [http-nio-8080-exec-4] INFO  c.deepreach.common.aspect.LogAspect - 操作日志异步保存任务已提交
2025-11-06 15:39:00 [http-nio-8080-exec-4] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志返回处理完成: 统计管理
2025-11-06 15:39:00 [pool-3-thread-3] DEBUG c.d.c.c.m.S.insertOperLog - ==>  Preparing: INSERT INTO sys_oper_log ( title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2025-11-06 15:39:00 [pool-3-thread-3] DEBUG c.d.c.c.m.S.insertOperLog - ==> Parameters: 统计管理(String), 0(Integer), com.deepreach.common.core.controller.StatisticsController.getAgentCommissionOverview(String), GET(String), 1(Integer), admin(String), ADMIN(String), /api/statistics/agent/commission-overview(String), 127.0.0.1(String), null, (String), {"code":500,"msg":"仅代理用户可以访问该统计","data":null,"timestamp":1762414740323,"error":true,"success":false}(String), 0(Integer), null, 2025-11-06T15:39:00.323016(LocalDateTime), 2(Long)
2025-11-06 15:39:00 [http-nio-8080-exec-4] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/agent/commission-overview from 127.0.0.1 - 状态: 200 - 耗时: 9ms
2025-11-06 15:39:00 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/agent/general/subtree
2025-11-06 15:39:00 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:39:00 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:39:00 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:39:00 [http-nio-8080-exec-5] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:39:00 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:39:00 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:39:00 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:39:00 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:39:00 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:39:00 [pool-3-thread-3] DEBUG c.d.c.c.m.S.insertOperLog - <==    Updates: 1
2025-11-06 15:39:00 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:39:00 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:39:00 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:39:00 [http-nio-8080-exec-5] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:39:00 [http-nio-8080-exec-5] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:39:00 [http-nio-8080-exec-5] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:39:00 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:39:00 [http-nio-8080-exec-5] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:39:00 [http-nio-8080-exec-5] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:39:00 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/agent/general/subtree
2025-11-06 15:39:00 [http-nio-8080-exec-5] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/agent/general/subtree from 127.0.0.1
2025-11-06 15:39:00 [http-nio-8080-exec-5] INFO  c.deepreach.common.aspect.LogAspect - LogAspect doBefore 被触发: 统计管理 - getGeneralAgentSubtreeStatistics
2025-11-06 15:39:00 [http-nio-8080-exec-5] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志前置处理完成: 统计管理
2025-11-06 15:39:00 [http-nio-8080-exec-5] INFO  c.deepreach.common.aspect.LogAspect - 保存操作日志: 统计管理 - admin - /api/statistics/agent/general/subtree - 成功
2025-11-06 15:39:00 [http-nio-8080-exec-5] INFO  c.deepreach.common.aspect.LogAspect - 操作日志对象详情: operId=null, title=统计管理, operName=admin, operUrl=/api/statistics/agent/general/subtree, status=0
2025-11-06 15:39:00 [http-nio-8080-exec-5] INFO  c.deepreach.common.aspect.LogAspect - 准备异步保存操作日志到数据库...
2025-11-06 15:39:00 [http-nio-8080-exec-5] INFO  c.deepreach.common.aspect.LogAspect - 操作日志异步保存任务已提交
2025-11-06 15:39:00 [http-nio-8080-exec-5] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志返回处理完成: 统计管理
2025-11-06 15:39:00 [pool-3-thread-4] DEBUG c.d.c.c.m.S.insertOperLog - ==>  Preparing: INSERT INTO sys_oper_log ( title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2025-11-06 15:39:00 [pool-3-thread-4] DEBUG c.d.c.c.m.S.insertOperLog - ==> Parameters: 统计管理(String), 0(Integer), com.deepreach.common.core.controller.StatisticsController.getGeneralAgentSubtreeStatistics(String), GET(String), 1(Integer), admin(String), ADMIN(String), /api/statistics/agent/general/subtree(String), 127.0.0.1(String), null, (String), {"code":500,"msg":"仅总代可以访问该统计","data":null,"timestamp":1762414740835,"error":true,"success":false}(String), 0(Integer), null, 2025-11-06T15:39:00.834914(LocalDateTime), 0(Long)
2025-11-06 15:39:00 [http-nio-8080-exec-5] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/agent/general/subtree from 127.0.0.1 - 状态: 200 - 耗时: 7ms
2025-11-06 15:39:01 [pool-3-thread-4] DEBUG c.d.c.c.m.S.insertOperLog - <==    Updates: 1
2025-11-06 15:51:41 [SpringApplicationShutdownHook] INFO  c.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2025-11-06 15:51:41 [SpringApplicationShutdownHook] INFO  c.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
2025-11-06 15:51:43 [main] INFO  c.deepreach.web.DeepReachApplication - Starting DeepReachApplication using Java 17.0.12 with PID 98441 (/Users/gak1/Documents/GitHub/deepreach-Server-side-rebuild/deepreach-web/target/classes started by gak1 in /Users/gak1/Documents/GitHub/deepreach-Server-side-rebuild)
2025-11-06 15:51:43 [main] DEBUG c.deepreach.web.DeepReachApplication - Running with Spring Boot v3.2.0, Spring v6.1.1
2025-11-06 15:51:43 [main] INFO  c.deepreach.web.DeepReachApplication - The following 1 profile is active: "dev"
2025-11-06 15:51:44 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-06 15:51:44 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-06 15:51:44 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Redis repository interfaces.
2025-11-06 15:51:44 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-06 15:51:44 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-06 15:51:44 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.16]
2025-11-06 15:51:44 [main] INFO  o.a.c.c.C.[.[localhost].[/api] - Initializing Spring embedded WebApplicationContext
2025-11-06 15:51:44 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 827 ms
2025-11-06 15:51:45 [main] DEBUG c.d.c.s.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-06 15:51:45 [main] ERROR i.n.r.d.DnsServerAddressStreamProviders - Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
2025-11-06 15:51:45 [main] INFO  c.d.w.s.impl.FileStorageServiceImpl - 文件上传目录: /Users/gak1/Documents/GitHub/deepreach-Server-side-rebuild/uploads
2025-11-06 15:51:45 [main] INFO  c.deepreach.web.config.WebMvcConfig - 静态资源映射配置：/uploads/** -> file:/Users/gak1/Documents/GitHub/deepreach-Server-side-rebuild/uploads
2025-11-06 15:51:45 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@44428583, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@265c0752, org.springframework.security.web.context.SecurityContextHolderFilter@511a307e, org.springframework.security.web.header.HeaderWriterFilter@6b6606d1, org.springframework.web.filter.CorsFilter@7d4b32d1, org.springframework.security.web.authentication.logout.LogoutFilter@7dbd70fd, com.deepreach.common.security.JwtAuthenticationFilter@ce2eaa7, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@10d97b64, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@2352c21f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7a75183d, org.springframework.security.web.session.SessionManagementFilter@523f3c29, org.springframework.security.web.access.ExceptionTranslationFilter@2f82e3cf, org.springframework.security.web.access.intercept.AuthorizationFilter@29d29657]
2025-11-06 15:51:45 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/api'
2025-11-06 15:51:45 [main] INFO  c.deepreach.web.DeepReachApplication - Started DeepReachApplication in 2.352 seconds (process running for 2.614)
2025-11-06 15:51:45 [main] INFO  c.d.web.config.DataSourceHealthCheck - 开始检查数据源配置...
2025-11-06 15:51:59 [main] ERROR c.alibaba.druid.pool.DruidDataSource - init datasource error, url: jdbc:mysql://206.82.1.18:33900/smspikenew?useUnicode=true&characterEncoding=utf8&useSSL=false&serverTimezone=Asia/Shanghai&allowPublicKeyRetrieval=true&useSSL=false
com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at com.mysql.cj.jdbc.exceptions.SQLError.createCommunicationsException(SQLError.java:175)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:64)
	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:825)
	at com.mysql.cj.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:446)
	at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:239)
	at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:188)
	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1703)
	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1801)
	at com.alibaba.druid.pool.DruidDataSource.init(DruidDataSource.java:939)
	at com.alibaba.druid.pool.DruidDataSource.getConnection(DruidDataSource.java:1463)
	at com.alibaba.druid.pool.DruidDataSource.getConnection(DruidDataSource.java:1459)
	at com.alibaba.druid.pool.DruidDataSource.getConnection(DruidDataSource.java:83)
	at org.springframework.jdbc.datasource.DataSourceUtils.fetchConnection(DataSourceUtils.java:160)
	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:118)
	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:81)
	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:388)
	at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:476)
	at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:486)
	at org.springframework.jdbc.core.JdbcTemplate.queryForObject(JdbcTemplate.java:519)
	at org.springframework.jdbc.core.JdbcTemplate.queryForObject(JdbcTemplate.java:526)
	at com.deepreach.web.config.DataSourceHealthCheck.run(DataSourceHealthCheck.java:35)
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:786)
	at org.springframework.boot.SpringApplication.lambda$callRunners$3(SpringApplication.java:770)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)
	at java.base/java.util.stream.SortedOps$SizedRefSortingSink.end(SortedOps.java:357)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:510)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:765)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:330)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.deepreach.web.DeepReachApplication.main(DeepReachApplication.java:37)
Caused by: com.mysql.cj.exceptions.CJCommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:500)
	at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:481)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:62)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:105)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:150)
	at com.mysql.cj.exceptions.ExceptionFactory.createCommunicationsException(ExceptionFactory.java:166)
	at com.mysql.cj.protocol.a.NativeProtocol.readMessage(NativeProtocol.java:582)
	at com.mysql.cj.protocol.a.NativeProtocol.checkErrorMessage(NativeProtocol.java:762)
	at com.mysql.cj.protocol.a.NativeProtocol.checkErrorMessage(NativeProtocol.java:739)
	at com.mysql.cj.protocol.a.NativeProtocol.checkErrorMessage(NativeProtocol.java:156)
	at com.mysql.cj.protocol.a.NativeAuthenticationProvider.proceedHandshakeWithPluggableAuthentication(NativeAuthenticationProvider.java:468)
	at com.mysql.cj.protocol.a.NativeAuthenticationProvider.connect(NativeAuthenticationProvider.java:213)
	at com.mysql.cj.protocol.a.NativeProtocol.connect(NativeProtocol.java:1430)
	at com.mysql.cj.NativeSession.connect(NativeSession.java:134)
	at com.mysql.cj.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:945)
	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:815)
	... 33 common frames omitted
Caused by: java.io.EOFException: Can not read response from server. Expected to read 4 bytes, read 0 bytes before connection was unexpectedly lost.
	at com.mysql.cj.protocol.FullReadInputStream.readFully(FullReadInputStream.java:67)
	at com.mysql.cj.protocol.a.SimplePacketReader.readHeaderLocal(SimplePacketReader.java:81)
	at com.mysql.cj.protocol.a.SimplePacketReader.readHeader(SimplePacketReader.java:63)
	at com.mysql.cj.protocol.a.SimplePacketReader.readHeader(SimplePacketReader.java:45)
	at com.mysql.cj.protocol.a.NativeProtocol.readMessage(NativeProtocol.java:576)
	... 42 common frames omitted
2025-11-06 15:51:59 [main] INFO  c.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2025-11-06 15:51:59 [main] INFO  c.d.web.config.DataSourceHealthCheck - 主数据源连接成功: PRIMARY_OK
2025-11-06 15:52:01 [main] INFO  c.d.web.config.DataSourceHealthCheck - 云电脑数据源连接成功: CLOUD_COMPUTER_OK
2025-11-06 15:52:02 [main] INFO  c.d.web.config.DataSourceHealthCheck - 云电脑数据库中admin用户记录数: 1
2025-11-06 15:52:02 [main] INFO  c.d.web.config.DataSourceHealthCheck - 数据源检查完成
2025-11-06 15:52:02 [main] INFO  c.d.w.i.UserHierarchyCacheInitializer - 开始构建用户层级树缓存...
2025-11-06 15:52:02 [main] DEBUG c.d.c.c.m.S.selectAllUserHierarchyRelations - ==>  Preparing: SELECT u.user_id AS userId, u.parent_user_id AS parentUserId FROM sys_user u WHERE u.status = '0'
2025-11-06 15:52:02 [main] DEBUG c.d.c.c.m.S.selectAllUserHierarchyRelations - ==> Parameters: 
2025-11-06 15:52:02 [main] DEBUG c.d.c.c.m.S.selectAllUserHierarchyRelations - <==      Total: 49
2025-11-06 15:52:02 [main] INFO  c.d.c.c.s.impl.SysUserServiceImpl - 用户层级树缓存刷新成功：记录总数=49, 根节点数量=1
2025-11-06 15:52:02 [main] INFO  c.d.w.i.UserHierarchyCacheInitializer - 用户层级树缓存构建完成
2025-11-06 15:53:31 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[.[localhost].[/api] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-06 15:53:31 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-06 15:53:31 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 4 ms
2025-11-06 15:53:31 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /statistics/agent/commission-overview
2025-11-06 15:53:31 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/agent/commission-overview
2025-11-06 15:53:31 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:53:31 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:53:31 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:53:31 [http-nio-8080-exec-2] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:53:31 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:53:31 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:53:31 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:53:31 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:53:31 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:53:32 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:53:32 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:53:32 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:53:32 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:53:32 [http-nio-8080-exec-2] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:53:32 [http-nio-8080-exec-2] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:53:32 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:53:32 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:53:32 [http-nio-8080-exec-2] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:53:32 [http-nio-8080-exec-2] WARN  o.s.w.s.h.HandlerMappingIntrospector - Cache miss for REQUEST dispatch to '/api/statistics/agent/commission-overview' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2025-11-06 15:53:32 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/agent/commission-overview
2025-11-06 15:53:32 [http-nio-8080-exec-2] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/agent/commission-overview from 127.0.0.1
2025-11-06 15:53:32 [http-nio-8080-exec-2] INFO  c.deepreach.common.aspect.LogAspect - LogAspect doBefore 被触发: 统计管理 - getAgentCommissionOverview
2025-11-06 15:53:32 [http-nio-8080-exec-2] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志前置处理完成: 统计管理
2025-11-06 15:53:32 [http-nio-8080-exec-2] INFO  c.deepreach.common.aspect.LogAspect - 保存操作日志: 统计管理 - admin - /api/statistics/agent/commission-overview - 成功
2025-11-06 15:53:32 [http-nio-8080-exec-2] INFO  c.deepreach.common.aspect.LogAspect - 操作日志对象详情: operId=null, title=统计管理, operName=admin, operUrl=/api/statistics/agent/commission-overview, status=0
2025-11-06 15:53:32 [http-nio-8080-exec-2] INFO  c.deepreach.common.aspect.LogAspect - 准备异步保存操作日志到数据库...
2025-11-06 15:53:32 [http-nio-8080-exec-2] INFO  c.deepreach.common.aspect.LogAspect - 操作日志异步保存任务已提交
2025-11-06 15:53:32 [http-nio-8080-exec-2] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志返回处理完成: 统计管理
2025-11-06 15:53:32 [pool-3-thread-1] DEBUG c.d.c.c.m.S.insertOperLog - ==>  Preparing: INSERT INTO sys_oper_log ( title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2025-11-06 15:53:32 [pool-3-thread-1] DEBUG c.d.c.c.m.S.insertOperLog - ==> Parameters: 统计管理(String), 0(Integer), com.deepreach.common.core.controller.StatisticsController.getAgentCommissionOverview(String), GET(String), 1(Integer), admin(String), ADMIN(String), /api/statistics/agent/commission-overview(String), 127.0.0.1(String), null, (String), {"code":500,"msg":"仅代理用户可以访问该统计","data":null,"timestamp":1762415612417,"error":true,"success":false}(String), 0(Integer), null, 2025-11-06T15:53:32.416936(LocalDateTime), 1(Long)
2025-11-06 15:53:32 [http-nio-8080-exec-2] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/agent/commission-overview from 127.0.0.1 - 状态: 200 - 耗时: 21ms
2025-11-06 15:53:32 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /statistics/agent/level1/subtree
2025-11-06 15:53:32 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/agent/level1/subtree
2025-11-06 15:53:32 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:53:32 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:53:32 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:53:32 [http-nio-8080-exec-4] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:53:33 [pool-3-thread-1] DEBUG c.d.c.c.m.S.insertOperLog - <==    Updates: 1
2025-11-06 15:53:33 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:53:33 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:53:33 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:53:33 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:53:33 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:53:33 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:53:33 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:53:33 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:53:33 [http-nio-8080-exec-4] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:53:33 [http-nio-8080-exec-4] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:53:33 [http-nio-8080-exec-4] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:53:33 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:53:33 [http-nio-8080-exec-4] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:53:33 [http-nio-8080-exec-4] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:53:33 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/agent/level1/subtree
2025-11-06 15:53:33 [http-nio-8080-exec-4] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/agent/level1/subtree from 127.0.0.1
2025-11-06 15:53:33 [http-nio-8080-exec-4] INFO  c.deepreach.common.aspect.LogAspect - LogAspect doBefore 被触发: 统计管理 - getLevel1AgentSubtreeStatistics
2025-11-06 15:53:33 [http-nio-8080-exec-4] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志前置处理完成: 统计管理
2025-11-06 15:53:33 [http-nio-8080-exec-4] INFO  c.deepreach.common.aspect.LogAspect - 保存操作日志: 统计管理 - admin - /api/statistics/agent/level1/subtree - 成功
2025-11-06 15:53:33 [http-nio-8080-exec-4] INFO  c.deepreach.common.aspect.LogAspect - 操作日志对象详情: operId=null, title=统计管理, operName=admin, operUrl=/api/statistics/agent/level1/subtree, status=0
2025-11-06 15:53:33 [http-nio-8080-exec-4] INFO  c.deepreach.common.aspect.LogAspect - 准备异步保存操作日志到数据库...
2025-11-06 15:53:33 [http-nio-8080-exec-4] INFO  c.deepreach.common.aspect.LogAspect - 操作日志异步保存任务已提交
2025-11-06 15:53:33 [http-nio-8080-exec-4] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志返回处理完成: 统计管理
2025-11-06 15:53:33 [pool-3-thread-2] DEBUG c.d.c.c.m.S.insertOperLog - ==>  Preparing: INSERT INTO sys_oper_log ( title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2025-11-06 15:53:33 [http-nio-8080-exec-4] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/agent/level1/subtree from 127.0.0.1 - 状态: 200 - 耗时: 4ms
2025-11-06 15:53:33 [pool-3-thread-2] DEBUG c.d.c.c.m.S.insertOperLog - ==> Parameters: 统计管理(String), 0(Integer), com.deepreach.common.core.controller.StatisticsController.getLevel1AgentSubtreeStatistics(String), GET(String), 1(Integer), admin(String), ADMIN(String), /api/statistics/agent/level1/subtree(String), 127.0.0.1(String), null, (String), {"code":500,"msg":"仅一级代理可以访问该统计","data":null,"timestamp":1762415613598,"error":true,"success":false}(String), 0(Integer), null, 2025-11-06T15:53:33.598172(LocalDateTime), 0(Long)
2025-11-06 15:53:33 [pool-3-thread-2] DEBUG c.d.c.c.m.S.insertOperLog - <==    Updates: 1
2025-11-06 15:54:18 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/agent/commission-overview
2025-11-06 15:54:18 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:54:18 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:54:18 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:54:18 [http-nio-8080-exec-6] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:54:18 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:54:18 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:54:18 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:54:18 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:54:18 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:54:18 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:54:18 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:54:18 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:54:19 [http-nio-8080-exec-6] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:54:19 [http-nio-8080-exec-6] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:54:19 [http-nio-8080-exec-6] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:54:19 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:54:19 [http-nio-8080-exec-6] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:54:19 [http-nio-8080-exec-6] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:54:19 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/agent/commission-overview
2025-11-06 15:54:19 [http-nio-8080-exec-6] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/agent/commission-overview from 127.0.0.1
2025-11-06 15:54:19 [http-nio-8080-exec-6] INFO  c.deepreach.common.aspect.LogAspect - LogAspect doBefore 被触发: 统计管理 - getAgentCommissionOverview
2025-11-06 15:54:19 [http-nio-8080-exec-6] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志前置处理完成: 统计管理
2025-11-06 15:54:19 [http-nio-8080-exec-6] INFO  c.deepreach.common.aspect.LogAspect - 保存操作日志: 统计管理 - admin - /api/statistics/agent/commission-overview - 成功
2025-11-06 15:54:19 [http-nio-8080-exec-6] INFO  c.deepreach.common.aspect.LogAspect - 操作日志对象详情: operId=null, title=统计管理, operName=admin, operUrl=/api/statistics/agent/commission-overview, status=0
2025-11-06 15:54:19 [http-nio-8080-exec-6] INFO  c.deepreach.common.aspect.LogAspect - 准备异步保存操作日志到数据库...
2025-11-06 15:54:19 [http-nio-8080-exec-6] INFO  c.deepreach.common.aspect.LogAspect - 操作日志异步保存任务已提交
2025-11-06 15:54:19 [http-nio-8080-exec-6] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志返回处理完成: 统计管理
2025-11-06 15:54:19 [pool-3-thread-3] DEBUG c.d.c.c.m.S.insertOperLog - ==>  Preparing: INSERT INTO sys_oper_log ( title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2025-11-06 15:54:19 [pool-3-thread-3] DEBUG c.d.c.c.m.S.insertOperLog - ==> Parameters: 统计管理(String), 0(Integer), com.deepreach.common.core.controller.StatisticsController.getAgentCommissionOverview(String), GET(String), 1(Integer), admin(String), ADMIN(String), /api/statistics/agent/commission-overview(String), 127.0.0.1(String), null, (String), {"code":500,"msg":"仅代理用户可以访问该统计","data":null,"timestamp":1762415659161,"error":true,"success":false}(String), 0(Integer), null, 2025-11-06T15:54:19.161160(LocalDateTime), 0(Long)
2025-11-06 15:54:19 [http-nio-8080-exec-6] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/agent/commission-overview from 127.0.0.1 - 状态: 200 - 耗时: 7ms
2025-11-06 15:54:19 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/agent/level1/subtree
2025-11-06 15:54:19 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:54:19 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:54:19 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:54:19 [http-nio-8080-exec-7] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:54:19 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:54:19 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:54:19 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:54:19 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:54:19 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:54:19 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:54:19 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:54:19 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:54:19 [pool-3-thread-3] DEBUG c.d.c.c.m.S.insertOperLog - <==    Updates: 1
2025-11-06 15:54:19 [http-nio-8080-exec-7] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:54:19 [http-nio-8080-exec-7] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:54:19 [http-nio-8080-exec-7] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:54:19 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:54:19 [http-nio-8080-exec-7] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:54:19 [http-nio-8080-exec-7] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:54:19 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/agent/level1/subtree
2025-11-06 15:54:19 [http-nio-8080-exec-7] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/agent/level1/subtree from 127.0.0.1
2025-11-06 15:54:19 [http-nio-8080-exec-7] INFO  c.deepreach.common.aspect.LogAspect - LogAspect doBefore 被触发: 统计管理 - getLevel1AgentSubtreeStatistics
2025-11-06 15:54:19 [http-nio-8080-exec-7] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志前置处理完成: 统计管理
2025-11-06 15:54:19 [http-nio-8080-exec-7] INFO  c.deepreach.common.aspect.LogAspect - 保存操作日志: 统计管理 - admin - /api/statistics/agent/level1/subtree - 成功
2025-11-06 15:54:19 [http-nio-8080-exec-7] INFO  c.deepreach.common.aspect.LogAspect - 操作日志对象详情: operId=null, title=统计管理, operName=admin, operUrl=/api/statistics/agent/level1/subtree, status=0
2025-11-06 15:54:19 [http-nio-8080-exec-7] INFO  c.deepreach.common.aspect.LogAspect - 准备异步保存操作日志到数据库...
2025-11-06 15:54:19 [http-nio-8080-exec-7] INFO  c.deepreach.common.aspect.LogAspect - 操作日志异步保存任务已提交
2025-11-06 15:54:19 [http-nio-8080-exec-7] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志返回处理完成: 统计管理
2025-11-06 15:54:19 [pool-3-thread-4] DEBUG c.d.c.c.m.S.insertOperLog - ==>  Preparing: INSERT INTO sys_oper_log ( title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2025-11-06 15:54:19 [http-nio-8080-exec-7] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/agent/level1/subtree from 127.0.0.1 - 状态: 200 - 耗时: 4ms
2025-11-06 15:54:19 [pool-3-thread-4] DEBUG c.d.c.c.m.S.insertOperLog - ==> Parameters: 统计管理(String), 0(Integer), com.deepreach.common.core.controller.StatisticsController.getLevel1AgentSubtreeStatistics(String), GET(String), 1(Integer), admin(String), ADMIN(String), /api/statistics/agent/level1/subtree(String), 127.0.0.1(String), null, (String), {"code":500,"msg":"仅一级代理可以访问该统计","data":null,"timestamp":1762415659675,"error":true,"success":false}(String), 0(Integer), null, 2025-11-06T15:54:19.674980(LocalDateTime), 0(Long)
2025-11-06 15:54:19 [pool-3-thread-4] DEBUG c.d.c.c.m.S.insertOperLog - <==    Updates: 1
2025-11-06 15:54:37 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/agent/commission-overview
2025-11-06 15:54:37 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:54:37 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:54:37 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:54:37 [http-nio-8080-exec-9] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:54:37 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:54:37 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:54:37 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:54:37 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:54:37 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:54:37 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:54:37 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:54:37 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:54:37 [http-nio-8080-exec-9] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:54:37 [http-nio-8080-exec-9] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:54:37 [http-nio-8080-exec-9] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:54:37 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:54:37 [http-nio-8080-exec-9] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:54:37 [http-nio-8080-exec-9] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:54:37 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/agent/commission-overview
2025-11-06 15:54:37 [http-nio-8080-exec-9] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/agent/commission-overview from 127.0.0.1
2025-11-06 15:54:37 [http-nio-8080-exec-9] INFO  c.deepreach.common.aspect.LogAspect - LogAspect doBefore 被触发: 统计管理 - getAgentCommissionOverview
2025-11-06 15:54:37 [http-nio-8080-exec-9] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志前置处理完成: 统计管理
2025-11-06 15:54:37 [http-nio-8080-exec-9] INFO  c.deepreach.common.aspect.LogAspect - 保存操作日志: 统计管理 - admin - /api/statistics/agent/commission-overview - 成功
2025-11-06 15:54:37 [http-nio-8080-exec-9] INFO  c.deepreach.common.aspect.LogAspect - 操作日志对象详情: operId=null, title=统计管理, operName=admin, operUrl=/api/statistics/agent/commission-overview, status=0
2025-11-06 15:54:37 [http-nio-8080-exec-9] INFO  c.deepreach.common.aspect.LogAspect - 准备异步保存操作日志到数据库...
2025-11-06 15:54:37 [http-nio-8080-exec-9] INFO  c.deepreach.common.aspect.LogAspect - 操作日志异步保存任务已提交
2025-11-06 15:54:37 [http-nio-8080-exec-9] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志返回处理完成: 统计管理
2025-11-06 15:54:37 [pool-3-thread-5] DEBUG c.d.c.c.m.S.insertOperLog - ==>  Preparing: INSERT INTO sys_oper_log ( title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2025-11-06 15:54:37 [http-nio-8080-exec-9] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/agent/commission-overview from 127.0.0.1 - 状态: 200 - 耗时: 4ms
2025-11-06 15:54:37 [pool-3-thread-5] DEBUG c.d.c.c.m.S.insertOperLog - ==> Parameters: 统计管理(String), 0(Integer), com.deepreach.common.core.controller.StatisticsController.getAgentCommissionOverview(String), GET(String), 1(Integer), admin(String), ADMIN(String), /api/statistics/agent/commission-overview(String), 127.0.0.1(String), null, (String), {"code":500,"msg":"仅代理用户可以访问该统计","data":null,"timestamp":1762415677694,"error":true,"success":false}(String), 0(Integer), null, 2025-11-06T15:54:37.694027(LocalDateTime), 0(Long)
2025-11-06 15:54:37 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/agent/level1/subtree
2025-11-06 15:54:37 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:54:37 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:54:37 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:54:37 [http-nio-8080-exec-10] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:54:37 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:54:37 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:54:37 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:54:37 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:54:37 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:54:38 [pool-3-thread-5] DEBUG c.d.c.c.m.S.insertOperLog - <==    Updates: 1
2025-11-06 15:54:38 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:54:38 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:54:38 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:54:38 [http-nio-8080-exec-10] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:54:38 [http-nio-8080-exec-10] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:54:38 [http-nio-8080-exec-10] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:54:38 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:54:38 [http-nio-8080-exec-10] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:54:38 [http-nio-8080-exec-10] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:54:38 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/agent/level1/subtree
2025-11-06 15:54:38 [http-nio-8080-exec-10] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/agent/level1/subtree from 127.0.0.1
2025-11-06 15:54:38 [http-nio-8080-exec-10] INFO  c.deepreach.common.aspect.LogAspect - LogAspect doBefore 被触发: 统计管理 - getLevel1AgentSubtreeStatistics
2025-11-06 15:54:38 [http-nio-8080-exec-10] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志前置处理完成: 统计管理
2025-11-06 15:54:38 [http-nio-8080-exec-10] INFO  c.deepreach.common.aspect.LogAspect - 保存操作日志: 统计管理 - admin - /api/statistics/agent/level1/subtree - 成功
2025-11-06 15:54:38 [http-nio-8080-exec-10] INFO  c.deepreach.common.aspect.LogAspect - 操作日志对象详情: operId=null, title=统计管理, operName=admin, operUrl=/api/statistics/agent/level1/subtree, status=0
2025-11-06 15:54:38 [http-nio-8080-exec-10] INFO  c.deepreach.common.aspect.LogAspect - 准备异步保存操作日志到数据库...
2025-11-06 15:54:38 [http-nio-8080-exec-10] INFO  c.deepreach.common.aspect.LogAspect - 操作日志异步保存任务已提交
2025-11-06 15:54:38 [http-nio-8080-exec-10] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志返回处理完成: 统计管理
2025-11-06 15:54:38 [pool-3-thread-1] DEBUG c.d.c.c.m.S.insertOperLog - ==>  Preparing: INSERT INTO sys_oper_log ( title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2025-11-06 15:54:38 [http-nio-8080-exec-10] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/agent/level1/subtree from 127.0.0.1 - 状态: 200 - 耗时: 4ms
2025-11-06 15:54:38 [pool-3-thread-1] DEBUG c.d.c.c.m.S.insertOperLog - ==> Parameters: 统计管理(String), 0(Integer), com.deepreach.common.core.controller.StatisticsController.getLevel1AgentSubtreeStatistics(String), GET(String), 1(Integer), admin(String), ADMIN(String), /api/statistics/agent/level1/subtree(String), 127.0.0.1(String), null, (String), {"code":500,"msg":"仅一级代理可以访问该统计","data":null,"timestamp":1762415678270,"error":true,"success":false}(String), 0(Integer), null, 2025-11-06T15:54:38.270429(LocalDateTime), 0(Long)
2025-11-06 15:54:38 [pool-3-thread-1] DEBUG c.d.c.c.m.S.insertOperLog - <==    Updates: 1
2025-11-06 15:56:40 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/agent/commission-overview
2025-11-06 15:56:40 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:56:40 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:56:40 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:56:40 [http-nio-8080-exec-2] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:56:41 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:56:41 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:56:41 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:56:41 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:56:41 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:56:41 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:56:41 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:56:41 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:56:41 [http-nio-8080-exec-2] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:56:41 [http-nio-8080-exec-2] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:56:41 [http-nio-8080-exec-2] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:56:41 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:56:41 [http-nio-8080-exec-2] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:56:41 [http-nio-8080-exec-2] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:56:41 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/agent/commission-overview
2025-11-06 15:56:41 [http-nio-8080-exec-2] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/agent/commission-overview from 127.0.0.1
2025-11-06 15:56:41 [http-nio-8080-exec-2] INFO  c.deepreach.common.aspect.LogAspect - LogAspect doBefore 被触发: 统计管理 - getAgentCommissionOverview
2025-11-06 15:56:41 [http-nio-8080-exec-2] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志前置处理完成: 统计管理
2025-11-06 15:56:41 [http-nio-8080-exec-2] INFO  c.deepreach.common.aspect.LogAspect - 保存操作日志: 统计管理 - admin - /api/statistics/agent/commission-overview - 成功
2025-11-06 15:56:41 [http-nio-8080-exec-2] INFO  c.deepreach.common.aspect.LogAspect - 操作日志对象详情: operId=null, title=统计管理, operName=admin, operUrl=/api/statistics/agent/commission-overview, status=0
2025-11-06 15:56:41 [http-nio-8080-exec-2] INFO  c.deepreach.common.aspect.LogAspect - 准备异步保存操作日志到数据库...
2025-11-06 15:56:41 [http-nio-8080-exec-2] INFO  c.deepreach.common.aspect.LogAspect - 操作日志异步保存任务已提交
2025-11-06 15:56:41 [http-nio-8080-exec-2] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志返回处理完成: 统计管理
2025-11-06 15:56:41 [pool-3-thread-2] DEBUG c.d.c.c.m.S.insertOperLog - ==>  Preparing: INSERT INTO sys_oper_log ( title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2025-11-06 15:56:41 [pool-3-thread-2] DEBUG c.d.c.c.m.S.insertOperLog - ==> Parameters: 统计管理(String), 0(Integer), com.deepreach.common.core.controller.StatisticsController.getAgentCommissionOverview(String), GET(String), 1(Integer), admin(String), ADMIN(String), /api/statistics/agent/commission-overview(String), 127.0.0.1(String), null, (String), {"code":500,"msg":"仅代理用户可以访问该统计","data":null,"timestamp":1762415801844,"error":true,"success":false}(String), 0(Integer), null, 2025-11-06T15:56:41.844236(LocalDateTime), 0(Long)
2025-11-06 15:56:41 [http-nio-8080-exec-2] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/agent/commission-overview from 127.0.0.1 - 状态: 200 - 耗时: 8ms
2025-11-06 15:56:41 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /statistics/agent/level1/subtree
2025-11-06 15:56:41 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 从请求中提取到Token: eyJhbGciOiJIUzI1NiJ9...
2025-11-06 15:56:41 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 从Token中解析出用户名: admin
2025-11-06 15:56:41 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 开始加载用户详情: admin
2025-11-06 15:56:41 [http-nio-8080-exec-3] DEBUG c.d.c.s.UserDetailsServiceImpl - 正在加载用户详情: admin
2025-11-06 15:56:42 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==>  Preparing: SELECT u.user_id, u.username, u.password, u.nickname, u.real_name, u.email, u.phone, u.gender, u.avatar, u.user_type, u.status, u.dept_id, u.parent_user_id, u.invitation_code, u.login_ip, u.login_time, u.create_by, u.create_time, u.update_by, u.update_time, u.remark, d.dept_id, d.parent_id, d.ancestors, d.dept_name, d.order_num as dept_order_num, d.leader as dept_leader, d.phone as dept_phone, d.email as dept_email, d.status as dept_status, d.del_flag as dept_del_flag, d.level, d.leader_user_id AS leader_id, leader.nickname AS leader_nickname, parent.username AS parent_username, parent_roles.parent_role_keys, r.role_key FROM sys_user u LEFT JOIN sys_dept d ON u.dept_id = d.dept_id AND d.del_flag = '0' LEFT JOIN sys_user leader ON d.leader_user_id = leader.user_id LEFT JOIN sys_user parent ON u.parent_user_id = parent.user_id LEFT JOIN ( SELECT pur.user_id, GROUP_CONCAT(DISTINCT sr.role_key ORDER BY sr.role_key) AS parent_role_keys FROM sys_user_role pur JOIN sys_role sr ON pur.role_id = sr.role_id AND sr.del_flag = '0' GROUP BY pur.user_id ) parent_roles ON parent.user_id = parent_roles.user_id LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id AND r.del_flag = '0' WHERE u.username = ? AND u.status = '0' ORDER BY r.role_sort
2025-11-06 15:56:42 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - ==> Parameters: admin(String)
2025-11-06 15:56:42 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectUserWithRolesAndPermissions - <==      Total: 1
2025-11-06 15:56:42 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==>  Preparing: SELECT DISTINCT r.role_id, r.role_name, r.role_key, r.role_sort, r.data_scope, r.status, r.del_flag, r.create_time, r.update_time FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role r ON ur.role_id = r.role_id WHERE u.user_id = ? AND u.status = '0' AND r.status = '0' AND r.del_flag = '0'
2025-11-06 15:56:42 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRolesByUserId - ==> Parameters: 1(Long)
2025-11-06 15:56:42 [pool-3-thread-2] DEBUG c.d.c.c.m.S.insertOperLog - <==    Updates: 1
2025-11-06 15:56:42 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectRolesByUserId - <==      Total: 1
2025-11-06 15:56:42 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==>  Preparing: SELECT DISTINCT m.perms FROM sys_user u LEFT JOIN sys_user_role ur ON u.user_id = ur.user_id LEFT JOIN sys_role_menu rm ON ur.role_id = rm.role_id LEFT JOIN sys_menu m ON rm.menu_id = m.menu_id WHERE u.user_id = ? AND u.status = '0' AND m.status = 0 AND m.perms IS NOT NULL AND m.perms != ''
2025-11-06 15:56:42 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - ==> Parameters: 1(Long)
2025-11-06 15:56:42 [http-nio-8080-exec-3] DEBUG c.d.c.c.m.S.selectPermissionsByUserId - <==      Total: 19
2025-11-06 15:56:42 [http-nio-8080-exec-3] DEBUG c.d.c.s.UserDetailsServiceImpl - 普通用户 admin 获取权限: 19
2025-11-06 15:56:42 [http-nio-8080-exec-3] DEBUG c.d.c.s.UserDetailsServiceImpl - 用户详情加载成功: admin, 角色: 1, 权限数量: 19
2025-11-06 15:56:42 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - 用户详情加载成功: admin
2025-11-06 15:56:42 [http-nio-8080-exec-3] DEBUG c.d.c.s.JwtAuthenticationFilter - Token验证结果: true
2025-11-06 15:56:42 [http-nio-8080-exec-3] INFO  c.d.c.s.JwtAuthenticationFilter - 用户 admin 认证成功
2025-11-06 15:56:42 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /statistics/agent/level1/subtree
2025-11-06 15:56:42 [http-nio-8080-exec-3] DEBUG c.d.c.i.PerformanceInterceptor - 开始处理请求: GET /api/statistics/agent/level1/subtree from 127.0.0.1
2025-11-06 15:56:42 [http-nio-8080-exec-3] INFO  c.deepreach.common.aspect.LogAspect - LogAspect doBefore 被触发: 统计管理 - getLevel1AgentSubtreeStatistics
2025-11-06 15:56:42 [http-nio-8080-exec-3] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志前置处理完成: 统计管理
2025-11-06 15:56:42 [http-nio-8080-exec-3] INFO  c.deepreach.common.aspect.LogAspect - 保存操作日志: 统计管理 - admin - /api/statistics/agent/level1/subtree - 成功
2025-11-06 15:56:42 [http-nio-8080-exec-3] INFO  c.deepreach.common.aspect.LogAspect - 操作日志对象详情: operId=null, title=统计管理, operName=admin, operUrl=/api/statistics/agent/level1/subtree, status=0
2025-11-06 15:56:42 [http-nio-8080-exec-3] INFO  c.deepreach.common.aspect.LogAspect - 准备异步保存操作日志到数据库...
2025-11-06 15:56:42 [http-nio-8080-exec-3] INFO  c.deepreach.common.aspect.LogAspect - 操作日志异步保存任务已提交
2025-11-06 15:56:42 [http-nio-8080-exec-3] DEBUG c.deepreach.common.aspect.LogAspect - 操作日志返回处理完成: 统计管理
2025-11-06 15:56:42 [pool-3-thread-3] DEBUG c.d.c.c.m.S.insertOperLog - ==>  Preparing: INSERT INTO sys_oper_log ( title, business_type, method, request_method, operator_type, oper_name, dept_name, oper_url, oper_ip, oper_location, oper_param, json_result, status, error_msg, oper_time, cost_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2025-11-06 15:56:42 [pool-3-thread-3] DEBUG c.d.c.c.m.S.insertOperLog - ==> Parameters: 统计管理(String), 0(Integer), com.deepreach.common.core.controller.StatisticsController.getLevel1AgentSubtreeStatistics(String), GET(String), 1(Integer), admin(String), ADMIN(String), /api/statistics/agent/level1/subtree(String), 127.0.0.1(String), null, (String), {"code":500,"msg":"仅一级代理可以访问该统计","data":null,"timestamp":1762415802498,"error":true,"success":false}(String), 0(Integer), null, 2025-11-06T15:56:42.498048(LocalDateTime), 0(Long)
2025-11-06 15:56:42 [http-nio-8080-exec-3] INFO  c.d.c.i.PerformanceInterceptor - 请求处理完成: GET /api/statistics/agent/level1/subtree from 127.0.0.1 - 状态: 200 - 耗时: 4ms
2025-11-06 15:56:42 [pool-3-thread-3] DEBUG c.d.c.c.m.S.insertOperLog - <==    Updates: 1
2025-11-06 22:30:46 [main] INFO  c.deepreach.web.DeepReachApplication - Starting DeepReachApplication using Java 17.0.12 with PID 17053 (/Users/gak1/Documents/GitHub/deepreach-Server-side-rebuild/deepreach-web/target/classes started by gak1 in /Users/gak1/Documents/GitHub/deepreach-Server-side-rebuild)
2025-11-06 22:30:46 [main] DEBUG c.deepreach.web.DeepReachApplication - Running with Spring Boot v3.2.0, Spring v6.1.1
2025-11-06 22:30:46 [main] INFO  c.deepreach.web.DeepReachApplication - The following 1 profile is active: "dev"
2025-11-06 22:30:46 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-06 22:30:46 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-06 22:30:46 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Redis repository interfaces.
2025-11-06 22:30:46 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-06 22:30:46 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-06 22:30:46 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.16]
2025-11-06 22:30:46 [main] INFO  o.a.c.c.C.[.[localhost].[/api] - Initializing Spring embedded WebApplicationContext
2025-11-06 22:30:46 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 762 ms
2025-11-06 22:30:47 [main] DEBUG c.d.c.s.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-06 22:30:47 [main] ERROR i.n.r.d.DnsServerAddressStreamProviders - Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
2025-11-06 22:30:47 [main] INFO  c.d.w.s.impl.FileStorageServiceImpl - 文件上传目录: /Users/gak1/Documents/GitHub/deepreach-Server-side-rebuild/uploads
2025-11-06 22:30:47 [main] INFO  c.deepreach.web.config.WebMvcConfig - 静态资源映射配置：/uploads/** -> file:/Users/gak1/Documents/GitHub/deepreach-Server-side-rebuild/uploads
2025-11-06 22:30:47 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@7a75183d, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@2acbe46d, org.springframework.security.web.context.SecurityContextHolderFilter@2352c21f, org.springframework.security.web.header.HeaderWriterFilter@1d7af82, org.springframework.web.filter.CorsFilter@6c6b00f1, org.springframework.security.web.authentication.logout.LogoutFilter@3bbdf835, com.deepreach.common.security.JwtAuthenticationFilter@2166c48a, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@25a2f432, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7efba9b9, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@48126a17, org.springframework.security.web.session.SessionManagementFilter@511a307e, org.springframework.security.web.access.ExceptionTranslationFilter@27605b87, org.springframework.security.web.access.intercept.AuthorizationFilter@799fc4c9]
2025-11-06 22:30:48 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/api'
2025-11-06 22:30:48 [main] INFO  c.deepreach.web.DeepReachApplication - Started DeepReachApplication in 2.237 seconds (process running for 2.479)
2025-11-06 22:30:48 [main] INFO  c.d.web.config.DataSourceHealthCheck - 开始检查数据源配置...
2025-11-06 22:30:48 [main] ERROR c.alibaba.druid.pool.DruidDataSource - init datasource error, url: jdbc:mysql://206.82.1.18:33900/smspikenew?useUnicode=true&characterEncoding=utf8&useSSL=false&serverTimezone=Asia/Shanghai&allowPublicKeyRetrieval=true&useSSL=false
com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at com.mysql.cj.jdbc.exceptions.SQLError.createCommunicationsException(SQLError.java:175)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:64)
	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:825)
	at com.mysql.cj.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:446)
	at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:239)
	at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:188)
	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1703)
	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1801)
	at com.alibaba.druid.pool.DruidDataSource.init(DruidDataSource.java:939)
	at com.alibaba.druid.pool.DruidDataSource.getConnection(DruidDataSource.java:1463)
	at com.alibaba.druid.pool.DruidDataSource.getConnection(DruidDataSource.java:1459)
	at com.alibaba.druid.pool.DruidDataSource.getConnection(DruidDataSource.java:83)
	at org.springframework.jdbc.datasource.DataSourceUtils.fetchConnection(DataSourceUtils.java:160)
	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:118)
	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:81)
	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:388)
	at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:476)
	at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:486)
	at org.springframework.jdbc.core.JdbcTemplate.queryForObject(JdbcTemplate.java:519)
	at org.springframework.jdbc.core.JdbcTemplate.queryForObject(JdbcTemplate.java:526)
	at com.deepreach.web.config.DataSourceHealthCheck.run(DataSourceHealthCheck.java:35)
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:786)
	at org.springframework.boot.SpringApplication.lambda$callRunners$3(SpringApplication.java:770)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)
	at java.base/java.util.stream.SortedOps$SizedRefSortingSink.end(SortedOps.java:357)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:510)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:765)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:330)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.deepreach.web.DeepReachApplication.main(DeepReachApplication.java:37)
Caused by: com.mysql.cj.exceptions.CJCommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:500)
	at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:481)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:62)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:105)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:150)
	at com.mysql.cj.exceptions.ExceptionFactory.createCommunicationsException(ExceptionFactory.java:166)
	at com.mysql.cj.protocol.a.NativeProtocol.readMessage(NativeProtocol.java:582)
	at com.mysql.cj.protocol.a.NativeProtocol.readServerCapabilities(NativeProtocol.java:537)
	at com.mysql.cj.protocol.a.NativeProtocol.beforeHandshake(NativeProtocol.java:424)
	at com.mysql.cj.protocol.a.NativeProtocol.connect(NativeProtocol.java:1428)
	at com.mysql.cj.NativeSession.connect(NativeSession.java:134)
	at com.mysql.cj.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:945)
	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:815)
	... 33 common frames omitted
Caused by: java.io.EOFException: Can not read response from server. Expected to read 4 bytes, read 0 bytes before connection was unexpectedly lost.
	at com.mysql.cj.protocol.FullReadInputStream.readFully(FullReadInputStream.java:67)
	at com.mysql.cj.protocol.a.SimplePacketReader.readHeaderLocal(SimplePacketReader.java:81)
	at com.mysql.cj.protocol.a.SimplePacketReader.readHeader(SimplePacketReader.java:63)
	at com.mysql.cj.protocol.a.SimplePacketReader.readHeader(SimplePacketReader.java:45)
	at com.mysql.cj.protocol.a.NativeProtocol.readMessage(NativeProtocol.java:576)
	... 39 common frames omitted
2025-11-06 22:30:48 [main] ERROR c.alibaba.druid.pool.DruidDataSource - {dataSource-1} init error
com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at com.mysql.cj.jdbc.exceptions.SQLError.createCommunicationsException(SQLError.java:175)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:64)
	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:825)
	at com.mysql.cj.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:446)
	at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:239)
	at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:188)
	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1703)
	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1801)
	at com.alibaba.druid.pool.DruidDataSource.init(DruidDataSource.java:939)
	at com.alibaba.druid.pool.DruidDataSource.getConnection(DruidDataSource.java:1463)
	at com.alibaba.druid.pool.DruidDataSource.getConnection(DruidDataSource.java:1459)
	at com.alibaba.druid.pool.DruidDataSource.getConnection(DruidDataSource.java:83)
	at org.springframework.jdbc.datasource.DataSourceUtils.fetchConnection(DataSourceUtils.java:160)
	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:118)
	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:81)
	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:388)
	at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:476)
	at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:486)
	at org.springframework.jdbc.core.JdbcTemplate.queryForObject(JdbcTemplate.java:519)
	at org.springframework.jdbc.core.JdbcTemplate.queryForObject(JdbcTemplate.java:526)
	at com.deepreach.web.config.DataSourceHealthCheck.run(DataSourceHealthCheck.java:35)
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:786)
	at org.springframework.boot.SpringApplication.lambda$callRunners$3(SpringApplication.java:770)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)
	at java.base/java.util.stream.SortedOps$SizedRefSortingSink.end(SortedOps.java:357)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:510)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:765)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:330)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.deepreach.web.DeepReachApplication.main(DeepReachApplication.java:37)
Caused by: com.mysql.cj.exceptions.CJCommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:500)
	at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:481)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:62)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:105)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:150)
	at com.mysql.cj.exceptions.ExceptionFactory.createCommunicationsException(ExceptionFactory.java:166)
	at com.mysql.cj.protocol.a.NativeProtocol.readMessage(NativeProtocol.java:582)
	at com.mysql.cj.protocol.a.NativeProtocol.readServerCapabilities(NativeProtocol.java:537)
	at com.mysql.cj.protocol.a.NativeProtocol.beforeHandshake(NativeProtocol.java:424)
	at com.mysql.cj.protocol.a.NativeProtocol.connect(NativeProtocol.java:1428)
	at com.mysql.cj.NativeSession.connect(NativeSession.java:134)
	at com.mysql.cj.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:945)
	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:815)
	... 33 common frames omitted
Caused by: java.io.EOFException: Can not read response from server. Expected to read 4 bytes, read 0 bytes before connection was unexpectedly lost.
	at com.mysql.cj.protocol.FullReadInputStream.readFully(FullReadInputStream.java:67)
	at com.mysql.cj.protocol.a.SimplePacketReader.readHeaderLocal(SimplePacketReader.java:81)
	at com.mysql.cj.protocol.a.SimplePacketReader.readHeader(SimplePacketReader.java:63)
	at com.mysql.cj.protocol.a.SimplePacketReader.readHeader(SimplePacketReader.java:45)
	at com.mysql.cj.protocol.a.NativeProtocol.readMessage(NativeProtocol.java:576)
	... 39 common frames omitted
2025-11-06 22:30:48 [main] INFO  c.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2025-11-06 22:30:48 [main] ERROR c.d.web.config.DataSourceHealthCheck - 主数据源连接失败
org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection
	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:84)
	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:388)
	at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:476)
	at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:486)
	at org.springframework.jdbc.core.JdbcTemplate.queryForObject(JdbcTemplate.java:519)
	at org.springframework.jdbc.core.JdbcTemplate.queryForObject(JdbcTemplate.java:526)
	at com.deepreach.web.config.DataSourceHealthCheck.run(DataSourceHealthCheck.java:35)
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:786)
	at org.springframework.boot.SpringApplication.lambda$callRunners$3(SpringApplication.java:770)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)
	at java.base/java.util.stream.SortedOps$SizedRefSortingSink.end(SortedOps.java:357)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:510)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:765)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:330)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.deepreach.web.DeepReachApplication.main(DeepReachApplication.java:37)
Caused by: com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at com.mysql.cj.jdbc.exceptions.SQLError.createCommunicationsException(SQLError.java:175)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:64)
	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:825)
	at com.mysql.cj.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:446)
	at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:239)
	at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:188)
	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1703)
	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1801)
	at com.alibaba.druid.pool.DruidDataSource.init(DruidDataSource.java:939)
	at com.alibaba.druid.pool.DruidDataSource.getConnection(DruidDataSource.java:1463)
	at com.alibaba.druid.pool.DruidDataSource.getConnection(DruidDataSource.java:1459)
	at com.alibaba.druid.pool.DruidDataSource.getConnection(DruidDataSource.java:83)
	at org.springframework.jdbc.datasource.DataSourceUtils.fetchConnection(DataSourceUtils.java:160)
	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:118)
	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:81)
	... 21 common frames omitted
Caused by: com.mysql.cj.exceptions.CJCommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:500)
	at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:481)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:62)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:105)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:150)
	at com.mysql.cj.exceptions.ExceptionFactory.createCommunicationsException(ExceptionFactory.java:166)
	at com.mysql.cj.protocol.a.NativeProtocol.readMessage(NativeProtocol.java:582)
	at com.mysql.cj.protocol.a.NativeProtocol.readServerCapabilities(NativeProtocol.java:537)
	at com.mysql.cj.protocol.a.NativeProtocol.beforeHandshake(NativeProtocol.java:424)
	at com.mysql.cj.protocol.a.NativeProtocol.connect(NativeProtocol.java:1428)
	at com.mysql.cj.NativeSession.connect(NativeSession.java:134)
	at com.mysql.cj.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:945)
	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:815)
	... 33 common frames omitted
Caused by: java.io.EOFException: Can not read response from server. Expected to read 4 bytes, read 0 bytes before connection was unexpectedly lost.
	at com.mysql.cj.protocol.FullReadInputStream.readFully(FullReadInputStream.java:67)
	at com.mysql.cj.protocol.a.SimplePacketReader.readHeaderLocal(SimplePacketReader.java:81)
	at com.mysql.cj.protocol.a.SimplePacketReader.readHeader(SimplePacketReader.java:63)
	at com.mysql.cj.protocol.a.SimplePacketReader.readHeader(SimplePacketReader.java:45)
	at com.mysql.cj.protocol.a.NativeProtocol.readMessage(NativeProtocol.java:576)
	... 39 common frames omitted
2025-11-06 22:30:49 [main] ERROR c.d.web.config.DataSourceHealthCheck - 云电脑数据源连接失败
org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection
	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:84)
	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:388)
	at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:476)
	at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:486)
	at org.springframework.jdbc.core.JdbcTemplate.queryForObject(JdbcTemplate.java:519)
	at org.springframework.jdbc.core.JdbcTemplate.queryForObject(JdbcTemplate.java:526)
	at com.deepreach.web.config.DataSourceHealthCheck.run(DataSourceHealthCheck.java:43)
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:786)
	at org.springframework.boot.SpringApplication.lambda$callRunners$3(SpringApplication.java:770)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)
	at java.base/java.util.stream.SortedOps$SizedRefSortingSink.end(SortedOps.java:357)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:510)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:765)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:330)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.deepreach.web.DeepReachApplication.main(DeepReachApplication.java:37)
Caused by: com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at com.mysql.cj.jdbc.exceptions.SQLError.createCommunicationsException(SQLError.java:175)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:64)
	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:825)
	at com.mysql.cj.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:446)
	at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:239)
	at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:188)
	at org.springframework.jdbc.datasource.SimpleDriverDataSource.getConnectionFromDriver(SimpleDriverDataSource.java:144)
	at org.springframework.jdbc.datasource.AbstractDriverBasedDataSource.getConnectionFromDriver(AbstractDriverBasedDataSource.java:205)
	at org.springframework.jdbc.datasource.AbstractDriverBasedDataSource.getConnection(AbstractDriverBasedDataSource.java:169)
	at org.springframework.jdbc.datasource.DataSourceUtils.fetchConnection(DataSourceUtils.java:160)
	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:118)
	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:81)
	... 21 common frames omitted
Caused by: com.mysql.cj.exceptions.CJCommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:500)
	at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:481)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:62)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:105)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:150)
	at com.mysql.cj.exceptions.ExceptionFactory.createCommunicationsException(ExceptionFactory.java:166)
	at com.mysql.cj.protocol.a.NativeProtocol.readMessage(NativeProtocol.java:582)
	at com.mysql.cj.protocol.a.NativeProtocol.readServerCapabilities(NativeProtocol.java:537)
	at com.mysql.cj.protocol.a.NativeProtocol.beforeHandshake(NativeProtocol.java:424)
	at com.mysql.cj.protocol.a.NativeProtocol.connect(NativeProtocol.java:1428)
	at com.mysql.cj.NativeSession.connect(NativeSession.java:134)
	at com.mysql.cj.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:945)
	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:815)
	... 30 common frames omitted
Caused by: java.io.EOFException: Can not read response from server. Expected to read 4 bytes, read 0 bytes before connection was unexpectedly lost.
	at com.mysql.cj.protocol.FullReadInputStream.readFully(FullReadInputStream.java:67)
	at com.mysql.cj.protocol.a.SimplePacketReader.readHeaderLocal(SimplePacketReader.java:81)
	at com.mysql.cj.protocol.a.SimplePacketReader.readHeader(SimplePacketReader.java:63)
	at com.mysql.cj.protocol.a.SimplePacketReader.readHeader(SimplePacketReader.java:45)
	at com.mysql.cj.protocol.a.NativeProtocol.readMessage(NativeProtocol.java:576)
	... 36 common frames omitted
2025-11-06 22:30:49 [main] INFO  c.d.web.config.DataSourceHealthCheck - 数据源检查完成
2025-11-06 22:30:49 [main] INFO  c.d.w.i.UserHierarchyCacheInitializer - 开始构建用户层级树缓存...
2025-11-06 22:30:49 [Druid-ConnectionPool-Create-1288547573] ERROR c.alibaba.druid.pool.DruidDataSource - create connection SQLException, url: jdbc:mysql://206.82.1.18:33900/smspikenew?useUnicode=true&characterEncoding=utf8&useSSL=false&serverTimezone=Asia/Shanghai&allowPublicKeyRetrieval=true&useSSL=false, errorCode 0, state 08S01
com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at com.mysql.cj.jdbc.exceptions.SQLError.createCommunicationsException(SQLError.java:175)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:64)
	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:825)
	at com.mysql.cj.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:446)
	at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:239)
	at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:188)
	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1703)
	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1801)
	at com.alibaba.druid.pool.DruidDataSource$CreateConnectionThread.run(DruidDataSource.java:2947)
Caused by: com.mysql.cj.exceptions.CJCommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:500)
	at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:481)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:62)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:105)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:150)
	at com.mysql.cj.exceptions.ExceptionFactory.createCommunicationsException(ExceptionFactory.java:166)
	at com.mysql.cj.protocol.a.NativeProtocol.readMessage(NativeProtocol.java:582)
	at com.mysql.cj.protocol.a.NativeProtocol.readServerCapabilities(NativeProtocol.java:537)
	at com.mysql.cj.protocol.a.NativeProtocol.beforeHandshake(NativeProtocol.java:424)
	at com.mysql.cj.protocol.a.NativeProtocol.connect(NativeProtocol.java:1428)
	at com.mysql.cj.NativeSession.connect(NativeSession.java:134)
	at com.mysql.cj.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:945)
	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:815)
	... 6 common frames omitted
Caused by: java.io.EOFException: Can not read response from server. Expected to read 4 bytes, read 0 bytes before connection was unexpectedly lost.
	at com.mysql.cj.protocol.FullReadInputStream.readFully(FullReadInputStream.java:67)
	at com.mysql.cj.protocol.a.SimplePacketReader.readHeaderLocal(SimplePacketReader.java:81)
	at com.mysql.cj.protocol.a.SimplePacketReader.readHeader(SimplePacketReader.java:63)
	at com.mysql.cj.protocol.a.SimplePacketReader.readHeader(SimplePacketReader.java:45)
	at com.mysql.cj.protocol.a.NativeProtocol.readMessage(NativeProtocol.java:576)
	... 12 common frames omitted
2025-11-06 22:30:49 [Druid-ConnectionPool-Create-1288547573] ERROR c.alibaba.druid.pool.DruidDataSource - create connection SQLException, url: jdbc:mysql://206.82.1.18:33900/smspikenew?useUnicode=true&characterEncoding=utf8&useSSL=false&serverTimezone=Asia/Shanghai&allowPublicKeyRetrieval=true&useSSL=false, errorCode 0, state 08S01
com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at com.mysql.cj.jdbc.exceptions.SQLError.createCommunicationsException(SQLError.java:175)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:64)
	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:825)
	at com.mysql.cj.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:446)
	at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:239)
	at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:188)
	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1703)
	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1801)
	at com.alibaba.druid.pool.DruidDataSource$CreateConnectionThread.run(DruidDataSource.java:2947)
Caused by: com.mysql.cj.exceptions.CJCommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:500)
	at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:481)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:62)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:105)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:150)
	at com.mysql.cj.exceptions.ExceptionFactory.createCommunicationsException(ExceptionFactory.java:166)
	at com.mysql.cj.protocol.a.NativeProtocol.readMessage(NativeProtocol.java:582)
	at com.mysql.cj.protocol.a.NativeProtocol.readServerCapabilities(NativeProtocol.java:537)
	at com.mysql.cj.protocol.a.NativeProtocol.beforeHandshake(NativeProtocol.java:424)
	at com.mysql.cj.protocol.a.NativeProtocol.connect(NativeProtocol.java:1428)
	at com.mysql.cj.NativeSession.connect(NativeSession.java:134)
	at com.mysql.cj.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:945)
	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:815)
	... 6 common frames omitted
Caused by: java.io.EOFException: Can not read response from server. Expected to read 4 bytes, read 0 bytes before connection was unexpectedly lost.
	at com.mysql.cj.protocol.FullReadInputStream.readFully(FullReadInputStream.java:67)
	at com.mysql.cj.protocol.a.SimplePacketReader.readHeaderLocal(SimplePacketReader.java:81)
	at com.mysql.cj.protocol.a.SimplePacketReader.readHeader(SimplePacketReader.java:63)
	at com.mysql.cj.protocol.a.SimplePacketReader.readHeader(SimplePacketReader.java:45)
	at com.mysql.cj.protocol.a.NativeProtocol.readMessage(NativeProtocol.java:576)
	... 12 common frames omitted
2025-11-06 22:30:49 [Druid-ConnectionPool-Create-1288547573] INFO  c.a.d.pool.DruidAbstractDataSource - {dataSource-1} failContinuous is true
2025-11-06 22:30:50 [Druid-ConnectionPool-Create-1288547573] ERROR c.alibaba.druid.pool.DruidDataSource - create connection SQLException, url: jdbc:mysql://206.82.1.18:33900/smspikenew?useUnicode=true&characterEncoding=utf8&useSSL=false&serverTimezone=Asia/Shanghai&allowPublicKeyRetrieval=true&useSSL=false, errorCode 0, state 08S01
com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at com.mysql.cj.jdbc.exceptions.SQLError.createCommunicationsException(SQLError.java:175)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:64)
	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:825)
	at com.mysql.cj.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:446)
	at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:239)
	at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:188)
	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1703)
	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1801)
	at com.alibaba.druid.pool.DruidDataSource$CreateConnectionThread.run(DruidDataSource.java:2947)
Caused by: com.mysql.cj.exceptions.CJCommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:500)
	at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:481)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:62)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:105)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:150)
	at com.mysql.cj.exceptions.ExceptionFactory.createCommunicationsException(ExceptionFactory.java:166)
	at com.mysql.cj.protocol.a.NativeProtocol.readMessage(NativeProtocol.java:582)
	at com.mysql.cj.protocol.a.NativeProtocol.readServerCapabilities(NativeProtocol.java:537)
	at com.mysql.cj.protocol.a.NativeProtocol.beforeHandshake(NativeProtocol.java:424)
	at com.mysql.cj.protocol.a.NativeProtocol.connect(NativeProtocol.java:1428)
	at com.mysql.cj.NativeSession.connect(NativeSession.java:134)
	at com.mysql.cj.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:945)
	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:815)
	... 6 common frames omitted
Caused by: java.io.EOFException: Can not read response from server. Expected to read 4 bytes, read 0 bytes before connection was unexpectedly lost.
	at com.mysql.cj.protocol.FullReadInputStream.readFully(FullReadInputStream.java:67)
	at com.mysql.cj.protocol.a.SimplePacketReader.readHeaderLocal(SimplePacketReader.java:81)
	at com.mysql.cj.protocol.a.SimplePacketReader.readHeader(SimplePacketReader.java:63)
	at com.mysql.cj.protocol.a.SimplePacketReader.readHeader(SimplePacketReader.java:45)
	at com.mysql.cj.protocol.a.NativeProtocol.readMessage(NativeProtocol.java:576)
	... 12 common frames omitted
2025-11-06 22:30:51 [Druid-ConnectionPool-Create-1288547573] ERROR c.alibaba.druid.pool.DruidDataSource - create connection SQLException, url: jdbc:mysql://206.82.1.18:33900/smspikenew?useUnicode=true&characterEncoding=utf8&useSSL=false&serverTimezone=Asia/Shanghai&allowPublicKeyRetrieval=true&useSSL=false, errorCode 0, state 08S01
com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at com.mysql.cj.jdbc.exceptions.SQLError.createCommunicationsException(SQLError.java:175)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:64)
	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:825)
	at com.mysql.cj.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:446)
	at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:239)
	at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:188)
	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1703)
	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1801)
	at com.alibaba.druid.pool.DruidDataSource$CreateConnectionThread.run(DruidDataSource.java:2947)
Caused by: com.mysql.cj.exceptions.CJCommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:500)
	at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:481)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:62)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:105)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:150)
	at com.mysql.cj.exceptions.ExceptionFactory.createCommunicationsException(ExceptionFactory.java:166)
	at com.mysql.cj.protocol.a.NativeProtocol.readMessage(NativeProtocol.java:582)
	at com.mysql.cj.protocol.a.NativeProtocol.readServerCapabilities(NativeProtocol.java:537)
	at com.mysql.cj.protocol.a.NativeProtocol.beforeHandshake(NativeProtocol.java:424)
	at com.mysql.cj.protocol.a.NativeProtocol.connect(NativeProtocol.java:1428)
	at com.mysql.cj.NativeSession.connect(NativeSession.java:134)
	at com.mysql.cj.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:945)
	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:815)
	... 6 common frames omitted
Caused by: java.io.EOFException: Can not read response from server. Expected to read 4 bytes, read 0 bytes before connection was unexpectedly lost.
	at com.mysql.cj.protocol.FullReadInputStream.readFully(FullReadInputStream.java:67)
	at com.mysql.cj.protocol.a.SimplePacketReader.readHeaderLocal(SimplePacketReader.java:81)
	at com.mysql.cj.protocol.a.SimplePacketReader.readHeader(SimplePacketReader.java:63)
	at com.mysql.cj.protocol.a.SimplePacketReader.readHeader(SimplePacketReader.java:45)
	at com.mysql.cj.protocol.a.NativeProtocol.readMessage(NativeProtocol.java:576)
	... 12 common frames omitted
2025-11-06 22:30:52 [Druid-ConnectionPool-Create-1288547573] ERROR c.alibaba.druid.pool.DruidDataSource - create connection SQLException, url: jdbc:mysql://206.82.1.18:33900/smspikenew?useUnicode=true&characterEncoding=utf8&useSSL=false&serverTimezone=Asia/Shanghai&allowPublicKeyRetrieval=true&useSSL=false, errorCode 0, state 08S01
com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at com.mysql.cj.jdbc.exceptions.SQLError.createCommunicationsException(SQLError.java:175)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:64)
	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:825)
	at com.mysql.cj.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:446)
	at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:239)
	at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:188)
	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1703)
	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1801)
	at com.alibaba.druid.pool.DruidDataSource$CreateConnectionThread.run(DruidDataSource.java:2947)
Caused by: com.mysql.cj.exceptions.CJCommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:500)
	at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:481)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:62)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:105)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:150)
	at com.mysql.cj.exceptions.ExceptionFactory.createCommunicationsException(ExceptionFactory.java:166)
	at com.mysql.cj.protocol.a.NativeProtocol.readMessage(NativeProtocol.java:582)
	at com.mysql.cj.protocol.a.NativeProtocol.readServerCapabilities(NativeProtocol.java:537)
	at com.mysql.cj.protocol.a.NativeProtocol.beforeHandshake(NativeProtocol.java:424)
	at com.mysql.cj.protocol.a.NativeProtocol.connect(NativeProtocol.java:1428)
	at com.mysql.cj.NativeSession.connect(NativeSession.java:134)
	at com.mysql.cj.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:945)
	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:815)
	... 6 common frames omitted
Caused by: java.io.EOFException: Can not read response from server. Expected to read 4 bytes, read 0 bytes before connection was unexpectedly lost.
	at com.mysql.cj.protocol.FullReadInputStream.readFully(FullReadInputStream.java:67)
	at com.mysql.cj.protocol.a.SimplePacketReader.readHeaderLocal(SimplePacketReader.java:81)
	at com.mysql.cj.protocol.a.SimplePacketReader.readHeader(SimplePacketReader.java:63)
	at com.mysql.cj.protocol.a.SimplePacketReader.readHeader(SimplePacketReader.java:45)
	at com.mysql.cj.protocol.a.NativeProtocol.readMessage(NativeProtocol.java:576)
	... 12 common frames omitted
2025-11-06 22:30:54 [Druid-ConnectionPool-Create-1288547573] ERROR c.alibaba.druid.pool.DruidDataSource - create connection SQLException, url: jdbc:mysql://206.82.1.18:33900/smspikenew?useUnicode=true&characterEncoding=utf8&useSSL=false&serverTimezone=Asia/Shanghai&allowPublicKeyRetrieval=true&useSSL=false, errorCode 0, state 08S01
com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at com.mysql.cj.jdbc.exceptions.SQLError.createCommunicationsException(SQLError.java:175)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:64)
	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:825)
	at com.mysql.cj.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:446)
	at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:239)
	at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:188)
	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1703)
	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1801)
	at com.alibaba.druid.pool.DruidDataSource$CreateConnectionThread.run(DruidDataSource.java:2947)
Caused by: com.mysql.cj.exceptions.CJCommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:500)
	at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:481)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:62)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:105)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:150)
	at com.mysql.cj.exceptions.ExceptionFactory.createCommunicationsException(ExceptionFactory.java:166)
	at com.mysql.cj.protocol.a.NativeProtocol.readMessage(NativeProtocol.java:582)
	at com.mysql.cj.protocol.a.NativeProtocol.readServerCapabilities(NativeProtocol.java:537)
	at com.mysql.cj.protocol.a.NativeProtocol.beforeHandshake(NativeProtocol.java:424)
	at com.mysql.cj.protocol.a.NativeProtocol.connect(NativeProtocol.java:1428)
	at com.mysql.cj.NativeSession.connect(NativeSession.java:134)
	at com.mysql.cj.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:945)
	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:815)
	... 6 common frames omitted
Caused by: java.io.EOFException: Can not read response from server. Expected to read 4 bytes, read 0 bytes before connection was unexpectedly lost.
	at com.mysql.cj.protocol.FullReadInputStream.readFully(FullReadInputStream.java:67)
	at com.mysql.cj.protocol.a.SimplePacketReader.readHeaderLocal(SimplePacketReader.java:81)
	at com.mysql.cj.protocol.a.SimplePacketReader.readHeader(SimplePacketReader.java:63)
	at com.mysql.cj.protocol.a.SimplePacketReader.readHeader(SimplePacketReader.java:45)
	at com.mysql.cj.protocol.a.NativeProtocol.readMessage(NativeProtocol.java:576)
	... 12 common frames omitted
2025-11-06 22:30:54 [Druid-ConnectionPool-Create-1288547573] ERROR c.alibaba.druid.pool.DruidDataSource - create connection SQLException, url: jdbc:mysql://206.82.1.18:33900/smspikenew?useUnicode=true&characterEncoding=utf8&useSSL=false&serverTimezone=Asia/Shanghai&allowPublicKeyRetrieval=true&useSSL=false, errorCode 0, state 08S01
com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at com.mysql.cj.jdbc.exceptions.SQLError.createCommunicationsException(SQLError.java:175)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:64)
	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:825)
	at com.mysql.cj.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:446)
	at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:239)
	at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:188)
	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1703)
	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1801)
	at com.alibaba.druid.pool.DruidDataSource$CreateConnectionThread.run(DruidDataSource.java:2947)
Caused by: com.mysql.cj.exceptions.CJCommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:500)
	at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:481)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:62)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:105)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:150)
	at com.mysql.cj.exceptions.ExceptionFactory.createCommunicationsException(ExceptionFactory.java:166)
	at com.mysql.cj.protocol.a.NativeProtocol.readMessage(NativeProtocol.java:582)
	at com.mysql.cj.protocol.a.NativeProtocol.readServerCapabilities(NativeProtocol.java:537)
	at com.mysql.cj.protocol.a.NativeProtocol.beforeHandshake(NativeProtocol.java:424)
	at com.mysql.cj.protocol.a.NativeProtocol.connect(NativeProtocol.java:1428)
	at com.mysql.cj.NativeSession.connect(NativeSession.java:134)
	at com.mysql.cj.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:945)
	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:815)
	... 6 common frames omitted
Caused by: java.io.EOFException: Can not read response from server. Expected to read 4 bytes, read 0 bytes before connection was unexpectedly lost.
	at com.mysql.cj.protocol.FullReadInputStream.readFully(FullReadInputStream.java:67)
	at com.mysql.cj.protocol.a.SimplePacketReader.readHeaderLocal(SimplePacketReader.java:81)
	at com.mysql.cj.protocol.a.SimplePacketReader.readHeader(SimplePacketReader.java:63)
	at com.mysql.cj.protocol.a.SimplePacketReader.readHeader(SimplePacketReader.java:45)
	at com.mysql.cj.protocol.a.NativeProtocol.readMessage(NativeProtocol.java:576)
	... 12 common frames omitted
2025-11-06 22:30:55 [Druid-ConnectionPool-Create-1288547573] ERROR c.alibaba.druid.pool.DruidDataSource - create connection SQLException, url: jdbc:mysql://206.82.1.18:33900/smspikenew?useUnicode=true&characterEncoding=utf8&useSSL=false&serverTimezone=Asia/Shanghai&allowPublicKeyRetrieval=true&useSSL=false, errorCode 0, state 08S01
com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at com.mysql.cj.jdbc.exceptions.SQLError.createCommunicationsException(SQLError.java:175)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:64)
	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:825)
	at com.mysql.cj.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:446)
	at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:239)
	at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:188)
	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1703)
	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1801)
	at com.alibaba.druid.pool.DruidDataSource$CreateConnectionThread.run(DruidDataSource.java:2947)
Caused by: com.mysql.cj.exceptions.CJCommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:500)
	at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:481)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:62)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:105)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:150)
	at com.mysql.cj.exceptions.ExceptionFactory.createCommunicationsException(ExceptionFactory.java:166)
	at com.mysql.cj.protocol.a.NativeProtocol.readMessage(NativeProtocol.java:582)
	at com.mysql.cj.protocol.a.NativeProtocol.readServerCapabilities(NativeProtocol.java:537)
	at com.mysql.cj.protocol.a.NativeProtocol.beforeHandshake(NativeProtocol.java:424)
	at com.mysql.cj.protocol.a.NativeProtocol.connect(NativeProtocol.java:1428)
	at com.mysql.cj.NativeSession.connect(NativeSession.java:134)
	at com.mysql.cj.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:945)
	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:815)
	... 6 common frames omitted
Caused by: java.io.EOFException: Can not read response from server. Expected to read 4 bytes, read 0 bytes before connection was unexpectedly lost.
	at com.mysql.cj.protocol.FullReadInputStream.readFully(FullReadInputStream.java:67)
	at com.mysql.cj.protocol.a.SimplePacketReader.readHeaderLocal(SimplePacketReader.java:81)
	at com.mysql.cj.protocol.a.SimplePacketReader.readHeader(SimplePacketReader.java:63)
	at com.mysql.cj.protocol.a.SimplePacketReader.readHeader(SimplePacketReader.java:45)
	at com.mysql.cj.protocol.a.NativeProtocol.readMessage(NativeProtocol.java:576)
	... 12 common frames omitted
2025-11-06 22:30:57 [main] INFO  c.deepreach.web.DeepReachApplication - Starting DeepReachApplication using Java 17.0.12 with PID 17096 (/Users/gak1/Documents/GitHub/deepreach-Server-side-rebuild/deepreach-web/target/classes started by gak1 in /Users/gak1/Documents/GitHub/deepreach-Server-side-rebuild)
2025-11-06 22:30:57 [main] DEBUG c.deepreach.web.DeepReachApplication - Running with Spring Boot v3.2.0, Spring v6.1.1
2025-11-06 22:30:57 [main] INFO  c.deepreach.web.DeepReachApplication - The following 1 profile is active: "dev"
2025-11-06 22:30:57 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-06 22:30:57 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-06 22:30:57 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 6 ms. Found 0 Redis repository interfaces.
2025-11-06 22:30:57 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-06 22:30:57 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-06 22:30:57 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.16]
2025-11-06 22:30:57 [main] INFO  o.a.c.c.C.[.[localhost].[/api] - Initializing Spring embedded WebApplicationContext
2025-11-06 22:30:57 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 765 ms
2025-11-06 22:30:58 [main] DEBUG c.d.c.s.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-06 22:30:58 [main] ERROR i.n.r.d.DnsServerAddressStreamProviders - Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
2025-11-06 22:30:58 [main] INFO  c.d.w.s.impl.FileStorageServiceImpl - 文件上传目录: /Users/gak1/Documents/GitHub/deepreach-Server-side-rebuild/uploads
2025-11-06 22:30:58 [main] INFO  c.deepreach.web.config.WebMvcConfig - 静态资源映射配置：/uploads/** -> file:/Users/gak1/Documents/GitHub/deepreach-Server-side-rebuild/uploads
2025-11-06 22:30:58 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@7d4b32d1, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7a75183d, org.springframework.security.web.context.SecurityContextHolderFilter@10d97b64, org.springframework.security.web.header.HeaderWriterFilter@1fc4483f, org.springframework.web.filter.CorsFilter@2acbe46d, org.springframework.security.web.authentication.logout.LogoutFilter@779448b8, com.deepreach.common.security.JwtAuthenticationFilter@68d8ae27, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@23cb8fcb, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@25a2f432, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6c6b00f1, org.springframework.security.web.session.SessionManagementFilter@2fe38b73, org.springframework.security.web.access.ExceptionTranslationFilter@6b6606d1, org.springframework.security.web.access.intercept.AuthorizationFilter@516155b5]
2025-11-06 22:30:58 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/api'
2025-11-06 22:30:59 [main] INFO  c.deepreach.web.DeepReachApplication - Started DeepReachApplication in 2.38 seconds (process running for 2.632)
2025-11-06 22:30:59 [main] INFO  c.d.web.config.DataSourceHealthCheck - 开始检查数据源配置...
2025-11-06 22:31:11 [main] INFO  c.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2025-11-06 22:31:11 [main] INFO  c.d.web.config.DataSourceHealthCheck - 主数据源连接成功: PRIMARY_OK
2025-11-06 22:31:13 [main] INFO  c.d.web.config.DataSourceHealthCheck - 云电脑数据源连接成功: CLOUD_COMPUTER_OK
2025-11-06 22:31:15 [main] INFO  c.d.web.config.DataSourceHealthCheck - 云电脑数据库中admin用户记录数: 0
2025-11-06 22:31:15 [main] INFO  c.d.web.config.DataSourceHealthCheck - 数据源检查完成
2025-11-06 22:31:15 [main] INFO  c.d.w.i.UserHierarchyCacheInitializer - 开始构建用户层级树缓存...
2025-11-06 22:31:15 [main] DEBUG c.d.c.c.m.S.selectAllUserHierarchyRelations - ==>  Preparing: SELECT u.user_id AS userId, u.parent_user_id AS parentUserId FROM sys_user u WHERE u.status = '0'
2025-11-06 22:31:15 [main] DEBUG c.d.c.c.m.S.selectAllUserHierarchyRelations - ==> Parameters: 
2025-11-06 22:31:15 [main] DEBUG c.d.c.c.m.S.selectAllUserHierarchyRelations - <==      Total: 60
2025-11-06 22:31:15 [main] INFO  c.d.c.c.s.impl.SysUserServiceImpl - 用户层级树缓存刷新成功：记录总数=60, 根节点数量=1
2025-11-06 22:31:15 [main] INFO  c.d.w.i.UserHierarchyCacheInitializer - 用户层级树缓存构建完成
